<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Hexo</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2022-06-17T02:46:56.056Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>John Doe</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>MybatisPlus之代码自动生成器</title>
    <link href="http://example.com/2022/06/17/MybatisPlus%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E5%99%A8/"/>
    <id>http://example.com/2022/06/17/MybatisPlus%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E5%99%A8/</id>
    <published>2022-06-17T02:39:29.000Z</published>
    <updated>2022-06-17T02:46:56.056Z</updated>
    
    <content type="html"><![CDATA[<p>dao、pojo、service、controller都给我自己去编写完成！</p><p>AutoGenerator 是 MyBatis-Plus 的代码生成器，通过 AutoGenerator 可以快速生成 Entity、Mapper、Mapper XML、Service、Controller 等各个模块的代码，极大的提升了开发效率。</p><p>测试：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Code</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//需要构建一个 代码自动生成器 对象</span></span><br><span class="line">        <span class="comment">// 代码生成器</span></span><br><span class="line">        <span class="type">AutoGenerator</span> <span class="variable">mpg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AutoGenerator</span>();</span><br><span class="line">        <span class="comment">//配置策略</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1、全局配置</span></span><br><span class="line">        <span class="type">GlobalConfig</span> <span class="variable">gc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GlobalConfig</span>();</span><br><span class="line">        <span class="type">String</span> <span class="variable">projectPath</span> <span class="operator">=</span> System.getProperty(<span class="string">&quot;user.dir&quot;</span>);</span><br><span class="line">        gc.setOutputDir(projectPath + <span class="string">&quot;/src/main/java&quot;</span>);<span class="comment">//输出路径</span></span><br><span class="line">        gc.setAuthor(<span class="string">&quot;fang&quot;</span>);<span class="comment">//作者信息</span></span><br><span class="line">        gc.setOpen(<span class="literal">false</span>);<span class="comment">//是否打开文件夹</span></span><br><span class="line">        gc.setFileOverride(<span class="literal">false</span>);  <span class="comment">//是否覆盖</span></span><br><span class="line">        gc.setServiceName(<span class="string">&quot;%sService&quot;</span>); <span class="comment">//去Service的I前缀</span></span><br><span class="line">        gc.setIdType(IdType.ID_WORKER);</span><br><span class="line">        gc.setDateType(DateType.ONLY_DATE);<span class="comment">//日期类型</span></span><br><span class="line">        gc.setSwagger2(<span class="literal">true</span>);</span><br><span class="line">        mpg.setGlobalConfig(gc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2、设置数据源</span></span><br><span class="line">        <span class="type">DataSourceConfig</span> <span class="variable">dsc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataSourceConfig</span>();</span><br><span class="line">        dsc.setUrl(<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis-plus?useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=GMT%2B8&quot;</span>);</span><br><span class="line">        dsc.setDriverName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">        dsc.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        dsc.setPassword(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        dsc.setDbType(DbType.MYSQL);</span><br><span class="line">        mpg.setDataSource(dsc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3、包的配置</span></span><br><span class="line">        <span class="type">PackageConfig</span> <span class="variable">pc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PackageConfig</span>();</span><br><span class="line">        pc.setModuleName(<span class="string">&quot;blog&quot;</span>);</span><br><span class="line">        pc.setParent(<span class="string">&quot;com.chanv&quot;</span>);</span><br><span class="line">        pc.setEntity(<span class="string">&quot;pojo&quot;</span>);</span><br><span class="line">        pc.setMapper(<span class="string">&quot;mapper&quot;</span>);</span><br><span class="line">        pc.setService(<span class="string">&quot;service&quot;</span>);</span><br><span class="line">        pc.setController(<span class="string">&quot;controller&quot;</span>);</span><br><span class="line">        mpg.setPackageInfo(pc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4、策略配置</span></span><br><span class="line">        <span class="type">StrategyConfig</span> <span class="variable">strategy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StrategyConfig</span>();</span><br><span class="line">        strategy.setInclude(<span class="string">&quot;user&quot;</span>);    <span class="comment">//设置要映射的表名</span></span><br><span class="line">        strategy.setNaming(NamingStrategy.underline_to_camel);</span><br><span class="line">        strategy.setColumnNaming(NamingStrategy.underline_to_camel);</span><br><span class="line">        strategy.setEntityLombokModel(<span class="literal">true</span>);    <span class="comment">//自动lombok</span></span><br><span class="line">        strategy.setLogicDeleteFieldName(<span class="string">&quot;deleted&quot;</span>);</span><br><span class="line">        <span class="comment">//自动填充配置</span></span><br><span class="line">        <span class="type">TableFill</span> <span class="variable">createTime</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TableFill</span>(<span class="string">&quot;create_time&quot;</span>, FieldFill.INSERT);</span><br><span class="line">        <span class="type">TableFill</span> <span class="variable">updateTime</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TableFill</span>(<span class="string">&quot;update_time&quot;</span>, FieldFill.UPDATE);</span><br><span class="line">        ArrayList&lt;TableFill&gt; tableFills = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        tableFills.add(createTime);</span><br><span class="line">        tableFills.add(updateTime);</span><br><span class="line">        strategy.setTableFillList(tableFills);</span><br><span class="line">        <span class="comment">//乐观锁</span></span><br><span class="line">        strategy.setVersionFieldName(<span class="string">&quot;version&quot;</span>);</span><br><span class="line">        strategy.setRestControllerStyle(<span class="literal">true</span>);<span class="comment">//驼峰命名</span></span><br><span class="line">        strategy.setControllerMappingHyphenStyle(<span class="literal">true</span>);     <span class="comment">//localhost:8080/hello_id_2</span></span><br><span class="line">        mpg.setStrategy(strategy);</span><br><span class="line"></span><br><span class="line">        mpg.execute();  <span class="comment">//执行代码构造器</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;dao、pojo、service、controller都给我自己去编写完成！&lt;/p&gt;
&lt;p&gt;AutoGenerator 是 MyBatis-Plus 的代码生成器，通过 AutoGenerator 可以快速生成 Entity、Mapper、Mapper XML、Servic</summary>
      
    
    
    
    
    <category term="MybatisPlus" scheme="http://example.com/tags/MybatisPlus/"/>
    
  </entry>
  
  <entry>
    <title>MybatisPlus之条件构造器</title>
    <link href="http://example.com/2022/06/17/MybatisPlus%E4%B9%8B%E6%9D%A1%E4%BB%B6%E6%9E%84%E9%80%A0%E5%99%A8/"/>
    <id>http://example.com/2022/06/17/MybatisPlus%E4%B9%8B%E6%9D%A1%E4%BB%B6%E6%9E%84%E9%80%A0%E5%99%A8/</id>
    <published>2022-06-17T02:17:20.000Z</published>
    <updated>2022-06-17T02:19:58.161Z</updated>
    
    <content type="html"><![CDATA[<p>官网文档：<a class="link"   href="https://baomidou.com/pages/10c804/#alleq" >https://baomidou.com/pages/10c804/#alleq<i class="fas fa-external-link-alt"></i></a></p><p>wrapper：十分重要： 我们写一些复杂的sql就可以使用它来替代！</p><p>1、查询name不为空的用户，并且邮箱不为空的用户，年龄大于12</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//查询name不为空的用户，并且邮箱不为空的用户，年龄大于12</span></span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    wrapper.isNotNull(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">            .isNotNull(<span class="string">&quot;email&quot;</span>)</span><br><span class="line">            .ge(<span class="string">&quot;age&quot;</span>, <span class="number">12</span>);</span><br><span class="line">    userMapper.selectList(wrapper).forEach(System.out::println); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2、查询名字为zhiyuan2</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//查询名字为zhiyuan2</span></span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    wrapper.eq(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;zhiyuan2&quot;</span>);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.selectOne(wrapper);</span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3、查询年龄在19到30岁之间的用户</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//查询年龄在19到30岁之间的用户</span></span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    wrapper.between(<span class="string">&quot;age&quot;</span>, <span class="number">19</span>, <span class="number">30</span>); <span class="comment">//区间</span></span><br><span class="line">    <span class="type">Integer</span> <span class="variable">count</span> <span class="operator">=</span> userMapper.selectCount(wrapper);</span><br><span class="line">    System.out.println(count);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4、查询name不包含t，邮箱以123开头</p><ul><li>例: <code>notLike(&quot;name&quot;, &quot;王&quot;)</code>—&gt;<code>name not like &#39;%王%&#39;</code></li><li>例: <code>likeRight(&quot;name&quot;, &quot;王&quot;)</code>—&gt;<code>name like &#39;王%&#39;</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//模糊查询</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">test4</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//查询name不包含t，邮箱以123开头</span></span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    wrapper.notLike(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;t&quot;</span>)</span><br><span class="line">            .likeRight(<span class="string">&quot;email&quot;</span>, <span class="string">&quot;123&quot;</span>);</span><br><span class="line">    List&lt;Map&lt;String, Object&gt;&gt; maps = userMapper.selectMaps(wrapper);</span><br><span class="line">    maps.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>5、子查询</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">test5</span><span class="params">()</span>&#123;</span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">//id 在子查询中查出来</span></span><br><span class="line">    wrapper.inSql(<span class="string">&quot;id&quot;</span>, <span class="string">&quot;select id from user where id &lt; 3&quot;</span>);</span><br><span class="line">    List&lt;Object&gt; objects = userMapper.selectObjs(wrapper);</span><br><span class="line">    objects.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>最后sql：</p><blockquote><p>SELECT id,name,age,email,version,deleted,create_time,update_time FROM user WHERE deleted&#x3D;0 AND (id IN (select id from user where id &lt; 3))</p></blockquote><p>6、通过id进行排序–降序</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">test6</span><span class="params">()</span>&#123;</span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">//通过id进行排序--降序</span></span><br><span class="line">    wrapper.orderByDesc(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(wrapper);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;官网文档：&lt;a class=&quot;link&quot;   href=&quot;https://baomidou.com/pages/10c804/#alleq&quot; &gt;https://baomidou.com/pages/10c804/#alleq&lt;i class=&quot;fas fa-external</summary>
      
    
    
    
    
    <category term="MybatisPlus" scheme="http://example.com/tags/MybatisPlus/"/>
    
  </entry>
  
  <entry>
    <title>MybatisPlus之性能分析插件</title>
    <link href="http://example.com/2022/06/17/MybatisPlus%E4%B9%8B%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E6%8F%92%E4%BB%B6/"/>
    <id>http://example.com/2022/06/17/MybatisPlus%E4%B9%8B%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E6%8F%92%E4%BB%B6/</id>
    <published>2022-06-17T01:59:47.000Z</published>
    <updated>2022-06-17T02:02:40.735Z</updated>
    
    <content type="html"><![CDATA[<p>作用：性能分析拦截器，用于输出每条 SQL 语句及其执行时间。MP也提供性能分析插件，如果超过这个时间就停止运行，不过新版本已去掉这功能。</p><p>推荐使用druid</p><p>或者使用P6Spy：</p><blockquote><p>该功能依赖 <code>p6spy</code> 组件，完美的输出打印 SQL 及执行时长 <code>3.1.0</code> 以上版本</p></blockquote><p>示例工程：</p><p>👉 <a class="link"   href="https://gitee.com/baomidou/mybatis-plus-samples/tree/master/mybatis-plus-sample-crud" >mybatis-plus-sample-crud(opens new window)<i class="fas fa-external-link-alt"></i></a></p><ul><li>p6spy 依赖引入</li></ul><p>Maven：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>p6spy<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>p6spy<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>最新版本<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Gradle：</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile <span class="attr">group:</span> <span class="string">&#x27;p6spy&#x27;</span>, <span class="attr">name:</span> <span class="string">&#x27;p6spy&#x27;</span>, <span class="attr">version:</span> <span class="string">&#x27;最新版本&#x27;</span></span><br></pre></td></tr></table></figure><ul><li>application.yml 配置：</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.p6spy.engine.spy.P6SpyDriver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:p6spy:h2:mem:test</span></span><br><span class="line">    <span class="string">...</span></span><br></pre></td></tr></table></figure><ul><li>spy.properties 配置：</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#3.2.1以上使用</span></span><br><span class="line"><span class="attr">modulelist</span>=<span class="string">com.baomidou.mybatisplus.extension.p6spy.MybatisPlusLogFactory,com.p6spy.engine.outage.P6OutageFactory</span></span><br><span class="line"><span class="comment">#3.2.1以下使用或者不配置</span></span><br><span class="line"><span class="comment">#modulelist=com.p6spy.engine.logging.P6LogFactory,com.p6spy.engine.outage.P6OutageFactory</span></span><br><span class="line"><span class="comment"># 自定义日志打印</span></span><br><span class="line"><span class="attr">logMessageFormat</span>=<span class="string">com.baomidou.mybatisplus.extension.p6spy.P6SpyLogger</span></span><br><span class="line"><span class="comment">#日志输出到控制台</span></span><br><span class="line"><span class="attr">appender</span>=<span class="string">com.baomidou.mybatisplus.extension.p6spy.StdoutLogger</span></span><br><span class="line"><span class="comment"># 使用日志系统记录 sql</span></span><br><span class="line"><span class="comment">#appender=com.p6spy.engine.spy.appender.Slf4JLogger</span></span><br><span class="line"><span class="comment"># 设置 p6spy driver 代理</span></span><br><span class="line"><span class="attr">deregisterdrivers</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"># 取消JDBC URL前缀</span></span><br><span class="line"><span class="attr">useprefix</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"># 配置记录 Log 例外,可去掉的结果集有error,info,batch,debug,statement,commit,rollback,result,resultset.</span></span><br><span class="line"><span class="attr">excludecategories</span>=<span class="string">info,debug,result,commit,resultset</span></span><br><span class="line"><span class="comment"># 日期格式</span></span><br><span class="line"><span class="attr">dateformat</span>=<span class="string">yyyy-MM-dd HH:mm:ss</span></span><br><span class="line"><span class="comment"># 实际驱动可多个</span></span><br><span class="line"><span class="comment">#driverlist=org.h2.Driver</span></span><br><span class="line"><span class="comment"># 是否开启慢SQL记录</span></span><br><span class="line"><span class="attr">outagedetection</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"># 慢SQL记录标准 2 秒</span></span><br><span class="line"><span class="attr">outagedetectioninterval</span>=<span class="string">2</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;作用：性能分析拦截器，用于输出每条 SQL 语句及其执行时间。MP也提供性能分析插件，如果超过这个时间就停止运行，不过新版本已去掉这功能。&lt;/p&gt;
&lt;p&gt;推荐使用druid&lt;/p&gt;
&lt;p&gt;或者使用P6Spy：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;该功能依赖 &lt;code&gt;</summary>
      
    
    
    
    
    <category term="MybatisPlus" scheme="http://example.com/tags/MybatisPlus/"/>
    
  </entry>
  
  <entry>
    <title>MybatisPlus之逻辑删除</title>
    <link href="http://example.com/2022/06/17/MybatisPlus%E4%B9%8B%E9%80%BB%E8%BE%91%E5%88%A0%E9%99%A4/"/>
    <id>http://example.com/2022/06/17/MybatisPlus%E4%B9%8B%E9%80%BB%E8%BE%91%E5%88%A0%E9%99%A4/</id>
    <published>2022-06-17T01:45:30.000Z</published>
    <updated>2022-06-17T01:51:14.290Z</updated>
    
    <content type="html"><![CDATA[<p>官方文档：<a class="link"   href="https://baomidou.com/pages/6b03c5/#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95" >https://baomidou.com/pages/6b03c5/#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95<i class="fas fa-external-link-alt"></i></a></p><p>物理删除 ：从数据库中直接移除</p><p>逻辑删除 ：再数据库中没有被移除，而是通过一个变量来让他失效！ 比如一个系统，有管理员，操作员，用户等…… 设置数据库的时候，加个<code>deleted</code>字段，默认为0，代表数据存在 当用户或操作员要删除数据了，我们则把<code>deleted</code>赋值为1，表示数据已删除 这样管理员则可以在后台查询被删除的记录，防止数据的丢失，类似于回收站！</p><p>方法如下：</p><p>1、在数据表中增加一个 deleted 字段</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://s2.loli.net/2022/06/17/TpmQStfLV2RHbvE.png"                      alt="image-20210405235056518"                ></p><p>2、实体类中增加属性</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableLogic</span> <span class="comment">//逻辑删除</span></span><br><span class="line"><span class="keyword">private</span> Integer deleted;</span><br></pre></td></tr></table></figure><p>3、配置</p><p>application.yml（properties也可以）</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">logic-delete-field:</span> <span class="string">flag</span>  <span class="comment"># 全局逻辑删除的实体字段名(since 3.3.0,配置后可以忽略不配置步骤2)</span></span><br><span class="line">      <span class="attr">logic-delete-value:</span> <span class="number">1</span> <span class="comment"># 逻辑已删除值(默认为 1)</span></span><br><span class="line">      <span class="attr">logic-not-delete-value:</span> <span class="number">0</span> <span class="comment"># 逻辑未删除值(默认为 0)</span></span><br></pre></td></tr></table></figure><p>4、测试</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://s2.loli.net/2022/06/17/3JxzYPyX1UeTLM4.png"                      alt="image-20210406001501121"                ></p><p>记录依旧在数据库，但是值确已经变化了！查询的时候会自动过滤被逻辑删除的字段</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;官方文档：&lt;a class=&quot;link&quot;   href=&quot;https://baomidou.com/pages/6b03c5/#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95&quot; &gt;https://baomidou.com/pages/6b03c5/</summary>
      
    
    
    
    
    <category term="MybatisPlus" scheme="http://example.com/tags/MybatisPlus/"/>
    
  </entry>
  
  <entry>
    <title>MybatisPlus之删除操作</title>
    <link href="http://example.com/2022/06/17/MybatisPlus%E4%B9%8B%E5%88%A0%E9%99%A4%E6%93%8D%E4%BD%9C/"/>
    <id>http://example.com/2022/06/17/MybatisPlus%E4%B9%8B%E5%88%A0%E9%99%A4%E6%93%8D%E4%BD%9C/</id>
    <published>2022-06-17T01:36:51.000Z</published>
    <updated>2022-06-17T01:37:35.090Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通过id单个删除</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteById</span><span class="params">()</span>&#123;</span><br><span class="line">    userMapper.deleteById(<span class="number">1379026108137123842L</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 通过id批量删除</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteBatchId</span><span class="params">()</span>&#123;</span><br><span class="line">   userMapper.deleteBatchIds(Arrays.asList(<span class="number">1379026108137123842L</span>,<span class="number">1379026441420791810L</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 通过map删除</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteMap</span><span class="params">()</span>&#123;</span><br><span class="line">    HashMap&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;zhiyuan4&quot;</span>);</span><br><span class="line">    userMapper.deleteByMap(map);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=</summary>
      
    
    
    
    
    <category term="MybatisPlus" scheme="http://example.com/tags/MybatisPlus/"/>
    
  </entry>
  
  <entry>
    <title>MybatisPlus之分页查询</title>
    <link href="http://example.com/2022/06/17/MybatisPlus%E4%B9%8B%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2/"/>
    <id>http://example.com/2022/06/17/MybatisPlus%E4%B9%8B%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2/</id>
    <published>2022-06-17T01:30:03.000Z</published>
    <updated>2022-06-17T01:31:31.295Z</updated>
    
    <content type="html"><![CDATA[<p>1、原始的 limit 进行分页 2、pageHelper 第三方插件 3、MP其实也内置了分页插件！</p><p><strong>mybais-plus分页查询方法：</strong></p><p>1、配置拦截器组件即可</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">interceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">PaginationInnerInterceptor</span>(DbType.H2));<span class="comment">//分页插件</span></span><br></pre></td></tr></table></figure><p>2、直接使用Page对象即可！</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 测试分页查询</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testPage</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//参数一：当前页</span></span><br><span class="line">    <span class="comment">//参数二：页面大小</span></span><br><span class="line">    Page&lt;User&gt; page = <span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(<span class="number">1</span>, <span class="number">5</span>);</span><br><span class="line">    userMapper.selectPage(page, <span class="literal">null</span>);</span><br><span class="line">    page.getRecords().forEach(System.out::println);</span><br><span class="line">    System.out.println(page.getTotal());<span class="comment">//总数量</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;1、原始的 limit 进行分页 2、pageHelper 第三方插件 3、MP其实也内置了分页插件！&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;mybais-plus分页查询方法：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1、配置拦截器组件即可&lt;/p&gt;
&lt;figure class=&quot;high</summary>
      
    
    
    
    
    <category term="MybatisPlus" scheme="http://example.com/tags/MybatisPlus/"/>
    
  </entry>
  
  <entry>
    <title>MybatisPlus之查询操作</title>
    <link href="http://example.com/2022/06/17/MybatisPlus%E4%B9%8B%E6%9F%A5%E8%AF%A2%E6%93%8D%E4%BD%9C/"/>
    <id>http://example.com/2022/06/17/MybatisPlus%E4%B9%8B%E6%9F%A5%E8%AF%A2%E6%93%8D%E4%BD%9C/</id>
    <published>2022-06-17T01:21:52.000Z</published>
    <updated>2022-06-17T01:24:14.324Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 指定id查询</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectById</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.selectById(<span class="number">1L</span>);</span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 多个id批量查询！</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectByBatchId</span><span class="params">()</span>&#123;</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectBatchIds(Arrays.asList(<span class="number">1L</span>, <span class="number">2L</span>, <span class="number">3L</span>));</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 多个where条件查询之一使用map操作</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectByBatchIds</span><span class="params">()</span>&#123;</span><br><span class="line">    HashMap&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">// 自定义要查询</span></span><br><span class="line">    map.put(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;zhiyuan&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;age&quot;</span>,<span class="number">3</span>);</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectByMap(map);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=</summary>
      
    
    
    
    
    <category term="MybatisPlus" scheme="http://example.com/tags/MybatisPlus/"/>
    
  </entry>
  
  <entry>
    <title>MybatisPlus之乐观锁</title>
    <link href="http://example.com/2022/06/16/MybatisPlus%E4%B9%8B%E4%B9%90%E8%A7%82%E9%94%81/"/>
    <id>http://example.com/2022/06/16/MybatisPlus%E4%B9%8B%E4%B9%90%E8%A7%82%E9%94%81/</id>
    <published>2022-06-16T11:18:43.000Z</published>
    <updated>2022-06-16T11:27:48.172Z</updated>
    
    <content type="html"><![CDATA[<p>在面试过程中，我们经常会被问道乐观锁，悲观锁！这个其实非常简单！</p><blockquote><p>乐观锁：顾名思义十分乐观，他总是认为不会出现问题，无论干什么不去上锁！如果出现了问题，再次更新值测试！</p><p>悲观锁：顾名思义十分悲观，他总是任务总是出现问题，无论干什么都会上锁！再去操作！</p></blockquote><p>当要更新一条记录的时候，希望这条记录没有被别人更新 乐观锁实现方式：</p><p>乐观锁实现方式：</p><ul><li>取出记录，获取当前version</li><li>更新时，带上这个version</li><li>执行更新时，set version &#x3D; new version where version &#x3D; oldversion</li><li>如果version不对，就更新失败</li></ul><p><strong>测试一下mybatis-plus的乐观锁插件</strong></p><p>官方文档（必看）：<a class="link"   href="https://baomidou.com/pages/0d93c0/#optimisticlockerinnerinterceptor" >https://baomidou.com/pages/0d93c0/#optimisticlockerinnerinterceptor<i class="fas fa-external-link-alt"></i></a></p><p>有的方法会过期，具体操作以官方文档例子为主</p><p>1、给数据库中增加version字段！</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://s2.loli.net/2022/06/16/NXyoKLu3r6RqaHg.png"                      alt="image-20210405175422788"                ></p><p>2、我们实体类加对应的字段</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Version</span> <span class="comment">//乐观锁Version注解</span></span><br><span class="line"><span class="keyword">private</span> Integer version;</span><br></pre></td></tr></table></figure><p>3、注册组件</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.oddfar.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.inner.OptimisticLockerInnerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhiyuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2021/4/5 17:57</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 扫描我们的 mapper 文件夹</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.oddfar.mapper&quot;)</span></span><br><span class="line"><span class="meta">@Configuration</span> <span class="comment">// 配置类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisPlusConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 注册乐观锁和分页插件(新版：3.4.0)</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mybatisPlusInterceptor</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">MybatisPlusInterceptor</span> <span class="variable">interceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">OptimisticLockerInnerInterceptor</span>()); <span class="comment">// 乐观锁插件</span></span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4、测试一下！</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 测试乐观锁</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testOptimisticLocker</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">// 1、查询用户信息</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.selectById(<span class="number">1L</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2、修改用户信息</span></span><br><span class="line">    user.setName(<span class="string">&quot;zhiyuan&quot;</span>);</span><br><span class="line">    user.setEmail(<span class="string">&quot;123456@qq.com&quot;</span>);</span><br><span class="line">    <span class="comment">// 3、执行更新操作</span></span><br><span class="line">    userMapper.updateById(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们来模拟下</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 测试乐观锁失败！多线程下</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testOptimisticLocker2</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">// 线程 1</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.selectById(<span class="number">1L</span>);</span><br><span class="line">    user.setName(<span class="string">&quot;zhiyuan000000&quot;</span>);</span><br><span class="line">    user.setEmail(<span class="string">&quot;000000000@qq.com&quot;</span>);</span><br><span class="line">    <span class="comment">// 模拟另外一个线程执行了插队操作</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> userMapper.selectById(<span class="number">1L</span>);</span><br><span class="line">    user2.setName(<span class="string">&quot;zhiyuan1111111&quot;</span>);</span><br><span class="line">    user2.setEmail(<span class="string">&quot;111111111@qq.com&quot;</span>);</span><br><span class="line">    userMapper.updateById(user2);</span><br><span class="line">    <span class="comment">// 自旋锁来多次尝试提交！</span></span><br><span class="line">    userMapper.updateById(user); <span class="comment">// 如果没有乐观锁就会覆盖插队线程的值！</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://s2.loli.net/2022/06/16/fIkGDgnetzJm9sF.png"                      alt="image-20210405184334804"                ></p><p>如果不加乐观锁，以上代码，name最后就是<code>zhiyuan000000</code></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;在面试过程中，我们经常会被问道乐观锁，悲观锁！这个其实非常简单！&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;乐观锁：顾名思义十分乐观，他总是认为不会出现问题，无论干什么不去上锁！如果出现了问题，再次更新值测试！&lt;/p&gt;
&lt;p&gt;悲观锁：顾名思义十分悲观，他总是任务总是出现问题，</summary>
      
    
    
    
    
    <category term="MybatisPlus" scheme="http://example.com/tags/MybatisPlus/"/>
    
  </entry>
  
  <entry>
    <title>MybatisPlus之自动填充</title>
    <link href="http://example.com/2022/06/16/MybatisPlus%E4%B9%8B%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%85%85/"/>
    <id>http://example.com/2022/06/16/MybatisPlus%E4%B9%8B%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%85%85/</id>
    <published>2022-06-16T10:52:34.000Z</published>
    <updated>2022-06-16T10:57:21.952Z</updated>
    
    <content type="html"><![CDATA[<p>创建时间、修改时间！这些个操作一遍都是自动化完成的，我们不希望手动更新！</p><p>阿里巴巴开发手册：所有的数据库表：gmt_create、gmt_modified几乎所有的表都要配置上！而且需 要自动化！</p><p><strong>方式一：数据库级别（工作中一般不允许你修改数据库）</strong></p><p>1、在表中新增字段 create_time, update_time</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `mybatis_plus`.`<span class="keyword">user</span>`</span><br><span class="line">  <span class="keyword">ADD</span> <span class="keyword">COLUMN</span> `create_time` DATETIME <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;创建时间&#x27;</span> AFTER `email`,</span><br><span class="line">  <span class="keyword">ADD</span> <span class="keyword">COLUMN</span> `update_time` DATETIME <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;更新时间&#x27;</span> AFTER `create_time`;</span><br></pre></td></tr></table></figure><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://s2.loli.net/2022/06/16/MUnqKH3rXvtbC4h.png"                      alt="image-20210405173344140"                ></p><p>默认：CURRENT_TIMESTAMP</p><p>2、再次测试插入方法，我们需要先把实体类同步！</p><p><strong>方式二：代码级别</strong></p><p>1、删除数据库的默认值、更新操作！</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://s2.loli.net/2022/06/16/Sf6h9sLCUGbReid.png"                      alt="image-20210405173548133"                ></p><p>2、实体类字段属性上需要增加注解</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 字段添加填充内容</span></span><br><span class="line"><span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line"><span class="keyword">private</span> Date createTime;</span><br><span class="line"><span class="meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span></span><br><span class="line"><span class="keyword">private</span> Date updateTime;</span><br></pre></td></tr></table></figure><p>3、编写处理器来处理这个注解即可！</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.oddfar.handler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.handlers.MetaObjectHandler;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.reflection.MetaObject;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span> <span class="comment">// 一定不要忘记把处理器加到IOC容器中！</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMetaObjectHandler</span> <span class="keyword">implements</span> <span class="title class_">MetaObjectHandler</span> &#123;</span><br><span class="line">    <span class="comment">// 插入时的填充策略</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;start insert fill.....&quot;</span>);</span><br><span class="line">        <span class="comment">// setFieldValByName(String fieldName, Object fieldVal, MetaObject metaObject</span></span><br><span class="line">        <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;createTime&quot;</span>, <span class="keyword">new</span> <span class="title class_">Date</span>(), metaObject);</span><br><span class="line">        <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;updateTime&quot;</span>, <span class="keyword">new</span> <span class="title class_">Date</span>(), metaObject);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 更新时的填充策略</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;start update fill.....&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;updateTime&quot;</span>, <span class="keyword">new</span> <span class="title class_">Date</span>(), metaObject);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4、测试插入 ，测试更新、观察时间即可！</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;创建时间、修改时间！这些个操作一遍都是自动化完成的，我们不希望手动更新！&lt;/p&gt;
&lt;p&gt;阿里巴巴开发手册：所有的数据库表：gmt_create、gmt_modified几乎所有的表都要配置上！而且需 要自动化！&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;方式一：数据库级别（工作中一般不</summary>
      
    
    
    
    
    <category term="MybatisPlus" scheme="http://example.com/tags/MybatisPlus/"/>
    
  </entry>
  
  <entry>
    <title>MybatisPlus之更新操作</title>
    <link href="http://example.com/2022/06/16/MybatisPlus%E4%B9%8B%E6%9B%B4%E6%96%B0%E6%93%8D%E4%BD%9C/"/>
    <id>http://example.com/2022/06/16/MybatisPlus%E4%B9%8B%E6%9B%B4%E6%96%B0%E6%93%8D%E4%BD%9C/</id>
    <published>2022-06-16T10:41:44.000Z</published>
    <updated>2022-06-16T10:42:18.272Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 更改一个用户</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testUpdate</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    <span class="comment">// 通过条件自动拼接动态sql</span></span><br><span class="line">    user.setId(<span class="number">5L</span>);</span><br><span class="line">    user.setName(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">    user.setAge(<span class="number">5</span>);</span><br><span class="line">    <span class="comment">// 注意：updateById 但是参数是一个 对象！</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> userMapper.updateById(user);</span><br><span class="line">    System.out.println(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=</summary>
      
    
    
    
    
    <category term="MybatisPlus" scheme="http://example.com/tags/MybatisPlus/"/>
    
  </entry>
  
  <entry>
    <title>MybatisPlus之插入测试及主键生成策略</title>
    <link href="http://example.com/2022/06/16/MybatisPlus%E4%B9%8B%E6%8F%92%E5%85%A5%E6%B5%8B%E8%AF%95%E5%8F%8A%E4%B8%BB%E9%94%AE%E7%94%9F%E6%88%90%E7%AD%96%E7%95%A5/"/>
    <id>http://example.com/2022/06/16/MybatisPlus%E4%B9%8B%E6%8F%92%E5%85%A5%E6%B5%8B%E8%AF%95%E5%8F%8A%E4%B8%BB%E9%94%AE%E7%94%9F%E6%88%90%E7%AD%96%E7%95%A5/</id>
    <published>2022-06-16T10:03:43.000Z</published>
    <updated>2022-06-16T10:55:23.583Z</updated>
    
    <content type="html"><![CDATA[<h3 id="插入操作"><a href="#插入操作" class="headerlink" title="插入操作"></a>插入操作</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">addUser</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setName(<span class="string">&quot;zhiyuan&quot;</span>);</span><br><span class="line">    user.setAge(<span class="number">3</span>);</span><br><span class="line">    user.setEmail(<span class="string">&quot;123456@qq.com&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 帮我们自动生成id</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.insert(user); </span><br><span class="line">    System.out.println(result); <span class="comment">// 受影响的行数</span></span><br><span class="line">    System.out.println(user); <span class="comment">// 发现，id会自动回填</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>数据库插入的id的默认值为：全局的唯一id</p><h3 id="主键生成策略"><a href="#主键生成策略" class="headerlink" title="主键生成策略"></a><strong>主键生成策略</strong></h3><blockquote><p>默认 ID_WORKER 全局唯一id 分布式系统唯一id生成：<a class="link"   href="https://www.cnblogs.com/haoxinyue/p/5208136.html" >https://www.cnblogs.com/haoxinyue/p/5208136.html<i class="fas fa-external-link-alt"></i></a></p></blockquote><h4 id="雪花算法："><a href="#雪花算法：" class="headerlink" title="雪花算法："></a><strong>雪花算法：</strong></h4><p>snowflake是Twitter开源的分布式ID生成算法，结果是一个long型的ID。其核心思想是：使用41bit作为毫秒数，10bit作为机器的ID（5个bit是数据中心，5个bit的机器ID），12bit作为毫秒内的流水号（意味着每个节点在每毫秒可以产生 4096 个 ID），最后还有一个符号位，永远是0。可以保证几乎全球唯一！</p><p><strong>主键自增：</strong></p><p>实体类字段上 @TableId(type &#x3D; IdType.AUTO)</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://s2.loli.net/2022/06/16/Gog5Rs1OjlxY7UB.png"                      alt="image-20210405172103065"                ></p><p>数据库id字段自增！</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://s2.loli.net/2022/06/16/CrGiqaTlBjfe5DR.png"                      alt="image-20210405172141349"                ></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;插入操作&quot;&gt;&lt;a href=&quot;#插入操作&quot; class=&quot;headerlink&quot; title=&quot;插入操作&quot;&gt;&lt;/a&gt;插入操作&lt;/h3&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre</summary>
      
    
    
    
    
    <category term="MybatisPlus" scheme="http://example.com/tags/MybatisPlus/"/>
    
  </entry>
  
  <entry>
    <title>MybatisPlus之配置日志</title>
    <link href="http://example.com/2022/06/16/MybatisPlus%E4%B9%8B%E9%85%8D%E7%BD%AE%E6%97%A5%E5%BF%97/"/>
    <id>http://example.com/2022/06/16/MybatisPlus%E4%B9%8B%E9%85%8D%E7%BD%AE%E6%97%A5%E5%BF%97/</id>
    <published>2022-06-16T09:53:32.000Z</published>
    <updated>2022-06-16T09:54:17.476Z</updated>
    
    <content type="html"><![CDATA[<p>我们所有的sql现在是不可见的，我们希望知道他是怎么执行的，所以我们必须要看日志！</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置日志</span></span><br><span class="line"><span class="attr">mybatis-plus.configuration.log-impl</span>=<span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;我们所有的sql现在是不可见的，我们希望知道他是怎么执行的，所以我们必须要看日志！&lt;/p&gt;
&lt;figure class=&quot;highlight properties&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;</summary>
      
    
    
    
    
    <category term="MybatisPlus" scheme="http://example.com/tags/MybatisPlus/"/>
    
  </entry>
  
  <entry>
    <title>MybatisPlus之快速开始</title>
    <link href="http://example.com/2022/06/16/MybatisPlus%E4%B9%8B%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B/"/>
    <id>http://example.com/2022/06/16/MybatisPlus%E4%B9%8B%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B/</id>
    <published>2022-06-16T09:18:22.000Z</published>
    <updated>2022-06-16T09:25:55.203Z</updated>
    
    <content type="html"><![CDATA[<p>官网地址：<a class="link"   href="https://mp.baomidou.com/guide/quick-start.html" >https://mp.baomidou.com/guide/quick-start.html<i class="fas fa-external-link-alt"></i></a></p><p>使用第三方组件：</p><ol><li>导入对应的依赖</li><li>研究依赖如何配置</li><li>代码如何编写</li><li>提高扩展技术能力！</li></ol><p>步骤：</p><h1 id="1、创建数据库-mybatis-plus"><a href="#1、创建数据库-mybatis-plus" class="headerlink" title="1、创建数据库 mybatis_plus"></a>1、创建数据库 mybatis_plus</h1><h1 id="2、创建user表并插入数据"><a href="#2、创建user表并插入数据" class="headerlink" title="2、创建user表并插入数据"></a>2、创建user表并插入数据</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> <span class="keyword">user</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">user</span></span><br><span class="line">(</span><br><span class="line">id <span class="type">BIGINT</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;主键ID&#x27;</span>,</span><br><span class="line">name <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">age <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;年龄&#x27;</span>,</span><br><span class="line">email <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;邮箱&#x27;</span>,</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY (id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> <span class="keyword">user</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">user</span> (id, name, age, email) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1</span>, <span class="string">&#x27;Jone&#x27;</span>, <span class="number">18</span>, <span class="string">&#x27;test1@baomidou.com&#x27;</span>),</span><br><span class="line">(<span class="number">2</span>, <span class="string">&#x27;Jack&#x27;</span>, <span class="number">20</span>, <span class="string">&#x27;test2@baomidou.com&#x27;</span>),</span><br><span class="line">(<span class="number">3</span>, <span class="string">&#x27;Tom&#x27;</span>, <span class="number">28</span>, <span class="string">&#x27;test3@baomidou.com&#x27;</span>),</span><br><span class="line">(<span class="number">4</span>, <span class="string">&#x27;Sandy&#x27;</span>, <span class="number">21</span>, <span class="string">&#x27;test4@baomidou.com&#x27;</span>),</span><br><span class="line">(<span class="number">5</span>, <span class="string">&#x27;Billie&#x27;</span>, <span class="number">24</span>, <span class="string">&#x27;test5@baomidou.com&#x27;</span>);</span><br></pre></td></tr></table></figure><h1 id="3、编写项目，初始化项目！使用SpringBoot初始化！"><a href="#3、编写项目，初始化项目！使用SpringBoot初始化！" class="headerlink" title="3、编写项目，初始化项目！使用SpringBoot初始化！"></a>3、编写项目，初始化项目！使用SpringBoot初始化！</h1><h1 id="4、导入依赖"><a href="#4、导入依赖" class="headerlink" title="4、导入依赖"></a>4、导入依赖</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 数据库驱动 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="5、填写properties配置"><a href="#5、填写properties配置" class="headerlink" title="5、填写properties配置"></a>5、填写properties配置</h1><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">123456</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/mybatis_plus?useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=GMT%2B8</span></span><br><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br></pre></td></tr></table></figure><h1 id="6、填写测试类，读取数据库"><a href="#6、填写测试类，读取数据库" class="headerlink" title="6、填写测试类，读取数据库"></a>6、填写测试类，读取数据库</h1><p>原先我们使用mybatis：pojo-dao（连接mybatis，配置mapper.xml文件）-service-controller</p><p>现在：</p><ul><li><p>pojo类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>mapper接口</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在对应的Mapper上面继承基本的类 BaseMapper</span></span><br><span class="line"><span class="meta">@Repository</span> <span class="comment">// 代表持久层</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line">    <span class="comment">// 所有的CRUD操作都已经编写完成了</span></span><br><span class="line">    <span class="comment">// 你不需要像以前的配置一大堆文件了！</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>springboot启动类</p><p>添加注解来扫描</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MapperScan(&quot;com.oddfar.mapper&quot;)</span></span><br></pre></td></tr></table></figure></li><li><p>测试类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 继承了BaseMapper，所有的方法都来自己父类</span></span><br><span class="line"><span class="comment">// 我们也可以编写自己的扩展方法！</span></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 参数是一个 Wrapper ，条件构造器，这里我们先不用，填写null</span></span><br><span class="line">    <span class="comment">// 查询全部用户</span></span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(<span class="literal">null</span>);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;官网地址：&lt;a class=&quot;link&quot;   href=&quot;https://mp.baomidou.com/guide/quick-start.html&quot; &gt;https://mp.baomidou.com/guide/quick-start.html&lt;i class=&quot;fas</summary>
      
    
    
    
    
    <category term="MybatisPlus" scheme="http://example.com/tags/MybatisPlus/"/>
    
  </entry>
  
  <entry>
    <title>MybatisPlus之简介</title>
    <link href="http://example.com/2022/06/16/MybatisPlus%E4%B9%8B%E7%AE%80%E4%BB%8B/"/>
    <id>http://example.com/2022/06/16/MybatisPlus%E4%B9%8B%E7%AE%80%E4%BB%8B/</id>
    <published>2022-06-16T03:22:52.000Z</published>
    <updated>2022-06-16T03:24:25.896Z</updated>
    
    <content type="html"><![CDATA[<p>原先写crud，需要在xml配置或注解中写sql语句，用了MyBatisPlus后，对单表进行crud无需再写sql语句</p><p>简单的增删改查还行，不支持多表操作，一般不在公司里使用，适合个人快速开发和偷懒使用</p><p>官网：<a class="link"   href="https://baomidou.com/" >https://baomidou.com/<i class="fas fa-external-link-alt"></i></a></p><p>简介：简化mybatis，简化开发、提高写代码效率</p><ul><li><strong>无侵入</strong>：只做增强不做改变，引入它不会对现有工程产生影响，如丝般顺滑</li><li><strong>损耗小</strong>：启动即会自动注入基本 CURD，性能基本无损耗，直接面向对象操作</li><li><strong>强大的 CRUD 操作</strong>：内置通用 Mapper、通用 Service，仅仅通过少量配置即可实现单表大部分 CRUD 操作，更有强大的条件构造器，满足各类使用需求</li><li><strong>支持 Lambda 形式调用</strong>：通过 Lambda 表达式，方便的编写各类查询条件，无需再担心字段写错</li><li><strong>支持主键自动生成</strong>：支持多达 4 种主键策略（内含分布式唯一 ID 生成器 - Sequence），可自由配置，完美解决主键问题</li><li><strong>支持 ActiveRecord 模式</strong>：支持 ActiveRecord 形式调用，实体类只需继承 Model 类即可进行强大的 CRUD 操作</li><li><strong>支持自定义全局通用操作</strong>：支持全局通用方法注入（ Write once, use anywhere ）</li><li><strong>内置代码生成器</strong>：采用代码或者 Maven 插件可快速生成 Mapper 、 Model 、 Service 、 Controller 层代码，支持模板引擎，更有超多自定义配置等您来使用</li><li><strong>内置分页插件</strong>：基于 MyBatis 物理分页，开发者无需关心具体操作，配置好插件之后，写分页等同于普通 List 查询</li><li><strong>分页插件支持多种数据库</strong>：支持 MySQL、MariaDB、Oracle、DB2、H2、HSQL、SQLite、Postgre、SQLServer 等多种数据库</li><li><strong>内置性能分析插件</strong>：可输出 Sql 语句以及其执行时间，建议开发测试时启用该功能，能快速揪出慢查询</li><li><strong>内置全局拦截插件</strong>：提供全表 delete 、 update 操作智能分析阻断，也可自定义拦截规则，预防误操作</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;原先写crud，需要在xml配置或注解中写sql语句，用了MyBatisPlus后，对单表进行crud无需再写sql语句&lt;/p&gt;
&lt;p&gt;简单的增删改查还行，不支持多表操作，一般不在公司里使用，适合个人快速开发和偷懒使用&lt;/p&gt;
&lt;p&gt;官网：&lt;a class=&quot;link&quot;  </summary>
      
    
    
    
    
    <category term="MybatisPlus" scheme="http://example.com/tags/MybatisPlus/"/>
    
  </entry>
  
  <entry>
    <title>Anylogic之路书实现一边走一边画</title>
    <link href="http://example.com/2022/06/15/Anylogic%E4%B9%8B%E8%B7%AF%E4%B9%A6%E5%AE%9E%E7%8E%B0%E4%B8%80%E8%BE%B9%E8%B5%B0%E4%B8%80%E8%BE%B9%E7%94%BB/"/>
    <id>http://example.com/2022/06/15/Anylogic%E4%B9%8B%E8%B7%AF%E4%B9%A6%E5%AE%9E%E7%8E%B0%E4%B8%80%E8%BE%B9%E8%B5%B0%E4%B8%80%E8%BE%B9%E7%94%BB/</id>
    <published>2022-06-15T09:08:54.000Z</published>
    <updated>2022-06-15T09:09:34.504Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>轨迹回放(路书)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span>, <span class="selector-tag">html</span>&#123;<span class="attribute">width</span>: <span class="number">100%</span>;<span class="attribute">height</span>: <span class="number">100%</span>;<span class="attribute">margin</span>:<span class="number">0</span>;<span class="attribute">font-family</span>:<span class="string">&quot;微软雅黑&quot;</span>;&#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#map_canvas</span>&#123;<span class="attribute">width</span>:<span class="number">100%</span>;<span class="attribute">height</span>:<span class="number">500px</span>;&#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#result</span> &#123;<span class="attribute">width</span>:<span class="number">100%</span>&#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://code.jquery.com/jquery-1.12.4.js&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">integrity</span>=<span class="string">&quot;sha256-Qw82+bXyGq6MydymqBxNPYTaUXXq7c8v3CwiYwLLNXU=&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">crossorigin</span>=<span class="string">&quot;anonymous&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://api.map.baidu.com/api?v=2.0&amp;ak=GjxdF4HBRYNY0piKp6K7I4U7lOI7Lyor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://api.map.baidu.com/library/LuShu/1.2/src/LuShu_min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map_canvas&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;result&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;run&quot;</span>&gt;</span>开始<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;stop&quot;</span>&gt;</span>停止<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;pause&quot;</span>&gt;</span>暂停<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;hide&quot;</span>&gt;</span>隐藏信息窗口<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;show&quot;</span>&gt;</span>展示信息窗口<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> marker;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> map = <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Map</span>(<span class="string">&#x27;map_canvas&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    map.<span class="title function_">enableScrollWheelZoom</span>();</span></span><br><span class="line"><span class="language-javascript">    map.<span class="title function_">centerAndZoom</span>();</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> lushu;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 实例化一个驾车导航用来生成路线</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">//  var drv = new BMap.DrivingRoute(&#x27;北京&#x27;, &#123;</span></span></span><br><span class="line"><span class="language-javascript">   <span class="comment">//     onSearchComplete: function(res) &#123;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//        if (drv.getStatus() == BMAP_STATUS_SUCCESS) &#123;</span></span></span><br><span class="line"><span class="language-javascript">              <span class="comment">//  var plan = res.getPlan(0);</span></span></span><br><span class="line"><span class="language-javascript">               <span class="comment">// var arrPois =[];</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//                for(var j=0;j&lt;plan.getNumRoutes();j++)&#123;</span></span></span><br><span class="line"><span class="language-javascript">                 <span class="comment">//   var route = plan.getRoute(j);</span></span></span><br><span class="line"><span class="language-javascript">                 <span class="comment">//   arrPois= arrPois.concat(route.getPath());</span></span></span><br><span class="line"><span class="language-javascript">               <span class="comment">// &#125;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> arrPois=[<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.403984</span>,<span class="number">39.914004</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.402116</span>,<span class="number">39.913938</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.402116</span>,<span class="number">39.913938</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.402046</span>,<span class="number">39.913928</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.401856</span>,<span class="number">39.913927</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.401547</span>,<span class="number">39.913926</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.401008</span>,<span class="number">39.913923</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.400599</span>,<span class="number">39.913921</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.39999</span>,<span class="number">39.913908</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.399471</span>,<span class="number">39.913875</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.399042</span>,<span class="number">39.913852</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.398035</span>,<span class="number">39.913835</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.395593</span>,<span class="number">39.913683</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.395383</span>,<span class="number">39.913681</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.395114</span>,<span class="number">39.913658</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.394666</span>,<span class="number">39.913664</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.390265</span>,<span class="number">39.91349</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.38925</span>,<span class="number">39.913456</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.388931</span>,<span class="number">39.913461</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.388643</span>,<span class="number">39.913457</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.388335</span>,<span class="number">39.913463</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.386455</span>,<span class="number">39.913424</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.386166</span>,<span class="number">39.913429</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385898</span>,<span class="number">39.913425</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.384327</span>,<span class="number">39.913399</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.384168</span>,<span class="number">39.913396</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.38384</span>,<span class="number">39.913391</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.383472</span>,<span class="number">39.913395</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.383323</span>,<span class="number">39.913402</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.382796</span>,<span class="number">39.913403</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.382747</span>,<span class="number">39.913402</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.38227</span>,<span class="number">39.913394</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.381594</span>,<span class="number">39.913372</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.381465</span>,<span class="number">39.91337</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.381445</span>,<span class="number">39.913369</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.381197</span>,<span class="number">39.913365</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.380779</span>,<span class="number">39.913348</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.38066</span>,<span class="number">39.913346</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.380491</span>,<span class="number">39.913343</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.380488</span>,<span class="number">39.913341</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.38014</span>,<span class="number">39.913344</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.379435</span>,<span class="number">39.913342</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.378848</span>,<span class="number">39.913331</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.378103</span>,<span class="number">39.913307</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.376722</span>,<span class="number">39.913282</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.374238</span>,<span class="number">39.913227</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.373105</span>,<span class="number">39.913226</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.37221</span>,<span class="number">39.91321</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.370004</span>,<span class="number">39.913171</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.369865</span>,<span class="number">39.913169</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.369706</span>,<span class="number">39.913166</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.369616</span>,<span class="number">39.913175</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.366474</span>,<span class="number">39.913103</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.366276</span>,<span class="number">39.913109</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.365997</span>,<span class="number">39.913105</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.365898</span>,<span class="number">39.913104</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.365639</span>,<span class="number">39.91312</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.364605</span>,<span class="number">39.913094</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.364127</span>,<span class="number">39.913087</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.364126</span>,<span class="number">39.913086</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363917</span>,<span class="number">39.913193</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363827</span>,<span class="number">39.913262</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363797</span>,<span class="number">39.913311</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363767</span>,<span class="number">39.913391</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363767</span>,<span class="number">39.913541</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363757</span>,<span class="number">39.913771</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363757</span>,<span class="number">39.913821</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363737</span>,<span class="number">39.91432</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363687</span>,<span class="number">39.914809</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363647</span>,<span class="number">39.915039</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363617</span>,<span class="number">39.915198</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363567</span>,<span class="number">39.915377</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363527</span>,<span class="number">39.915527</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363487</span>,<span class="number">39.915676</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363438</span>,<span class="number">39.915905</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363436</span>,<span class="number">39.915905</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363327</span>,<span class="number">39.916154</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363327</span>,<span class="number">39.916154</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363356</span>,<span class="number">39.916444</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363376</span>,<span class="number">39.916694</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363504</span>,<span class="number">39.917936</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363404</span>,<span class="number">39.918974</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363384</span>,<span class="number">39.919494</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363374</span>,<span class="number">39.919673</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363374</span>,<span class="number">39.919723</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363374</span>,<span class="number">39.919763</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363374</span>,<span class="number">39.919813</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363364</span>,<span class="number">39.920293</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363364</span>,<span class="number">39.920393</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363273</span>,<span class="number">39.922131</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363263</span>,<span class="number">39.922441</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363192</span>,<span class="number">39.92405</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363183</span>,<span class="number">39.92422</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363183</span>,<span class="number">39.9243</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363173</span>,<span class="number">39.92446</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363122</span>,<span class="number">39.925599</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363112</span>,<span class="number">39.925818</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363072</span>,<span class="number">39.926798</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363052</span>,<span class="number">39.927057</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363042</span>,<span class="number">39.927277</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363002</span>,<span class="number">39.928407</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362952</span>,<span class="number">39.929326</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362952</span>,<span class="number">39.929466</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362942</span>,<span class="number">39.929486</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362842</span>,<span class="number">39.931454</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362822</span>,<span class="number">39.931694</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362822</span>,<span class="number">39.931834</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362802</span>,<span class="number">39.932393</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362772</span>,<span class="number">39.933293</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362763</span>,<span class="number">39.933313</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362683</span>,<span class="number">39.934892</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362603</span>,<span class="number">39.936531</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362544</span>,<span class="number">39.93769</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362524</span>,<span class="number">39.93804</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362514</span>,<span class="number">39.938159</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362514</span>,<span class="number">39.938209</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362514</span>,<span class="number">39.938259</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362504</span>,<span class="number">39.938509</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362465</span>,<span class="number">39.939329</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362405</span>,<span class="number">39.940878</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362376</span>,<span class="number">39.941888</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362366</span>,<span class="number">39.942108</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362366</span>,<span class="number">39.942138</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362356</span>,<span class="number">39.942398</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362337</span>,<span class="number">39.942597</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362307</span>,<span class="number">39.943287</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362277</span>,<span class="number">39.943637</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362218</span>,<span class="number">39.944746</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362219</span>,<span class="number">39.946046</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362219</span>,<span class="number">39.946196</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362219</span>,<span class="number">39.946226</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362209</span>,<span class="number">39.946276</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362209</span>,<span class="number">39.946326</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362199</span>,<span class="number">39.946436</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.36218</span>,<span class="number">39.946876</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.36213</span>,<span class="number">39.947595</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.36227</span>,<span class="number">39.948167</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.36235</span>,<span class="number">39.948339</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362509</span>,<span class="number">39.948611</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362738</span>,<span class="number">39.948914</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362928</span>,<span class="number">39.949197</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363167</span>,<span class="number">39.94943</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363416</span>,<span class="number">39.949604</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363913</span>,<span class="number">39.949851</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.36469</span>,<span class="number">39.950052</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.365595</span>,<span class="number">39.950366</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.365794</span>,<span class="number">39.950429</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.366093</span>,<span class="number">39.950524</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.366242</span>,<span class="number">39.950556</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.367266</span>,<span class="number">39.950863</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.368162</span>,<span class="number">39.951127</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.371174</span>,<span class="number">39.952029</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.371324</span>,<span class="number">39.952072</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.372029</span>,<span class="number">39.952315</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.372417</span>,<span class="number">39.952482</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.37365</span>,<span class="number">39.953024</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.374435</span>,<span class="number">39.953378</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.374833</span>,<span class="number">39.953536</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.374962</span>,<span class="number">39.953598</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.375588</span>,<span class="number">39.95386</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.375585</span>,<span class="number">39.95386</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.375903</span>,<span class="number">39.953895</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.376171</span>,<span class="number">39.95396</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.376399</span>,<span class="number">39.954035</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.376648</span>,<span class="number">39.954099</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.376727</span>,<span class="number">39.954131</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.377026</span>,<span class="number">39.954216</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.377085</span>,<span class="number">39.954237</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.377354</span>,<span class="number">39.954312</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.377642</span>,<span class="number">39.954358</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.377821</span>,<span class="number">39.954391</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.378198</span>,<span class="number">39.954458</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.378377</span>,<span class="number">39.954491</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.378536</span>,<span class="number">39.954504</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.378586</span>,<span class="number">39.954505</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.378715</span>,<span class="number">39.954517</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.378924</span>,<span class="number">39.954531</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.379311</span>,<span class="number">39.954558</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.379848</span>,<span class="number">39.954598</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.379898</span>,<span class="number">39.954599</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.380037</span>,<span class="number">39.954611</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.380723</span>,<span class="number">39.954664</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.381458</span>,<span class="number">39.954697</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.381736</span>,<span class="number">39.954712</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.382432</span>,<span class="number">39.954744</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.38273</span>,<span class="number">39.954759</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.38279</span>,<span class="number">39.95476</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.383098</span>,<span class="number">39.954795</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.383456</span>,<span class="number">39.954882</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.383536</span>,<span class="number">39.954903</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.383576</span>,<span class="number">39.954914</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.383655</span>,<span class="number">39.954935</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.383695</span>,<span class="number">39.954946</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.383795</span>,<span class="number">39.954987</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.383854</span>,<span class="number">39.955019</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.383884</span>,<span class="number">39.955029</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.383954</span>,<span class="number">39.95507</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.384013</span>,<span class="number">39.955121</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.384063</span>,<span class="number">39.955162</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.384093</span>,<span class="number">39.955183</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.384153</span>,<span class="number">39.955244</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.384212</span>,<span class="number">39.955315</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.384242</span>,<span class="number">39.955345</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.384382</span>,<span class="number">39.955518</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.384441</span>,<span class="number">39.955609</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.384501</span>,<span class="number">39.95568</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.384581</span>,<span class="number">39.955811</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.38468</span>,<span class="number">39.955953</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.384849</span>,<span class="number">39.956206</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.384919</span>,<span class="number">39.956317</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385059</span>,<span class="number">39.956529</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385079</span>,<span class="number">39.95657</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385347</span>,<span class="number">39.956974</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385527</span>,<span class="number">39.957267</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385576</span>,<span class="number">39.957358</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385626</span>,<span class="number">39.957459</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385676</span>,<span class="number">39.95757</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385716</span>,<span class="number">39.95768</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385776</span>,<span class="number">39.957841</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385806</span>,<span class="number">39.958002</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385836</span>,<span class="number">39.958162</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385846</span>,<span class="number">39.958293</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385846</span>,<span class="number">39.958473</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385856</span>,<span class="number">39.958623</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385856</span>,<span class="number">39.958623</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385897</span>,<span class="number">39.960014</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385898</span>,<span class="number">39.960984</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385908</span>,<span class="number">39.961295</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385929</span>,<span class="number">39.961865</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385909</span>,<span class="number">39.962295</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.38588</span>,<span class="number">39.963275</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385831</span>,<span class="number">39.963644</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385782</span>,<span class="number">39.964123</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385782</span>,<span class="number">39.964143</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385842</span>,<span class="number">39.964715</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385903</span>,<span class="number">39.965356</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385983</span>,<span class="number">39.966067</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.386043</span>,<span class="number">39.966538</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.386053</span>,<span class="number">39.966629</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.386133</span>,<span class="number">39.96726</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.386414</span>,<span class="number">39.969935</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.386474</span>,<span class="number">39.970407</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.386685</span>,<span class="number">39.9718</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.386805</span>,<span class="number">39.972673</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.386935</span>,<span class="number">39.973505</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.386985</span>,<span class="number">39.973796</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.386984</span>,<span class="number">39.973796</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.387035</span>,<span class="number">39.974166</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.387055</span>,<span class="number">39.974317</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.387075</span>,<span class="number">39.974427</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.387095</span>,<span class="number">39.974608</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.387175</span>,<span class="number">39.975129</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.387185</span>,<span class="number">39.975199</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.387195</span>,<span class="number">39.975309</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.387285</span>,<span class="number">39.975931</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.387385</span>,<span class="number">39.976803</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.387626</span>,<span class="number">39.978957</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.387646</span>,<span class="number">39.979127</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.387656</span>,<span class="number">39.979228</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.387736</span>,<span class="number">39.979829</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.387866</span>,<span class="number">39.981111</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.387926</span>,<span class="number">39.981592</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.388026</span>,<span class="number">39.982294</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.388016</span>,<span class="number">39.982684</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.388007</span>,<span class="number">39.982864</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.387997</span>,<span class="number">39.982953</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.387997</span>,<span class="number">39.983003</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.387997</span>,<span class="number">39.983054</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.387987</span>,<span class="number">39.983333</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.387918</span>,<span class="number">39.983782</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.387819</span>,<span class="number">39.984381</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.3877</span>,<span class="number">39.984779</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.386975</span>,<span class="number">39.987338</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.386806</span>,<span class="number">39.987906</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.386776</span>,<span class="number">39.988015</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.386727</span>,<span class="number">39.988195</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.386518</span>,<span class="number">39.988971</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.386379</span>,<span class="number">39.989529</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.386221</span>,<span class="number">39.990087</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.386012</span>,<span class="number">39.990823</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385943</span>,<span class="number">39.991072</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385724</span>,<span class="number">39.991819</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385376</span>,<span class="number">39.992993</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385347</span>,<span class="number">39.993123</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385237</span>,<span class="number">39.993471</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385208</span>,<span class="number">39.993591</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385168</span>,<span class="number">39.99374</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385128</span>,<span class="number">39.993889</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385109</span>,<span class="number">39.993939</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.385079</span>,<span class="number">39.994048</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.384622</span>,<span class="number">39.995631</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.384552</span>,<span class="number">39.99591</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.384254</span>,<span class="number">39.996995</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.384244</span>,<span class="number">39.997034</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.383936</span>,<span class="number">39.997829</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.383906</span>,<span class="number">39.997919</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.383687</span>,<span class="number">39.998425</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.383469</span>,<span class="number">39.998841</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.38327</span>,<span class="number">39.999118</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.382982</span>,<span class="number">39.999513</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.382534</span>,<span class="number">40.000135</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.382455</span>,<span class="number">40.000253</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.382157</span>,<span class="number">40.000658</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.382067</span>,<span class="number">40.000777</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.381491</span>,<span class="number">40.001506</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.381023</span>,<span class="number">40.002088</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.380516</span>,<span class="number">40.002739</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.380188</span>,<span class="number">40.003163</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.379612</span>,<span class="number">40.003902</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.379234</span>,<span class="number">40.004385</span>),</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.378578</span>,<span class="number">40.005213</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.377942</span>,<span class="number">40.006032</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.377524</span>,<span class="number">40.006564</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.376937</span>,<span class="number">40.007333</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.376848</span>,<span class="number">40.007431</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.376789</span>,<span class="number">40.00752</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.376749</span>,<span class="number">40.007559</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.376739</span>,<span class="number">40.007589</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.376431</span>,<span class="number">40.007983</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.376043</span>,<span class="number">40.008486</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.374452</span>,<span class="number">40.010616</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.373895</span>,<span class="number">40.011406</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.373606</span>,<span class="number">40.011791</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.372303</span>,<span class="number">40.013577</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.371706</span>,<span class="number">40.014386</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.371617</span>,<span class="number">40.014514</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.37106</span>,<span class="number">40.015244</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.37097</span>,<span class="number">40.015373</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.370542</span>,<span class="number">40.015935</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.369577</span>,<span class="number">40.017208</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.369259</span>,<span class="number">40.017652</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.368711</span>,<span class="number">40.018443</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.368303</span>,<span class="number">40.018946</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.367557</span>,<span class="number">40.019883</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.36687</span>,<span class="number">40.020752</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.366183</span>,<span class="number">40.02162</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.364589</span>,<span class="number">40.023695</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363912</span>,<span class="number">40.024585</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.363334</span>,<span class="number">40.025317</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362975</span>,<span class="number">40.025762</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362816</span>,<span class="number">40.025959</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.362228</span>,<span class="number">40.026711</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361869</span>,<span class="number">40.027156</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.36164</span>,<span class="number">40.027463</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361421</span>,<span class="number">40.02776</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361401</span>,<span class="number">40.02779</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361311</span>,<span class="number">40.027899</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361304</span>,<span class="number">40.027899</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361274</span>,<span class="number">40.027948</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361175</span>,<span class="number">40.028107</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361085</span>,<span class="number">40.028236</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360995</span>,<span class="number">40.028385</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360945</span>,<span class="number">40.028474</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360916</span>,<span class="number">40.028524</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360806</span>,<span class="number">40.028712</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360706</span>,<span class="number">40.028881</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360677</span>,<span class="number">40.028941</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360667</span>,<span class="number">40.028961</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360637</span>,<span class="number">40.02903</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360597</span>,<span class="number">40.02912</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360557</span>,<span class="number">40.029199</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360547</span>,<span class="number">40.029219</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360538</span>,<span class="number">40.029259</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360518</span>,<span class="number">40.029299</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360508</span>,<span class="number">40.029338</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360508</span>,<span class="number">40.029388</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360508</span>,<span class="number">40.029438</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360508</span>,<span class="number">40.029488</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360518</span>,<span class="number">40.029539</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360528</span>,<span class="number">40.029589</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360547</span>,<span class="number">40.029639</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360577</span>,<span class="number">40.029679</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360607</span>,<span class="number">40.02972</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360647</span>,<span class="number">40.02976</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360687</span>,<span class="number">40.029791</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360726</span>,<span class="number">40.029821</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360766</span>,<span class="number">40.029841</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360806</span>,<span class="number">40.029862</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360846</span>,<span class="number">40.029872</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360896</span>,<span class="number">40.029883</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360945</span>,<span class="number">40.029894</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360995</span>,<span class="number">40.029904</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361055</span>,<span class="number">40.029905</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361115</span>,<span class="number">40.029906</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361174</span>,<span class="number">40.029907</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361234</span>,<span class="number">40.029887</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361294</span>,<span class="number">40.029878</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361354</span>,<span class="number">40.029859</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361393</span>,<span class="number">40.02984</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361453</span>,<span class="number">40.029811</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361493</span>,<span class="number">40.029781</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361533</span>,<span class="number">40.029742</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361573</span>,<span class="number">40.029692</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361603</span>,<span class="number">40.029643</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361633</span>,<span class="number">40.029593</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361643</span>,<span class="number">40.029544</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361643</span>,<span class="number">40.029504</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361643</span>,<span class="number">40.029464</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361633</span>,<span class="number">40.029424</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361623</span>,<span class="number">40.029374</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361603</span>,<span class="number">40.029323</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361574</span>,<span class="number">40.029273</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361544</span>,<span class="number">40.029233</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361504</span>,<span class="number">40.029202</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361474</span>,<span class="number">40.029172</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361425</span>,<span class="number">40.029141</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361385</span>,<span class="number">40.029101</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361325</span>,<span class="number">40.02906</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361266</span>,<span class="number">40.02904</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361226</span>,<span class="number">40.029009</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361186</span>,<span class="number">40.028989</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361147</span>,<span class="number">40.028968</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361107</span>,<span class="number">40.028948</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.361104</span>,<span class="number">40.028946</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360765</span>,<span class="number">40.028942</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360676</span>,<span class="number">40.028941</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360477</span>,<span class="number">40.028939</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.360228</span>,<span class="number">40.028936</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.359521</span>,<span class="number">40.028937</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.359292</span>,<span class="number">40.028945</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.358943</span>,<span class="number">40.028951</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.358515</span>,<span class="number">40.028946</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.358495</span>,<span class="number">40.028946</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.357638</span>,<span class="number">40.028947</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.357499</span>,<span class="number">40.028946</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.357011</span>,<span class="number">40.028931</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.356801</span>,<span class="number">40.028929</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.356792</span>,<span class="number">40.028929</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.356632</span>,<span class="number">40.028928</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.355356</span>,<span class="number">40.028937</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.355037</span>,<span class="number">40.028934</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.354628</span>,<span class="number">40.028941</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.354219</span>,<span class="number">40.028938</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.353571</span>,<span class="number">40.028934</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.353062</span>,<span class="number">40.028941</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.352872</span>,<span class="number">40.02894</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.351874</span>,<span class="number">40.028934</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.350277</span>,<span class="number">40.028937</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.347059</span>,<span class="number">40.028961</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.346519</span>,<span class="number">40.028971</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.343748</span>,<span class="number">40.028925</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.343718</span>,<span class="number">40.028925</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.343608</span>,<span class="number">40.028925</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.342968</span>,<span class="number">40.028888</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.341516</span>,<span class="number">40.028704</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.340915</span>,<span class="number">40.028537</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.340184</span>,<span class="number">40.028331</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.337588</span>,<span class="number">40.02754</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.337585</span>,<span class="number">40.027539</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.337244</span>,<span class="number">40.027532</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.336974</span>,<span class="number">40.027464</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.336522</span>,<span class="number">40.027388</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.336201</span>,<span class="number">40.027321</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.33576</span>,<span class="number">40.027336</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.335309</span>,<span class="number">40.02738</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.334907</span>,<span class="number">40.027494</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.334445</span>,<span class="number">40.027659</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.334405</span>,<span class="number">40.027679</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.333823</span>,<span class="number">40.027946</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.333311</span>,<span class="number">40.028252</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.332839</span>,<span class="number">40.028617</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.331713</span>,<span class="number">40.029801</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.331711</span>,<span class="number">40.0298</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.330726</span>,<span class="number">40.031463</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.330585</span>,<span class="number">40.031744</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.330071</span>,<span class="number">40.032911</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.330021</span>,<span class="number">40.033112</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.329437</span>,<span class="number">40.035059</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.329245</span>,<span class="number">40.035672</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.329165</span>,<span class="number">40.035913</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.329084</span>,<span class="number">40.036174</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.328984</span>,<span class="number">40.036465</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.328943</span>,<span class="number">40.036576</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.328802</span>,<span class="number">40.037018</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.328209</span>,<span class="number">40.038366</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.327716</span>,<span class="number">40.039103</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.32685</span>,<span class="number">40.040136</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.326659</span>,<span class="number">40.040299</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.325231</span>,<span class="number">40.041552</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.323168</span>,<span class="number">40.043356</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.323047</span>,<span class="number">40.043468</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.323017</span>,<span class="number">40.043489</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.322937</span>,<span class="number">40.04357</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.322806</span>,<span class="number">40.043682</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.322756</span>,<span class="number">40.043733</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.322715</span>,<span class="number">40.043764</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.322243</span>,<span class="number">40.044202</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.322233</span>,<span class="number">40.044222</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.321719</span>,<span class="number">40.044821</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.321578</span>,<span class="number">40.044983</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.320773</span>,<span class="number">40.046077</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.320451</span>,<span class="number">40.046673</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.319867</span>,<span class="number">40.047743</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.319122</span>,<span class="number">40.049116</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.31878</span>,<span class="number">40.049552</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.317048</span>,<span class="number">40.051744</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.316032</span>,<span class="number">40.053022</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.315639</span>,<span class="number">40.053519</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.313536</span>,<span class="number">40.056347</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.313365</span>,<span class="number">40.05658</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.313265</span>,<span class="number">40.056712</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.313215</span>,<span class="number">40.056783</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.313064</span>,<span class="number">40.056985</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.31242</span>,<span class="number">40.058037</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.311555</span>,<span class="number">40.059442</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.311535</span>,<span class="number">40.059473</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.311123</span>,<span class="number">40.06015</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.311118</span>,<span class="number">40.06015</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.311119</span>,<span class="number">40.06048</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.310968</span>,<span class="number">40.060772</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.310385</span>,<span class="number">40.061943</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.310334</span>,<span class="number">40.062044</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.310103</span>,<span class="number">40.062488</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.310063</span>,<span class="number">40.062568</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.310033</span>,<span class="number">40.062629</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.309309</span>,<span class="number">40.064021</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.308897</span>,<span class="number">40.064488</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.308555</span>,<span class="number">40.064634</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.308375</span>,<span class="number">40.064707</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.308244</span>,<span class="number">40.064759</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.307963</span>,<span class="number">40.064834</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.30756</span>,<span class="number">40.064791</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.306866</span>,<span class="number">40.064622</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.304856</span>,<span class="number">40.064163</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.303499</span>,<span class="number">40.063863</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.302966</span>,<span class="number">40.06374</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.302856</span>,<span class="number">40.063682</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.302854</span>,<span class="number">40.063681</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.302995</span>,<span class="number">40.063199</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.303979</span>,<span class="number">40.060475</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.303989</span>,<span class="number">40.060395</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.304079</span>,<span class="number">40.060064</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.30432</span>,<span class="number">40.05918</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.304501</span>,<span class="number">40.058558</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.304521</span>,<span class="number">40.058518</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.304662</span>,<span class="number">40.058015</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.304933</span>,<span class="number">40.057151</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.305194</span>,<span class="number">40.056358</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.305235</span>,<span class="number">40.056207</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.305325</span>,<span class="number">40.055946</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.305566</span>,<span class="number">40.055212</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.305647</span>,<span class="number">40.054951</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.305747</span>,<span class="number">40.05494</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.305717</span>,<span class="number">40.05502</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.305717</span>,<span class="number">40.055019</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.305647</span>,<span class="number">40.05523</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.305416</span>,<span class="number">40.055964</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.305295</span>,<span class="number">40.056375</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.305034</span>,<span class="number">40.057169</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.304773</span>,<span class="number">40.058033</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.304772</span>,<span class="number">40.058033</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.306491</span>,<span class="number">40.058347</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.306492</span>,<span class="number">40.058347</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.306914</span>,<span class="number">40.05729</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.306954</span>,<span class="number">40.05717</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.306954</span>,<span class="number">40.05717</span>),<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.306974</span>,<span class="number">40.057169</span>)];</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> attrs = [];</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">for</span>(<span class="keyword">var</span> i = arrPois.<span class="property">length</span> - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)&#123;</span></span><br><span class="line"><span class="language-javascript">        attrs[i] = &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">title</span>:<span class="string">&quot;title&quot;</span> + <span class="title class_">Math</span>.<span class="title function_">random</span>(),</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">content</span>: <span class="string">&quot;content&quot;</span> + <span class="title class_">Math</span>.<span class="title function_">random</span>(),</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">id</span>:<span class="string">&quot;ss&quot;</span>+<span class="title class_">Math</span>.<span class="title function_">random</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arrPois.<span class="property">length</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//    map.addOverlay(new BMap.Polyline(arrPois, &#123;strokeColor: &#x27;#111&#x27;&#125;)); //不画线</span></span></span><br><span class="line"><span class="language-javascript">                map.<span class="title function_">setViewport</span>(arrPois);</span></span><br><span class="line"><span class="language-javascript">                   marker=<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Marker</span>(arrPois[<span class="number">0</span>],&#123;</span></span><br><span class="line"><span class="language-javascript">                      icon  : <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Icon</span>(<span class="string">&#x27;http://developer.baidu.com/map/jsdemo/img/car.png&#x27;</span>, <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Size</span>(<span class="number">52</span>,<span class="number">26</span>),&#123;anchor : <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Size</span>(<span class="number">27</span>, <span class="number">13</span>)&#125;)</span></span><br><span class="line"><span class="language-javascript">                   &#125;);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> label = <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Label</span>(<span class="string">&quot;粤A30780&quot;</span>,&#123;<span class="attr">offset</span>:<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Size</span>(<span class="number">0</span>,-<span class="number">30</span>)&#125;);</span></span><br><span class="line"><span class="language-javascript">      label.<span class="title function_">setStyle</span>(&#123;<span class="attr">border</span>:<span class="string">&quot;1px solid rgb(204, 204, 204)&quot;</span>,<span class="attr">color</span>: <span class="string">&quot;rgb(0, 0, 0)&quot;</span>,<span class="attr">borderRadius</span>:<span class="string">&quot;10px&quot;</span>,<span class="attr">padding</span>:<span class="string">&quot;5px&quot;</span>,<span class="attr">background</span>:<span class="string">&quot;rgb(255, 255, 255)&quot;</span>,&#125;);</span></span><br><span class="line"><span class="language-javascript">                marker.<span class="title function_">setLabel</span>(label);</span></span><br><span class="line"><span class="language-javascript">                 </span></span><br><span class="line"><span class="language-javascript">      map.<span class="title function_">addOverlay</span>(marker);</span></span><br><span class="line"><span class="language-javascript">map.<span class="title function_">addEventListener</span>(<span class="string">&#x27;dragging&#x27;</span>,<span class="keyword">function</span>(<span class="params">type,target,pixel,point</span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">//x:731,y:420  left:622 top:264  offset_x 109 offset_y:156</span></span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> infoWindow = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> hideInfoFlag = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">/**</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">     * 显示弹窗信息</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">     * <span class="doctag">@param</span> pixel 像素坐标</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">     * <span class="doctag">@param</span> pointAttr 属性</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">     */</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">showInfoWindow</span>(<span class="params">pixel, pointAttr</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span>(infoWindow &amp;&amp; <span class="title function_">jQuery</span>(<span class="string">&quot;.BMap_pop&quot;</span>).<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; !hideInfoFlag)&#123;</span></span><br><span class="line"><span class="language-javascript">        map.<span class="title function_">closeInfoWindow</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">jQuery</span>(<span class="string">&quot;.BMap_pop&quot;</span>).<span class="title function_">css</span>(<span class="string">&#x27;display&#x27;</span>,<span class="string">&quot;inline-block&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        hideInfoFlag = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">jQuery</span>(<span class="string">&quot;.BMap_pop&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;left&quot;</span>,pixel.<span class="property">x</span> - <span class="number">109</span>).<span class="title function_">css</span>(<span class="string">&quot;top&quot;</span>,pixel.<span class="property">y</span> - <span class="number">156</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">jQuery</span>(<span class="string">&quot;.BMap_bubble_title&quot;</span>).<span class="title function_">text</span>(pointAttr.<span class="property">title</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">jQuery</span>(<span class="string">&quot;.BMap_bubble_content&quot;</span>).<span class="title function_">html</span>(<span class="string">&quot;&lt;div&gt;id:&quot;</span>+pointAttr.<span class="property">id</span>+<span class="string">&quot;&lt;/div&gt;&lt;div&gt;id:&quot;</span>+pointAttr.<span class="property">content</span>+<span class="string">&quot;&lt;/div&gt;&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> curIndex = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">     <span class="title class_">BMapLib</span>.<span class="property">LuShu</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">_move</span>=<span class="keyword">function</span>(<span class="params">initPos,targetPos,effect</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> pointsArr=[initPos,targetPos];  <span class="comment">//点数组</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> me = <span class="variable language_">this</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//当前的帧数</span></span></span><br><span class="line"><span class="language-javascript">            currentCount = <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//步长，米/秒</span></span></span><br><span class="line"><span class="language-javascript">            timer = <span class="number">10</span>,</span></span><br><span class="line"><span class="language-javascript">            step = <span class="variable language_">this</span>.<span class="property">_opts</span>.<span class="property">speed</span> / (<span class="number">1000</span> / timer),</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//初始坐标</span></span></span><br><span class="line"><span class="language-javascript">            init_pos = <span class="variable language_">this</span>.<span class="property">_projection</span>.<span class="title function_">lngLatToPoint</span>(initPos),</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//获取结束点的(x,y)坐标</span></span></span><br><span class="line"><span class="language-javascript">            target_pos = <span class="variable language_">this</span>.<span class="property">_projection</span>.<span class="title function_">lngLatToPoint</span>(targetPos),</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//总的步长</span></span></span><br><span class="line"><span class="language-javascript">            count = <span class="title class_">Math</span>.<span class="title function_">round</span>(me.<span class="title function_">_getDistance</span>(init_pos, target_pos) / step);</span></span><br><span class="line"><span class="language-javascript">             <span class="comment">//显示折线 syj201607191107</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">_map</span>.<span class="title function_">addOverlay</span>(<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Polyline</span>(pointsArr, &#123; </span></span><br><span class="line"><span class="language-javascript">                strokeColor : <span class="string">&quot;#111&quot;</span>, </span></span><br><span class="line"><span class="language-javascript">                strokeWeight : <span class="number">5</span>, </span></span><br><span class="line"><span class="language-javascript">                strokeOpacity : <span class="number">0.5</span> </span></span><br><span class="line"><span class="language-javascript">            &#125;)); <span class="comment">// 画线</span></span></span><br><span class="line"><span class="language-javascript">         ++curIndex;</span></span><br><span class="line"><span class="language-javascript">         <span class="keyword">var</span> pointAttr = attrs[curIndex];</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//如果小于1直接移动到下一点</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (count &lt; <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                me.<span class="title function_">_moveNext</span>(++me.<span class="property">i</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            me.<span class="property">_intervalFlag</span> = <span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//两点之间当前帧数大于总帧数的时候，则说明已经完成移动</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (currentCount &gt;= count) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="built_in">clearInterval</span>(me.<span class="property">_intervalFlag</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//移动的点已经超过总的长度</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(me.<span class="property">i</span> &gt; me.<span class="property">_path</span>.<span class="property">length</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//运行下一个点</span></span></span><br><span class="line"><span class="language-javascript">                    me.<span class="title function_">_moveNext</span>(++me.<span class="property">i</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;<span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        currentCount++;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">var</span> x = <span class="title function_">effect</span>(init_pos.<span class="property">x</span>, target_pos.<span class="property">x</span>, currentCount, count),</span></span><br><span class="line"><span class="language-javascript">                            y = <span class="title function_">effect</span>(init_pos.<span class="property">y</span>, target_pos.<span class="property">y</span>, currentCount, count),</span></span><br><span class="line"><span class="language-javascript">                            pos = me.<span class="property">_projection</span>.<span class="title function_">pointToLngLat</span>(<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Pixel</span>(x, y));</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//设置marker</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span>(currentCount == <span class="number">1</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">var</span> proPos = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span>(me.<span class="property">i</span> - <span class="number">1</span> &gt;= <span class="number">0</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                                proPos = me.<span class="property">_path</span>[me.<span class="property">i</span> - <span class="number">1</span>];</span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span>(me.<span class="property">_opts</span>.<span class="property">enableRotation</span> == <span class="literal">true</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                                 me.<span class="title function_">setRotation</span>(proPos,initPos,targetPos);</span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span>(me.<span class="property">_opts</span>.<span class="property">autoView</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">if</span>(!me.<span class="property">_map</span>.<span class="title function_">getBounds</span>().<span class="title function_">containsPoint</span>(pos))&#123;</span></span><br><span class="line"><span class="language-javascript">                                    me.<span class="property">_map</span>.<span class="title function_">setCenter</span>(pos);</span></span><br><span class="line"><span class="language-javascript">                                &#125;  </span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//正在移动</span></span></span><br><span class="line"><span class="language-javascript">                        me.<span class="property">_marker</span>.<span class="title function_">setPosition</span>(pos);</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//设置自定义overlay的位置</span></span></span><br><span class="line"><span class="language-javascript">                        me.<span class="title function_">_setInfoWin</span>(pos);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> opts = &#123;</span></span><br><span class="line"><span class="language-javascript">                      <span class="attr">width</span>:<span class="number">200</span>,</span></span><br><span class="line"><span class="language-javascript">                      <span class="attr">height</span>: <span class="number">100</span>,</span></span><br><span class="line"><span class="language-javascript">                      <span class="attr">title</span>:<span class="string">&quot;title&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                      <span class="attr">message</span>:<span class="string">&quot;message&quot;</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;;</span></span><br><span class="line"><span class="language-javascript">                    infoWindow = map.<span class="title function_">getInfoWindow</span>();</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(!infoWindow)&#123;</span></span><br><span class="line"><span class="language-javascript">                        infoWindow = <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">InfoWindow</span>(<span class="string">&quot;test&lt;br&gt;dierhang&quot;</span>,opts);</span></span><br><span class="line"><span class="language-javascript">                        map.<span class="title function_">openInfoWindow</span>(infoWindow, pos);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> pixel = map.<span class="title function_">pointToOverlayPixel</span>(pos);</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">showInfoWindow</span>(pixel, pointAttr);</span></span><br><span class="line"><span class="language-javascript">                    infoWindow.<span class="title function_">getPosition</span>().<span class="property">lat</span> = pos.<span class="property">lat</span>;</span></span><br><span class="line"><span class="language-javascript">                    infoWindow.<span class="title function_">getPosition</span>().<span class="property">lng</span> = pos.<span class="property">lng</span>;</span></span><br><span class="line"><span class="language-javascript">                    infoWindow.<span class="title function_">getPosition</span>().<span class="property">pixel</span> = pixel;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//infoWindow.setTitle(pointAttr.title);</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//infoWindow.setContent(pointAttr.content);</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//console.log(infoWindow.getPosition());</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//infoWindow.restore();</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//infoWindow.redraw();</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//infoWindow.setPosition(pos);</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;,timer);</span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript">                lushu = <span class="keyword">new</span> <span class="title class_">BMapLib</span>.<span class="title class_">LuShu</span>(map,arrPois,&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">defaultContent</span>:<span class="string">&quot;粤A30780&quot;</span>,<span class="comment">//&quot;从天安门到百度大厦&quot;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">autoView</span>:<span class="literal">true</span>,<span class="comment">//是否开启自动视野调整，如果开启那么路书在运动过程中会根据视野自动调整</span></span></span><br><span class="line"><span class="language-javascript">                icon  : <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Icon</span>(<span class="string">&#x27;http://developer.baidu.com/map/jsdemo/img/car.png&#x27;</span>, <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Size</span>(<span class="number">52</span>,<span class="number">26</span>),&#123;anchor : <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Size</span>(<span class="number">27</span>, <span class="number">13</span>)&#125;),</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">speed</span>: <span class="number">4500</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">enableRotation</span>:<span class="literal">true</span>,<span class="comment">//是否设置marker随着道路的走向进行旋转</span></span></span><br><span class="line"><span class="language-javascript">                   <span class="attr">landmarkPois</span>:[</span></span><br><span class="line"><span class="language-javascript">                   &#123;<span class="attr">lng</span>:<span class="number">116.306954</span>,<span class="attr">lat</span>:<span class="number">40.05718</span>,<span class="attr">html</span>:<span class="string">&#x27;加油站&#x27;</span>,<span class="attr">pauseTime</span>:<span class="number">2</span>&#125;</span></span><br><span class="line"><span class="language-javascript">                  ]</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                &#125;); </span></span><br><span class="line"><span class="language-javascript">         </span></span><br><span class="line"><span class="language-javascript">      marker.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        marker.<span class="title function_">enableMassClear</span>();   <span class="comment">//设置后可以隐藏改点的覆盖物</span></span></span><br><span class="line"><span class="language-javascript">        marker.<span class="title function_">hide</span>();</span></span><br><span class="line"><span class="language-javascript">        lushu.<span class="title function_">start</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//map.clearOverlays();  //清除所有覆盖物</span></span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//        &#125;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">//  &#125;);</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//drv.search(&#x27;天安门&#x27;, &#x27;百度大厦&#x27;);</span></span></span><br><span class="line"><span class="language-javascript">     <span class="comment">// lushu.start();</span></span></span><br><span class="line"><span class="language-javascript">     <span class="comment">// lushu.pause();</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//绑定事件</span></span></span><br><span class="line"><span class="language-javascript">    $(<span class="string">&quot;run&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      marker.<span class="title function_">enableMassClear</span>(); <span class="comment">//设置后可以隐藏改点的覆盖物</span></span></span><br><span class="line"><span class="language-javascript">      marker.<span class="title function_">hide</span>();</span></span><br><span class="line"><span class="language-javascript">      lushu.<span class="title function_">start</span>();</span></span><br><span class="line"><span class="language-javascript">     <span class="comment">// map.clearOverlays();    //清除所有覆盖物</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    $(<span class="string">&quot;stop&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        lushu.<span class="title function_">stop</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    $(<span class="string">&quot;pause&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        lushu.<span class="title function_">pause</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    $(<span class="string">&quot;hide&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        lushu.<span class="title function_">hideInfoWindow</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    $(<span class="string">&quot;show&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        lushu.<span class="title function_">showInfoWindow</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">$</span>(<span class="params">element</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(element);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=</summary>
      
    
    
    
    
    <category term="Anylogic" scheme="http://example.com/tags/Anylogic/"/>
    
  </entry>
  
  <entry>
    <title>Anylogic之百度地图实现动态运行轨迹实现</title>
    <link href="http://example.com/2022/06/15/Anylogic%E4%B9%8B%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE%E5%AE%9E%E7%8E%B0%E5%8A%A8%E6%80%81%E8%BF%90%E8%A1%8C%E8%BD%A8%E8%BF%B9%E5%AE%9E%E7%8E%B0/"/>
    <id>http://example.com/2022/06/15/Anylogic%E4%B9%8B%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE%E5%AE%9E%E7%8E%B0%E5%8A%A8%E6%80%81%E8%BF%90%E8%A1%8C%E8%BD%A8%E8%BF%B9%E5%AE%9E%E7%8E%B0/</id>
    <published>2022-06-15T01:21:00.000Z</published>
    <updated>2022-06-15T03:22:03.835Z</updated>
    
    <content type="html"><![CDATA[<p>​要求：一个基于离线百度地图(此方法在线也适用)实时展示车或者其他对象的运行轨迹，且在运行过程中需要车头方向随着角度进行变化。</p><h1 id="1、创建地图"><a href="#1、创建地图" class="headerlink" title="1、创建地图"></a>1、创建地图</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Content-Type&quot;</span> <span class="attr">content</span>=<span class="string">&quot;text/html; charset=utf-8&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;initial-scale=1.0, user-scalable=no&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">body</span>, <span class="selector-tag">html</span>,<span class="selector-id">#allmap</span> &#123;<span class="attribute">width</span>: <span class="number">100%</span>;<span class="attribute">height</span>: <span class="number">100%</span>;<span class="attribute">overflow</span>: hidden;<span class="attribute">margin</span>:<span class="number">0</span>;<span class="attribute">font-family</span>:<span class="string">&quot;微软雅黑&quot;</span>;&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://api.map.baidu.com/api?v=2.0&amp;ak=密匙&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>单个标注点沿直线的轨迹运动<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;allmap&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 百度地图API功能</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> map=<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Map</span>(<span class="string">&quot;allmap&quot;</span>); <span class="comment">// 创建map实例</span></span></span><br><span class="line"><span class="language-javascript">map.<span class="title function_">centerAndZoom</span>(<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="number">116.36239048877775</span>, <span class="number">39.938322220559</span>), <span class="number">15</span>);<span class="comment">// 初始化地图,设置中心点坐标和地图级别</span></span></span><br><span class="line"><span class="language-javascript">map.<span class="title function_">enableScrollWheelZoom</span>(<span class="literal">true</span>);<span class="comment">//鼠标滚轮缩放</span></span></span><br><span class="line"><span class="language-javascript">map.<span class="title function_">addControl</span>(<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">MapTypeControl</span>()); <span class="comment">//添加切换地图类型附件</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="2、绘制折线路径点"><a href="#2、绘制折线路径点" class="headerlink" title="2、绘制折线路径点"></a>2、绘制折线路径点</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">PointArr</span> = [</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36239048877775</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.938322220559</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36239048877775</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.93793496684673</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36239048877775</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.93760303333522</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36246235321855</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.936883838492925</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36246235321855</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.93627528306042</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36246235321855</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.93577737001302</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36246235321855</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.93527945331416</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36260608210014</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.93472620825511</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36260608210014</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.933785681309004</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36274981098174</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.9334537275117</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36267794654094</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.93295579377289</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36267794654094</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.932402529780596</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36267794654094</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.93184926128044</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36267794654094</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.93063205471247</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36274981098174</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92902752181022</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36282167542254</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92841889596463</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36282167542254</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92781026466464</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36289353986334</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92703563512155</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36289353986334</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.926260996743295</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36282167542254</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.925541681766745</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36289353986334</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92449036155915</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36296540430413</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92410302895963</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36332472650813</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.9228303491527</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36382777759371</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.9228303491527</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36469015088329</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.922775014707135</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36619930414005</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.922719680216495</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36655862634404</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92288568355318</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36627116858085</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.9242690289156</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36670235522564</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.924324362144105</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36742099963362</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.924324362144105</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.3684989662456</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.924324362144105</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.36943320397597</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92437969532753</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.37029557726555</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92437969532753</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.37094235723274</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92437969532753</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.37158913719992</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92449036155915</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.3723796460487</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92443502846588</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.37302642601588</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92449036155915</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.37360134154227</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92460102761046</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.37439185039105</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.924545694607346</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.37496676591743</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.924545694607346</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.37546981700302</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92460102761046</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.37582913920701</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.924656360568505</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.37669151249659</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.924656360568505</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.37719456358218</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92471169348146</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.37776947910857</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.924767026349365</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.37848812351655</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.924822359172175</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.37906303904293</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.924767026349365</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.37963795456932</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.924822359172175</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.38006914121411</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.924767026349365</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.38006914121411</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92443502846588</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.38006914121411</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.923992362096946</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.3801410056549</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92332835713435</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.3801410056549</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.9229410179086</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.3802128700957</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92227700266861</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.3802847345365</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92155764550042</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.3802847345365</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92089361673764</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.3803565989773</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.920229581483945</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.3803565989773</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.91962087679934</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.3803565989773</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.918956829104815</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.3803565989773</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.91829277491945</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.3804284634181</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.91762871424328</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.3804284634181</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.91696464707632</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.3805721922997</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.91524911018613</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.3805003278589</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.914806383957064</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.3805003278589</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.914363654843264</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.3803565989773</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.9136442138807</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.38186575223406</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.91331216163647</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.38315931216843</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.913422845898175</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.3844528721028</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.913422845898175</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.38553083871477</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.91331216163647</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.38739931417552</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.913422845898175</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.3885491452283</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.913367503789864</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.38977084072187</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.91358887195269</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.39092067177464</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.91353352997958</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.39199863838661</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.9136442138807</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.39415457161057</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.9136442138807</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.39551999598574</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.91381023939432</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.3967416914793</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.913754897601514</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.39774779365048</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.913865581142055</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.39810711585447</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.913920922844696</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.39817898029527</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.91469570194906</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.39817898029527</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.915304450761944</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.39810711585447</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.91624523365416</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.39810711585447</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.91707532538824</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.39796338697288</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.91773939147339</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.39803525141367</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.9184587890743</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.39796338697288</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.91912284163695</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.39789152253208</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92045092728972</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.39774779365048</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.9212256319304</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.39774779365048</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92200032773621</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.39774779365048</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.922719680216495</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.39767592920968</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.923605026657604</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.39753220032809</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92460102761046</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.39753220032809</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.925541681766745</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.39746033588729</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92637165990969</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.39746033588729</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.928474225812344</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.39896948914405</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92958081330031</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.39997559131523</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92958081330031</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.40148474457199</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92974679986831</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.40292203338795</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92980212863415</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.40443118664471</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92980212863415</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.40579661101988</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92980212863415</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.40716203539505</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92991278603061</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.40852745977021</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92985745735493</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.4088867819742</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92991278603061</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.4090305108558</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.929470155362914</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.4091023752966</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.928861533484174</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.4091023752966</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92786559500822</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.4092461041782</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92637165990969</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.40946169750059</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92388169505393</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.40953356194139</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92244300708714</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.40938983305979</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92161298093767</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.40938983305979</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.92039559090589</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.40938983305979</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.919178179057525</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.40960542638219</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.91685396858412</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.40960542638219</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.91574717374566</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.40960542638219</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.914751042975595</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.40974915526378</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.91419763068185</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.40802440868462</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.91414228920457</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.40665898430946</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.91419763068185</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.40594033990148</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.91408694768221</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.40594033990148</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.91309079257217</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.40579661101988</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.9118179064571</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.40608406878307</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.91087706226448</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.40615593322387</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.91010223961911</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.40629966210547</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.909272062695706</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.40608406878307</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.90871860577934</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.40615593322387</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.90766702522079</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.40601220434228</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.90689216597646</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.4050061021711</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.90667077599834</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.40320949115115</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.90667077599834</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.40134101569039</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.90661542839114</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.39904135358485</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.90683681854954</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;lng&quot;</span>:<span class="number">116.39746033588729</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">39.90667077599834</span>&#125;]</span><br></pre></td></tr></table></figure><h1 id="3、设置小车图标"><a href="#3、设置小车图标" class="headerlink" title="3、设置小车图标"></a>3、设置小车图标</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myIcon=<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Icon</span>(<span class="string">&quot;http://lbsyun.baidu.com/jsdemo/img/Mario.png&quot;</span>, <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Size</span>(<span class="number">32</span>, <span class="number">70</span>), &#123; </span><br><span class="line"></span><br><span class="line"><span class="attr">offset</span>: <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Size</span>(<span class="number">0</span>, -<span class="number">5</span>),   </span><br><span class="line"><span class="comment">//相当于CSS精灵</span></span><br><span class="line"><span class="attr">imageOffset</span>: <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Size</span>(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line"><span class="comment">//图片的偏移量。为了是图片底部中心对准坐标点。</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">var</span> carMk;<span class="comment">//先将终点坐标展示的mark对象定义</span></span><br><span class="line">       <span class="comment">//小车行驶图标</span></span><br><span class="line">       <span class="keyword">var</span> drivingPoint = myIcon;</span><br><span class="line">       <span class="comment">//终点图标</span></span><br><span class="line">       <span class="keyword">var</span> terminalPoint = myIcon;</span><br></pre></td></tr></table></figure><h1 id="4、展示实时画线的效果"><a href="#4、展示实时画线的效果" class="headerlink" title="4、展示实时画线的效果"></a>4、展示实时画线的效果</h1><p>我们将数组300毫秒取出一个，这里时间间隔可以根据自己需求设定。然后将取出值存储到新的数组里，通过数组拿出前后两个值进行画线。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line">       <span class="keyword">var</span> interval = <span class="built_in">setInterval</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">           <span class="keyword">if</span> (i &gt;= <span class="title class_">PointArr</span>.<span class="property">length</span>) &#123;</span><br><span class="line">               <span class="built_in">clearInterval</span>(interval);</span><br><span class="line">               <span class="keyword">return</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="title function_">drawLine</span>(map,<span class="title class_">PointArr</span>[i],<span class="title class_">PointArr</span>[i+<span class="number">1</span>]);<span class="comment">//画线调用</span></span><br><span class="line">           i = i + <span class="number">1</span>;</span><br><span class="line">       &#125;, <span class="number">300</span>);</span><br></pre></td></tr></table></figure><h1 id="5、绘制运动路径调用方法："><a href="#5、绘制运动路径调用方法：" class="headerlink" title="5、绘制运动路径调用方法："></a>5、绘制运动路径调用方法：</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">drawLine</span>(<span class="params">map,PointArr,PointArrNext</span>) &#123;</span><br><span class="line"></span><br><span class="line">         <span class="keyword">if</span>(<span class="title class_">PointArrNext</span>!=<span class="literal">undefined</span>) &#123;</span><br><span class="line">             <span class="keyword">var</span> polyline = <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Polyline</span>(</span><br><span class="line">                 [</span><br><span class="line">                     <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="title class_">PointArr</span>.<span class="property">lng</span>, <span class="title class_">PointArr</span>.<span class="property">lat</span>),</span><br><span class="line">                     <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="title class_">PointArrNext</span>.<span class="property">lng</span>, <span class="title class_">PointArrNext</span>.<span class="property">lat</span>)</span><br><span class="line">                 ],</span><br><span class="line">                 &#123;</span><br><span class="line">                     <span class="attr">strokeColor</span>: <span class="string">&quot;red&quot;</span>,</span><br><span class="line">                     <span class="attr">strokeWeight</span>: <span class="number">7</span>,</span><br><span class="line">                     <span class="attr">strokeOpacity</span>: <span class="number">1</span></span><br><span class="line">                 &#125;);   <span class="comment">//创建折线</span></span><br><span class="line">             map.<span class="title function_">addOverlay</span>(polyline);<span class="comment">//将折线添加到地图上</span></span><br><span class="line">             <span class="title function_">addMarkerEnd</span>(<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="title class_">PointArrNext</span>.<span class="property">lng</span>, <span class="title class_">PointArrNext</span>.<span class="property">lat</span>), <span class="string">&#x27;小车行驶&#x27;</span>, map, <span class="title class_">PointArrNext</span>, <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="title class_">PointArr</span>.<span class="property">lng</span>, <span class="title class_">PointArr</span>.<span class="property">lat</span>));<span class="comment">//添加图标</span></span><br><span class="line">         &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">             <span class="title function_">addMarkerEnd</span>(<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(<span class="title class_">PointArr</span>.<span class="property">lng</span>, <span class="title class_">PointArr</span>.<span class="property">lat</span>), <span class="string">&#x27;终点&#x27;</span>, map);<span class="comment">//添加终点图标</span></span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure><h1 id="6、模拟出运动效果"><a href="#6、模拟出运动效果" class="headerlink" title="6、模拟出运动效果"></a>6、模拟出运动效果</h1><p>交互没关，在画下一次图标时候先将前一个图标清除掉，重新绘制新位置的图标；</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">addMarkerEnd</span>(<span class="params">point, name,mapInit,trackUnit,prePoint</span>) &#123;</span><br><span class="line">          <span class="keyword">if</span>(name==<span class="string">&quot;小车行驶&quot;</span>)&#123;</span><br><span class="line">              <span class="keyword">if</span>(carMk)&#123;<span class="comment">//先判断第一次进来的时候这个值有没有定义，有的话就清除掉上一次的。然后在进行画图标。第一次进来时候没有定义也就不走这块，直接进行画图标</span></span><br><span class="line">                  mapInit.<span class="title function_">removeOverlay</span>(carMk);</span><br><span class="line">              &#125;</span><br><span class="line">              carMk = <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Marker</span>(point,&#123;<span class="attr">icon</span>:drivingPoint&#125;);  <span class="comment">// 创建标注</span></span><br><span class="line">              <span class="title function_">getCarAngle</span>(point,prePoint);<span class="comment">// js求解两点之间的角度</span></span><br><span class="line">              carMk.<span class="title function_">setRotation</span>(<span class="title function_">getCarAngle</span>(point,prePoint)-<span class="number">90</span>);<span class="comment">// 旋转的角度</span></span><br><span class="line">              mapInit.<span class="title function_">addOverlay</span>(carMk);               <span class="comment">// 将标注添加到地图中</span></span><br><span class="line"><span class="comment">//carMk.setAnimation(BMAP_ANIMATION_BOUNCE); //跳动的动画</span></span><br><span class="line">          &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">              mapInit.<span class="title function_">removeOverlay</span>(carMk);</span><br><span class="line">              <span class="comment">// carMk = new BMap.Marker(point,&#123;icon:terminalPoint&#125;);  // 创建标注</span></span><br><span class="line">              <span class="comment">// mapInit.addOverlay(carMk);</span></span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><h1 id="7、获得角度的函数"><a href="#7、获得角度的函数" class="headerlink" title="7、获得角度的函数"></a>7、获得角度的函数</h1><p>比如汽车运动时，图标肯定是有朝向的，比如车头永远朝前面，所以我们需要对角度方向进行调整，所以我们就根据点的经纬度调整方向，代码如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getCarAngle</span>(<span class="params">n,next</span>)&#123;</span><br><span class="line">          <span class="keyword">var</span> ret</span><br><span class="line">          <span class="keyword">var</span> w1 = n.<span class="property">lat</span>/<span class="number">180</span> * <span class="title class_">Math</span>.<span class="property">PI</span></span><br><span class="line">          <span class="keyword">var</span> j1 = n.<span class="property">lng</span>/<span class="number">180</span> * <span class="title class_">Math</span>.<span class="property">PI</span></span><br><span class="line">          <span class="keyword">var</span> w2 = next.<span class="property">lat</span>/<span class="number">180</span> * <span class="title class_">Math</span>.<span class="property">PI</span></span><br><span class="line">          <span class="keyword">var</span> j2 = next.<span class="property">lng</span>/<span class="number">180</span> * <span class="title class_">Math</span>.<span class="property">PI</span></span><br><span class="line">          ret = <span class="number">4</span> * <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="title class_">Math</span>.<span class="title function_">sin</span>((w1 - w2) / <span class="number">2</span>), <span class="number">2</span>) - <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="title class_">Math</span>.<span class="title function_">sin</span>((j1 - j2) / <span class="number">2</span>) * (<span class="title class_">Math</span>.<span class="title function_">cos</span>(w1) - <span class="title class_">Math</span>.<span class="title function_">cos</span>(w2)), <span class="number">2</span>);</span><br><span class="line">          ret = <span class="title class_">Math</span>.<span class="title function_">sqrt</span>(ret);</span><br><span class="line">          <span class="comment">// var temp = Math.sin(Math.abs(j1 - j2) / 2) * (Math.cos(w1) + Math.cos(w2));</span></span><br><span class="line">          <span class="keyword">var</span> temp = <span class="title class_">Math</span>.<span class="title function_">sin</span>((j1 - j2) / <span class="number">2</span>) * (<span class="title class_">Math</span>.<span class="title function_">cos</span>(w1) + <span class="title class_">Math</span>.<span class="title function_">cos</span>(w2));</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(temp)</span><br><span class="line">          ret = ret/temp;</span><br><span class="line">          ret = <span class="title class_">Math</span>.<span class="title function_">atan</span>(ret) / <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">180</span> ;</span><br><span class="line">          ret += <span class="number">90</span>;</span><br><span class="line">          <span class="comment">// 这里用如此臃肿的if..else是为了判定追踪单个点的具体情况,从而调整ret的值</span></span><br><span class="line">          <span class="keyword">if</span>(j1-j2 &lt; <span class="number">0</span>)&#123;</span><br><span class="line">              <span class="keyword">if</span>(w1-w2 &lt; <span class="number">0</span>)&#123;</span><br><span class="line">                  ret;</span><br><span class="line">              &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                  ret = -ret+<span class="number">180</span>;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">              <span class="keyword">if</span>(w1-w2 &lt; <span class="number">0</span>)&#123;</span><br><span class="line">                  ret = <span class="number">180</span>+ret;</span><br><span class="line">              &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                  ret = -ret;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">return</span> ret ;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><h1 id="8、删除折线覆盖物"><a href="#8、删除折线覆盖物" class="headerlink" title="8、删除折线覆盖物"></a>8、删除折线覆盖物</h1><p>在这个基础上添加一个功能，当小车到达终点时，将绘制的折线全部删除。在百度地图中所有的覆盖物都是通过map.addOverlay存储的，也就是存在同一个地方，正好轨迹覆盖物是折线，那就找到所有的折线覆盖物删除即可。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">addMarkerEnd</span>(<span class="params">point, name,mapInit,trackUnit,prePoint,p</span>) &#123;</span><br><span class="line">          <span class="keyword">if</span>(name==<span class="string">&quot;小车行驶&quot;</span>)&#123;</span><br><span class="line">              <span class="keyword">if</span>(carMk)&#123;<span class="comment">//先判断第一次进来的时候这个值有没有定义，有的话就清除掉上一次的。然后在进行画图标。第一次进来时候没有定义也就不走这块，直接进行画图标</span></span><br><span class="line">                  mapInit.<span class="title function_">removeOverlay</span>(carMk);</span><br><span class="line">              &#125;</span><br><span class="line">              carMk = <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Marker</span>(point,&#123;<span class="attr">icon</span>:drivingPoint&#125;);  <span class="comment">// 创建标注</span></span><br><span class="line">              <span class="title function_">getCarAngle</span>(point,prePoint);<span class="comment">// js求解两点之间的角度</span></span><br><span class="line">              carMk.<span class="title function_">setRotation</span>(<span class="title function_">getCarAngle</span>(point,prePoint)-<span class="number">90</span>);<span class="comment">// 旋转的角度</span></span><br><span class="line">              mapInit.<span class="title function_">addOverlay</span>(carMk);               <span class="comment">// 将标注添加到地图中</span></span><br><span class="line"><span class="comment">//carMk.setAnimation(BMAP_ANIMATION_BOUNCE); //跳动的动画</span></span><br><span class="line">          &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">              mapInit.<span class="title function_">removeOverlay</span>(carMk);</span><br><span class="line">              <span class="keyword">var</span> allOverlay = map.<span class="title function_">getOverlays</span>();<span class="comment">////返回地图上的所有覆盖物</span></span><br><span class="line">                  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; allOverlay.<span class="property">length</span>; i++)&#123;</span><br><span class="line">                      <span class="keyword">if</span>(allOverlay[i].<span class="title function_">toString</span>().<span class="title function_">indexOf</span>(<span class="string">&quot;Polyline&quot;</span>) &gt; <span class="number">0</span>) </span><br><span class="line">                      &#123;<span class="comment">//删除折线</span></span><br><span class="line">                          map.<span class="title function_">removeOverlay</span>(allOverlay[i]);</span><br><span class="line">                      &#125;</span><br><span class="line">                  &#125;</span><br><span class="line">              <span class="comment">// carMk = new BMap.Marker(point,&#123;icon:terminalPoint&#125;);  // 创建标注</span></span><br><span class="line">              <span class="comment">// mapInit.addOverlay(carMk);</span></span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;​	要求：一个基于离线百度地图(此方法在线也适用)实时展示车或者其他对象的运行轨迹，且在运行过程中需要车头方向随着角度进行变化。&lt;/p&gt;
&lt;h1 id=&quot;1、创建地图&quot;&gt;&lt;a href=&quot;#1、创建地图&quot; class=&quot;headerlink&quot; title=&quot;1、创建地图&quot;&gt;</summary>
      
    
    
    
    
    <category term="Anylogic" scheme="http://example.com/tags/Anylogic/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot运维实用篇之日志</title>
    <link href="http://example.com/2022/06/14/SpringBoot%E8%BF%90%E7%BB%B4%E5%AE%9E%E7%94%A8%E7%AF%87%E4%B9%8B%E6%97%A5%E5%BF%97/"/>
    <id>http://example.com/2022/06/14/SpringBoot%E8%BF%90%E7%BB%B4%E5%AE%9E%E7%94%A8%E7%AF%87%E4%B9%8B%E6%97%A5%E5%BF%97/</id>
    <published>2022-06-14T07:19:51.000Z</published>
    <updated>2022-06-15T01:19:58.736Z</updated>
    
    <content type="html"><![CDATA[<p>日志其实就是记录程序日常运行的信息，主要作用如下：</p><ul><li>编程期调试代码</li><li>运营期记录信息</li><li>记录日常运营重要信息（峰值流量、平均响应时长……）</li><li>记录应用报错信息（错误堆栈）</li><li>记录运维过程数据（扩容、宕机、报警……）</li></ul><h1 id="1、代码中使用日志工具记录日志"><a href="#1、代码中使用日志工具记录日志" class="headerlink" title="1、代码中使用日志工具记录日志"></a>1、代码中使用日志工具记录日志</h1><p>​日志的使用格式非常固定，直接上操作步骤：</p><p><strong>步骤①</strong>：添加日志记录操作</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/books&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> <span class="keyword">extends</span> <span class="title class_">BaseClass</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(BookController.class);</span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getById</span><span class="params">()</span>&#123;</span><br><span class="line">        log.debug(<span class="string">&quot;debug...&quot;</span>);</span><br><span class="line">        log.info(<span class="string">&quot;info...&quot;</span>);</span><br><span class="line">        log.warn(<span class="string">&quot;warn...&quot;</span>);</span><br><span class="line">        log.error(<span class="string">&quot;error...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;springboot is running...2&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​上述代码中log对象就是用来记录日志的对象，下面的log.debug，log.info这些操作就是写日志的API了。</p><p><strong>步骤②</strong>：设置日志输出级别</p><p>​日志设置好以后可以根据设置选择哪些参与记录。这里是根据日志的级别来设置的。日志的级别分为6种，分别是：</p><ul><li>TRACE：运行堆栈信息，使用率低</li><li>DEBUG：程序员调试代码使用</li><li>INFO：记录运维过程数据</li><li>WARN：记录运维过程报警数据</li><li>ERROR：记录错误堆栈信息</li><li>FATAL：灾难信息，合并计入ERROR</li></ul><p>​一般情况下，开发时候使用DEBUG，上线后使用INFO，运维信息记录使用WARN即可。下面就设置一下日志级别：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启debug模式，输出调试信息，常用于检查系统运行状况</span></span><br><span class="line"><span class="attr">debug:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>​这么设置太简单粗暴了，日志系统通常都提供了细粒度的控制</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启debug模式，输出调试信息，常用于检查系统运行状况</span></span><br><span class="line"><span class="attr">debug:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置日志级别，root表示根节点，即整体应用日志级别</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line"><span class="attr">level:</span></span><br><span class="line">    <span class="attr">root:</span> <span class="string">debug</span></span><br></pre></td></tr></table></figure><p>​还可以再设置更细粒度的控制</p><p><strong>步骤③</strong>：设置日志组，控制指定包对应的日志输出级别，也可以直接控制指定包对应的日志输出级别</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">logging:</span></span><br><span class="line"><span class="comment"># 设置日志组</span></span><br><span class="line">    <span class="attr">group:</span></span><br><span class="line">    <span class="comment"># 自定义组名，设置当前组中所包含的包</span></span><br><span class="line">        <span class="attr">ebank:</span> <span class="string">com.itheima.controller</span></span><br><span class="line">    <span class="attr">level:</span></span><br><span class="line">    <span class="attr">root:</span> <span class="string">warn</span></span><br><span class="line">        <span class="comment"># 为对应组设置日志级别</span></span><br><span class="line">        <span class="attr">ebank:</span> <span class="string">debug</span></span><br><span class="line">    <span class="comment"># 为对包设置日志级别</span></span><br><span class="line">        <span class="attr">com.itheima.controller:</span> <span class="string">debug</span></span><br></pre></td></tr></table></figure><p>​说白了就是总体设置一下，每个包设置一下，如果感觉设置的麻烦，就先把包分个组，对组设置，没了，就这些。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a><strong>总结</strong></h2><ol><li>日志用于记录开发调试与运维过程消息</li><li>日志的级别共6种，通常使用4种即可，分别是DEBUG，INFO,WARN,ERROR</li><li>可以通过日志组或代码包的形式进行日志显示级别的控制</li></ol><h1 id="2、教你一招：优化日志对象创建代码"><a href="#2、教你一招：优化日志对象创建代码" class="headerlink" title="2、教你一招：优化日志对象创建代码"></a>2、教你一招：优化日志对象创建代码</h1><p>​写代码的时候每个类都要写创建日志记录对象，这个可以优化一下，使用前面用过的lombok技术给我们提供的工具类即可。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/books&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> <span class="keyword">extends</span> <span class="title class_">BaseClass</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(BookController.class);<span class="comment">//这一句可以不写了</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​导入lombok后使用注解搞定，日志对象名为log</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span><span class="comment">//这个注解替代了下面那一行</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/books&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> <span class="keyword">extends</span> <span class="title class_">BaseClass</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(BookController.class);<span class="comment">//这一句可以不写了</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a><strong>总结</strong></h2><ol><li>基于lombok提供的@Slf4j注解为类快速添加日志对象</li></ol><h1 id="3、日志输出格式控制"><a href="#3、日志输出格式控制" class="headerlink" title="3、日志输出格式控制"></a>3、日志输出格式控制</h1><p>​日志已经能够记录了，但是目前记录的格式是SpringBoot给我们提供的，如果想自定义控制就需要自己设置了。先分析一下当前日志的记录格式。</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://s2.loli.net/2022/06/15/W1kxtXVAfGcYnv5.png"                      alt="image-20220614154939064"                ></p><p>​对于单条日志信息来说，日期，触发位置，记录信息是最核心的信息。级别用于做筛选过滤，PID与线程名用于做精准分析。了解这些信息后就可以DIY日志格式了。本课程不做详细的研究，有兴趣的小伙伴可以学习相关的知识。下面给出课程中模拟的官方日志模板的书写格式，便于大家学习。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">logging:</span></span><br><span class="line"><span class="attr">pattern:</span></span><br><span class="line">    <span class="attr">console:</span> <span class="string">&quot;%d %clr(%p) --- [%16t] %clr(%-40.40c)&#123;cyan&#125; : %m %n&quot;</span></span><br></pre></td></tr></table></figure><h2 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a><strong>总结</strong></h2><ol><li>日志输出格式设置规则</li></ol><h1 id="4、文件记录日志"><a href="#4、文件记录日志" class="headerlink" title="4、文件记录日志"></a>4、文件记录日志</h1><p>​日志信息显示，记录已经控制住了，下面就要说一下日志的转存了。日志不能仅显示在控制台上，要把日志记录到文件中，方便后期维护查阅。</p><p>​对于日志文件的使用存在各种各样的策略，例如每日记录，分类记录，报警后记录等。这里主要研究日志文件如何记录。</p><p>​记录日志到文件中格式非常简单，设置日志文件名即可。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">logging:</span></span><br><span class="line"><span class="attr">file:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">server.log</span></span><br></pre></td></tr></table></figure><p>​虽然使用上述格式可以将日志记录下来了，但是面对线上的复杂情况，一个文件记录肯定是不能够满足运维要求的，通常会每天记录日志文件，同时为了便于维护，还要限制每个日志文件的大小。下面给出日志文件的常用配置方式：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">logging:</span></span><br><span class="line"><span class="attr">logback:</span></span><br><span class="line">    <span class="attr">rollingpolicy:</span></span><br><span class="line">        <span class="attr">max-file-size:</span> <span class="string">3KB</span></span><br><span class="line">            <span class="attr">file-name-pattern:</span> <span class="string">server.%d&#123;yyyy-MM-dd&#125;.%i.log</span></span><br></pre></td></tr></table></figure><p>​以上格式是基于logback日志技术设置每日日志文件的设置格式，要求容量到达3KB以后就转存信息到第二个文件中。文件命名规则中的%d标识日期，%i是一个递增变量，用于区分日志文件。</p><h2 id="总结-3"><a href="#总结-3" class="headerlink" title="总结"></a><strong>总结</strong></h2><ol><li>日志记录到文件</li><li>日志文件格式设置</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;日志其实就是记录程序日常运行的信息，主要作用如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;编程期调试代码&lt;/li&gt;
&lt;li&gt;运营期记录信息&lt;/li&gt;
&lt;li&gt;记录日常运营重要信息（峰值流量、平均响应时长……）&lt;/li&gt;
&lt;li&gt;记录应用报错信息（错误堆栈）&lt;/li&gt;
&lt;li&gt;记录运维过</summary>
      
    
    
    
    
    <category term="SpringBoot" scheme="http://example.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot运维实用篇之多环境开发</title>
    <link href="http://example.com/2022/06/14/SpringBoot%E8%BF%90%E7%BB%B4%E5%AE%9E%E7%94%A8%E7%AF%87%E4%B9%8B%E5%A4%9A%E7%8E%AF%E5%A2%83%E5%BC%80%E5%8F%91/"/>
    <id>http://example.com/2022/06/14/SpringBoot%E8%BF%90%E7%BB%B4%E5%AE%9E%E7%94%A8%E7%AF%87%E4%B9%8B%E5%A4%9A%E7%8E%AF%E5%A2%83%E5%BC%80%E5%8F%91/</id>
    <published>2022-06-14T02:52:56.000Z</published>
    <updated>2022-06-14T03:15:49.418Z</updated>
    
    <content type="html"><![CDATA[<p>​什么是多环境？其实就是说你的电脑上写的程序最终要放到别人的服务器上去运行。每个计算机环境不一样，这就是多环境。常见的多环境开发主要兼顾3种环境设置，开发环境——自己用的，测试环境——自己公司用的，生产环境——甲方爸爸用的。因为这是绝对不同的三台电脑，所以环境肯定有所不同，比如连接的数据库不一样，设置的访问端口不一样等等。</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://s2.loli.net/2022/06/14/9w74XHC5uiIZbhp.png"                      alt="image-20220614105355833"                ></p><h1 id="1、多环境开发（yaml单一文件版）"><a href="#1、多环境开发（yaml单一文件版）" class="headerlink" title="1、多环境开发（yaml单一文件版）"></a>1、多环境开发（yaml单一文件版）</h1><p>​那什么是多环境开发？就是针对不同的环境设置不同的配置属性即可。比如你自己开发时，配置你的端口如下：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br></pre></td></tr></table></figure><p>​如何想设计两组环境呢？中间使用三个减号分隔开</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">81</span></span><br></pre></td></tr></table></figure><p>​如何区分两种环境呢？</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">profiles:</span> <span class="string">pro</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">profiles:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">port:</span> <span class="number">81</span></span><br></pre></td></tr></table></figure><p>​那用哪一个呢？设置默认启动哪个就可以了</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">profiles:</span></span><br><span class="line"><span class="attr">active:</span> <span class="string">pro</span><span class="comment"># 启动pro</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">profiles:</span> <span class="string">pro</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">profiles:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">port:</span> <span class="number">81</span></span><br></pre></td></tr></table></figure><p>​其中关于环境名称定义上述格式是过时格式，标准格式如下</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">config:</span></span><br><span class="line">    <span class="attr">activate:</span></span><br><span class="line">        <span class="attr">on-profile:</span> <span class="string">pro</span></span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a><strong>总结</strong></h2><ol><li>多环境开发需要设置若干种常用环境，例如开发、生产、测试环境</li><li>yaml格式中设置多环境使用—区分环境设置边界</li><li>每种环境的区别在于加载的配置属性不同</li><li>启用某种环境时需要指定启动时使用该环境</li></ol><h1 id="2、多环境开发（yaml多文件版）"><a href="#2、多环境开发（yaml多文件版）" class="headerlink" title="2、多环境开发（yaml多文件版）"></a>2、多环境开发（yaml多文件版）</h1><p>​将所有的配置都放在一个配置文件中，尤其是每一个配置应用场景都不一样，这显然不合理，于是就有了将一个配置文件拆分成多个配置文件的想法。拆分后，每个配置文件中写自己的配置，主配置文件中写清楚用哪一个配置文件就好了。</p><p><strong>主配置文件</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">profiles:</span></span><br><span class="line"><span class="attr">active:</span> <span class="string">pro</span><span class="comment"># 启动pro</span></span><br></pre></td></tr></table></figure><p><strong>环境配置文件</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">port:</span> <span class="number">80</span></span><br></pre></td></tr></table></figure><p>​环境配置文件因为每一个都是配置自己的项，所以连名字都不用写里面了。那问题是如何区分这是哪一组配置呢？使用文件名区分。</p><p><strong>application-pro.yaml</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">port:</span> <span class="number">80</span></span><br></pre></td></tr></table></figure><p><strong>application-dev.yaml</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">port:</span> <span class="number">81</span></span><br></pre></td></tr></table></figure><p>​文件的命名规则为：application-环境名.yml。</p><p>​在配置文件中，如果某些配置项所有环境都一样，可以将这些项写入到主配置中，只有哪些有区别的项才写入到环境配置文件中。</p><ul><li>主配置文件中设置公共配置（全局）</li><li>环境分类配置文件中常用于设置冲突属性（局部）</li></ul><h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a><strong>总结</strong></h2><ol><li>可以使用独立配置文件定义环境属性</li><li>独立配置文件便于线上系统维护更新并保障系统安全性</li></ol><h1 id="3、多环境开发（properties多文件版）"><a href="#3、多环境开发（properties多文件版）" class="headerlink" title="3、多环境开发（properties多文件版）"></a>3、多环境开发（properties多文件版）</h1><p>​SpringBoot最早期提供的配置文件格式是properties格式的，这种格式的多环境配置也了解一下吧。</p><p><strong>主配置文件</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.profiles.active</span>=<span class="string">pro</span></span><br></pre></td></tr></table></figure><p><strong>环境配置文件</strong></p><p><strong>application-pro.properties</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">80</span></span><br></pre></td></tr></table></figure><p><strong>application-dev.properties</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">81</span></span><br></pre></td></tr></table></figure><p>​文件的命名规则为：application-环境名.properties。</p><h2 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a><strong>总结</strong></h2><ol><li>properties文件多环境配置仅支持多文件格式</li></ol><h1 id="4、多环境开发独立配置文件书写技巧"><a href="#4、多环境开发独立配置文件书写技巧" class="headerlink" title="4、多环境开发独立配置文件书写技巧"></a>4、多环境开发独立配置文件书写技巧</h1><p>​作为程序员在搞配置的时候往往处于一种分久必合合久必分的局面。开始先写一起，后来为了方便维护就拆分。对于多环境开发也是如此，下面给大家说一下如何基于多环境开发做配置独立管理，务必掌握。</p><p><strong>准备工作</strong></p><p>​将所有的配置根据功能对配置文件中的信息进行拆分，并制作成独立的配置文件，命名规则如下</p><ul><li>application-devDB.yml</li><li>application-devRedis.yml</li><li>application-devMVC.yml</li></ul><p><strong>使用</strong></p><p>​使用include属性在激活指定环境的情况下，同时对多个环境进行加载使其生效，多个环境间使用逗号分隔</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">devDB,devRedis,devMVC</span></span><br></pre></td></tr></table></figure><p>​比较一下，现在相当于加载dev配置时，再加载对应的3组配置，从结构上就很清晰，用了什么，对应的名称是什么</p><p><strong>注意</strong></p><p>​当主环境dev与其他环境有相同属性时，主环境属性生效；其他环境中有相同属性时，最后加载的环境属性生效</p><p><strong>改良</strong></p><p>​但是上面的设置也有一个问题，比如我要切换dev环境为pro时，include也要修改。因为include属性只能使用一次，这就比较麻烦了。SpringBoot从2.4版开始使用group属性替代include属性，降低了配置书写量。简单说就是我先写好，你爱用哪个用哪个。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span></span><br><span class="line">        <span class="attr">group:</span></span><br><span class="line">        <span class="attr">&quot;dev&quot;:</span> <span class="string">devDB,devRedis,devMVC</span></span><br><span class="line">      <span class="attr">&quot;pro&quot;:</span> <span class="string">proDB,proRedis,proMVC</span></span><br><span class="line">      <span class="attr">&quot;test&quot;:</span> <span class="string">testDB,testRedis,testMVC</span></span><br></pre></td></tr></table></figure><p>​现在再来看，如果切换dev到pro，只需要改一下是不是就结束了？完美！</p><h2 id="总结-3"><a href="#总结-3" class="headerlink" title="总结"></a><strong>总结</strong></h2><ol><li>多环境开发使用group属性设置配置文件分组，便于线上维护管理</li></ol><h1 id="5、多环境开发控制"><a href="#5、多环境开发控制" class="headerlink" title="5、多环境开发控制"></a>5、多环境开发控制</h1><p>​多环境开发到这里基本上说完了，最后说一个冲突问题。就是maven和SpringBoot同时设置多环境的话怎么搞。</p><p>​要想处理这个冲突问题，你要先理清一个关系，究竟谁在多环境开发中其主导地位。也就是说如果现在都设置了多环境，谁的应该是保留下来的，另一个应该遵从相同的设置。</p><p>​maven是做什么的？项目构建管理的，最终生成代码包的，SpringBoot是干什么的？简化开发的。简化，又不是其主导作用。最终还是要靠maven来管理整个工程，所以SpringBoot应该听maven的。整个确认后下面就好做了。大体思想如下：</p><ul><li>先在maven环境中设置用什么具体的环境</li><li>在SpringBoot中读取maven设置的环境即可</li></ul><p><strong>maven中设置多环境（使用属性方式区分环境）</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">profiles</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>env_dev<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">profile.active</span>&gt;</span>dev<span class="tag">&lt;/<span class="name">profile.active</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activation</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">activeByDefault</span>&gt;</span>true<span class="tag">&lt;/<span class="name">activeByDefault</span>&gt;</span><span class="comment">&lt;!--默认启动环境--&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">activation</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>env_pro<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">profile.active</span>&gt;</span>pro<span class="tag">&lt;/<span class="name">profile.active</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">profiles</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>SpringBoot中读取maven设置值</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">@profile.active@</span></span><br></pre></td></tr></table></figure><p>​上面的@属性名@就是读取maven中配置的属性值的语法格式。</p><p><strong>总结</strong></p><ol><li>当Maven与SpringBoot同时对多环境进行控制时，以Mavn为主，SpringBoot使用@..@占位符读取Maven对应的配置属性值</li><li>基于SpringBoot读取Maven配置属性的前提下，如果在Idea下测试工程时pom.xml每次更新需要手动compile方可生效</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;​		什么是多环境？其实就是说你的电脑上写的程序最终要放到别人的服务器上去运行。每个计算机环境不一样，这就是多环境。常见的多环境开发主要兼顾3种环境设置，开发环境——自己用的，测试环境——自己公司用的，生产环境——甲方爸爸用的。因为这是绝对不同的三台电脑，所以环境肯定有所不</summary>
      
    
    
    
    
    <category term="SpringBoot" scheme="http://example.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot运维实用篇之配置高级</title>
    <link href="http://example.com/2022/06/14/SpringBoot%E8%BF%90%E7%BB%B4%E5%AE%9E%E7%94%A8%E7%AF%87%E4%B9%8B%E9%85%8D%E7%BD%AE%E9%AB%98%E7%BA%A7/"/>
    <id>http://example.com/2022/06/14/SpringBoot%E8%BF%90%E7%BB%B4%E5%AE%9E%E7%94%A8%E7%AF%87%E4%B9%8B%E9%85%8D%E7%BD%AE%E9%AB%98%E7%BA%A7/</id>
    <published>2022-06-14T01:07:50.000Z</published>
    <updated>2022-06-14T02:05:38.617Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1、临时属性设置"><a href="#1、临时属性设置" class="headerlink" title="1、临时属性设置"></a>1、临时属性设置</h1><p>​目前我们的程序包打好了，可以发布了。但是程序包打好以后，里面的配置都已经是固定的了，比如配置了服务器的端口是8080。如果我要启动项目，发现当前我的服务器上已经有应用启动起来并且占用了8080端口，这个时候就尴尬了。难道要重新把打包好的程序修改一下吗？比如我要把打包好的程序启动端口改成80。</p><p>​SpringBoot提供了灵活的配置方式，如果你发现你的项目中有个别属性需要重新配置，可以使用临时属性的方式快速修改某些配置。方法也特别简单，在启动的时候添加上对应参数就可以了。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java –jar springboot.jar –-server.port=<span class="number">80</span></span><br></pre></td></tr></table></figure><p>​上面的命令是启动SpringBoot程序包的命令，在命令输入完毕后，空一格，然后输入两个-号。下面按照属性名&#x3D;属性值的形式添加对应参数就可以了。记得，这里的格式不是yaml中的书写格式，当属性存在多级名称时，中间使用点分隔，和properties文件中的属性格式完全相同。</p><p>​如果你发现要修改的属性不止一个，可以按照上述格式继续写，属性与属性之间使用空格分隔。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java –jar springboot.jar –-server.port=<span class="number">80</span> --logging.level.root=debug</span><br></pre></td></tr></table></figure><h2 id="属性加载优先级"><a href="#属性加载优先级" class="headerlink" title="属性加载优先级"></a><strong>属性加载优先级</strong></h2><p>​现在我们的程序配置受两个地方控制了，第一配置文件，第二临时属性。并且我们发现临时属性的加载优先级要高于配置文件的。那是否还有其他的配置方式呢？其实是有的，而且还不少，打开官方文档中对应的内容，就可以查看配置读取的优先顺序。地址奉上：<a class="link"   href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html" >https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-external-config<i class="fas fa-external-link-alt"></i></a></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://s2.loli.net/2022/06/14/2E7WeqPGSvHKI8X.png"                      alt="image-20220614091123889"                ></p><p>​我们可以看到，居然有14种配置的位置，而我们现在使用的是这里面的2个。第3条Config data说的就是使用配置文件，第11条Command line arguments说的就是使用命令行临时参数。而这14种配置的顺序就是SpringBoot加载配置的顺序，言外之意，命令行临时属性比配置文件的加载优先级高，所以这个列表上面的优先级低，下面的优先级高。其实这个东西不用背的，你就记得一点，你最终要什么效果，你自己是知道的，不管这个顺序是怎么个高低排序，开发时一定要配置成你要的顺序为准。这个顺序只是在你想不明白问题的时候帮助你分析罢了。</p><p>​比如你现在加载了一个user.name属性。结果你发现出来的结果和你想的不一样，那肯定是别的优先级比你高的属性覆盖你的配置属性了，那你就可以看着这个顺序挨个排查。哪个位置有可能覆盖了你的属性。</p><p>​在yaml中配置了user.name属性值，然后读取出来的时候居然不是自己的配置值，因为在系统属性中有一个属性叫做user.name，两个相互冲突了。而系统属性的加载优先顺序在上面这个列表中是5号，高于3号，所以SpringBoot最终会加载系统配置属性user.name。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a><strong>总结</strong></h2><ol><li>使用jar命令启动SpringBoot工程时可以使用临时属性替换配置文件中的属性</li><li>临时属性添加方式：java –jar 工程名.jar –-属性名&#x3D;值</li><li>多个临时属性之间使用空格分隔</li><li>临时属性必须是当前boot工程支持的属性，否则设置无效</li></ol><h1 id="2、开发环境中使用临时属性"><a href="#2、开发环境中使用临时属性" class="headerlink" title="2、开发环境中使用临时属性"></a>2、开发环境中使用临时属性</h1><p>​临时使用目前是有了，但是上线的时候通过命令行输入的临时属性必须是正确的啊，那这些属性配置值我们必须在开发环境中测试好才行。下面说一下开发环境中如何使用临时属性，其实就是Idea界面下如何操作了。</p><p>​打开SpringBoot引导类的运行界面，在里面找到配置项。其中Program arguments对应的位置就是添加临时属性的，可以加几个试试效果。</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://s2.loli.net/2022/06/14/CR3SzFnaH2oL6Me.png"                      alt="image-20220614091951800"                ></p><p>​做到这里其实可以产生一个思考了，如果对java编程熟悉的小伙伴应该知道，我们运行main方法的时候，如果想使用main方法的参数，也就是下面的args参数，就是在上面这个位置添加的参数。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​原来是这样，通过这个args就可以获取到参数。再来看我们的引导类是如何书写的</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    SpringApplication.run(SSMPApplication.class,args);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​这个args参数居然传递给了run方法，看来在Idea中配置的临时参数就是通过这个位置传递到我们的程序中的。言外之意，这里如果不用这个args是不是就断开了外部传递临时属性的入口呢？是这样的，我们可以使用下面的调用方式，这样外部临时属性就无法进入到SpringBoot程序中了。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    SpringApplication.run(SSMPApplication.class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​或者还可以使用如下格式来玩这个操作，就是将配置不写在配置文件中，直接写成一个字符串数组，传递给程序入口。当然，这种做法并没有什么实际开发意义。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    String[] arg = <span class="keyword">new</span> <span class="title class_">String</span>[<span class="number">1</span>];</span><br><span class="line">    arg[<span class="number">0</span>] = <span class="string">&quot;--server.port=8082&quot;</span>;</span><br><span class="line">    SpringApplication.run(SSMPApplication.class, arg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a><strong>总结</strong></h2><ol><li>启动SpringBoot程序时，可以选择是否使用命令行属性为SpringBoot程序传递启动属性</li></ol><h2 id="思考"><a href="#思考" class="headerlink" title="思考"></a><strong>思考</strong></h2><p>​现在使用临时属性可以在启动项目前临时更改配置了，但是新的问题又出来了。临时属性好用是好用，就是写的多了会很麻烦。比如我现在有个需求，上线的时候使用临时属性配置20个值，这下可麻烦了，能不能搞得简单点，集中管理一下呢？比如说搞个文件，加载指定文件？还真可以。怎么做呢？</p><h1 id="3、配置文件分类"><a href="#3、配置文件分类" class="headerlink" title="3、配置文件分类"></a>3、配置文件分类</h1><p>​SpringBoot提供了配置文件和临时属性的方式来对程序进行配置。前面一直说的是临时属性，这一节要说说配置文件了。其实这个配置文件我们一直在使用，只不过我们用的是SpringBoot提供的4级配置文件中的其中一个级别。4个级别分别是：</p><ul><li>类路径下配置文件（一直使用的是这个，也就是resources目录中的application.yml文件）</li><li>类路径下config目录下配置文件</li><li>程序包所在目录中配置文件</li><li>程序包所在目录中config目录下配置文件</li></ul><p>​好复杂，一个一个说。其实上述4种文件是提供给你了4种配置文件书写的位置，功能都是一样的，都是做配置的。那大家关心的就是差别了，没错，就是因为位置不同，产生了差异。总体上来说，4种配置文件如果都存在的话，有一个优先级的问题，说白了就是加入4个文件我都有，里面都有一样的配置，谁生效的问题。上面4个文件的加载优先顺序为</p><ol><li>file ：config&#x2F;application.yml <strong>【最高】</strong></li><li>file ：application.yml</li><li>classpath：config&#x2F;application.yml</li><li>classpath：application.yml  <strong>【最低】</strong></li></ol><p>​那为什么设计这种多种呢？说一个最典型的应用吧。</p><ul><li>场景A：你作为一个开发者，你做程序的时候为了方便自己写代码，配置的数据库肯定是连接你自己本机的，咱们使用4这个级别，也就是之前一直用的application.yml。</li><li>场景B：现在项目开发到了一个阶段，要联调测试了，连接的数据库是测试服务器的数据库，肯定要换一组配置吧。你可以选择把你之前的文件中的内容都改了，目前还不麻烦。</li><li>场景C：测试完了，一切OK。你继续写你的代码，你发现你原来写的配置文件被改成测试服务器的内容了，你要再改回来。现在明白了不？场景B中把你的内容都改掉了，你现在要重新改回来，以后呢？改来改去吗？</li></ul><p>​解决方案很简单，用上面的3这个级别的配置文件就可以快速解决这个问题，再写一个配置就行了。两个配置文件共存，因为config目录中的配置加载优先级比你的高，所以配置项如果和级别4里面的内容相同就覆盖了，这样是不是很简单？</p><h2 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a><strong>总结</strong></h2><ol><li><p>配置文件分为4种</p><ul><li>项目类路径配置文件：服务于开发人员本机开发与测试</li><li>项目类路径config目录中配置文件：服务于项目经理整体调控</li><li>工程路径配置文件：服务于运维人员配置涉密线上环境</li><li>工程路径config目录中配置文件：服务于运维经理整体调控</li></ul></li><li><p>多层级配置文件间的属性采用叠加并覆盖的形式作用于程序</p></li></ol><h1 id="4、自定义配置文件"><a href="#4、自定义配置文件" class="headerlink" title="4、自定义配置文件"></a>4、自定义配置文件</h1><p>​之前咱们做配置使用的配置文件都是application.yml，其实这个文件也是可以改名字的，这样方便维护。比如我2020年4月1日搞活动，走了一组配置，2020年5月1日活动取消，恢复原始配置，这个时候只需要重新更换一下配置文件就可以了。但是你总不能在原始配置文件上修改吧，不然搞完活动以后，活动的配置就留不下来了，不利于维护。</p><p>​自定义配置文件方式有如下两种：</p><p><strong>方式一：使用临时属性设置配置文件名，注意仅仅是名称，不要带扩展名</strong></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://s2.loli.net/2022/06/14/PCzxfXueWIskpy2.png"                      alt="image-20220614100115420"                ></p><p><strong>方式二：使用临时属性设置配置文件路径，这个是全路径名</strong></p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://s2.loli.net/2022/06/14/bxLQDscAMGEHXWF.png"                      alt="image-20220614100314139"                ></p><p>​也可以设置加载多个配置文件</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="https://s2.loli.net/2022/06/14/1u2UKZlXCsgpobe.png"                      alt="image-20220614100447414"                ></p><p>​使用的属性一个是spring.config.name，另一个是spring.config.location，这个一定要区别清楚。</p><p><font color="#f0f"><b>温馨提示</b></font></p><p>​我们现在研究的都是SpringBoot单体项目，就是单服务器版本。其实企业开发现在更多的是使用基于SpringCloud技术的多服务器项目。这种配置方式和我们现在学习的完全不一样，所有的服务器将不再设置自己的配置文件，而是通过配置中心获取配置，动态加载配置信息。为什么这样做？集中管理。</p><p><strong>总结</strong></p><ol><li>配置文件可以修改名称，通过启动参数设定</li><li>配置文件可以修改路径，通过启动参数设定</li><li>微服务开发中配置文件通过配置中心进行设置</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1、临时属性设置&quot;&gt;&lt;a href=&quot;#1、临时属性设置&quot; class=&quot;headerlink&quot; title=&quot;1、临时属性设置&quot;&gt;&lt;/a&gt;1、临时属性设置&lt;/h1&gt;&lt;p&gt;​		目前我们的程序包打好了，可以发布了。但是程序包打好以后，里面的配置都已经是固定的了，比</summary>
      
    
    
    
    
    <category term="SpringBoot" scheme="http://example.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot运维实用篇之Boot工程快速启动（Linux版）</title>
    <link href="http://example.com/2022/06/14/SpringBoot%E8%BF%90%E7%BB%B4%E5%AE%9E%E7%94%A8%E7%AF%87%E4%B9%8BBoot%E5%B7%A5%E7%A8%8B%E5%BF%AB%E9%80%9F%E5%90%AF%E5%8A%A8%EF%BC%88Linux%E7%89%88%EF%BC%89/"/>
    <id>http://example.com/2022/06/14/SpringBoot%E8%BF%90%E7%BB%B4%E5%AE%9E%E7%94%A8%E7%AF%87%E4%B9%8BBoot%E5%B7%A5%E7%A8%8B%E5%BF%AB%E9%80%9F%E5%90%AF%E5%8A%A8%EF%BC%88Linux%E7%89%88%EF%BC%89/</id>
    <published>2022-06-14T00:46:56.000Z</published>
    <updated>2022-06-14T00:55:13.458Z</updated>
    
    <content type="html"><![CDATA[<p>​其实对于Linux系统下的程序运行与Windows系统下的程序运行差别不大，命令还是那组命令，只不过各位小伙伴可能对Linux指令不太熟悉，结果就会导致各种各样的问题发生。比如防火墙如何关闭，IP地址如何查询，JDK如何安装等等。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;​		其实对于Linux系统下的程序运行与Windows系统下的程序运行差别不大，命令还是那组命令，只不过各位小伙伴可能对Linux指令不太熟悉，结果就会导致各种各样的问题发生。比如防火墙如何关闭，IP地址如何查询，JDK如何安装等等。&lt;/p&gt;
</summary>
      
    
    
    
    
    <category term="SpringBoot" scheme="http://example.com/tags/SpringBoot/"/>
    
  </entry>
  
</feed>
