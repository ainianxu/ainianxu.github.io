<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="Fang">
    
    <title>
        
            Spring Cloud + Vue 前后端分离1 |
        
        念~旭
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/favicon.ico">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/css/font-awesome.min.css">
    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"example.com","root":"/","language":"en","path":"search.json"};
    KEEP.theme_config = {"toc":{"enable":true,"number":true,"expand_all":true,"init_open":false},"style":{"primary_color":"#0066CC","avatar":"/images/favicon.ico","favicon":"/images/favicon.ico","article_img_align":"left","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":true,"scale":false},"first_screen":{"enable":true,"background_img":"/images/bg.svg","description":"你舍得放弃么？你愿意放弃么？你能......放弃么？"},"scroll":{"progress_bar":{"enable":true},"percent":{"enable":true}}},"local_search":{"enable":true,"preload":true},"code_copy":{"enable":true,"style":"default"},"pjax":{"enable":true},"lazyload":{"enable":true},"version":"3.4.4"};
    KEEP.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
  </script>
<meta name="generator" content="Hexo 6.1.0"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
</head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fas fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                念~旭
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                HOME
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                ARCHIVES
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/links"
                            >
                                LINKS
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/about"
                            >
                                ABOUT
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">HOME</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">ARCHIVES</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/links">LINKS</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/about">ABOUT</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">Spring Cloud + Vue 前后端分离1</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/favicon.ico">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">Fang</span>
                        
                            <span class="author-label">Lv5</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;
        <span class="pc">2022-01-07 10:50:36</span>
        <span class="mobile">2022-01-07 10:50</span>
    </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/%E5%AE%8C%E6%95%B4%E9%A1%B9%E7%9B%AE/">完整项目</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fas fa-file-word"></i>&nbsp;<span>6.8k Words</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fas fa-clock"></i>&nbsp;<span>29 Mins</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <h1 id="第1章-配置环境"><a href="#第1章-配置环境" class="headerlink" title="第1章 配置环境"></a>第1章 配置环境</h1><ul>
<li><p>在Spring官网中点进这个Initializr，配置你想要的。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s2.loli.net/2022/03/01/6wagXDIZQGcebUt.png"
                      alt="image-20211023162707337"
                ></p>
<ul>
<li>然后安装nodejs，在IDEA中的Local输入npm get registry；如果不是淘宝镜像，那么就输入这个npm set registry <a class="link"   target="_blank" rel="noopener" href="http://registry.npm.taobao.org;再重新输入npm/" >http://registry.npm.taobao.org；再重新输入npm<i class="fas fa-external-link-alt"></i></a> get registry查看，等待他安装完配置即可。</li>
<li>再下载一个git</li>
</ul>
</li>
</ul>
<h1 id="第2章-使用Maven搭建SpringCloud项目"><a href="#第2章-使用Maven搭建SpringCloud项目" class="headerlink" title="第2章 使用Maven搭建SpringCloud项目"></a>第2章 使用Maven搭建SpringCloud项目</h1><h2 id="2-1-使用Eureka搭建注册中心"><a href="#2-1-使用Eureka搭建注册中心" class="headerlink" title="2-1 使用Eureka搭建注册中心"></a><strong>2-1 使用Eureka搭建注册中心</strong></h2><ul>
<li>Maven两大核心功能：依赖管理（Jar包管理）+构建项目（项目打包）</li>
<li>SpringCloud是管理多个SpringBoot应用的微服务框架</li>
<li>项目初始化，要把代码管理优先做好，不管是学习还是工作，养成阶段性提交代码的习惯，代码管理工具选择git。</li>
<li>一个项目里不是所有文件都需要提交到git中，.gitignore会帮我们自动排除。</li>
<li>SpringBoot之所以流行就是因为只需要一个类，只有一个main函数就可以启动Java项目。</li>
<li>Maven父子模块结构，父框架只需要一个pom.xml，子模块是正常的maven项目</li>
<li>SpringBoot默认继承Tomcat</li>
</ul>
<h2 id="2-2-搭建业务模块-system"><a href="#2-2-搭建业务模块-system" class="headerlink" title="2-2 搭建业务模块-system"></a><strong>2-2 搭建业务模块-system</strong></h2><hr>
<p>本章将介绍使用Maven搭建SpringCloud微服务项目，学习微服务核心组件：注册中心Eureka和路由Gateway。</p>
<hr>
<p>解决注册中心无法启动的问题：</p>
<ul>
<li><p>在resources文件下建立application.properties默认配置文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">spring.application.name=eureka <span class="comment">//应用名字</span></span><br><span class="line">server.port=<span class="number">8761</span><span class="comment">//运行端口</span></span><br><span class="line">    <span class="comment">/*因为本身就是注册中心，所以下面必须是false*/</span></span><br><span class="line">eureka.client.fetch-registry=<span class="literal">false</span></span><br><span class="line">eureka.client.refresh-with-eureka=<span class="literal">false</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>接下来需要在启动文件加注解：@EnableEurekaServer</p>
</li>
<li><p>version control窗口可以看到未提交的修改记录，也可以用看到整个项目包括其他人提交记录</p>
</li>
<li><p>springboot默认集成slf4框架，它定义了一些日志接口，规范日志输出，真正的实现是logback或者log4j，我们代码中写的都是slf4j的代码</p>
</li>
<li><p>一定要看好依赖项是否正确<a class="link"   target="_blank" rel="noopener" href="https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-dependencies" >https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-dependencies<i class="fas fa-external-link-alt"></i></a></p>
</li>
<li><p>一般不用配置版本，用自带的好一些</p>
</li>
</ul>
<p>新建一个Maven子项目system</p>
<ul>
<li><p>2020版本idea version control 不见了 解决办法：可以进入Settings&#x2F;Preferences&#x2F;Version Control&#x2F;Commit将Use non-modal commit interface取消勾选</p>
</li>
<li><p>maven父子模块的配置：在子模块中使用parent标签指向父模块，在父模块中使用module标签引入子模块</p>
</li>
<li><p>只需添加两个依赖：添加依赖项发现他不主动下载了，因此我们就使用自己添加的阿里云镜像吧。在C:\Program Files\JetBrains\IntelliJ IDEA 2021.2.3\plugins\maven\lib\maven3\conf的setting.xml中添加下面代码（注意是添加不是替换奥）</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;mirror&gt;</span><br><span class="line">&lt;id&gt;nexus-aliyun&lt;/id&gt;</span><br><span class="line">&lt;mirrorOf&gt;central&lt;/mirrorOf&gt;</span><br><span class="line">&lt;name&gt;Nexus aliyun&lt;/name&gt;</span><br><span class="line">&lt;url&gt;http:<span class="comment">//maven.aliyun.com/nexus/content/groups/public&lt;/url&gt;</span></span><br><span class="line">&lt;/mirror&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>由于注册中心都是接口开放出去的，所以我们注解用的RestController（返回的json格式的数据），如果返回的是页面就用Controller</li>
</ul>
<p>将system注册到注册中心：（只需要改三个地方）</p>
<ul>
<li><p>第一个就是之前增加的那个client依赖</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencies&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>第二个就是在配置文件中增加配置，指向注册中心的地址</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spring.application.name=system</span><br><span class="line">server.port=<span class="number">9001</span></span><br><span class="line">eureka.client.service-url.defaultZone=http:<span class="comment">//localhost:8761/eureka/</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>第三个就是在启动类里添加@EnableEurekaClient注解</p>
</li>
</ul>
<h2 id="2-3-搭建路由模块-gateway"><a href="#2-3-搭建路由模块-gateway" class="headerlink" title="2-3 搭建路由模块-gateway"></a><strong>2-3 搭建路由模块-gateway</strong></h2><ul>
<li>SpringCloud的网关组件这里我们使用gateway。</li>
<li>网关的主要功能：限流（流量控制）；重试（请求失败时重试，慎用）；跨域（前后端不在同一个域）；路由（转发请求）；鉴权（登陆校验，签名校验）等</li>
</ul>
<p>首先新建一个Maven子项目gateway：</p>
<ul>
<li><p>也是需要放入依赖的，然后修改相应配置</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencies&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>路由转发：将外部请求转发到实际的业务，模块进行处理。在application.properties添加如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">spring.application.name=gateway</span><br><span class="line">server.port=<span class="number">9000</span></span><br><span class="line">eureka.client.service-url.defaultZone=http:<span class="comment">//localhost:8761/eureka/</span></span><br><span class="line"></span><br><span class="line">spring.cloud.gateway.routes[<span class="number">0</span>].id=system </span><br><span class="line">spring.cloud.gateway.routes[<span class="number">0</span>].uri=http:<span class="comment">//192.168.0.105:9001</span></span><br><span class="line">spring.cloud.gateway.routes[<span class="number">0</span>].predicates[<span class="number">0</span>].name=Path</span><br><span class="line">spring.cloud.gateway.routes[<span class="number">0</span>].predicates[<span class="number">0</span>].args[<span class="number">0</span>]=/system<span class="comment">/**</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>目的就是将9001地址对外隐藏，暴露9000地址，访问的时：localhost:9000&#x2F;system&#x2F;*<em>，实际处理是localhost:9001&#x2F;system&#x2F;</em> * *</p>
</li>
<li><p>我们想要在之前test前面加一个&#x2F;system，可以在system模块下的application.properties中添加：</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server.servlet.context-path=/system <span class="comment">//这样/system就算是根目录，以后所有添加下的文件夹都在它下面</span></span><br></pre></td></tr></table></figure>

<p>这时<a class="link"   target="_blank" rel="noopener" href="http://192.168.0.64:9001/system/test" >192.168.0.64:9001&#x2F;system&#x2F;test<i class="fas fa-external-link-alt"></i></a>和<a class="link"   target="_blank" rel="noopener" href="http://192.168.0.64:9001/system/test" >192.168.0.64:9000&#x2F;system&#x2F;test<i class="fas fa-external-link-alt"></i></a>都可以进行访问</p>
<h1 id="第3章-SpringBoot项目技术整合"><a href="#第3章-SpringBoot项目技术整合" class="headerlink" title="第3章 SpringBoot项目技术整合"></a>第3章 SpringBoot项目技术整合</h1><hr>
<p>本章将介绍单个SpringBoot的纯后端应用的搭建，集成Mybatis框架及代码生成器，并集成热部署DevTools，学习单个应用的环境搭建及提高开发效率的准备。</p>
<hr>
<h2 id="3-1-集成持久层框架Mybatis"><a href="#3-1-集成持久层框架Mybatis" class="headerlink" title="3-1 集成持久层框架Mybatis"></a>3-1 集成持久层框架Mybatis</h2><hr>
<p>持久层：负责数据持久化，即将数据存储到数据库或硬盘等，断电也不会丢失数据。Mybatis是半自动ORM，Mybatis可以操作的花样更多，是首选的持久层框架。</p>
<hr>
<p>System模块集成Mybatis框架：</p>
<ul>
<li><p>数据库的准备工作1：创建一个本项目独用的数据库courseimooc</p>
</li>
<li><p>数据库的准备工作2：创建courseimooc数据库专用用户，创建用户时，主机填写：localhost表示创建的用户，只能本机登陆数据库，远程不能登陆；填写%，表示允许本地和远程登陆数据库。然后对用户添加权限</p>
</li>
<li><p>数据库的准备工作3：创建一张表</p>
</li>
<li><p>引入Mybatis架包：Maven父子模块增加jar包依赖：先在父pom.xml中增加jar包依赖，再在子pom.xml中增加jar包依赖，子pom.xml不带版本号。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 集成mybatis --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">   &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;</span><br><span class="line">   &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">   &lt;version&gt;<span class="number">1.3</span><span class="number">.2</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">   &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">   &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">   &lt;version&gt;<span class="number">8.0</span><span class="number">.23</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>还得另外配置</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">spring.datasource.url=jdbc:mysql:<span class="comment">//localhost:3306/courseimooc?characterEncoding=UTF8&amp;autoReconnect=true</span></span><br><span class="line">spring.datasource.username=courseimooc</span><br><span class="line">spring.datasource.password=你自己的数据库密码</span><br><span class="line">spring.datasource.driver-class-name=com.mysql.jdbc.Driver <span class="comment">//增加mysql驱动</span></span><br><span class="line">mybatis.mapper-locations=classpath:/mapper<span class="comment">/*.xml</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p>mybatis使用实例：增加TestMapper.xml，放在resources&#x2F;mapper目录下。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper PUBLIC <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="line">&lt;mapper namespace=<span class="string">&quot;com.course.system.mapper.TestMapper&quot;</span>&gt;</span><br><span class="line">    &lt;select id=<span class="string">&quot;list&quot;</span> resultType=<span class="string">&quot;com.course.system.domain.Test&quot;</span>&gt;</span><br><span class="line">        select `id` ,`name` from `test`;<span class="comment">//真傻逼奥，记得加分号</span></span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>

<p>一个项目一般会有controller，service，mapper三层，其中controller是请求的入口，service负责逻辑，mapper负责持久层</p>
<h2 id="3-2-项目优化"><a href="#3-2-项目优化" class="headerlink" title="3-2 项目优化"></a>3-2 项目优化</h2><ul>
<li>记住你的mysql版本号一定要对。</li>
<li>改时区法一：手动在 URL 上设置<code>jdbc:mysql://localhost:3306/数据库名?serverTimezone</code></li>
<li>法二：</li>
<li><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s2.loli.net/2022/03/01/Ub2K4BpOfnsTL1q.png"
                      alt="在这里插入图片描述"
                ></li>
<li>又他妈碰到了个问题，xml文件无法识别数据库的表名和字段，无法点击表名链接到数据源。在此我首先修改了<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s2.loli.net/2022/03/01/iLqs67rPvKkJ5Mo.png"
                      alt="image-20211027202858490"
                ></li>
</ul>
<p>其次改了这才好：</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s2.loli.net/2022/03/01/fyIkR32SCBomFKj.png"
                      alt="image-20211027203133551"
                ></p>
<ul>
<li>查看差异：ctrl+alt+shift+D</li>
</ul>
<p>集成热部署DevTools:哪个包需要增加就在哪个包pom.xml下添加依赖。</p>
<ul>
<li><p>增加devtools依赖</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 热部署DevTools --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置idea，ctrl+alt+s打开设置窗口，找到Compiler，自动构建就是代码编写时，自动编译。<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s2.loli.net/2022/03/01/49GfABl6Ls3EVNc.png"
                      alt="image-20211028171821556"
                ></p>
</li>
<li><p>要在运行时自动编译<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s2.loli.net/2022/03/01/oQZiAwaDeJnjqBE.png"
                      alt="image-20211028173953487"
                ></p>
</li>
<li><p>随着项目的增加热部署的优势就更能体现了</p>
</li>
</ul>
<p>优化mybatis日志：在system的application.properties中添加</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">logging.level.com.course.system.mapper=trace</span><br></pre></td></tr></table></figure>

<h2 id="3-3-搭建服务模块-server"><a href="#3-3-搭建服务模块-server" class="headerlink" title="3-3 搭建服务模块-server"></a>3-3 搭建服务模块-server</h2><hr>
<p>为什么要构建公共模块？业务拓展后，需要对表加一个字段，这时，如果要保持实体类和表结构一致，则所有模块的实体都要改，费时费力，如果哪个模块用到新的字段，就改哪实体类，时间一长，所有的实体类和表都对应不上，并且这种策略不能用mybatis代码生成器。</p>
<hr>
<ul>
<li><p>新建公共模块-server：</p>
<ol>
<li>就是把system的com.course.system全部复制到server中，然后将system中的pom.xml中的依赖复制到server中，删除第一个配置client。</li>
</ol>
</li>
<li><p>system集成server模块：</p>
<ol>
<li><p>在course中引入架包：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">   &lt;groupId&gt;com.course&lt;/groupId&gt;</span><br><span class="line">   &lt;artifactId&gt;server&lt;/artifactId&gt;</span><br><span class="line">   &lt;version&gt;<span class="number">0.0</span><span class="number">.1</span>-SNAPSHOT&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<ol start="2">
<li><p>迁移完后记得在systemapplication中添加@ComponentScan(“com.course”)，如果类中用了@Controller，@Repository，@Service,@Component四大注解标识之一了，那么如果不加上@ComponentScan，Spring就不会自动扫描类上的四大注解中的任何一个，那么四大注解下的类就不会被Spring扫描到，更不会装入Spring容器中，因此你配置的四大注解就失去了作用。</p>
</li>
<li><p>ctrl+shift+f代表查看代码在哪有</p>
</li>
</ol>
<ul>
<li>集中配置<ol>
<li>如果直接将system中的application.properties复制到server中，那么server作为jar包被依赖，它的resources下的配置文件会和system下的配置文件冲突，生效的还是system的。那么我们应该怎么做呢？我们要做的就是在resources下新建一个config文件夹，将其移动到该文件夹中，spring默认会读config下的配置文件。<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s2.loli.net/2022/03/01/d8EMgiFlxkytILr.png"
                      alt="image-20211029160302143"
                ></li>
</ol>
</li>
</ul>
<h2 id="3-4-集成mybatis-generator"><a href="#3-4-集成mybatis-generator" class="headerlink" title="3-4 集成mybatis generator"></a>3-4 集成mybatis generator</h2><ul>
<li><p>idea集成mybatis-generator生成mybatis代码</p>
<ol>
<li><p>父pom.xml里增加mybatic-generator插件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- mybatis generator 自动生成代码插件 --&gt;</span><br><span class="line">&lt;plugin&gt;</span><br><span class="line">   &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt;</span><br><span class="line">   &lt;artifactId&gt;mybatis-generator-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">   &lt;version&gt;<span class="number">1.3</span><span class="number">.7</span>&lt;/version&gt;</span><br><span class="line">   &lt;configuration&gt;</span><br><span class="line">      &lt;configurationFile&gt;src/main/resources/generator/generatorConfig.xml&lt;/configurationFile&gt;</span><br><span class="line">      &lt;overwrite&gt;<span class="literal">true</span>&lt;/overwrite&gt;</span><br><span class="line">      &lt;verbose&gt;<span class="literal">true</span>&lt;/verbose&gt;</span><br><span class="line">   &lt;/configuration&gt;</span><br><span class="line">   &lt;dependencies&gt;</span><br><span class="line">      &lt;dependency&gt;</span><br><span class="line">         &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">         &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">         &lt;version&gt;<span class="number">8.0</span><span class="number">.23</span>&lt;/version&gt;</span><br><span class="line">      &lt;/dependency&gt;</span><br><span class="line">   &lt;/dependencies&gt;</span><br><span class="line">&lt;/plugin&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>添加配置文件generatorConfig.xml：加上反引号&#96;&#96;后，一些mysql的关键字就可以当作表明或者字段名来使用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;!DOCTYPE generatorConfiguration</span><br><span class="line">        PUBLIC <span class="string">&quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</span></span><br><span class="line">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;generatorConfiguration&gt;</span><br><span class="line">    &lt;context id=<span class="string">&quot;Mysql&quot;</span> targetRuntime=<span class="string">&quot;MyBatis3&quot;</span> defaultModelType=<span class="string">&quot;flat&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">        &lt;property name=<span class="string">&quot;autoDelimitKeywords&quot;</span> value=<span class="string">&quot;true&quot;</span>/&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;beginningDelimiter&quot;</span> value=<span class="string">&quot;`&quot;</span>/&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;endingDelimiter&quot;</span> value=<span class="string">&quot;`&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!--覆盖生成XML文件--&gt;</span><br><span class="line">        &lt;plugin type=<span class="string">&quot;org.mybatis.generator.plugins.UnmergeableXmlMappersPlugin&quot;</span> /&gt;</span><br><span class="line">        &lt;!-- 生成的实体类添加toString()方法 --&gt;</span><br><span class="line">        &lt;plugin type=<span class="string">&quot;org.mybatis.generator.plugins.ToStringPlugin&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- 不生成注释 --&gt;</span><br><span class="line">        &lt;commentGenerator&gt;</span><br><span class="line">            &lt;property name=<span class="string">&quot;suppressAllComments&quot;</span> value=<span class="string">&quot;true&quot;</span>/&gt;</span><br><span class="line">        &lt;/commentGenerator&gt;</span><br><span class="line"></span><br><span class="line">        &lt;jdbcConnection driverClass=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span></span><br><span class="line">                        connectionURL=<span class="string">&quot;jdbc:mysql://localhost:3306/courseimooc&quot;</span></span><br><span class="line">                        userId=<span class="string">&quot;courseimooc&quot;</span></span><br><span class="line">                        password=<span class="string">&quot;你自己的数据库密码&quot;</span>&gt;</span><br><span class="line">        &lt;/jdbcConnection&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- domain类的位置 --&gt;</span><br><span class="line">        &lt;javaModelGenerator targetProject=<span class="string">&quot;src\main\java&quot;</span></span><br><span class="line">                            targetPackage=<span class="string">&quot;com.course.server.domain&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- mapper xml的位置 --&gt;</span><br><span class="line">        &lt;sqlMapGenerator targetProject=<span class="string">&quot;src\main\resources&quot;</span></span><br><span class="line">                         targetPackage=<span class="string">&quot;mapper&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- mapper类的位置 --&gt;</span><br><span class="line">        &lt;javaClientGenerator targetProject=<span class="string">&quot;src\main\java&quot;</span></span><br><span class="line">                             targetPackage=<span class="string">&quot;com.course.server.mapper&quot;</span></span><br><span class="line">                             type=<span class="string">&quot;XMLMAPPER&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--        &lt;table tableName=<span class="string">&quot;test&quot;</span> domainObjectName=<span class="string">&quot;Test&quot;</span>/&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;table tableName=<span class="string">&quot;chapter&quot;</span> domainObjectName=<span class="string">&quot;Chapter&quot;</span>/&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;table tableName=<span class="string">&quot;section&quot;</span> domainObjectName=<span class="string">&quot;Section&quot;</span>/&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;table tableName=<span class="string">&quot;course&quot;</span> domainObjectName=<span class="string">&quot;Course&quot;</span>/&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;table tableName=<span class="string">&quot;course_content&quot;</span> domainObjectName=<span class="string">&quot;CourseContent&quot;</span>/&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;table tableName=<span class="string">&quot;course_content_file&quot;</span> domainObjectName=<span class="string">&quot;CourseContentFile&quot;</span>/&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;table tableName=<span class="string">&quot;teacher&quot;</span> domainObjectName=<span class="string">&quot;Teacher&quot;</span>/&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;table tableName=<span class="string">&quot;file&quot;</span> domainObjectName=<span class="string">&quot;File&quot;</span>/&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;table tableName=<span class="string">&quot;user&quot;</span> domainObjectName=<span class="string">&quot;User&quot;</span>/&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;table tableName=<span class="string">&quot;resource&quot;</span> domainObjectName=<span class="string">&quot;Resource&quot;</span>/&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;table tableName=<span class="string">&quot;role&quot;</span> domainObjectName=<span class="string">&quot;Role&quot;</span>/&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;table tableName=<span class="string">&quot;role_resource&quot;</span> domainObjectName=<span class="string">&quot;RoleResource&quot;</span>/&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;table tableName=<span class="string">&quot;role_user&quot;</span> domainObjectName=<span class="string">&quot;RoleUser&quot;</span>/&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;table tableName=<span class="string">&quot;member&quot;</span> domainObjectName=<span class="string">&quot;Member&quot;</span>/&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;table tableName=<span class="string">&quot;sms&quot;</span> domainObjectName=<span class="string">&quot;Sms&quot;</span>/&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;table tableName=<span class="string">&quot;test&quot;</span> domainObjectName=<span class="string">&quot;Test&quot;</span>/&gt;--&gt;</span><br><span class="line">        &lt;table tableName=<span class="string">&quot;chapter&quot;</span> domainObjectName=<span class="string">&quot;chapter&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/context&gt;</span><br><span class="line">&lt;/generatorConfiguration&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建一个maven启动命令mybatis-generator:generate  -e</p>
</li>
</ol>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s2.loli.net/2022/03/01/9TC2ZJKRAFqal75.png"
                      alt="image-20211029163400461"
                ></p>
<p>generatorConfig.xml是放在server模块下，所以这里选择server目录。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s2.loli.net/2022/03/01/1bKJph4X7RTq26v.png"
                      alt="image-20211029163942572"
                ></p>
</li>
<li><p>解决mapper.xml重复生成代码问题：业务扩展，表结构发生变动时，需要重新生成持久层代码。这对编码有一个要求：生成器生成的四个文件绝对不可以手动修改。</p>
</li>
<li><p>generatorConfig.xml里增加这个，原来的xml会被覆盖，所以绝对不要在生成的xml手动修改代码，因为下次再生成时，手动修改的代码会被覆盖掉。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--覆盖生成XML文件--&gt;</span><br><span class="line">&lt;plugin type=<span class="string">&quot;org.mybatis.generator.plugins.UnmergeableXmlMappersPlugin&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>通过Example，可以帮助我们写入where、order by，distinct等，需要熟练掌握，可以极大提高单表开发效率。</p>
</li>
<li><p>小技巧：ctrl+alt+v，快速生成一个变量</p>
</li>
<li><p>要按多个条件查询数据库，在java中表达式后面继续.andXXX；？是jdbc占位符，可用于防注入攻击，mybatis底层也是jdbc实现的</p>
</li>
</ul>
<h1 id="第4章-使用Vue-cli-4搭建管理控台"><a href="#第4章-使用Vue-cli-4搭建管理控台" class="headerlink" title="第4章 使用Vue cli 4搭建管理控台"></a>第4章 使用Vue cli 4搭建管理控台</h1><hr>
<p>本章将介绍Vue cli和bootstrap的使用。Vue是MVVM框架，其代码结构类似于Angular、微信小程序。Bootstrap是一个响应式框架，一套代码可适应PC，手机屏幕。本章使用Vue cli 4 + Bootstrap 3搭建控台管理应用，学习单页面应用搭建及响应式设计</p>
<hr>
<h2 id="4-1-使用vue-cli创建admin项目"><a href="#4-1-使用vue-cli创建admin项目" class="headerlink" title="4-1 使用vue cli创建admin项目"></a>4-1 使用vue cli创建admin项目</h2><ul>
<li>vue用法一：直接引入vue.js，适用于现成的jsp项目，thymeleaf项目等。这种用法不算前后端分离，发布时依然是前后端一起部署的。</li>
<li>vue用法二：使用vuecli新建项目，前后端分离开发，分离部署</li>
<li>idea默认使用windows自带的命令行，可以通过设置改为git bash<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s2.loli.net/2022/03/01/M5hdT9NGqlz6ELA.png"
                      alt="image-20211030102237979"
                ></li>
<li>vuecli安装按照这个来<a class="link"   target="_blank" rel="noopener" href="https://cli.vuejs.org/zh/guide/installation.html" >https://cli.vuejs.org/zh/guide/installation.html<i class="fas fa-external-link-alt"></i></a></li>
<li>vuecli初始安装带了babel和eslint插件，babel：JavaScript编译器；eslint：代码规范检查</li>
<li>main.js是vue入口文件，用来初始化vue实例并集成所需要的插件</li>
</ul>
<h2 id="4-2-集成bootstrap后台管理模板ace"><a href="#4-2-集成bootstrap后台管理模板ace" class="headerlink" title="4-2 集成bootstrap后台管理模板ace"></a>4-2 集成bootstrap后台管理模板ace</h2><hr>
<p>Bootstrap来自推特，是目前最受欢迎的响应式框架。它基于html，css，JavaScript，简单易扩展，因此有很多第三方模板，栅格系统是bootstrap的布局核心。</p>
<hr>
<ul>
<li>ace admin模板介绍：<a class="link"   target="_blank" rel="noopener" href="http://ace.jeka.by/" >http://ace.jeka.by/<i class="fas fa-external-link-alt"></i></a></li>
<li>admin增加ace模板：<ol>
<li>批量替换小技巧：找到要批量替换的公共点，可以包含特殊字符，”&#x3D;等，替换的时候，也加上这些特殊字符。ctrl+r替换</li>
<li>建议把下面两个勾选，方便快速定位<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s2.loli.net/2022/03/01/udvR7gNbxGrLBPe.png"
                      alt="image-20211030152932223"
                ></li>
<li>eslintrc.js,用于检测代码规范。是一把双刃剑，一些检测没必要，可以通过修改配置禁用掉</li>
</ol>
</li>
</ul>
<h2 id="4-3-集成路由vue-route"><a href="#4-3-集成路由vue-route" class="headerlink" title="4-3 集成路由vue-route"></a>4-3 集成路由vue-route</h2><ul>
<li><p>这里使用vue-route的版本是v3.5.3   npm install <a class="link"   href="mailto:&#118;&#x75;&#x65;&#x2d;&#x72;&#111;&#117;&#x74;&#x65;&#114;&#x40;&#x33;&#x2e;&#53;&#46;&#x33;" >&#118;&#x75;&#x65;&#x2d;&#x72;&#111;&#117;&#x74;&#x65;&#114;&#x40;&#x33;&#x2e;&#53;&#46;&#x33;<i class="fas fa-external-link-alt"></i></a></p>
</li>
<li><p>在命令行cd admin 然后npm install –save vue-router。</p>
</li>
<li><p>router-view是路由嵌套标签，一般配合父子路由使用</p>
</li>
<li><p>ctrl+alt+l：格式化代码</p>
</li>
<li><pre><code class="java">&lt;template&gt;下只能由一个div标签，所以需要用一个div把多个div标签括起来
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ctrl+f：搜索页面</span><br><span class="line"></span><br><span class="line">- 在&lt;script&gt;标签里写的js代码是全局的，会影响其他页面</span><br><span class="line"></span><br><span class="line">## 4-4 控台欢迎页面开发</span><br><span class="line"></span><br><span class="line">mouted的使用：解决两个页面样式冲突问题</span><br><span class="line"></span><br><span class="line">- created执行更早，在界面渲染之前执行，常用于加载初始化数据。mounted在界面渲染之后执行，常用于对界面元素的初始化操作</span><br><span class="line">- 组件每次加载，mounted都会再次执行</span><br><span class="line"></span><br><span class="line">使用router-view增加welcome子组件：</span><br><span class="line"></span><br><span class="line">- router-view一般配合子路由使用；子路由配置不要以“/”开头</span><br><span class="line">- 在哪使用welcome就在哪加入&lt;router-view/&gt;</span><br><span class="line"></span><br><span class="line">控台页面元素修改：</span><br><span class="line"></span><br><span class="line">- 响应式设计的一个体现：根据屏幕分辨率不同，弹窗显示在不同位置</span><br><span class="line">- 在git中提交记录选择checkout菜单，可以让本地代码回到过去某一个提交点</span><br><span class="line">- ctrl+y：删除当前选中的行，只要某一行有部分被选中，这一行就会全部删除</span><br><span class="line">- data-toggle：用于按钮和模态框（弹出层）的事件绑定</span><br><span class="line">- active open：当前菜单是激活样式，并且把当前菜单的子菜单展开</span><br><span class="line"></span><br><span class="line"># 第5章 单表管理功能前后端开发</span><br><span class="line"></span><br><span class="line">***</span><br><span class="line"></span><br><span class="line">本章将演示控台单表增删改查的前后端开发，重点学习前后端数据交互，Vue ajax库axios的使用，使用Vue自定义组件制作分页组件，Mybatis分页插件pagehelper的使用等功能。介绍常用的公共组件的使用，包括前端确认框、提示框、等待框，后端复制工具类、统一日志AOP等。</span><br><span class="line"></span><br><span class="line">***</span><br><span class="line"></span><br><span class="line">## 5-1 大章列表查询功能开发1 </span><br><span class="line"></span><br><span class="line">***</span><br><span class="line"></span><br><span class="line">完成单表的增删改查：</span><br><span class="line"></span><br><span class="line">- 控台单表增删改查的前后端开发，重点学习前后端数据交互，vue ajax库axios的使用</span><br><span class="line"></span><br><span class="line">通用组件的开发：分页、确认框、提示框、等待框等：</span><br><span class="line"></span><br><span class="line">- 常用的公共组件：确认框、提示框、等待框，统一日志拦截器等。使用vue自定义组件制作分页组件，mybatis分页插件pagehelper的使用</span><br><span class="line"></span><br><span class="line">***</span><br><span class="line"></span><br><span class="line">增加maven子项目business：</span><br><span class="line"></span><br><span class="line">- shift+F6重命名。重命名就是重构，会将所有引用到的地方都一起改名，甚至是注释掉的代码也会一起修改。</span><br><span class="line">- 将system中一堆文件复制过去</span><br><span class="line"></span><br><span class="line">大章表设计及持久层代码生成：</span><br><span class="line"></span><br><span class="line">- DTO：数据传输对象，用于数据传输。</span><br><span class="line">- domain内的实体，是mybatis-generator自动生成的，不允许手动修改，一旦修改，再次生成实体类时，所做的修改会被覆盖。</span><br><span class="line">- domain作用于service和mapper；dto作用于controller和service。</span><br><span class="line">- ctrl+alt+v为表达式生成一个变量</span><br><span class="line">- BeanUtils是Spring提供的一个工具类，用于实体间的复制。后续会对BeanUtils做封闭，简化使用，提高开发效率。</span><br><span class="line"></span><br><span class="line">## 5-2 大章列表查询功能开发2</span><br><span class="line"></span><br><span class="line">新增chapter子页面并添加子路由，并使用假数据制作表格：</span><br><span class="line"></span><br><span class="line">- shift+tab，反向缩进</span><br><span class="line"></span><br><span class="line">点击sidebar实现菜单页面跳转：</span><br><span class="line"></span><br><span class="line">- 二级菜单要显示出激活模式，只需要添加active样式</span><br><span class="line">- silbings,jquery的方法，获取所有兄弟节点</span><br><span class="line">- &lt;router-link to=&quot;&quot;&gt;类似于&lt;a href=&quot;&quot;&gt;，用于链接跳转</span><br><span class="line">- 约定id的命名要和路由相关</span><br><span class="line"></span><br><span class="line">通用的sidebar点击激活样式方法：</span><br><span class="line"></span><br><span class="line">- vue内置的watch，用来监测vue实例上的数据变动，$route也是一个变量。</span><br><span class="line">- 在router.js添加name，是为了通过name属性值，得到菜单id的值。约定优于配置</span><br><span class="line">- 在admin.vue添加watch，此时如果从login页面登陆跳转到welcome页面，welcome并不会有激活样式，这里的watch，只在admin下面的子组件互相跳转时有用。为了解决这个问题，需要在初始化也执行一句激活代码。</span><br><span class="line">- 还有一点需要注意，我们要把this变成本地变量，js中有this关键字，代表当前执行方法的对象。养成习惯，在方法开头，声明本地变量_this代替this。</span><br><span class="line"></span><br><span class="line">## 5-3 大章列表查询功能开发3</span><br><span class="line"></span><br><span class="line">集成axios完成前后端交互</span><br><span class="line"></span><br><span class="line">- --save：在pacjage.json添加依赖。（不加--save的话，只是去下载插件，项目中并没有依赖插件） npm install axios --save</span><br><span class="line"></span><br><span class="line">- 以vue属性的方式使用axios：修改main.js</span><br><span class="line"></span><br><span class="line">  ```java</span><br><span class="line">  import axios from &quot;axios&quot;;</span><br><span class="line">  </span><br><span class="line">  Vue.prototype.$ajax = axios;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>Vue.prototype.xxx，可以理解为Vue组件的全局变量。可以在任意Vue组件中，使用this.xxx来获取这个值。$是代表Vue全局 在chapter.vue中使用$ajax</p>
</li>
<li><pre><code class="java">list()&#123;
  let _this=this;
  _this.$ajax.get(&#39;http://192.168.0.105:9002/business/chapter/list&#39;).then((respond)=&gt;&#123;
    console.log(&quot;查询大章列表结果:&quot;,respond);
  &#125;)
&#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- CORS，跨站点资源分享，属于跨域问题，同个IP的不同端口间的访问也属于跨域，前后端分离必然有跨域问题。解决跨域问题：增加CorsConfiguration.java在server中</span><br><span class="line"></span><br><span class="line">  ```java</span><br><span class="line">  package com.course.server.config;</span><br><span class="line">  </span><br><span class="line">  import org.springframework.context.annotation.Configuration;</span><br><span class="line">  import org.springframework.web.cors.CorsConfiguration;</span><br><span class="line">  import org.springframework.web.servlet.config.annotation.CorsRegistry;</span><br><span class="line">  import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line">  </span><br><span class="line">  @Configuration</span><br><span class="line">  public class CorsConfig implements WebMvcConfigurer &#123;</span><br><span class="line">  </span><br><span class="line">      @Override</span><br><span class="line">      public void addCorsMappings(CorsRegistry registry) &#123;</span><br><span class="line">          registry.addMapping(&quot;/**&quot;)</span><br><span class="line">                  .allowedOrigins(&quot;*&quot;)</span><br><span class="line">                  .allowedHeaders(CorsConfiguration.ALL)</span><br><span class="line">                  .allowedMethods(CorsConfiguration.ALL)</span><br><span class="line">                  .allowCredentials(true)</span><br><span class="line">                  .maxAge(3600); // 1小时内不需要再预检（发OPTIONS请求）</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">  &#125;</span><br><span class="line">  </span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>ctrl+shift++：展开所有层级；+-：收缩所有层级</p>
</li>
<li><p>使用data定义组件内的变量，可以用于做双向数据绑定。</p>
</li>
<li><p>显示真实数据就是使用data定义变量，定义一个数组，在methods中将查询到的结果返回，再在特定的行里面引用样式的数据。</p>
</li>
<li><p>没用了CorsResponseHeaderFilter.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.server.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.gateway.filter.GatewayFilterChain;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.gateway.filter.GlobalFilter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.gateway.filter.NettyWriteResponseFilter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.Ordered;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpHeaders;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.server.ServerWebExchange;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Mono;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 跨域请求头重复处理过滤器</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CorsResponseHeaderFilter</span> <span class="keyword">implements</span> <span class="title class_">GlobalFilter</span>, Ordered &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getOrder</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 指定此过滤器位于NettyWriteResponseFilter之后</span></span><br><span class="line">        <span class="comment">// 即待处理完响应体后接着处理响应头</span></span><br><span class="line">        <span class="keyword">return</span> NettyWriteResponseFilter.WRITE_RESPONSE_FILTER_ORDER + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;serial&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Mono&lt;Void&gt; <span class="title function_">filter</span><span class="params">(ServerWebExchange exchange, GatewayFilterChain chain)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> chain.filter(exchange).then(Mono.defer(() -&gt; &#123;</span><br><span class="line">            exchange.getResponse().getHeaders().entrySet().stream()</span><br><span class="line">                    .filter(kv -&gt; (kv.getValue() != <span class="literal">null</span> &amp;&amp; kv.getValue().size() &gt; <span class="number">1</span>))</span><br><span class="line">                    .filter(kv -&gt; (kv.getKey().equals(HttpHeaders.ACCESS_CONTROL_ALLOW_ORIGIN)</span><br><span class="line">                            || kv.getKey().equals(HttpHeaders.ACCESS_CONTROL_ALLOW_CREDENTIALS)))</span><br><span class="line">                    .forEach(kv -&gt;</span><br><span class="line">                    &#123;</span><br><span class="line">                        kv.setValue(<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;() &#123;&#123;</span><br><span class="line">                            add(kv.getValue().get(<span class="number">0</span>));</span><br><span class="line">                        &#125;&#125;);</span><br><span class="line">                    &#125;);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> chain.filter(exchange);</span><br><span class="line">        &#125;));</span><br><span class="line">    &#125;&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>使用gateway路由转发：使用gateway路由转发，vue页面只访问gateway</p>
<ul>
<li><p>单个SpringBoot应用使用CorsConfig解决跨域问题。使用SpringCloud Gateway的，使用CorsWebFilter解决跨域问题。</p>
</li>
<li><p>现在统一在gateway中使用跨域配置，在GatewayApplication.java中添加配置</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.gateway;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.client.discovery.EnableDiscoveryClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.env.Environment;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.cors.CorsConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.cors.reactive.CorsWebFilter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.cors.reactive.UrlBasedCorsConfigurationSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.util.pattern.PathPatternParser;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GatewayApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">LOG</span> <span class="operator">=</span> LoggerFactory.getLogger(GatewayApplication.class);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		<span class="type">SpringApplication</span> <span class="variable">app</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SpringApplication</span>(GatewayApplication.class);</span><br><span class="line">		<span class="type">Environment</span> <span class="variable">env</span> <span class="operator">=</span> app.run(args).getEnvironment();</span><br><span class="line">		LOG.info(<span class="string">&quot;启动成功！！&quot;</span>);</span><br><span class="line">		LOG.info(<span class="string">&quot;Gateway地址: \thttp://127.0.0.1:&#123;&#125;&quot;</span>, env.getProperty(<span class="string">&quot;server.port&quot;</span>));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 配置跨域</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Bean</span></span><br><span class="line">	<span class="keyword">public</span> CorsWebFilter <span class="title function_">corsFilter</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="type">CorsConfiguration</span> <span class="variable">config</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CorsConfiguration</span>();</span><br><span class="line"></span><br><span class="line">		config.setAllowCredentials(Boolean.TRUE);</span><br><span class="line">		config.addAllowedMethod(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">		config.addAllowedOrigin(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">		config.addAllowedHeader(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">		config.setMaxAge(<span class="number">3600L</span>);</span><br><span class="line"></span><br><span class="line">		<span class="type">UrlBasedCorsConfigurationSource</span> <span class="variable">source</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UrlBasedCorsConfigurationSource</span>(<span class="keyword">new</span> <span class="title class_">PathPatternParser</span>());</span><br><span class="line">		source.registerCorsConfiguration(<span class="string">&quot;/**&quot;</span>, config);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CorsWebFilter</span>(source);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>如果配置的是ip端口，那么发布到生产时就可能会访问不到，就算配置了maven多环境，也需要提前知道上线后的IP和端口，因此就需要lb:&#x2F;&#x2F;(负载均衡)loadbalance：使用lb:&#x2F;&#x2F;+注册中心名字作为路由转发</p>
</li>
<li><pre><code class="java">spring.cloud.gateway.routes[1].uri=http://192.168.0.105:9002//替换
spring.cloud.gateway.routes[1].uri=lb://business
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 5-4 分页功能开发</span><br><span class="line"></span><br><span class="line">集成分页插件pagehelper:</span><br><span class="line"></span><br><span class="line">- mybatis-generator生成的代码是不带分页功能的，使用pagehelper插件来拓展分页功能。</span><br><span class="line"></span><br><span class="line">- 首先在course的pom.xml添加插件依赖，其次server中也添加，不过没有版本号</span><br><span class="line"></span><br><span class="line">  ```java</span><br><span class="line">  &lt;!-- mybatis分页插件pagehelper --&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">     &lt;groupId&gt;com.github.pagehelper&lt;/groupId&gt;</span><br><span class="line">     &lt;artifactId&gt;pagehelper-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">     &lt;version&gt;1.2.10&lt;/version&gt;</span><br><span class="line">  &lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>使用就是在ChapterService中添加：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PageHelper.startPage(<span class="number">1</span>,<span class="number">1</span>);<span class="comment">//查询第一条语句</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>分页功能的关键字：limit。从日志看出该sql执行的是limit 1，相当于limit 0 1，即从第0行开始，查1条。</p>
</li>
<li><p>插件分页语句规则：调用startPage方法之后，执行的第一个select语句会进行分页。</p>
</li>
<li><p>分页查询功能需要两条sql，一条是查总记录数（通过每页条数计算出总共有多少页），一条是查当前页的记录。</p>
</li>
</ul>
<p>分页参数前后端交互：分页参数前后端交互，axios的post请求默认是以流的形式传递参数，所以controller里的参数要加@RequestBody注解</p>
<ul>
<li><p>使用泛型的地方都可以用Object代替，但是泛型可以在编译期就发现问题，并且避免了代码中写强制类型转换。</p>
</li>
<li><p>接口请求参数传递，尽量使用post。使用get请求在url里拼参数的话，会使url变得很长，有些浏览器或服务器会对url长度做限制，导致请求失败。</p>
</li>
<li><p>日志输出时，变量使用点位符，比如LOG.info(“输出：id&#x3D;{},姓名&#x3D;{},id,name”)，而不是LOG.info(“输出：id&#x3D;”+id+”,姓名&#x3D;”+name)</p>
</li>
<li><p>&#96;&#96;&#96;java<br>@RequestBody&#x2F;&#x2F;在controller中使用流的形式和$ajax的post相对应</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">##   5-5前端分页组件的使用 </span><br><span class="line"></span><br><span class="line">增加一个刷新按钮：</span><br><span class="line"></span><br><span class="line">- fa样式是fontawesome图标，可以百度搜“fontawesome”查看所有图标的样式</span><br><span class="line">- v-bind:list=&quot;list&quot;，前面的list，是分页组件暴露出来的一个回调方法，后面的list，是chapter组件的list方法。</span><br><span class="line">- props，定义父组件向子组件传递的参数，可以是一个函数或数据。本组件中暴漏了两个参数list和itemCount给外部。</span><br><span class="line"></span><br><span class="line">```vue</span><br><span class="line">&lt;p&gt;</span><br><span class="line">  &lt;button v-on:click=&quot;list()&quot; class=&quot;btn btn-white btn-default btn-round&quot;&gt;</span><br><span class="line">    &lt;i class=&quot;ace-icon fa fa-refresh red2&quot;&gt;&lt;/i&gt;</span><br><span class="line">    刷新</span><br><span class="line">  &lt;/button&gt;</span><br><span class="line">&lt;/p&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>前端分页组件的使用：</p>
<ul>
<li><p>首先在admin软件包中的components添加pagination.vue</p>
</li>
<li><p>&#96;&#96;&#96;java</p>
<template>
  <div class="pagination" role="group" aria-label="分页">
    <button type="button" class="btn btn-default btn-white btn-round" 
            v-bind:disabled="page === 1"
            v-on:click="selectPage(1)">
      1
    </button>
    <button type="button" class="btn btn-default btn-white btn-round" 
            v-bind:disabled="page === 1"
            v-on:click="selectPage(page - 1)">
      上一页
    </button>
    <button v-for="p in pages" v-bind:id="'page-' + p" 
            type="button" class="btn btn-default btn-white btn-round"
            v-bind:class="{'btn-primary active':page == p}" 
            v-on:click="selectPage(p)">
      
    </button>
    <button type="button" class="btn btn-default btn-white btn-round" 
            v-bind:disabled="page === pageTotal"
            v-on:click="selectPage(page + 1)">
      下一页
    </button>
    <button type="button" class="btn btn-default btn-white btn-round"
            v-bind:disabled="page === pageTotal"
            v-on:click="selectPage(pageTotal)">
    这是两个大括号里面是 分页总数||1
    </button>
    &nbsp;
    <span class="m--padding-10">
        每页
        <select v-model="size">
            <option value="1">1</option>
            <option value="5">5</option>
            <option value="10">10</option>
            <option value="20">20</option>
            <option value="50">50</option>
            <option value="100">100</option>
        </select>
        条，共【】条
    </span>
  </div>
</template>

<script>
  export default {
    name: 'pagination',
    props: {
      list: {
        type: Function,
        default: null
      },
      itemCount: Number // 显示的页码数，比如总共有100页，只显示10页，其它用省略号表示
    },
    data: function () {
      return {
        total: 0, // 总行数
        size: 10, // 每页条数
        page: 0, // 当前页码
        pageTotal: 0, // 总页数
        pages: [], // 显示的页码数组
      }
    },
    methods: {
      /**
       * 渲染分页组件
       * @param page
       * @param total
       */
      render(page, total) {
        let _this = this;
        _this.page = page;
        _this.total = total;
        _this.pageTotal = Math.ceil(total / _this.size);
        _this.pages = _this.getPageItems(_this.pageTotal, page, _this.itemCount || 5);
      },

      /**
       * 查询某一页
       * @param page
       */
      selectPage(page) {
        let _this = this;
        if (page < 1) {
          page = 1;
        }
        if (page > _this.pageTotal) {
          page = _this.pageTotal;
        }
        if (this.page !== page) {
          _this.page = page;
          if (_this.list) {
            _this.list(page);
          }
        }
      },

      /**
       * 当前要显示在页面上的页码
       * @param total
       * @param current
       * @param length
       * @returns {Array}
       */
      getPageItems(total, current, length) {
        let items = [];
        if (length >= total) {
          for (let i = 1; i <= total; i++) {
            items.push(i);
          }
        } else {
          let base = 0;
          // 前移
          if (current - 0 > Math.floor((length - 1) / 2)) {
            // 后移
            base = Math.min(total, current - 0 + Math.ceil((length - 1) / 2)) - length;
          }
          for (let i = 1; i <= length; i++) {
            items.push(base + i);
          }
        }
        return items;
      }
    }
  }
</script>

<style scoped>
  .pagination {
    vertical-align: middle !important;
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 10px;
  }

  .pagination button {
    margin-right: 5px;
  }

  .btn-primary.active {
    background-color: #2f7bba !important;
    border-color: #27689d !important;
    color: white !important;
    font-weight: 600;
  }

  /*.pagination select {*/
  /*vertical-align: middle !important;*/
  /*font-size: 16px;*/
  /*margin-top: 0;*/
  /*}*/
</style>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 其次在chapter.vue中：</span><br><span class="line"></span><br><span class="line">- ```vue</span><br><span class="line">  &lt;script&gt;import Pagination from &quot;../../components/pagination&quot;;&lt;/script&gt;</span><br><span class="line">  &lt;template&gt;</span><br><span class="line">  &lt;pagination ref=&quot;pagination&quot; v-bind:list=&quot;list&quot; v-bind:itemCount=&quot;8&quot;&gt;&lt;/pagination&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">      components: &#123;Pagination&#125;,&#125;</span><br><span class="line">  list(page) &#123;</span><br><span class="line">          let _this = this;</span><br><span class="line">          Loading.show();</span><br><span class="line">          _this.$ajax.post(process.env.VUE_APP_SERVER + &#x27;/business/admin/chapter/list&#x27;, &#123;</span><br><span class="line">            page: page,</span><br><span class="line">            size: _this.$refs.pagination.size,</span><br><span class="line">          &#125;).then((response)=&gt;&#123;</span><br><span class="line">   		 let resp = response.data;</span><br><span class="line">            _this.chapters = resp.list;</span><br><span class="line">            _this.$refs.pagination.render(page, resp.total);</span><br><span class="line">  </span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;,</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="5-6-增加新增大章功能"><a href="#5-6-增加新增大章功能" class="headerlink" title="5-6 增加新增大章功能"></a>5-6 增加新增大章功能</h2><p>页面设计与前端代码开发：</p>
<ul>
<li>$(“.modal”)里的modal是css的选择器，模态框代码里有class&#x3D;”modal”样式，.modal()是内置的方法用于弹出或关闭模态框</li>
<li>可以使用$(“.modal”).modal({backdrop:’static’})；禁止点空白的地方关闭，某些场景需求会用到这个功能。</li>
<li><label for="id">有个场景会经常用到：点击复选框checkbox时选中，使用label for后，点击label的文字，也能选中复制框</li>
<li>模态框弹出和关闭，可以用js代码，也可以用button属性：data-dismiss&#x3D;”cdd选择器”关闭；data-toggle&#x3D;”css选择器”打开。</li>
</ul>
<p>短ID设计与后端代码开发：</p>
<ul>
<li><p>面试：为什么不用自增ID？自增ID至少有三个问题：1.ID是连续，容易被探测；2.需要+1次查询才能得到id的值；3.分布式存储中，id会出现重复。</p>
</li>
<li><p>uuid是根据机器、时间等多个维度生成的32位16进制数，有生之年不会重复。</p>
</li>
<li><p>短ID是根据将32位ID，转为62进制8位ID，减少存储空间。原理是将uuid转为10进制，再对62取余。也可以再添加两个符号，转为64进制。</p>
</li>
<li><p>在server中添加一个UuidUtil</p>
</li>
<li><pre><code class="java">package com.course.server.util;
import java.util.UUID;
public class UuidUtil &#123;
    public static String[] chars = new String[] &#123; &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;,
            &quot;g&quot;, &quot;h&quot;, &quot;i&quot;, &quot;j&quot;, &quot;k&quot;, &quot;l&quot;, &quot;m&quot;, &quot;n&quot;, &quot;o&quot;, &quot;p&quot;, &quot;q&quot;, &quot;r&quot;, &quot;s&quot;,
            &quot;t&quot;, &quot;u&quot;, &quot;v&quot;, &quot;w&quot;, &quot;x&quot;, &quot;y&quot;, &quot;z&quot;, &quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;,
            &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;E&quot;, &quot;F&quot;, &quot;G&quot;, &quot;H&quot;, &quot;I&quot;,
            &quot;J&quot;, &quot;K&quot;, &quot;L&quot;, &quot;M&quot;, &quot;N&quot;, &quot;O&quot;, &quot;P&quot;, &quot;Q&quot;, &quot;R&quot;, &quot;S&quot;, &quot;T&quot;, &quot;U&quot;, &quot;V&quot;,
            &quot;W&quot;, &quot;X&quot;, &quot;Y&quot;, &quot;Z&quot; &#125;;


    /**
     * 获取短UUID
     * @return
     */
    public static String getShortUuid() &#123;
        StringBuffer shortBuffer = new StringBuffer();
        String uuid = UuidUtil.getUuid();
        for (int i = 0; i &lt; 8; i++) &#123;
            String str = uuid.substring(i * 4, i * 4 + 4);
            int x = Integer.parseInt(str, 16);
            shortBuffer.append(chars[x % 0x3E]); // 对62取余
        &#125;
        return shortBuffer.toString();

    &#125;

    /**
     * 获得32位UUID
     */
    public static String getUuid()&#123;
        String uuid = UUID.randomUUID().toString();
        //去掉“-”符号
        return uuid.replaceAll(&quot;-&quot;, &quot;&quot;);
    &#125;

    public static void main(String[] args) &#123;
        System.out.println(getShortUuid());
    &#125;
&#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 在ChapterService中添加</span><br><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  public void save(ChapterDto chapterDto)&#123;</span><br><span class="line">      chapterDto.setId(UuidUtil.getShortUuid());</span><br><span class="line">      Chapter chapter = new Chapter();</span><br><span class="line">      BeanUtils.copyProperties(chapterDto,chapter);</span><br><span class="line">      chapterMapper.insert(chapter);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>在ChapterController中添加</p>
</li>
<li><p>&#96;&#96;&#96;java<br>@RequestMapping(“&#x2F;save”)<br>public ChapterDto list(@RequestBody ChapterDto chapterDto){<br>chapterService.save(chapterDto);<br>return chapterDto;<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 在chapter.vue中添加方法</span><br><span class="line"></span><br><span class="line">- ```vue</span><br><span class="line">  save(page)&#123;</span><br><span class="line">    let _this=this;</span><br><span class="line">    _this.$ajax.post(&#x27;http://192.168.0.105:9000/business/admin/chapter/save&#x27;,_this.chapter).then((respond)=&gt;&#123;</span><br><span class="line">      console.log(&quot;保存大章列表结果:&quot;,respond);</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>增加复制工具类CopyUtil:</p>
<ul>
<li><p>server中增加代码</p>
</li>
<li><pre><code class="java">package com.course.server.util;

import org.springframework.beans.BeanUtils;
import org.springframework.util.CollectionUtils;

import java.util.ArrayList;
import java.util.List;

public class CopyUtil &#123;

    public static &lt;T&gt; List&lt;T&gt; copyList(List source, Class&lt;T&gt; clazz) &#123;
        List&lt;T&gt; target = new ArrayList&lt;&gt;();
        if (!CollectionUtils.isEmpty(source))&#123;
            if (!CollectionUtils.isEmpty(source))&#123;
                for (Object c: source) &#123;
                    T obj = copy(c, clazz);
                    target.add(obj);
                &#125;
            &#125;
        &#125;
        return target;
    &#125;

    public static &lt;T&gt; T copy(Object source, Class&lt;T&gt; clazz) &#123;
        if (source == null) &#123;
            return null;
        &#125;
        T obj = null;
        try &#123;
            obj = clazz.newInstance();
        &#125; catch (Exception e) &#123;
            e.printStackTrace();
        &#125;
        BeanUtils.copyProperties(source, obj);
        return obj;
    &#125;
&#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">统一返回参数ResponseDto：</span><br><span class="line"></span><br><span class="line">- 纯接口应用，一般会规范固定的请求参数，如版本号、请求流水等；再规范固定的返回参数，如返回码、返回描述等。方便调用方统一处理。</span><br><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  package com.course.server.dto;</span><br><span class="line">  </span><br><span class="line">  public class ResponseDto&lt;T&gt; &#123;</span><br><span class="line">  </span><br><span class="line">      /**</span><br><span class="line">       * 业务上的成功或失败</span><br><span class="line">       */</span><br><span class="line">      private boolean success = true;</span><br><span class="line">  </span><br><span class="line">      /**</span><br><span class="line">       * 返回码</span><br><span class="line">       */</span><br><span class="line">      private String code;</span><br><span class="line">  </span><br><span class="line">      /**</span><br><span class="line">       * 返回信息</span><br><span class="line">       */</span><br><span class="line">      private String message;</span><br><span class="line">  </span><br><span class="line">      /**</span><br><span class="line">       * 返回泛型数据，自定义类型</span><br><span class="line">       */</span><br><span class="line">      private T content;</span><br><span class="line">  </span><br><span class="line">      public String getCode() &#123;</span><br><span class="line">          return code;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      public void setCode(String code) &#123;</span><br><span class="line">          this.code = code;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      public boolean getSuccess() &#123;</span><br><span class="line">          return success;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      public void setSuccess(boolean success) &#123;</span><br><span class="line">          this.success = success;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      public String getMessage() &#123;</span><br><span class="line">          return message;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      public void setMessage(String message) &#123;</span><br><span class="line">          this.message = message;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      public T getContent() &#123;</span><br><span class="line">          return content;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      public void setContent(T content) &#123;</span><br><span class="line">          this.content = content;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      @Override</span><br><span class="line">      public String toString() &#123;</span><br><span class="line">          final StringBuffer sb = new StringBuffer(&quot;ResponseDto&#123;&quot;);</span><br><span class="line">          sb.append(&quot;success=&quot;).append(success);</span><br><span class="line">          sb.append(&quot;, code=&#x27;&quot;).append(code).append(&#x27;\&#x27;&#x27;);</span><br><span class="line">          sb.append(&quot;, message=&#x27;&quot;).append(message).append(&#x27;\&#x27;&#x27;);</span><br><span class="line">          sb.append(&quot;, content=&quot;).append(content);</span><br><span class="line">          sb.append(&#x27;&#125;&#x27;);</span><br><span class="line">          return sb.toString();</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>列表查询业务上一般都是成功的（查不到数据也是成功的），所以不需要判断success。保存有可能失败，所以<br>需要判断success。</p>
</li>
<li><p>问题：同一个页面有多个modal时，用class选择时，会出现重复，所以需要给每个modal增加id属性。</p>
</li>
</ul>
<h2 id="5-7修改删除大章功能"><a href="#5-7修改删除大章功能" class="headerlink" title="5-7修改删除大章功能"></a>5-7修改删除大章功能</h2><p>增加大章修改功能：增加修改大章功能，新增和修改用同一个保存功能，通过传入的参数id有没有值来判断</p>
<ul>
<li>新增和编辑功能弹出来的模态框是同一个。vue，controller，service调用的都是同一个方法，只是到service层再根据id是否有值来判断是新增还是删除。</li>
<li>hidden-md：中等屏幕隐藏，其它可见：hidden-lg：大屏幕隐藏，其它可见。相反的有visible-xx.</li>
<li>数据显示：将表格行数据显示到表单。反过来，数据修改：修改表单影响表格行数据。解决这个问题可以使用$.extend({},chapter)</li>
<li>发现问题：对文本编辑后，点击新增弹出文本框，会带出上一次编辑过的值，只需要在add里添加_this.chapter&#x3D;{};即可</li>
</ul>
<p>增加大章删除功能：</p>
<ul>
<li>restful是一种请求风格。简单理解：通过看url就能知道这个请求时要对什么资源做什么操作。</li>
<li>1.在前端chapter.vue中删除样式按钮上添加；2.添加del方法</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">//1.</span><br><span class="line">v-on:click=&quot;del(chapter.id)&quot;</span><br><span class="line">//2.</span><br><span class="line">    del(id) &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      _this.$ajax.delete(&#x27;http://192.168.0.105:9000/business/admin/chapter/delete/&#x27; + id).then((respond) =&gt; &#123;</span><br><span class="line">        console.log(&quot;删除大章列表结果:&quot;, respond);</span><br><span class="line">        let resp = respond.data;</span><br><span class="line">        if (resp.success) &#123;</span><br><span class="line">          _this.list(1);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>在chaptercontroller中添加del</li>
</ul>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@DeleteMapping</span> (<span class="string">&quot;/delete/&#123;id&#125;&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> ResponseDto <span class="title function_">del</span><span class="params">(<span class="meta">@PathVariable</span>  String id)</span>&#123;</span><br><span class="line">    <span class="type">ResponseDto</span> <span class="variable">responseDto</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResponseDto</span>();</span><br><span class="line">    chapterService.delete(id);</span><br><span class="line">    <span class="keyword">return</span> responseDto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>在chapterservice添加delete</li>
</ul>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(String id)</span>&#123;</span><br><span class="line">    chapterMapper.deleteByPrimaryKey(id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-8集成前端通用组件"><a href="#5-8集成前端通用组件" class="headerlink" title="5-8集成前端通用组件"></a>5-8集成前端通用组件</h2><p>集成sweetalert2(<a class="link"   target="_blank" rel="noopener" href="https://sweetalert2.github.io/#download)%E7%94%A8%E4%BA%8E%E7%95%8C%E9%9D%A2%E6%B6%88%E6%81%AF%E7%A1%AE%E8%AE%A4%E6%A1%86%EF%BC%9A%E5%9B%A0%E4%B8%BA%E5%88%A0%E9%99%A4%E6%98%AF%E4%B8%80%E4%B8%AA%E6%9C%89%E9%A3%8E%E9%99%A9%E7%9A%84%E6%93%8D%E4%BD%9C" >https://sweetalert2.github.io/#download)用于界面消息确认框：因为删除是一个有风险的操作<i class="fas fa-external-link-alt"></i></a> ，需要有确认的动作</p>
<ul>
<li><p>首先在前端index.html中添加<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script></p>
</li>
<li><p>其次在chapter.vue中的del方法添加</p>
</li>
<li><pre><code class="java">del(id) &#123;
  let _this = this;
  Swal.fire(&#123;
    title: &#39;确认删除?&#39;,
    text: &quot;删除后不可恢复!&quot;,
    icon: &#39;warning&#39;,
    showCancelButton: true,
    confirmButtonColor: &#39;#3085d6&#39;,
    cancelButtonColor: &#39;#d33&#39;,
    confirmButtonText: &#39;确认!&#39;
  &#125;).then((result) =&gt; &#123;
    if (result.isConfirmed) &#123;
      _this.$ajax.delete(&#39;http://192.168.0.105:9000/business/admin/chapter/delete/&#39; + id).then((respond) =&gt; &#123;
        console.log(&quot;删除大章列表结果:&quot;, respond);
        let resp = respond.data;
        if (resp.success) &#123;
          _this.list(1);
          Swal.fire(
              &#39;删除成功!&#39;,
              &#39;你的文件已经删除&#39;,
              &#39;success&#39;
          )

        &#125;

      &#125;)

    &#125;
  &#125;)
&#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">制作消息提示框：制作toast组件，内部用sweetalert2实现</span><br><span class="line"></span><br><span class="line">- 通过修改timer可以设置弹出的时长，设置icon可以设置成成功、错误、警告等</span><br><span class="line"></span><br><span class="line">- 如果组件包括html代码，可以用vue组件；如果组件只有js代码，可以用原生的js</span><br><span class="line"></span><br><span class="line">- 首先在index.html中引入</span><br><span class="line"></span><br><span class="line">- ```html</span><br><span class="line">  &lt;!--确认框和提示框--&gt;</span><br><span class="line">  &lt;script src=&quot;//cdn.jsdelivr.net/npm/sweetalert2@11&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;script src=&quot;&lt;%= BASE_URL %&gt;static/js/toast.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;!--必须是这样的，顺序不能颠倒--&gt;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>其次因为toast是通用的，所以将其单独放在static&#x2F;js&#x2F;toast.js中，代码：</p>
</li>
<li><pre><code class="js">const Toast = Swal.mixin(&#123;
    toast: true,
    position: &#39;top-end&#39;,
    showConfirmButton: false,
    timer: 3000,
    timerProgressBar: true,
    didOpen: (toast) =&gt; &#123;
        toast.addEventListener(&#39;mouseenter&#39;, Swal.stopTimer)
        toast.addEventListener(&#39;mouseleave&#39;, Swal.resumeTimer)
    &#125;
&#125;);

toast = &#123;
    success:function (message)&#123;
        Toast.fire(&#123;
            icon: &#39;success&#39;,
            title: message
        &#125;);
    &#125;,
    error:function (message)&#123;
        Toast.fire(&#123;
            icon: &#39;error&#39;,
            title: message
        &#125;);
    &#125;,
    waning:function (message)&#123;
        Toast.fire(&#123;
            icon: &#39;waning&#39;,
            title:message
        &#125;);
    &#125;
&#125;;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 在chapter.vue引用直接  ：toast.success(&quot;保存成功&quot;);即可</span><br><span class="line"></span><br><span class="line">集成blockUI用于界面等待框：制作Loading组件，内部用jquery blockui插件</span><br><span class="line"></span><br><span class="line">- 等待框的作用：1.让用户知道，后端正在处理，耐心等待；2.防止用户恶意重复点击</span><br><span class="line"></span><br><span class="line">- 首先在index引用</span><br><span class="line"></span><br><span class="line">- ```html</span><br><span class="line">  &lt;!--  loading等待框--&gt;</span><br><span class="line">  &lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/jquery.blockUI/2.70.0-2014.11.23/jquery.blockUI.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;script src=&quot;&lt;%= BASE_URL %&gt;static/js/loading.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>loading.js写代码</p>
</li>
<li><pre><code class="js">Loading =&#123;
    show:function ()&#123;
        $.blockUI(&#123;
            message: &#39;&lt;img src=&quot;/static/image/loading.gif&quot;/&gt;&#39;,
            css: &#123;
                padding: &quot;10px&quot;,
                left: &quot;50%&quot;,
                width: &quot;80px&quot;,
                marginLeft: &quot;-40px&quot;,
            &#125;
        &#125;);
    &#125;,
    hide:function ()&#123;
        //故意做的延迟，实际不用
        setTimeout(function ()&#123;
            $.unblockUI();
        &#125;,500)
    &#125;
&#125;;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 在chapter调用：就是Loading.show();Loading.hide();</span><br><span class="line"></span><br><span class="line">给提示框换个样式：</span><br><span class="line"></span><br><span class="line">```js</span><br><span class="line">Toast = &#123;</span><br><span class="line">    success:function (message)&#123;</span><br><span class="line">        Swal.fire(&#123;</span><br><span class="line">            position: &#x27;top-end&#x27;,</span><br><span class="line">            icon: &#x27;success&#x27;,</span><br><span class="line">            title:message,</span><br><span class="line">            showConfirmButton: false,</span><br><span class="line">            timer: 3000</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    error:function (message)&#123;</span><br><span class="line">        Swal.fire(&#123;</span><br><span class="line">            position: &#x27;top-end&#x27;,</span><br><span class="line">            icon: &#x27;error&#x27;,</span><br><span class="line">            title: message,</span><br><span class="line">            showConfirmButton: false,</span><br><span class="line">            timer: 3000</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    warning:function (message)&#123;</span><br><span class="line">        Swal.fire(&#123;</span><br><span class="line">            position: &#x27;top-end&#x27;,</span><br><span class="line">            icon: &#x27;warning&#x27;,</span><br><span class="line">            title: message,</span><br><span class="line">            showConfirmButton: false,</span><br><span class="line">            timer: 3000</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>组件化的好处，只需要修改组件代码，就可以改变组件的样式，使用的地方完全不用动</p>
</li>
</ul>
<p>制作Confirm组件：</p>
<ul>
<li>创建confirm.js文件</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Confirm</span> = &#123;</span><br><span class="line">    <span class="attr">show</span>: <span class="keyword">function</span> (<span class="params">message, callback</span>) &#123;</span><br><span class="line">        <span class="title class_">Swal</span>.<span class="title function_">fire</span>(&#123;</span><br><span class="line">            <span class="attr">title</span>: <span class="string">&#x27;确认删除?&#x27;</span>,</span><br><span class="line">            <span class="attr">text</span>: <span class="string">&quot;删除后不可恢复!&quot;</span>,</span><br><span class="line">            <span class="attr">icon</span>: <span class="string">&#x27;warning&#x27;</span>,</span><br><span class="line">            <span class="attr">showCancelButton</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">confirmButtonColor</span>: <span class="string">&#x27;#3085d6&#x27;</span>,</span><br><span class="line">            <span class="attr">cancelButtonColor</span>: <span class="string">&#x27;#d33&#x27;</span>,</span><br><span class="line">            <span class="attr">confirmButtonText</span>: <span class="string">&#x27;确认!&#x27;</span></span><br><span class="line">        &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (result.<span class="property">isConfirmed</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span>(callback)&#123;<span class="comment">//回调函数</span></span><br><span class="line">                    <span class="title function_">callback</span>();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>在chapter.vue的del中使用</p>
</li>
<li><pre><code class="vue">Confirm.show(&quot;删除后不可恢复!&quot;,function ()&#123;
  Loading.show();
  _this.$ajax.delete(&#39;http://192.168.0.105:9000/business/admin/chapter/delete/&#39; + id).then((respond) =&gt; &#123;
    Loading.hide();
    console.log(&quot;删除大章列表结果:&quot;, respond);
    let resp = respond.data;
    if (resp.success) &#123;
      _this.list(1);
      Toast.success(&quot;删除成功&quot;);
    &#125;
  &#125;)
&#125;);
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 5-9代码优化</span><br><span class="line"></span><br><span class="line">前端代码校验:1.增加工具类tool.js和校验类validator.js2.大章保存非空和长度增加校验</span><br><span class="line"></span><br><span class="line">- 首先在index引用</span><br><span class="line"></span><br><span class="line">- ```html</span><br><span class="line">  &lt;!--  通用工具类  --&gt;</span><br><span class="line">  &lt;script src=&quot;&lt;%= BASE_URL %&gt;static/js/tool.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;!--  校验类  --&gt;</span><br><span class="line">  &lt;script src=&quot;&lt;%= BASE_URL %&gt;static/js/validator.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>其次增加两个js</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Tool</span> = &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 空校验 null或&quot;&quot;都返回true</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">isEmpty</span>: <span class="keyword">function</span> (<span class="params">obj</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((<span class="keyword">typeof</span> obj == <span class="string">&#x27;string&#x27;</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> !obj || obj.<span class="title function_">replace</span>(<span class="regexp">/\s+/g</span>, <span class="string">&quot;&quot;</span>) == <span class="string">&quot;&quot;</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> (!obj || <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj) === <span class="string">&quot;&#123;&#125;&quot;</span> || obj.<span class="property">length</span> === <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 非空校验</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">isNotEmpty</span>: <span class="keyword">function</span> (<span class="params">obj</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> !<span class="variable language_">this</span>.<span class="title function_">isEmpty</span>(obj);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 长度校验</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">isLength</span>: <span class="keyword">function</span> (<span class="params">str, min, max</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> $.<span class="title function_">trim</span>(str).<span class="property">length</span> &gt;= min &amp;&amp; $.<span class="title function_">trim</span>(str).<span class="property">length</span> &lt;= max;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Validator</span> = &#123;</span><br><span class="line">    <span class="attr">require</span>: <span class="keyword">function</span> (<span class="params">value, text</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="title class_">Tool</span>.<span class="title function_">isEmpty</span>(value)) &#123;</span><br><span class="line">            <span class="title class_">Toast</span>.<span class="title function_">warning</span>(text + <span class="string">&quot;不能为空&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">length</span>: <span class="keyword">function</span> (<span class="params">value, text, min, max</span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!<span class="title class_">Tool</span>.<span class="title function_">isLength</span>(value, min, max)) &#123;</span><br><span class="line">            <span class="title class_">Toast</span>.<span class="title function_">warning</span>(text + <span class="string">&quot;长度&quot;</span> + min + <span class="string">&quot;~&quot;</span> + max + <span class="string">&quot;位&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>最后在chapter中save方法中调用：</p>
</li>
<li><pre><code class="vue">// 保存校验
if (!Validator.require(_this.chapter.name, &quot;名称&quot;)
    || !Validator.length(_this.chapter.courseId, &quot;课程ID&quot;, 1, 8)) &#123;
  return;
&#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">后端代码校验：是为了防止被绕过前端界面，利用第三方工具如postman，直接访问后端接口</span><br><span class="line"></span><br><span class="line">```html</span><br><span class="line">1.增加了后端校验工具类ValidatorUtil</span><br><span class="line">2.增加了统一异常处理ControllerExceptionHandler，关键字@ControllerAdvice</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>自定义异常可以继承RuntimeException或Exception。一般项目内部的业务异常，可以用RuntimeException，不需要trycatch。如果是开发一些框架或工具类，明确告诉外部需要做异常处理的，可以用Exception。另外还需要考虑事务中的异常处理。在server中建立ValidatorException.java</p>
</li>
<li><pre><code class="java">package com.course.server.exception;

public class ValidatorException extends RuntimeException&#123;
    public ValidatorException(String message)&#123;super(message);&#125;
&#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 其次在util中建立ValidatorUtil文件</span><br><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  package com.course.server.util;</span><br><span class="line">  </span><br><span class="line">  import com.course.server.exception.ValidatorException;</span><br><span class="line">  import org.springframework.util.StringUtils;</span><br><span class="line">  </span><br><span class="line">  public class ValidatorUtil &#123;</span><br><span class="line">  </span><br><span class="line">      /**</span><br><span class="line">       * 空校验（null or &quot;&quot;）</span><br><span class="line">       */</span><br><span class="line">      public static void require(Object str, String fieldName) &#123;</span><br><span class="line">          if (StringUtils.isEmpty(str)) &#123;</span><br><span class="line">              throw new ValidatorException(fieldName + &quot;不能为空&quot;);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      /**</span><br><span class="line">       * 长度校验</span><br><span class="line">       */</span><br><span class="line">      public static void length(String str, String fieldName, int min, int max) &#123;</span><br><span class="line">          if (StringUtils.isEmpty(str)) &#123;</span><br><span class="line">              return;</span><br><span class="line">          &#125;</span><br><span class="line">          int length = 0;</span><br><span class="line">          if (!StringUtils.isEmpty(str)) &#123;</span><br><span class="line">              length = str.length();</span><br><span class="line">          &#125;</span><br><span class="line">          if (length &lt; min || length &gt; max) &#123;</span><br><span class="line">              throw new ValidatorException(fieldName + &quot;长度&quot; + min + &quot;~&quot; + max + &quot;位&quot;);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>如果直接在chaptercontroller中使用保存校验会出现问题：直接进行后端代码校验会出现问题：现象：后端出异常，导致前后收不到结果，vue中的.then方法没有执行，等待框没有关闭导致不能继续任何操作，只能刷新页面。</p>
</li>
<li><pre><code class="java">// 保存校验
ValidatorUtil.require(chapterDto.getName(), &quot;名称&quot;);
ValidatorUtil.require(chapterDto.getCourseId(), &quot;课程ID&quot;);
ValidatorUtil.length(chapterDto.getCourseId(), &quot;课程ID&quot;, 1, 8);
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 解决这个问题，写一个统一处理方法就在controller软件包下建一个ControllerExceptionHandler.java</span><br><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  package com.course.business.controller;</span><br><span class="line">  </span><br><span class="line">  import com.course.server.dto.ResponseDto;</span><br><span class="line">  import com.course.server.exception.ValidatorException;</span><br><span class="line">  import org.springframework.web.bind.annotation.ControllerAdvice;</span><br><span class="line">  import org.springframework.web.bind.annotation.ExceptionHandler;</span><br><span class="line">  import org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line">  @ControllerAdvice//@ControllerAdvice是Controller增强器，可以对Controller做统一的处理，如异常处理、数据处理等</span><br><span class="line">  public class ControllerExceptionHandler &#123;</span><br><span class="line">      @ExceptionHandler(value = ValidatorException.class)</span><br><span class="line">      @ResponseBody//以JISON方式返回</span><br><span class="line">      public ResponseDto validatorExceptionHandler(ValidatorException e)&#123;</span><br><span class="line">      ResponseDto responseDto = new ResponseDto();</span><br><span class="line">      responseDto.setSuccess(false);</span><br><span class="line">      responseDto.setMessage(e.getMessage());</span><br><span class="line">      return responseDto;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>有时候我们的接口原本是不对外的，或者只跟特定的第三方应用做对接，这时为了内部安全，不应该把参数的校验规则暴露出去，所以需要模糊返回信息。类似登录接门应该返回“用户名或密码错”，而不是“用户名不存在，或“密码错误”（容易被探测）。<strong>所以我们将返回统一信息如下，并设置一个日志返回真正信息。</strong></p>
</li>
<li><pre><code class="java">LOG.warn(e.getMessage());
responseDto.setMessage(&quot;请求参数异常!&quot;);
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 如果开发过程中提示“请求参数异常“说明后端有校验拦截，前端没有，此时应该把前端校验加上</span><br><span class="line"></span><br><span class="line">使用AOP制作一个统一日志输出</span><br><span class="line"></span><br><span class="line">```html</span><br><span class="line">1.增加了日志AOP，统一日志输出</span><br><span class="line">2.logback增加了打印日志跟踪号</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>统一日志处理可以用AOP也可以用Spring拦截器</p>
</li>
<li><p>约定优于配置。又一个约定：查询类接口以list或query开头，保存用save开头，删除用delete开头</p>
</li>
<li><p>首先在chaptercontroller中添加</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">LOG</span> <span class="operator">=</span> LoggerFactory.getLogger(ChapterController.class);</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">BUSINESS_NAME</span> <span class="operator">=</span> <span class="string">&quot;大章&quot;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>logback进行一行修改</p>
</li>
<li><pre><code class="xml">    &lt;encoder&gt;
        &lt;Pattern&gt;%d&#123;ss.SSS&#125; %highlight(%-5level) %blue(%-30logger&#123;30&#125;:%-4line) %green(%-8X&#123;UUID&#125;) %msg%n&lt;/Pattern&gt;
    &lt;/encoder&gt;

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 在server中的config加入LogAspect.java</span><br><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  package com.course.server.config;</span><br><span class="line">  </span><br><span class="line">  import com.alibaba.fastjson.JSONObject;</span><br><span class="line">  import com.alibaba.fastjson.support.spring.PropertyPreFilters;</span><br><span class="line">  import com.course.server.util.UuidUtil;</span><br><span class="line">  import org.aspectj.lang.JoinPoint;</span><br><span class="line">  import org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line">  import org.aspectj.lang.Signature;</span><br><span class="line">  import org.aspectj.lang.annotation.Around;</span><br><span class="line">  import org.aspectj.lang.annotation.Aspect;</span><br><span class="line">  import org.aspectj.lang.annotation.Before;</span><br><span class="line">  import org.aspectj.lang.annotation.Pointcut;</span><br><span class="line">  import org.slf4j.Logger;</span><br><span class="line">  import org.slf4j.LoggerFactory;</span><br><span class="line">  import org.slf4j.MDC;</span><br><span class="line">  import org.springframework.stereotype.Component;</span><br><span class="line">  import org.springframework.util.StringUtils;</span><br><span class="line">  import org.springframework.web.context.request.RequestContextHolder;</span><br><span class="line">  import org.springframework.web.context.request.ServletRequestAttributes;</span><br><span class="line">  import org.springframework.web.multipart.MultipartFile;</span><br><span class="line">  </span><br><span class="line">  import javax.servlet.ServletRequest;</span><br><span class="line">  import javax.servlet.ServletResponse;</span><br><span class="line">  import javax.servlet.http.HttpServletRequest;</span><br><span class="line">  import java.lang.reflect.Field;</span><br><span class="line">  </span><br><span class="line">  @Aspect</span><br><span class="line">  @Component</span><br><span class="line">  public class LogAspect &#123;</span><br><span class="line">  </span><br><span class="line">      private final static Logger LOG = LoggerFactory.getLogger(LogAspect.class);</span><br><span class="line">  </span><br><span class="line">      /** 定义一个切点 */</span><br><span class="line">      @Pointcut(&quot;execution(public * com.course.*.controller..*Controller.*(..))&quot;)</span><br><span class="line">      public void controllerPointcut() &#123;&#125;</span><br><span class="line">  </span><br><span class="line">      @Before(&quot;controllerPointcut()&quot;)</span><br><span class="line">      public void doBefore(JoinPoint joinPoint) throws Throwable &#123;</span><br><span class="line">          // 日志编号</span><br><span class="line">          MDC.put(&quot;UUID&quot;, UuidUtil.getShortUuid());</span><br><span class="line">  </span><br><span class="line">          // 开始打印请求日志</span><br><span class="line">          ServletRequestAttributes attributes = (ServletRequestAttributes) RequestContextHolder.getRequestAttributes();</span><br><span class="line">          HttpServletRequest request = attributes.getRequest();</span><br><span class="line">          Signature signature = joinPoint.getSignature();</span><br><span class="line">          String name = signature.getName();</span><br><span class="line">  </span><br><span class="line">          // 打印业务操作</span><br><span class="line">          String nameCn = &quot;&quot;;</span><br><span class="line">          if (name.contains(&quot;list&quot;) || name.contains(&quot;query&quot;)) &#123;</span><br><span class="line">              nameCn = &quot;查询&quot;;</span><br><span class="line">          &#125; else if (name.contains(&quot;save&quot;)) &#123;</span><br><span class="line">              nameCn = &quot;保存&quot;;</span><br><span class="line">          &#125; else if (name.contains(&quot;delete&quot;)) &#123;</span><br><span class="line">              nameCn = &quot;删除&quot;;</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">              nameCn = &quot;操作&quot;;</span><br><span class="line">          &#125;</span><br><span class="line">  </span><br><span class="line">          // 使用反射，获取业务名称</span><br><span class="line">          Class clazz = signature.getDeclaringType();</span><br><span class="line">          Field field;</span><br><span class="line">          String businessName = &quot;&quot;;</span><br><span class="line">          try &#123;</span><br><span class="line">              field = clazz.getField(&quot;BUSINESS_NAME&quot;);</span><br><span class="line">              if (!StringUtils.isEmpty(field)) &#123;</span><br><span class="line">                  businessName = (String) field.get(clazz);</span><br><span class="line">              &#125;</span><br><span class="line">          &#125; catch (NoSuchFieldException e) &#123;</span><br><span class="line">              LOG.error(&quot;未获取到业务名称&quot;);</span><br><span class="line">          &#125; catch (SecurityException e) &#123;</span><br><span class="line">              LOG.error(&quot;获取业务名称失败&quot;, e);</span><br><span class="line">          &#125;</span><br><span class="line">  </span><br><span class="line">          // 打印请求信息</span><br><span class="line">          LOG.info(&quot;------------- 【&#123;&#125;】&#123;&#125;开始 -------------&quot;, businessName, nameCn);</span><br><span class="line">          LOG.info(&quot;请求地址: &#123;&#125; &#123;&#125;&quot;, request.getRequestURL().toString(), request.getMethod());</span><br><span class="line">          LOG.info(&quot;类名方法: &#123;&#125;.&#123;&#125;&quot;, signature.getDeclaringTypeName(), name);</span><br><span class="line">          LOG.info(&quot;远程地址: &#123;&#125;&quot;, request.getRemoteAddr());</span><br><span class="line">  </span><br><span class="line">          // 打印请求参数</span><br><span class="line">          Object[] args = joinPoint.getArgs();</span><br><span class="line">          Object[] arguments  = new Object[args.length];</span><br><span class="line">          for (int i = 0; i &lt; args.length; i++) &#123;</span><br><span class="line">              if (args[i] instanceof ServletRequest</span><br><span class="line">                      || args[i] instanceof ServletResponse</span><br><span class="line">                      || args[i] instanceof MultipartFile) &#123;</span><br><span class="line">                  continue;</span><br><span class="line">              &#125;</span><br><span class="line">              arguments[i] = args[i];</span><br><span class="line">          &#125;</span><br><span class="line">          // 排除字段，敏感字段或太长的字段不显示</span><br><span class="line">          String[] excludeProperties = &#123;&quot;shard&quot;&#125;;</span><br><span class="line">          PropertyPreFilters filters = new PropertyPreFilters();</span><br><span class="line">          PropertyPreFilters.MySimplePropertyPreFilter excludefilter = filters.addFilter();</span><br><span class="line">          excludefilter.addExcludes(excludeProperties);</span><br><span class="line">          LOG.info(&quot;请求参数: &#123;&#125;&quot;, JSONObject.toJSONString(arguments, excludefilter)); // 为空的会不打印，但是像图片等长字段也会打印</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      @Around(&quot;controllerPointcut()&quot;)</span><br><span class="line">      public Object doAround(ProceedingJoinPoint proceedingJoinPoint) throws Throwable &#123;</span><br><span class="line">          long startTime = System.currentTimeMillis();</span><br><span class="line">          Object result = proceedingJoinPoint.proceed();</span><br><span class="line">          // 排除字段，敏感字段或太长的字段不显示</span><br><span class="line">          String[] excludeProperties = &#123;&quot;password&quot;, &quot;shard&quot;&#125;;</span><br><span class="line">          PropertyPreFilters filters = new PropertyPreFilters();</span><br><span class="line">          PropertyPreFilters.MySimplePropertyPreFilter excludefilter = filters.addFilter();</span><br><span class="line">          excludefilter.addExcludes(excludeProperties);</span><br><span class="line">          LOG.info(&quot;返回结果: &#123;&#125;&quot;, JSONObject.toJSONString(result, excludefilter));</span><br><span class="line">          LOG.info(&quot;------------- 结束 耗时：&#123;&#125; ms -------------&quot;, System.currentTimeMillis() - startTime);</span><br><span class="line">          return result;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>当然需要添加依赖：根目录和server依赖</p>
</li>
<li><p>&#96;&#96;&#96;xml</p>
<dependency>
    <groupId>com.alibaba</groupId>
    <artifactId>fastjson</artifactId>
    <version>1.2.60</version>
</dependency>


<!-- AOP -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-aop</artifactId>
</dependency>

<dependency>
    <groupId>com.alibaba</groupId>
    <artifactId>fastjson</artifactId>
</dependency>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">前端增加统一日志输出：在main.js</span><br><span class="line"></span><br><span class="line">```js</span><br><span class="line">/**</span><br><span class="line"> * axias拦截器</span><br><span class="line"> */</span><br><span class="line">axios.interceptors.request.use(function (config)&#123;</span><br><span class="line">  console.log(&quot;请求:&quot;,config);</span><br><span class="line">  return config;</span><br><span class="line">&#125;,error =&gt; &#123;&#125;);</span><br><span class="line">axios.interceptors.request.use(function (response)&#123;</span><br><span class="line">  console.log(&quot;返回结果:&quot;,response);</span><br><span class="line">  return response;</span><br><span class="line">&#125;,error =&gt; &#123;&#125;);</span><br></pre></td></tr></table></figure></li>
</ul>

        </div>

        
            <div class="post-copyright-info">
                <div class="article-copyright-info-container">
    <ul>
        <li>Post title：Spring Cloud + Vue 前后端分离1</li>
        <li>Post author：Fang</li>
        <li>Create time：2022-01-07 10:50:36</li>
        <li>
            Post link：https://ainianxu.github.io/2022/01/07/Spring Cloud + Vue 前后端分离/
        </li>
        <li>
            Copyright Notice：All articles in this blog are licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> unless stating additionally.
        </li>
    </ul>
</div>

            </div>
        

        
            <ul class="post-tags-box">
                
                    <li class="tag-item">
                        <a href="/tags/%E5%AE%8C%E6%95%B4%E9%A1%B9%E7%9B%AE/">#完整项目</a>&nbsp;
                    </li>
                
            </ul>
        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/2022/02/07/Spring%20Cloud%20+%20Vue%20%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%202-1/"
                        >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">Spring Cloud + Vue 前后端分离2-1</span>
                                <span class="post-nav-item">Prev posts</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/2021/08/21/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%20day13%E6%B7%B1%E5%BA%A6%E5%8D%B7%E7%A7%AF%E7%BD%91%E7%BB%9C%EF%BC%9A%E5%AE%9E%E4%BE%8B%E6%8E%A2%E7%A9%B6/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">深度学习 day13深度卷积网络：实例探究</span>
                                <span class="post-nav-item">Next posts</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
            <div class="comment-container">
                <div class="comments-container">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
        <i class="fas fa-comments">&nbsp;Comments</i>
    </div>
    

        
            
    <div class="valine-container">
        <script data-pjax
                src="//cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js"></script>
        <div id="vcomments"></div>
        <script data-pjax>
            function loadValine() {
                new Valine({
                    el: '#vcomments',
                    appId: 'loa9BVbgmyFLwBMHhg1Cycx1-gzGzoHsz',
                    appKey: '47pIz6ewIXRi5251WyfUpQOB',
                    meta: ['nick', 'mail', 'link'],
                    avatar: 'wavatar',
                    enableQQ: true,
                    placeholder: '😜 尽情吐槽吧~',
                    lang: 'en'.toLowerCase()
                });

                function getAuthor(language) {
                    switch (language) {
                        case 'en':
                            return 'Author';
                        case 'zh-CN':
                            return '博主';
                        default:
                            return 'Master';
                    }
                }

                // Add "Author" identify
                const getValineDomTimer = setInterval(() => {
                    const vcards = document.querySelectorAll('#vcomments .vcards .vcard');
                    if (vcards.length > 0) {
                        let author = 'Fang';

                        if (author) {
                            for (let vcard of vcards) {
                                const vnick_dom = vcard.querySelector('.vhead .vnick');
                                const vnick = vnick_dom.innerHTML;
                                if (vnick === author) {
                                    vnick_dom.innerHTML = `${vnick} <span class="author">${getAuthor(KEEP.hexo_config.language)}</span>`
                                }
                            }
                        }
                        clearInterval(getValineDomTimer);
                    } else {
                        clearInterval(getValineDomTimer);
                    }
                }, 2000);
            }

            if ('true') {
                const loadValineTimeout = setTimeout(() => {
                    loadValine();
                    clearTimeout(loadValineTimeout);
                }, 1000);
            } else {
                window.addEventListener('DOMContentLoaded', loadValine);
            }
        </script>
    </div>



        
    
</div>

            </div>
        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2021</span>
              -
            
            2022&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">Fang</a>
        </div>
        
            <script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv">
                        Visitor Count&nbsp;<span id="busuanzi_value_site_uv"></span>&ensp;
                    </span>
                
                
                    <span id="busuanzi_container_site_pv">
                        Totalview&nbsp;<span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            Powered by <a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;|&nbsp;Theme&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.4</a>
        </div>
        
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fas fa-comment"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        
            <li class="tools-item rss flex-center">
                <a class="flex-center"
                   href="/atom.xml"
                   target="_blank"
                >
                    <i class="fas fa-rss"></i>
                </a>
            </li>
        

        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
    </ul>
</div>

    </div>

    
        <aside class="page-aside">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC1%E7%AB%A0-%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83"><span class="nav-number">1.</span> <span class="nav-text">第1章 配置环境</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC2%E7%AB%A0-%E4%BD%BF%E7%94%A8Maven%E6%90%AD%E5%BB%BASpringCloud%E9%A1%B9%E7%9B%AE"><span class="nav-number">2.</span> <span class="nav-text">第2章 使用Maven搭建SpringCloud项目</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-%E4%BD%BF%E7%94%A8Eureka%E6%90%AD%E5%BB%BA%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83"><span class="nav-number">2.1.</span> <span class="nav-text">2-1 使用Eureka搭建注册中心</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-%E6%90%AD%E5%BB%BA%E4%B8%9A%E5%8A%A1%E6%A8%A1%E5%9D%97-system"><span class="nav-number">2.2.</span> <span class="nav-text">2-2 搭建业务模块-system</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-%E6%90%AD%E5%BB%BA%E8%B7%AF%E7%94%B1%E6%A8%A1%E5%9D%97-gateway"><span class="nav-number">2.3.</span> <span class="nav-text">2-3 搭建路由模块-gateway</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC3%E7%AB%A0-SpringBoot%E9%A1%B9%E7%9B%AE%E6%8A%80%E6%9C%AF%E6%95%B4%E5%90%88"><span class="nav-number">3.</span> <span class="nav-text">第3章 SpringBoot项目技术整合</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-%E9%9B%86%E6%88%90%E6%8C%81%E4%B9%85%E5%B1%82%E6%A1%86%E6%9E%B6Mybatis"><span class="nav-number">3.1.</span> <span class="nav-text">3-1 集成持久层框架Mybatis</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%96"><span class="nav-number">3.2.</span> <span class="nav-text">3-2 项目优化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3-%E6%90%AD%E5%BB%BA%E6%9C%8D%E5%8A%A1%E6%A8%A1%E5%9D%97-server"><span class="nav-number">3.3.</span> <span class="nav-text">3-3 搭建服务模块-server</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-4-%E9%9B%86%E6%88%90mybatis-generator"><span class="nav-number">3.4.</span> <span class="nav-text">3-4 集成mybatis generator</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC4%E7%AB%A0-%E4%BD%BF%E7%94%A8Vue-cli-4%E6%90%AD%E5%BB%BA%E7%AE%A1%E7%90%86%E6%8E%A7%E5%8F%B0"><span class="nav-number">4.</span> <span class="nav-text">第4章 使用Vue cli 4搭建管理控台</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-%E4%BD%BF%E7%94%A8vue-cli%E5%88%9B%E5%BB%BAadmin%E9%A1%B9%E7%9B%AE"><span class="nav-number">4.1.</span> <span class="nav-text">4-1 使用vue cli创建admin项目</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2-%E9%9B%86%E6%88%90bootstrap%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E6%A8%A1%E6%9D%BFace"><span class="nav-number">4.2.</span> <span class="nav-text">4-2 集成bootstrap后台管理模板ace</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-3-%E9%9B%86%E6%88%90%E8%B7%AF%E7%94%B1vue-route"><span class="nav-number">4.3.</span> <span class="nav-text">4-3 集成路由vue-route</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-6-%E5%A2%9E%E5%8A%A0%E6%96%B0%E5%A2%9E%E5%A4%A7%E7%AB%A0%E5%8A%9F%E8%83%BD"><span class="nav-number">4.4.</span> <span class="nav-text">5-6 增加新增大章功能</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-7%E4%BF%AE%E6%94%B9%E5%88%A0%E9%99%A4%E5%A4%A7%E7%AB%A0%E5%8A%9F%E8%83%BD"><span class="nav-number">4.5.</span> <span class="nav-text">5-7修改删除大章功能</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-8%E9%9B%86%E6%88%90%E5%89%8D%E7%AB%AF%E9%80%9A%E7%94%A8%E7%BB%84%E4%BB%B6"><span class="nav-number">4.6.</span> <span class="nav-text">5-8集成前端通用组件</span></a></li></ol></li></ol>
    </div>
</div>
        </aside>
    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>



<script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/dark-light-toggle.js"></script>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/local-search.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/code-copy.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/lazyload.js"></script>


<div class="post-scripts pjax">
    
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/left-side-toggle.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/libs/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/toc.js"></script>
    
</div>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/libs/pjax.min.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            KEEP.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            KEEP.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            KEEP.refresh();
        });
    });
</script>



</body>
</html>
