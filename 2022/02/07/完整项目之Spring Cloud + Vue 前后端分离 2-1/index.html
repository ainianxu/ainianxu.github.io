<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="Fang">
    
    <title>
        
            完整项目之Spring Cloud + Vue 前后端分离2-1 |
        
        念~旭
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/favicon.ico">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/css/font-awesome.min.css">
    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"example.com","root":"/","language":"en","path":"search.json"};
    KEEP.theme_config = {"toc":{"enable":true,"number":true,"expand_all":true,"init_open":false},"style":{"primary_color":"#0066CC","avatar":"/images/favicon.ico","favicon":"/images/favicon.ico","article_img_align":"left","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":true,"scale":false},"first_screen":{"enable":true,"background_img":"/images/bg.svg","description":"进来就别走了！"},"scroll":{"progress_bar":{"enable":true},"percent":{"enable":true}}},"local_search":{"enable":true,"preload":true},"code_copy":{"enable":true,"style":"default"},"pjax":{"enable":true},"lazyload":{"enable":true},"version":"3.4.4"};
    KEEP.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
  </script>
<meta name="generator" content="Hexo 6.1.0"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
</head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fas fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                念~旭
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                HOME
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                ARCHIVES
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/links"
                            >
                                LINKS
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/about"
                            >
                                ABOUT
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">HOME</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">ARCHIVES</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/links">LINKS</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/about">ABOUT</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">完整项目之Spring Cloud + Vue 前后端分离2-1</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/favicon.ico">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">Fang</span>
                        
                            <span class="author-label">Lv6</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;
        <span class="pc">2022-02-07 15:20:23</span>
        <span class="mobile">2022-02-07 15:20</span>
    </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/%E5%AE%8C%E6%95%B4%E9%A1%B9%E7%9B%AE/">完整项目</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fas fa-file-word"></i>&nbsp;<span>12.1k Words</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fas fa-clock"></i>&nbsp;<span>68 Mins</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <h1 id="第6章-通用代码生成器开发"><a href="#第6章-通用代码生成器开发" class="headerlink" title="第6章 通用代码生成器开发"></a>第6章 通用代码生成器开发</h1><p>本章将演示代码生成器的制作，学习模板引擎freemarker的使用。通过代码生成器可以快速生成dto、service、controller和vue界面代码，再配合上mybatis generator，可以快速完成单表的增删改查管理功能，极大的提高开发效率。另外，本章的知识也可应用于静态页面生成、导出复杂excel等涉及文件生成的场景。…</p>
<h2 id="6-1-代码生成器原理介绍"><a href="#6-1-代码生成器原理介绍" class="headerlink" title="6-1 代码生成器原理介绍"></a>6-1 代码生成器原理介绍</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.增加generator模块，用于代码生成</span><br><span class="line">2.集成freemarker</span><br></pre></td></tr></table></figure>

<ul>
<li><p>freemarker和thymeleaf代码风格：前一个的逻辑主要写在自定义标签中；后一个的逻辑主要写在标签的属性中，web开发时可读性好一点。</p>
</li>
<li><p>步骤1：在父pom.xml中添加freemarker.jar依赖</p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 模板引擎freemarker --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.freemarker<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>freemarker<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.29<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>步骤2：增加generator子模块，代码生成器专用，并添加freemarker.jar依赖</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 模板引擎freemarker --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.freemarker<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>freemarker<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>步骤3：添加模板文件test.ftl和启动文件TestUtil.java</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">package com.course.generator.test;</span><br><span class="line"></span><br><span class="line">public class Test &#123;</span><br><span class="line">/**</span><br><span class="line">* ID111</span><br><span class="line">*/</span><br><span class="line">private String id;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.generator.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> freemarker.template.Configuration;</span><br><span class="line"><span class="keyword">import</span> freemarker.template.DefaultObjectWrapper;</span><br><span class="line"><span class="keyword">import</span> freemarker.template.Template;</span><br><span class="line"><span class="keyword">import</span> freemarker.template.TemplateException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">static</span> <span class="type">String</span> <span class="variable">ftlPath</span> <span class="operator">=</span> <span class="string">&quot;generator\\src\\main\\java\\com\\course\\generator\\test\\&quot;</span>;</span><br><span class="line">        <span class="keyword">static</span> <span class="type">String</span> <span class="variable">toPath</span> <span class="operator">=</span> <span class="string">&quot;generator\\src\\main\\java\\com\\course\\generator\\test\\&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TemplateException &#123;</span><br><span class="line">                <span class="type">Configuration</span> <span class="variable">cfg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Configuration</span>(Configuration.VERSION_2_3_29);</span><br><span class="line">                cfg.setDirectoryForTemplateLoading(<span class="keyword">new</span> <span class="title class_">File</span>(ftlPath));</span><br><span class="line">                cfg.setObjectWrapper(<span class="keyword">new</span> <span class="title class_">DefaultObjectWrapper</span>(Configuration.VERSION_2_3_29));</span><br><span class="line">                <span class="type">Template</span> <span class="variable">temp</span> <span class="operator">=</span> cfg.getTemplate(<span class="string">&quot;test.ftl&quot;</span>);</span><br><span class="line"></span><br><span class="line">                <span class="type">FileWriter</span> <span class="variable">fw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileWriter</span>(toPath + <span class="string">&quot;Test.java&quot;</span>);</span><br><span class="line">                <span class="type">BufferedWriter</span> <span class="variable">bw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(fw);</span><br><span class="line">                temp.process(<span class="literal">null</span>, bw);</span><br><span class="line">                bw.flush();</span><br><span class="line">                fw.close();</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>.ftl是freemarker约定的模板后缀名，也可以改成任意其他后缀；ftlPath：模板文件所在的路径；toPath：要生成的文件的路径</li>
</ul>
<h2 id="6-2-controller层和service层代码生成"><a href="#6-2-controller层和service层代码生成" class="headerlink" title="6-2 controller层和service层代码生成"></a>6-2 controller层和service层代码生成</h2><p>小节表持久层代码生成：</p>
<ul>
<li>创建一个all.sql</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># 小节</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `Section`;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> `Section`</span><br><span class="line">(</span><br><span class="line">    `id`         <span class="type">CHAR</span>(<span class="number">8</span>)     <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;ID&#x27;</span>,</span><br><span class="line">    `title`      <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;标题&#x27;</span>,</span><br><span class="line">    `course_id`  <span class="type">CHAR</span>(<span class="number">8</span>) COMMENT <span class="string">&#x27;课程|course.id&#x27;</span>,</span><br><span class="line">    `chapter_id` <span class="type">CHAR</span>(<span class="number">8</span>) COMMENT <span class="string">&#x27;大章|chapter.id&#x27;</span>,</span><br><span class="line">    `video`      <span class="type">VARCHAR</span>(<span class="number">200</span>) COMMENT <span class="string">&#x27;视频&#x27;</span>,</span><br><span class="line">    `<span class="type">time</span>`       <span class="type">INT</span> COMMENT <span class="string">&#x27;时长|单位秒&#x27;</span>,</span><br><span class="line">    `charge`     <span class="type">CHAR</span>(<span class="number">1</span>) COMMENT <span class="string">&#x27;收费|C 收费;F 免费&#x27;</span>,</span><br><span class="line">    `sort`       <span class="type">INT</span> COMMENT <span class="string">&#x27;顺序&#x27;</span>,</span><br><span class="line">    `created_at` DATETIME(<span class="number">3</span>) COMMENT <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line">    `updated_at` DATETIME(<span class="number">3</span>) COMMENT <span class="string">&#x27;修改时间&#x27;</span>,</span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">)engine <span class="operator">=</span>innodb <span class="keyword">default</span> charset<span class="operator">=</span>utf8mb4 comment<span class="operator">=</span><span class="string">&#x27;小节&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `section`(id,title,course_id,chapter_id,video,<span class="type">time</span>,charge,sort,created_at,updated_at)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="string">&#x27;00000001&#x27;</span>,<span class="string">&#x27;测试小节01&#x27;</span>,<span class="string">&#x27;00000001&#x27;</span>,<span class="string">&#x27;00000000&#x27;</span>,<span class="string">&#x27;&#x27;</span>,<span class="number">500</span>,<span class="string">&#x27;F&#x27;</span>,<span class="number">1</span>,now(),now());</span><br></pre></td></tr></table></figure>

<ul>
<li>再在generatorconfig中添加代码<table tableName="section" domainObjectName="Section"/>，运用mybatis-generator代码生成器。</li>
</ul>
<p>service层代码生成：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>制作freemarkerUtil，简化生成器的使用</span><br><span class="line"><span class="number">2.</span>新增ServerGenerator，用于生成后端代码;controller,service,dto</span><br></pre></td></tr></table></figure>

<ul>
<li><p>ftlPath是统一放模板的地方，这个属性值一般不会变，所以可以直接放在工具类里</p>
</li>
<li><p>首先建立FreemarkerUtil</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.generator.server;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.course.generator.util.DbUtil;</span><br><span class="line"><span class="keyword">import</span> com.course.generator.util.Field;</span><br><span class="line"><span class="keyword">import</span> com.course.generator.util.FreemarkerUtil;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.Document;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.Element;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.io.SAXReader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServerGenerator</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">String</span> <span class="variable">MODULE</span> <span class="operator">=</span> <span class="string">&quot;business&quot;</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">String</span> <span class="variable">toDtoPath</span> <span class="operator">=</span> <span class="string">&quot;server\\src\\main\\java\\com\\course\\server\\dto\\&quot;</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">String</span> <span class="variable">toServicePath</span> <span class="operator">=</span> <span class="string">&quot;server\\src\\main\\java\\com\\course\\server\\service\\&quot;</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">String</span> <span class="variable">toControllerPath</span> <span class="operator">=</span> MODULE + <span class="string">&quot;\\src\\main\\java\\com\\course\\&quot;</span> + MODULE + <span class="string">&quot;\\controller\\admin\\&quot;</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">String</span> <span class="variable">generatorConfigPath</span> <span class="operator">=</span> <span class="string">&quot;server\\src\\main\\resources\\generator\\generatorConfig.xml&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">module</span> <span class="operator">=</span> MODULE;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 只生成配置文件中的第一个table节点</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(generatorConfigPath);</span><br><span class="line">        SAXReader reader=<span class="keyword">new</span> <span class="title class_">SAXReader</span>();</span><br><span class="line">        <span class="comment">//读取xml文件到Document中</span></span><br><span class="line">        Document doc=reader.read(file);</span><br><span class="line">        <span class="comment">//获取xml文件的根节点</span></span><br><span class="line">        Element rootElement=doc.getRootElement();</span><br><span class="line">        <span class="comment">//读取context节点</span></span><br><span class="line">        <span class="type">Element</span> <span class="variable">contextElement</span> <span class="operator">=</span> rootElement.element(<span class="string">&quot;context&quot;</span>);</span><br><span class="line">        <span class="comment">//定义一个Element用于遍历</span></span><br><span class="line">        Element tableElement;</span><br><span class="line">        <span class="comment">//取第一个“table”的节点</span></span><br><span class="line">        tableElement=contextElement.elementIterator(<span class="string">&quot;table&quot;</span>).next();</span><br><span class="line">        <span class="type">String</span> <span class="variable">Domain</span> <span class="operator">=</span> tableElement.attributeValue(<span class="string">&quot;domainObjectName&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">tableName</span> <span class="operator">=</span> tableElement.attributeValue(<span class="string">&quot;tableName&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">tableNameCn</span> <span class="operator">=</span> DbUtil.getTableComment(tableName);</span><br><span class="line">        <span class="type">String</span> <span class="variable">domain</span> <span class="operator">=</span> Domain.substring(<span class="number">0</span>, <span class="number">1</span>).toLowerCase() + Domain.substring(<span class="number">1</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;表：&quot;</span>+tableElement.attributeValue(<span class="string">&quot;tableName&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;Domain：&quot;</span>+tableElement.attributeValue(<span class="string">&quot;domainObjectName&quot;</span>));</span><br><span class="line"></span><br><span class="line">        List&lt;Field&gt; fieldList = DbUtil.getColumnByTableName(tableName);</span><br><span class="line">        Set&lt;String&gt; typeSet = getJavaTypes(fieldList);</span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;Domain&quot;</span>, Domain);</span><br><span class="line">        map.put(<span class="string">&quot;domain&quot;</span>, domain);</span><br><span class="line">        map.put(<span class="string">&quot;tableNameCn&quot;</span>, tableNameCn);</span><br><span class="line">        map.put(<span class="string">&quot;module&quot;</span>, <span class="keyword">module</span>);</span><br><span class="line">        map.put(<span class="string">&quot;fieldList&quot;</span>, fieldList);</span><br><span class="line">        map.put(<span class="string">&quot;typeSet&quot;</span>, typeSet);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 生成dto</span></span><br><span class="line">        FreemarkerUtil.initConfig(<span class="string">&quot;dto.ftl&quot;</span>);</span><br><span class="line">        FreemarkerUtil.generator(toDtoPath + Domain + <span class="string">&quot;Dto.java&quot;</span>, map);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 生成service</span></span><br><span class="line">        FreemarkerUtil.initConfig(<span class="string">&quot;service.ftl&quot;</span>);</span><br><span class="line">        FreemarkerUtil.generator(toServicePath + Domain + <span class="string">&quot;Service.java&quot;</span>, map);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 生成controller</span></span><br><span class="line">        FreemarkerUtil.initConfig(<span class="string">&quot;controller.ftl&quot;</span>);</span><br><span class="line">        FreemarkerUtil.generator(toControllerPath + Domain + <span class="string">&quot;Controller.java&quot;</span>, map);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取所有的Java类型，使用Set去重</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Set&lt;String&gt; <span class="title function_">getJavaTypes</span><span class="params">(List&lt;Field&gt; fieldList)</span> &#123;</span><br><span class="line">        Set&lt;String&gt; set = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; fieldList.size(); i++) &#123;</span><br><span class="line">            <span class="type">Field</span> <span class="variable">field</span> <span class="operator">=</span> fieldList.get(i);</span><br><span class="line">            set.add(field.getJavaType());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> set;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>其次建立启动类ServerGenerator</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.generator.server;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.course.generator.util.FreemarkerUtil;</span><br><span class="line"><span class="keyword">import</span> freemarker.template.TemplateException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServerGenerator</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">String</span> <span class="variable">toPath</span> <span class="operator">=</span> <span class="string">&quot;generator\\src\\main\\java\\com\\course\\generator\\test\\&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TemplateException &#123;</span><br><span class="line">        FreemarkerUtil.initConfig(<span class="string">&quot;test.ftl&quot;</span>);</span><br><span class="line">        FreemarkerUtil.generator(toPath+<span class="string">&quot;Test.java&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.生成器开发，增加生成service层的代码</span><br></pre></td></tr></table></figure>

<ul>
<li>首先创建service.ftl，就是把chapterservice复制一份，把Chapter改成${Domain}，chapter改成${domain}</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.server.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.course.server.domain.$&#123;Domain&#125;;</span><br><span class="line"><span class="keyword">import</span> com.course.server.domain.$&#123;Domain&#125;Example;</span><br><span class="line"><span class="keyword">import</span> com.course.server.dto.$&#123;Domain&#125;Dto;</span><br><span class="line"><span class="keyword">import</span> com.course.server.dto.PageDto;</span><br><span class="line"><span class="keyword">import</span> com.course.server.mapper.$&#123;Domain&#125;Mapper;</span><br><span class="line"><span class="keyword">import</span> com.course.server.util.CopyUtil;</span><br><span class="line"><span class="keyword">import</span> com.course.server.util.UuidUtil;</span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.PageHelper;</span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.PageInfo;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.BeanUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.StringUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;Domain&#125;Service &#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> $&#123;Domain&#125;Mapper $&#123;domain&#125;Mapper;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 列表查询</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">list</span><span class="params">(PageDto pageDto)</span>&#123;</span><br><span class="line">        PageHelper.startPage(pageDto.getPage(),pageDto.getSize());</span><br><span class="line">        $&#123;Domain&#125;Example $&#123;domain&#125;Example = <span class="keyword">new</span> <span class="title class_">$</span>&#123;Domain&#125;Example();</span><br><span class="line"></span><br><span class="line">        List&lt;$&#123;Domain&#125;&gt; $&#123;domain&#125;List = $&#123;domain&#125;Mapper.selectByExample($&#123;domain&#125;Example);</span><br><span class="line">        PageInfo&lt;$&#123;Domain&#125;&gt; pageInfo =<span class="keyword">new</span> <span class="title class_">PageInfo</span>&lt;&gt;($&#123;domain&#125;List);</span><br><span class="line">        pageDto.setTotal(pageInfo.getTotal());</span><br><span class="line">        ArrayList&lt;$&#123;Domain&#125;Dto&gt; $&#123;domain&#125;DtoArrayList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;$&#123;Domain&#125;Dto&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, l=$&#123;domain&#125;List.size(); i &lt;l ; i++) &#123;</span><br><span class="line">            $&#123;Domain&#125; $&#123;domain&#125; = $&#123;domain&#125;List.get(i);</span><br><span class="line">            $&#123;Domain&#125;Dto $&#123;domain&#125;Dto = <span class="keyword">new</span> <span class="title class_">$</span>&#123;Domain&#125;Dto();</span><br><span class="line">            BeanUtils.copyProperties($&#123;domain&#125;,$&#123;domain&#125;Dto);</span><br><span class="line">            $&#123;domain&#125;DtoArrayList.add($&#123;domain&#125;Dto);</span><br><span class="line">        &#125;</span><br><span class="line">        pageDto.setList($&#123;domain&#125;DtoArrayList);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 保存，id有值时更新，无值时新增</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">($&#123;Domain&#125;Dto $&#123;domain&#125;Dto)</span>&#123;</span><br><span class="line">        $&#123;Domain&#125; $&#123;domain&#125; = CopyUtil.copy($&#123;domain&#125;Dto, $&#123;Domain&#125;.class);</span><br><span class="line">        <span class="keyword">if</span>(StringUtils.isEmpty($&#123;domain&#125;Dto.getId()))&#123;</span><br><span class="line">            <span class="built_in">this</span>.insert($&#123;domain&#125;);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="built_in">this</span>.update($&#123;domain&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 插入</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">($&#123;Domain&#125; $&#123;domain&#125;)</span>&#123;</span><br><span class="line">        $&#123;domain&#125;.setId(UuidUtil.getShortUuid());</span><br><span class="line">        $&#123;domain&#125;Mapper.insert($&#123;domain&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 更新</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">($&#123;Domain&#125; $&#123;domain&#125;)</span>&#123;</span><br><span class="line">        $&#123;domain&#125;Mapper.updateByPrimaryKey($&#123;domain&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(String id)</span>&#123;</span><br><span class="line">        $&#123;domain&#125;Mapper.deleteByPrimaryKey(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>其次修改ServerGenerator代码，添加代码变量Domain</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.generator.server;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.course.generator.util.FreemarkerUtil;</span><br><span class="line"><span class="keyword">import</span> freemarker.template.TemplateException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServerGenerator</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">String</span> <span class="variable">toServicePath</span> <span class="operator">=</span> <span class="string">&quot;server\\src\\main\\java\\com\\course\\server\\service\\&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TemplateException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">Domain</span> <span class="operator">=</span> <span class="string">&quot;Section&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">domain</span> <span class="operator">=</span> <span class="string">&quot;section&quot;</span>;</span><br><span class="line">        Map&lt;String,Object&gt; map =<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;Domain&quot;</span>,Domain);</span><br><span class="line">        map.put(<span class="string">&quot;domain&quot;</span>,domain);</span><br><span class="line"></span><br><span class="line">        FreemarkerUtil.initConfig(<span class="string">&quot;service.ftl&quot;</span>);</span><br><span class="line">        FreemarkerUtil.generator(toServicePath+Domain+<span class="string">&quot;Service.java&quot;</span>,map);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>最后改FreemarkerUtil代码，添加参数Map&lt;String,Object&gt; map和修改temp.process(map, bw);</li>
</ul>
<p>生成controller层代码，跟生成service一样</p>
<h2 id="6-3-dto层代码生成"><a href="#6-3-dto层代码生成" class="headerlink" title="6-3 dto层代码生成"></a>6-3 dto层代码生成</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.生成器开发：解决controller模板中的中文业务名称和模块名称问题</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="type">String</span> <span class="variable">MODULE</span> <span class="operator">=</span> <span class="string">&quot;business&quot;</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="type">String</span> <span class="variable">toControllerPath</span> <span class="operator">=</span> MODULE+<span class="string">&quot;\\src\\main\\java\\com\\course\\&quot;</span>+MODULE+<span class="string">&quot;\\controller\\admin\\&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">tableNameCn</span> <span class="operator">=</span> <span class="string">&quot;小节&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">module</span> <span class="operator">=</span> MODULE;</span><br><span class="line">map.put(<span class="string">&quot;tableNameCn&quot;</span>,tableNameCn);</span><br><span class="line">map.put(<span class="string">&quot;module&quot;</span>,<span class="keyword">module</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>就是添加了两个变量，再将模板ftl中的值换成变量的值</li>
</ul>
<p>dto层代码的生成：</p>
<ul>
<li><p>dto层的生成，需要知道表的所有字段，每个字段的类型需要映射成java类型，并且要把字段的变成小驼峰和大驼峰，比如course_id变成CourseId</p>
</li>
<li><p>Field类，用于存储每个字段的信息。流程：根据表名获取所有的字段信息，再将字段信息填充到Field类中，得到Field列表,之后将Field列表变量传入模板</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.generator.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Field</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name; <span class="comment">// 字段名：course_id</span></span><br><span class="line">    <span class="keyword">private</span> String nameHump; <span class="comment">// 字段名小驼峰：courseId</span></span><br><span class="line">    <span class="keyword">private</span> String nameBigHump; <span class="comment">// 字段名大驼峰：CourseId</span></span><br><span class="line">    <span class="keyword">private</span> String nameCn; <span class="comment">// 中文名：课程</span></span><br><span class="line">    <span class="keyword">private</span> String type; <span class="comment">// 字段类型：char(8)</span></span><br><span class="line">    <span class="keyword">private</span> String javaType; <span class="comment">// java类型：String</span></span><br><span class="line">    <span class="keyword">private</span> String comment; <span class="comment">// 注释：课程|ID</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getNameHump</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> nameHump;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNameHump</span><span class="params">(String nameHump)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.nameHump = nameHump;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getNameBigHump</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> nameBigHump;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNameBigHump</span><span class="params">(String nameBigHump)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.nameBigHump = nameBigHump;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getNameCn</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> nameCn;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNameCn</span><span class="params">(String nameCn)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.nameCn = nameCn;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getType</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> type;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setType</span><span class="params">(String type)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.type = type;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getComment</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> comment;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setComment</span><span class="params">(String comment)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.comment = comment;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getJavaType</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> javaType;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setJavaType</span><span class="params">(String javaType)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.javaType = javaType;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">StringBuffer</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>(<span class="string">&quot;Field&#123;&quot;</span>);</span><br><span class="line">        sb.append(<span class="string">&quot;name=&#x27;&quot;</span>).append(name).append(<span class="string">&#x27;\&#x27;&#x27;</span>);</span><br><span class="line">        sb.append(<span class="string">&quot;, nameHump=&#x27;&quot;</span>).append(nameHump).append(<span class="string">&#x27;\&#x27;&#x27;</span>);</span><br><span class="line">        sb.append(<span class="string">&quot;, nameBigHump=&#x27;&quot;</span>).append(nameBigHump).append(<span class="string">&#x27;\&#x27;&#x27;</span>);</span><br><span class="line">        sb.append(<span class="string">&quot;, nameCn=&#x27;&quot;</span>).append(nameCn).append(<span class="string">&#x27;\&#x27;&#x27;</span>);</span><br><span class="line">        sb.append(<span class="string">&quot;, type=&#x27;&quot;</span>).append(type).append(<span class="string">&#x27;\&#x27;&#x27;</span>);</span><br><span class="line">        sb.append(<span class="string">&quot;, javaType=&#x27;&quot;</span>).append(javaType).append(<span class="string">&#x27;\&#x27;&#x27;</span>);</span><br><span class="line">        sb.append(<span class="string">&quot;, comment=&#x27;&quot;</span>).append(comment).append(<span class="string">&#x27;\&#x27;&#x27;</span>);</span><br><span class="line">        sb.append(<span class="string">&#x27;&#125;&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>typeSet作用：整理出所有用到的Java类型，生成import语一种类型只需import一次，所以用set去重</p>
</li>
<li><p>JsonFormat注解：将后端日期类型格式化，再返回给前端</p>
</li>
<li><p>增加DbUtil.java</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.generator.util;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.regex.Matcher;</span><br><span class="line"><span class="keyword">import</span> java.util.regex.Pattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DbUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/courseimooc&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> <span class="string">&quot;courseimooc&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">pass</span> <span class="operator">=</span> <span class="string">&quot;666666&quot;</span>;</span><br><span class="line">            conn = DriverManager.getConnection(url, user, pass);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> conn;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获得表注释</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> tableName</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getTableComment</span><span class="params">(String tableName)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> getConnection();</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> conn.createStatement();</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> stmt.executeQuery(<span class="string">&quot;select table_comment from information_schema.tables Where table_name = &#x27;&quot;</span> + tableName + <span class="string">&quot;&#x27;&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">tableNameCH</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span> (rs != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span>(rs.next()) &#123;</span><br><span class="line">                tableNameCH = rs.getString(<span class="string">&quot;table_comment&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        rs.close();</span><br><span class="line">        stmt.close();</span><br><span class="line">        conn.close();</span><br><span class="line">        System.out.println(<span class="string">&quot;表名：&quot;</span> + tableNameCH);</span><br><span class="line">        <span class="keyword">return</span> tableNameCH;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获得所有列信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> tableName</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;Field&gt; <span class="title function_">getColumnByTableName</span><span class="params">(String tableName)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        List&lt;Field&gt; fieldList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> getConnection();</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> conn.createStatement();</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> stmt.executeQuery(<span class="string">&quot;show full columns from `&quot;</span> + tableName + <span class="string">&quot;`&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (rs != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span>(rs.next()) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">columnName</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;Field&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">type</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;Type&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">comment</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;Comment&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">nullAble</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;Null&quot;</span>); <span class="comment">//YES NO</span></span><br><span class="line">                <span class="type">Field</span> <span class="variable">field</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Field</span>();</span><br><span class="line">                field.setName(columnName);</span><br><span class="line">                field.setNameHump(lineToHump(columnName));</span><br><span class="line">                field.setNameBigHump(lineToBigHump(columnName));</span><br><span class="line">                field.setType(type);</span><br><span class="line">                field.setJavaType(DbUtil.sqlTypeToJavaType(rs.getString(<span class="string">&quot;Type&quot;</span>)));</span><br><span class="line">                field.setComment(comment);</span><br><span class="line">                <span class="keyword">if</span> (comment.contains(<span class="string">&quot;|&quot;</span>)) &#123;</span><br><span class="line">                    field.setNameCn(comment.substring(<span class="number">0</span>, comment.indexOf(<span class="string">&quot;|&quot;</span>)));</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    field.setNameCn(comment);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                fieldList.add(field);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        rs.close();</span><br><span class="line">        stmt.close();</span><br><span class="line">        conn.close();</span><br><span class="line">        System.out.println(<span class="string">&quot;列信息：&quot;</span> + fieldList);</span><br><span class="line">        <span class="keyword">return</span> fieldList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 下划线转小驼峰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">lineToHump</span><span class="params">(String str)</span>&#123;</span><br><span class="line">        <span class="type">Pattern</span> <span class="variable">linePattern</span> <span class="operator">=</span> Pattern.compile(<span class="string">&quot;_(\\w)&quot;</span>);</span><br><span class="line">        str = str.toLowerCase();</span><br><span class="line">        <span class="type">Matcher</span> <span class="variable">matcher</span> <span class="operator">=</span> linePattern.matcher(str);</span><br><span class="line">        <span class="type">StringBuffer</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">        <span class="keyword">while</span>(matcher.find())&#123;</span><br><span class="line">            matcher.appendReplacement(sb, matcher.group(<span class="number">1</span>).toUpperCase());</span><br><span class="line">        &#125;</span><br><span class="line">        matcher.appendTail(sb);</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 下划线转大驼峰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">lineToBigHump</span><span class="params">(String str)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> lineToHump(str);</span><br><span class="line">        <span class="keyword">return</span> s.substring(<span class="number">0</span>, <span class="number">1</span>).toUpperCase() + s.substring(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数据库类型转为Java类型</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">sqlTypeToJavaType</span><span class="params">(String sqlType)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (sqlType.toUpperCase().contains(<span class="string">&quot;varchar&quot;</span>.toUpperCase())</span><br><span class="line">                || sqlType.toUpperCase().contains(<span class="string">&quot;char&quot;</span>.toUpperCase())</span><br><span class="line">                || sqlType.toUpperCase().contains(<span class="string">&quot;text&quot;</span>.toUpperCase())) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;String&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sqlType.toUpperCase().contains(<span class="string">&quot;datetime&quot;</span>.toUpperCase())) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;Date&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sqlType.toUpperCase().contains(<span class="string">&quot;int&quot;</span>.toUpperCase())) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;Integer&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sqlType.toUpperCase().contains(<span class="string">&quot;long&quot;</span>.toUpperCase())) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;Long&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sqlType.toUpperCase().contains(<span class="string">&quot;decimal&quot;</span>.toUpperCase())) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;BigDecimal&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;String&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>记得导入数据库连接的依赖，然后使用在启动类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Field&gt; fieldList = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    fieldList = DbUtil.getColumnByTableName(domain);</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">Set&lt;String&gt; typeSet = getJavaTypes(fieldList);</span><br><span class="line">map.put(<span class="string">&quot;fieldList&quot;</span>,fieldList);</span><br><span class="line">map.put(<span class="string">&quot;typeSet&quot;</span>,typeSet);</span><br><span class="line"><span class="comment">//生成dto</span></span><br><span class="line">FreemarkerUtil.initConfig(<span class="string">&quot;dto.ftl&quot;</span>);</span><br><span class="line">FreemarkerUtil.generator(toDtoPath+Domain+<span class="string">&quot;Dto.java&quot;</span>,map);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Set&lt;String&gt; <span class="title function_">getJavaTypes</span><span class="params">(List&lt;Field&gt; fieldList)</span> &#123;</span><br><span class="line">        Set&lt;String&gt; set = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; fieldList.size(); i++) &#123;</span><br><span class="line">            <span class="type">Field</span> <span class="variable">field</span> <span class="operator">=</span> fieldList.get(i);</span><br><span class="line">            set.add(field.getJavaType());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> set;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  </span><br></pre></td></tr></table></figure>

<p>通用代码生成器和mybatis generator整合：</p>
<ul>
<li>首先增加依赖（根目录和generator）</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 读xml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.dom4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dom4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>在启动类增加代码</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="type">String</span> <span class="variable">generatorConfigPath</span> <span class="operator">=</span> <span class="string">&quot;server\\src\\main\\resources\\generator\\generatorConfig.xml&quot;</span>;</span><br><span class="line">    <span class="comment">// 只生成配置文件中的第一个table节点</span></span><br><span class="line">    <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(generatorConfigPath);</span><br><span class="line">    SAXReader reader=<span class="keyword">new</span> <span class="title class_">SAXReader</span>();</span><br><span class="line">    <span class="comment">//读取xml文件到Document中</span></span><br><span class="line">    Document doc= <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        doc = reader.read(file);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (DocumentException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//获取xml文件的根节点</span></span><br><span class="line">    Element rootElement=doc.getRootElement();</span><br><span class="line">    <span class="comment">//读取context节点</span></span><br><span class="line">    <span class="type">Element</span> <span class="variable">contextElement</span> <span class="operator">=</span> rootElement.element(<span class="string">&quot;context&quot;</span>);</span><br><span class="line">    <span class="comment">//定义一个Element用于遍历</span></span><br><span class="line">    Element tableElement;</span><br><span class="line">    <span class="comment">//取第一个“table”的节点</span></span><br><span class="line">    tableElement=contextElement.elementIterator(<span class="string">&quot;table&quot;</span>).next();</span><br><span class="line">    <span class="type">String</span> <span class="variable">Domain</span> <span class="operator">=</span> tableElement.attributeValue(<span class="string">&quot;domainObjectName&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">tableName</span> <span class="operator">=</span> tableElement.attributeValue(<span class="string">&quot;tableName&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">tableNameCn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        tableNameCn = DbUtil.getTableComment(tableName);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">String</span> <span class="variable">domain</span> <span class="operator">=</span> Domain.substring(<span class="number">0</span>, <span class="number">1</span>).toLowerCase() + Domain.substring(<span class="number">1</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;表：&quot;</span>+tableElement.attributeValue(<span class="string">&quot;tableName&quot;</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;Domain：&quot;</span>+tableElement.attributeValue(<span class="string">&quot;domainObjectName&quot;</span>));</span><br><span class="line">    List&lt;Field&gt; fieldList  = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        fieldList = DbUtil.getColumnByTableName(tableName);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Set&lt;String&gt; typeSet = getJavaTypes(fieldList);</span><br></pre></td></tr></table></figure>

<h2 id="6-4-前端vue界面代码生成"><a href="#6-4-前端vue界面代码生成" class="headerlink" title="6-4 前端vue界面代码生成"></a>6-4 前端vue界面代码生成</h2><p>vue cli多环境处理：自定义多环境变量必须以VUE_APP开头；NODE_ENV用来表示生产的环境</p>
<ul>
<li>在admin下增加两个文件分别是.env.dev和.env.prod</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">NODE_ENV=development</span><br><span class="line">VUE_APP_SERVER=http://192.168.0.105:9000</span><br><span class="line">////////////////////////////////////////////</span><br><span class="line">NODE_ENV=development</span><br><span class="line">VUE_APP_SERVER=http://server.imooc.com</span><br></pre></td></tr></table></figure>

<ul>
<li>最后将地址改为变量VUE_APP_SERVER</li>
</ul>
<p>新建VueGenerator用于生成vue页面代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.生成器开发：增加生成vue界面代码。</span><br><span class="line">2.小节管理增删改查功能测试成功</span><br></pre></td></tr></table></figure>

<ul>
<li>新建vue.ftl，代码从chapter.vue复制过来。注意：这里的粘贴应该右键-选择不带格式化的粘贴。一样改变量</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;</span><br><span class="line">      &lt;button v-on:click=&quot;add()&quot; class=&quot;btn btn-white btn-default btn-round&quot;&gt;</span><br><span class="line">        &lt;i class=&quot;ace-icon fa fa-edit red2&quot;&gt;&lt;/i&gt;</span><br><span class="line">        新增</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">    &amp;nbsp;</span><br><span class="line">      &lt;button v-on:click=&quot;list()&quot; class=&quot;btn btn-white btn-default btn-round&quot;&gt;</span><br><span class="line">        &lt;i class=&quot;ace-icon fa fa-refresh red2&quot;&gt;&lt;/i&gt;</span><br><span class="line">        刷新</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">    &lt;pagination ref=&quot;pagination&quot; v-bind:list=&quot;list&quot; v-bind:itemCount=&quot;8&quot;&gt;&lt;/pagination&gt;</span><br><span class="line">      &lt;table id=&quot;simple-table&quot; class=&quot;table  table-bordered table-hover&quot;&gt;</span><br><span class="line">        &lt;thead&gt;</span><br><span class="line">        &lt;tr&gt;&lt;#list fieldList as field&gt;</span><br><span class="line">            &lt;th&gt;$&#123;field.nameCn&#125;&lt;/th&gt;&lt;/#list&gt;</span><br><span class="line">            &lt;th&gt;操作&lt;/th&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;/thead&gt;</span><br><span class="line"></span><br><span class="line">        &lt;tbody&gt;</span><br><span class="line">        &lt;tr v-for=&quot;$&#123;domain&#125; in $&#123;domain&#125;s&quot;&gt;</span><br><span class="line">          &lt;#list fieldList as field&gt;</span><br><span class="line">            &lt;td&gt;&#123;&#123;$&#123;domain&#125;.$&#123;field.nameHump&#125;&#125;&#125;&lt;/td&gt;</span><br><span class="line">          &lt;/#list&gt;</span><br><span class="line"></span><br><span class="line">          &lt;td&gt;</span><br><span class="line">            &lt;div class=&quot;hidden-sm hidden-xs btn-group&quot;&gt;</span><br><span class="line"></span><br><span class="line">              &lt;button v-on:click=&quot;edit($&#123;domain&#125;)&quot; class=&quot;btn btn-xs btn-info&quot;&gt;</span><br><span class="line">                &lt;i class=&quot;ace-icon fa fa-pencil bigger-120&quot;&gt;&lt;/i&gt;</span><br><span class="line">              &lt;/button&gt;</span><br><span class="line"></span><br><span class="line">              &lt;button v-on:click=&quot;del($&#123;domain&#125;.id)&quot; class=&quot;btn btn-xs btn-danger&quot;&gt;</span><br><span class="line">                &lt;i class=&quot;ace-icon fa fa-trash-o bigger-120&quot;&gt;&lt;/i&gt;</span><br><span class="line">              &lt;/button&gt;</span><br><span class="line"></span><br><span class="line">            &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">            &lt;div class=&quot;hidden-md hidden-lg&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;inline pos-rel&quot;&gt;</span><br><span class="line">                &lt;button class=&quot;btn btn-minier btn-primary dropdown-toggle&quot; data-toggle=&quot;dropdown&quot; data-position=&quot;auto&quot;&gt;</span><br><span class="line">                  &lt;i class=&quot;ace-icon fa fa-cog icon-only bigger-110&quot;&gt;&lt;/i&gt;</span><br><span class="line">                &lt;/button&gt;</span><br><span class="line"></span><br><span class="line">                &lt;ul class=&quot;dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close&quot;&gt;</span><br><span class="line">                  &lt;li&gt;</span><br><span class="line">                    &lt;a href=&quot;#&quot; class=&quot;tooltip-info&quot; data-rel=&quot;tooltip&quot; title=&quot;View&quot;&gt;</span><br><span class="line">                                                         &lt;span class=&quot;blue&quot;&gt;</span><br><span class="line">                                                            &lt;i class=&quot;ace-icon fa fa-search-plus bigger-120&quot;&gt;&lt;/i&gt;</span><br><span class="line">                                                         &lt;/span&gt;</span><br><span class="line">                    &lt;/a&gt;</span><br><span class="line">                  &lt;/li&gt;</span><br><span class="line"></span><br><span class="line">                  &lt;li&gt;</span><br><span class="line">                    &lt;a href=&quot;#&quot; class=&quot;tooltip-success&quot; data-rel=&quot;tooltip&quot; title=&quot;Edit&quot;&gt;</span><br><span class="line">                                                         &lt;span class=&quot;green&quot;&gt;</span><br><span class="line">                                                            &lt;i class=&quot;ace-icon fa fa-pencil-square-o bigger-120&quot;&gt;&lt;/i&gt;</span><br><span class="line">                                                         &lt;/span&gt;</span><br><span class="line">                    &lt;/a&gt;</span><br><span class="line">                  &lt;/li&gt;</span><br><span class="line"></span><br><span class="line">                  &lt;li&gt;</span><br><span class="line">                    &lt;a href=&quot;#&quot; class=&quot;tooltip-error&quot; data-rel=&quot;tooltip&quot; title=&quot;Delete&quot;&gt;</span><br><span class="line">                                                         &lt;span class=&quot;red&quot;&gt;</span><br><span class="line">                                                            &lt;i class=&quot;ace-icon fa fa-trash-o bigger-120&quot;&gt;&lt;/i&gt;</span><br><span class="line">                                                         &lt;/span&gt;</span><br><span class="line">                    &lt;/a&gt;</span><br><span class="line">                  &lt;/li&gt;</span><br><span class="line">                &lt;/ul&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;/tbody&gt;</span><br><span class="line">      &lt;/table&gt;</span><br><span class="line">    &lt;div id=&quot;form-modal&quot; class=&quot;modal fade&quot; tabindex=&quot;-1&quot; role=&quot;dialog&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;modal-dialog&quot; role=&quot;document&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;modal-content&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;modal-header&quot;&gt;</span><br><span class="line">            &lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;modal&quot; aria-label=&quot;Close&quot;&gt;&lt;span aria-hidden=&quot;true&quot;&gt;&amp;times;&lt;/span&gt;&lt;/button&gt;</span><br><span class="line">            &lt;h4 class=&quot;modal-title&quot;&gt;表单&lt;/h4&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;modal-body&quot;&gt;</span><br><span class="line">            &lt;form class=&quot;form-horizontal&quot;&gt;</span><br><span class="line">              &lt;#list fieldList as field&gt;</span><br><span class="line">                &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">                  &lt;label  class=&quot;col-sm-2 control-label&quot;&gt;$&#123;field.nameCn&#125;&lt;/label&gt;</span><br><span class="line">                  &lt;div class=&quot;col-sm-10&quot;&gt;</span><br><span class="line">                    &lt;input v-model=&quot;$&#123;domain&#125;.$&#123;field.nameHump&#125;&quot; class=&quot;form-control&quot;  &gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/#list&gt;</span><br><span class="line"></span><br><span class="line">            &lt;/form&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;modal-footer&quot;&gt;</span><br><span class="line">            &lt;button type=&quot;button&quot; class=&quot;btn btn-default&quot; data-dismiss=&quot;modal&quot;&gt;取消&lt;/button&gt;</span><br><span class="line">            &lt;button v-on:click=&quot;save()&quot; type=&quot;button&quot; class=&quot;btn btn-primary&quot;&gt;保存&lt;/button&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;&lt;!-- /.modal-content --&gt;</span><br><span class="line">      &lt;/div&gt;&lt;!-- /.modal-dialog --&gt;</span><br><span class="line">    &lt;/div&gt;&lt;!-- /.modal --&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Pagination from &quot;../../components/pagination&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;Pagination&#125;,</span><br><span class="line">  name: &#x27;$&#123;domain&#125;&#x27;,</span><br><span class="line">  data: function () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      $&#123;domain&#125;: &#123;&#125;,</span><br><span class="line">      $&#123;domain&#125;s: []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted: function () &#123;</span><br><span class="line">    let _this = this;</span><br><span class="line">    _this.$refs.pagination.size = 5;</span><br><span class="line">    _this.list(1);</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    add() &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      _this.$&#123;domain&#125; = &#123;&#125;;</span><br><span class="line">      $(&quot;#form-modal&quot;).modal(&quot;show&quot;);</span><br><span class="line">    &#125;,</span><br><span class="line">    edit($&#123;domain&#125;) &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      _this.$&#123;domain&#125; = $.extend(&#123;&#125;, $&#123;domain&#125;);</span><br><span class="line">      $(&quot;#form-modal&quot;).modal(&quot;show&quot;);</span><br><span class="line">    &#125;,</span><br><span class="line">    /**</span><br><span class="line">     * 列表查询</span><br><span class="line">     */</span><br><span class="line">    list(page) &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      Loading.show();</span><br><span class="line">      _this.$ajax.post(process.env.VUE_APP_SERVER +&#x27;/$&#123;module&#125;/admin/$&#123;domain&#125;/list&#x27;, &#123;</span><br><span class="line">        page: page,</span><br><span class="line">        size: _this.$refs.pagination.size,</span><br><span class="line">      &#125;).then((respond) =&gt; &#123;</span><br><span class="line">        Loading.hide();</span><br><span class="line">        let resp = respond.data;</span><br><span class="line">        _this.$&#123;domain&#125;s = resp.content.list;</span><br><span class="line">        _this.$refs.pagination.render(page, resp.content.total);</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    /**</span><br><span class="line">     * 点击保存</span><br><span class="line">     */</span><br><span class="line">    save(page) &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line"></span><br><span class="line">      // 保存校验</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      Loading.show();</span><br><span class="line">      _this.$ajax.post(process.env.VUE_APP_SERVER +&#x27;/$&#123;module&#125;/admin/$&#123;domain&#125;/save&#x27;, _this.$&#123;domain&#125;).then((respond) =&gt; &#123;</span><br><span class="line">        Loading.hide();</span><br><span class="line">        let resp = respond.data;</span><br><span class="line">        if (resp.success) &#123;</span><br><span class="line">          $(&quot;#form-modal&quot;).modal(&quot;hide&quot;);</span><br><span class="line">          _this.list(1);</span><br><span class="line">          Toast.success(&quot;保存成功&quot;);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">          Toast.warning(resp.message);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    /**</span><br><span class="line">     * 点击删除</span><br><span class="line">     */</span><br><span class="line">    del(id) &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      Confirm.show(&quot;删除$&#123;tableNameCn&#125;后不可恢复!&quot;,function ()&#123;</span><br><span class="line">        Loading.show();</span><br><span class="line">        _this.$ajax.delete(process.env.VUE_APP_SERVER +&#x27;/$&#123;module&#125;/admin/$&#123;domain&#125;/delete/&#x27; + id).then((respond) =&gt; &#123;</span><br><span class="line">          Loading.hide();</span><br><span class="line">          let resp = respond.data;</span><br><span class="line">          if (resp.success) &#123;</span><br><span class="line">            _this.list(1);</span><br><span class="line">            Toast.success(&quot;删除成功&quot;);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>其次创建VueGenerator启动类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.generator.vue;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.course.generator.util.DbUtil;</span><br><span class="line"><span class="keyword">import</span> com.course.generator.util.Field;</span><br><span class="line"><span class="keyword">import</span> com.course.generator.util.FreemarkerUtil;</span><br><span class="line"><span class="keyword">import</span> freemarker.template.TemplateException;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.Document;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.DocumentException;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.Element;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.io.SAXReader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VueGenerator</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">String</span> <span class="variable">MODULE</span> <span class="operator">=</span> <span class="string">&quot;business&quot;</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">String</span> <span class="variable">toVuePath</span> <span class="operator">=</span> <span class="string">&quot;admin\\src\\views\\admin\\&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">String</span> <span class="variable">generatorConfigPath</span> <span class="operator">=</span> <span class="string">&quot;server\\src\\main\\resources\\generator\\generatorConfig.xml&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TemplateException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">module</span> <span class="operator">=</span> MODULE;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 只生成配置文件中的第一个table节点</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(generatorConfigPath);</span><br><span class="line">        SAXReader reader=<span class="keyword">new</span> <span class="title class_">SAXReader</span>();</span><br><span class="line">        <span class="comment">//读取xml文件到Document中</span></span><br><span class="line">        Document doc= <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            doc = reader.read(file);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (DocumentException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//获取xml文件的根节点</span></span><br><span class="line">        Element rootElement=doc.getRootElement();</span><br><span class="line">        <span class="comment">//读取context节点</span></span><br><span class="line">        <span class="type">Element</span> <span class="variable">contextElement</span> <span class="operator">=</span> rootElement.element(<span class="string">&quot;context&quot;</span>);</span><br><span class="line">        <span class="comment">//定义一个Element用于遍历</span></span><br><span class="line">        Element tableElement;</span><br><span class="line">        <span class="comment">//取第一个“table”的节点</span></span><br><span class="line">        tableElement=contextElement.elementIterator(<span class="string">&quot;table&quot;</span>).next();</span><br><span class="line">        <span class="type">String</span> <span class="variable">Domain</span> <span class="operator">=</span> tableElement.attributeValue(<span class="string">&quot;domainObjectName&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">tableName</span> <span class="operator">=</span> tableElement.attributeValue(<span class="string">&quot;tableName&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">tableNameCn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            tableNameCn = DbUtil.getTableComment(tableName);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">String</span> <span class="variable">domain</span> <span class="operator">=</span> Domain.substring(<span class="number">0</span>, <span class="number">1</span>).toLowerCase() + Domain.substring(<span class="number">1</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;表：&quot;</span>+tableElement.attributeValue(<span class="string">&quot;tableName&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;Domain：&quot;</span>+tableElement.attributeValue(<span class="string">&quot;domainObjectName&quot;</span>));</span><br><span class="line">        List&lt;Field&gt; fieldList  = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            fieldList = DbUtil.getColumnByTableName(tableName);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Set&lt;String&gt; typeSet = getJavaTypes(fieldList);</span><br><span class="line">        Map&lt;String,Object&gt; map =<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;Domain&quot;</span>,Domain);</span><br><span class="line">        map.put(<span class="string">&quot;domain&quot;</span>,domain);</span><br><span class="line">        map.put(<span class="string">&quot;tableNameCn&quot;</span>,tableNameCn);</span><br><span class="line">        map.put(<span class="string">&quot;module&quot;</span>,<span class="keyword">module</span>);</span><br><span class="line">        map.put(<span class="string">&quot;fieldList&quot;</span>,fieldList);</span><br><span class="line">        map.put(<span class="string">&quot;typeSet&quot;</span>,typeSet);</span><br><span class="line">        <span class="comment">//生成dto</span></span><br><span class="line">        FreemarkerUtil.initConfig(<span class="string">&quot;vue.ftl&quot;</span>);</span><br><span class="line">        FreemarkerUtil.generator(toVuePath+domain+<span class="string">&quot;.vue&quot;</span>,map);</span><br><span class="line">       &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取所有的Java类型，使用Set去重</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Set&lt;String&gt; <span class="title function_">getJavaTypes</span><span class="params">(List&lt;Field&gt; fieldList)</span> &#123;</span><br><span class="line">        Set&lt;String&gt; set = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; fieldList.size(); i++) &#123;</span><br><span class="line">            <span class="type">Field</span> <span class="variable">field</span> <span class="operator">=</span> fieldList.get(i);</span><br><span class="line">            set.add(field.getJavaType());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> set;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>然后在admin.vue增加</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;li class=&quot;active&quot; id=&quot;business-section-sidebar&quot;&gt;</span><br><span class="line">  &lt;router-link to=&quot;/business/section&quot;&gt;</span><br><span class="line">    &lt;i class=&quot;menu-icon fa fa-caret-right&quot;&gt;&lt;/i&gt;</span><br><span class="line">    小节管理</span><br><span class="line">  &lt;/router-link&gt;</span><br><span class="line">  &lt;b class=&quot;arrow&quot;&gt;&lt;/b&gt;</span><br><span class="line">&lt;/li&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>添加路由</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">,&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;business/section&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;business/section&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Section</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-5-字段校验和通用字段的处理"><a href="#6-5-字段校验和通用字段的处理" class="headerlink" title="6-5 字段校验和通用字段的处理"></a>6-5 字段校验和通用字段的处理</h2><p>前后端模板增加字段校验</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.生成器开发，前后端模板增加字段校验</span><br></pre></td></tr></table></figure>

<ul>
<li>在Field添加两个变量</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Boolean nullAble;<span class="comment">//是否可为空</span></span><br><span class="line"><span class="keyword">private</span> Integer length;<span class="comment">//字符串长度</span></span><br><span class="line"><span class="comment">/////////////////////////////////</span></span><br><span class="line"><span class="keyword">public</span> Boolean <span class="title function_">getNullAble</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> nullAble;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNullAble</span><span class="params">(Boolean nullAble)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.nullAble = nullAble;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Integer <span class="title function_">getLength</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLength</span><span class="params">(Integer length)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.length = length;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">////////////////////////////////////////////////////</span></span><br><span class="line">sb.append(<span class="string">&quot;, nullAble=&quot;</span>).append(nullAble);</span><br><span class="line">sb.append(<span class="string">&quot;, length=&quot;</span>).append(length);</span><br></pre></td></tr></table></figure>

<ul>
<li><p>其次在DbUtil中增加：</p>
</li>
<li><p>约定：当length&gt;0时，表示需要对lenth做校验，当length&#x3D;0时，表示不需要校验</p>
</li>
<li><p>疑问：char类型为什么不需要效验长度？</p>
</li>
<li><p>解答：char类型一般用于固定长度的字段，常见的有id字段和枚举字段，id字段不需要校验，枚举字段界面一般会有下拉框，不是手输的，不需要校验。</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">nullAble</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;Null&quot;</span>); <span class="comment">//YES NO</span></span><br><span class="line">field.setNullAble(<span class="string">&quot;YES&quot;</span>.equals(nullAble));</span><br><span class="line"><span class="keyword">if</span>(type.toUpperCase().contains(<span class="string">&quot;varchar&quot;</span>.toUpperCase()))&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">lengthStr</span> <span class="operator">=</span> type.substring(type.indexOf(<span class="string">&quot;(&quot;</span>)+<span class="number">1</span>,type.length()-<span class="number">1</span>);</span><br><span class="line">    field.setLength(Integer.valueOf(lengthStr));</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    field.setLength(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>增加controller.ftl的保存校验</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;#list fieldList as field&gt;</span><br><span class="line">&lt;#if !field.nullAble&gt;</span><br><span class="line">    ValidatorUtil.require($&#123;domain&#125;Dto.get$&#123;field.nameBigHump&#125;(), &quot;$&#123;field.nameCn&#125;&quot;);</span><br><span class="line">&lt;/#if&gt;</span><br><span class="line">&lt;#if (field.length &gt; 0)&gt;</span><br><span class="line">    ValidatorUtil.length($&#123;domain&#125;Dto.get$&#123;field.nameBigHump&#125;(), &quot;$&#123;field.nameCn&#125;&quot;, 1, $&#123;field.length&#125;);</span><br><span class="line">&lt;/#if&gt;</span><br><span class="line">&lt;/#list&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>增加前端vue.ftl校验</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 保存校验</span><br><span class="line">if (1 != 1 //是为了第一个请求或者长度没有||</span><br><span class="line">&lt;#list fieldList as field&gt;</span><br><span class="line">&lt;#if !field.nullAble&gt;</span><br><span class="line">|| !Validator.require(_this.$&#123;domain&#125;.$&#123;field.nameHump&#125;, &quot;$&#123;field.nameCn&#125;&quot;)</span><br><span class="line">&lt;/#if&gt;</span><br><span class="line">&lt;#if (field.length &gt; 0)&gt;</span><br><span class="line">|| !Validator.length(_this.$&#123;domain&#125;.$&#123;field.nameHump&#125;, &quot;$&#123;field.nameCn&#125;&quot;, 1, $&#123;field.length&#125;)</span><br><span class="line">&lt;/#if&gt;</span><br><span class="line">&lt;/#list&gt;</span><br><span class="line">) &#123;</span><br><span class="line">  return;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>对ValidatorUtil的js和后端的java分别增加</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(Tool.isEmpty(value))&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//////////////////////////////////</span></span><br><span class="line"><span class="keyword">if</span>(StringUtils.isEmpty(str))&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<p>  cdn.bootcss.com偶尔会出现404，导致jquery.blockUI.min.js没下载下来。原因可能是cdn不稳定，也可能是本地网络不稳定.将jquery.blockUI.min.js复制到本地，不使用cdn</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* jQuery BlockUI; v20141123</span></span><br><span class="line"><span class="comment">* http://jquery.malsup.com/block/</span></span><br><span class="line"><span class="comment">* Copyright (c) 2014 M. Alsup; Dual licensed: MIT/GPL</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">(<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="string">&quot;use strict&quot;</span>;<span class="keyword">function</span> <span class="title function_">e</span>(<span class="params">e</span>)&#123;<span class="keyword">function</span> <span class="title function_">o</span>(<span class="params">o,i</span>)&#123;<span class="keyword">var</span> s,h,k=o==<span class="variable language_">window</span>,v=i&amp;&amp;<span class="keyword">void</span> <span class="number">0</span>!==i.<span class="property">message</span>?i.<span class="property">message</span>:<span class="keyword">void</span> <span class="number">0</span>;<span class="keyword">if</span>(i=e.<span class="title function_">extend</span>(&#123;&#125;,e.<span class="property">blockUI</span>.<span class="property">defaults</span>,i||&#123;&#125;),!i.<span class="property">ignoreIfBlocked</span>||!<span class="title function_">e</span>(o).<span class="title function_">data</span>(<span class="string">&quot;blockUI.isBlocked&quot;</span>))&#123;<span class="keyword">if</span>(i.<span class="property">overlayCSS</span>=e.<span class="title function_">extend</span>(&#123;&#125;,e.<span class="property">blockUI</span>.<span class="property">defaults</span>.<span class="property">overlayCSS</span>,i.<span class="property">overlayCSS</span>||&#123;&#125;),s=e.<span class="title function_">extend</span>(&#123;&#125;,e.<span class="property">blockUI</span>.<span class="property">defaults</span>.<span class="property">css</span>,i.<span class="property">css</span>||&#123;&#125;),i.<span class="property">onOverlayClick</span>&amp;&amp;(i.<span class="property">overlayCSS</span>.<span class="property">cursor</span>=<span class="string">&quot;pointer&quot;</span>),h=e.<span class="title function_">extend</span>(&#123;&#125;,e.<span class="property">blockUI</span>.<span class="property">defaults</span>.<span class="property">themedCSS</span>,i.<span class="property">themedCSS</span>||&#123;&#125;),v=<span class="keyword">void</span> <span class="number">0</span>===v?i.<span class="property">message</span>:v,k&amp;&amp;b&amp;&amp;<span class="title function_">t</span>(<span class="variable language_">window</span>,&#123;<span class="attr">fadeOut</span>:<span class="number">0</span>&#125;),v&amp;&amp;<span class="string">&quot;string&quot;</span>!=<span class="keyword">typeof</span> v&amp;&amp;(v.<span class="property">parentNode</span>||v.<span class="property">jquery</span>))&#123;<span class="keyword">var</span> y=v.<span class="property">jquery</span>?v[<span class="number">0</span>]:v,m=&#123;&#125;;<span class="title function_">e</span>(o).<span class="title function_">data</span>(<span class="string">&quot;blockUI.history&quot;</span>,m),m.<span class="property">el</span>=y,m.<span class="property">parent</span>=y.<span class="property">parentNode</span>,m.<span class="property">display</span>=y.<span class="property">style</span>.<span class="property">display</span>,m.<span class="property">position</span>=y.<span class="property">style</span>.<span class="property">position</span>,m.<span class="property">parent</span>&amp;&amp;m.<span class="property">parent</span>.<span class="title function_">removeChild</span>(y)&#125;<span class="title function_">e</span>(o).<span class="title function_">data</span>(<span class="string">&quot;blockUI.onUnblock&quot;</span>,i.<span class="property">onUnblock</span>);<span class="keyword">var</span> g,I,w,U,x=i.<span class="property">baseZ</span>;g=r||i.<span class="property">forceIframe</span>?<span class="title function_">e</span>(<span class="string">&#x27;&lt;iframe class=&quot;blockUI&quot; style=&quot;z-index:&#x27;</span>+x++ +<span class="string">&#x27;;display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0&quot; src=&quot;&#x27;</span>+i.<span class="property">iframeSrc</span>+<span class="string">&#x27;&quot;&gt;&lt;/iframe&gt;&#x27;</span>):<span class="title function_">e</span>(<span class="string">&#x27;&lt;div class=&quot;blockUI&quot; style=&quot;display:none&quot;&gt;&lt;/div&gt;&#x27;</span>),I=i.<span class="property">theme</span>?<span class="title function_">e</span>(<span class="string">&#x27;&lt;div class=&quot;blockUI blockOverlay ui-widget-overlay&quot; style=&quot;z-index:&#x27;</span>+x++ +<span class="string">&#x27;;display:none&quot;&gt;&lt;/div&gt;&#x27;</span>):<span class="title function_">e</span>(<span class="string">&#x27;&lt;div class=&quot;blockUI blockOverlay&quot; style=&quot;z-index:&#x27;</span>+x++ +<span class="string">&#x27;;display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0&quot;&gt;&lt;/div&gt;&#x27;</span>),i.<span class="property">theme</span>&amp;&amp;k?(U=<span class="string">&#x27;&lt;div class=&quot;blockUI &#x27;</span>+i.<span class="property">blockMsgClass</span>+<span class="string">&#x27; blockPage ui-dialog ui-widget ui-corner-all&quot; style=&quot;z-index:&#x27;</span>+(x+<span class="number">10</span>)+<span class="string">&#x27;;display:none;position:fixed&quot;&gt;&#x27;</span>,i.<span class="property">title</span>&amp;&amp;(U+=<span class="string">&#x27;&lt;div class=&quot;ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle&quot;&gt;&#x27;</span>+(i.<span class="property">title</span>||<span class="string">&quot;&amp;nbsp;&quot;</span>)+<span class="string">&quot;&lt;/div&gt;&quot;</span>),U+=<span class="string">&#x27;&lt;div class=&quot;ui-widget-content ui-dialog-content&quot;&gt;&lt;/div&gt;&#x27;</span>,U+=<span class="string">&quot;&lt;/div&gt;&quot;</span>):i.<span class="property">theme</span>?(U=<span class="string">&#x27;&lt;div class=&quot;blockUI &#x27;</span>+i.<span class="property">blockMsgClass</span>+<span class="string">&#x27; blockElement ui-dialog ui-widget ui-corner-all&quot; style=&quot;z-index:&#x27;</span>+(x+<span class="number">10</span>)+<span class="string">&#x27;;display:none;position:absolute&quot;&gt;&#x27;</span>,i.<span class="property">title</span>&amp;&amp;(U+=<span class="string">&#x27;&lt;div class=&quot;ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle&quot;&gt;&#x27;</span>+(i.<span class="property">title</span>||<span class="string">&quot;&amp;nbsp;&quot;</span>)+<span class="string">&quot;&lt;/div&gt;&quot;</span>),U+=<span class="string">&#x27;&lt;div class=&quot;ui-widget-content ui-dialog-content&quot;&gt;&lt;/div&gt;&#x27;</span>,U+=<span class="string">&quot;&lt;/div&gt;&quot;</span>):U=k?<span class="string">&#x27;&lt;div class=&quot;blockUI &#x27;</span>+i.<span class="property">blockMsgClass</span>+<span class="string">&#x27; blockPage&quot; style=&quot;z-index:&#x27;</span>+(x+<span class="number">10</span>)+<span class="string">&#x27;;display:none;position:fixed&quot;&gt;&lt;/div&gt;&#x27;</span>:<span class="string">&#x27;&lt;div class=&quot;blockUI &#x27;</span>+i.<span class="property">blockMsgClass</span>+<span class="string">&#x27; blockElement&quot; style=&quot;z-index:&#x27;</span>+(x+<span class="number">10</span>)+<span class="string">&#x27;;display:none;position:absolute&quot;&gt;&lt;/div&gt;&#x27;</span>,w=<span class="title function_">e</span>(U),v&amp;&amp;(i.<span class="property">theme</span>?(w.<span class="title function_">css</span>(h),w.<span class="title function_">addClass</span>(<span class="string">&quot;ui-widget-content&quot;</span>)):w.<span class="title function_">css</span>(s)),i.<span class="property">theme</span>||I.<span class="title function_">css</span>(i.<span class="property">overlayCSS</span>),I.<span class="title function_">css</span>(<span class="string">&quot;position&quot;</span>,k?<span class="string">&quot;fixed&quot;</span>:<span class="string">&quot;absolute&quot;</span>),(r||i.<span class="property">forceIframe</span>)&amp;&amp;g.<span class="title function_">css</span>(<span class="string">&quot;opacity&quot;</span>,<span class="number">0</span>);<span class="keyword">var</span> C=[g,I,w],S=k?<span class="title function_">e</span>(<span class="string">&quot;body&quot;</span>):<span class="title function_">e</span>(o);e.<span class="title function_">each</span>(C,<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="variable language_">this</span>.<span class="title function_">appendTo</span>(S)&#125;),i.<span class="property">theme</span>&amp;&amp;i.<span class="property">draggable</span>&amp;&amp;e.<span class="property">fn</span>.<span class="property">draggable</span>&amp;&amp;w.<span class="title function_">draggable</span>(&#123;<span class="attr">handle</span>:<span class="string">&quot;.ui-dialog-titlebar&quot;</span>,<span class="attr">cancel</span>:<span class="string">&quot;li&quot;</span>&#125;);<span class="keyword">var</span> O=f&amp;&amp;(!e.<span class="property">support</span>.<span class="property">boxModel</span>||<span class="title function_">e</span>(<span class="string">&quot;object,embed&quot;</span>,k?<span class="attr">null</span>:o).<span class="property">length</span>&gt;<span class="number">0</span>);<span class="keyword">if</span>(u||O)&#123;<span class="keyword">if</span>(k&amp;&amp;i.<span class="property">allowBodyStretch</span>&amp;&amp;e.<span class="property">support</span>.<span class="property">boxModel</span>&amp;&amp;<span class="title function_">e</span>(<span class="string">&quot;html,body&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;height&quot;</span>,<span class="string">&quot;100%&quot;</span>),(u||!e.<span class="property">support</span>.<span class="property">boxModel</span>)&amp;&amp;!k)<span class="keyword">var</span> E=<span class="title function_">d</span>(o,<span class="string">&quot;borderTopWidth&quot;</span>),T=<span class="title function_">d</span>(o,<span class="string">&quot;borderLeftWidth&quot;</span>),M=E?<span class="string">&quot;(0 - &quot;</span>+E+<span class="string">&quot;)&quot;</span>:<span class="number">0</span>,B=T?<span class="string">&quot;(0 - &quot;</span>+T+<span class="string">&quot;)&quot;</span>:<span class="number">0</span>;e.<span class="title function_">each</span>(C,<span class="keyword">function</span>(<span class="params">e,o</span>)&#123;<span class="keyword">var</span> t=o[<span class="number">0</span>].<span class="property">style</span>;<span class="keyword">if</span>(t.<span class="property">position</span>=<span class="string">&quot;absolute&quot;</span>,<span class="number">2</span>&gt;e)k?t.<span class="title function_">setExpression</span>(<span class="string">&quot;height&quot;</span>,<span class="string">&quot;Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:&quot;</span>+i.<span class="property">quirksmodeOffsetHack</span>+<span class="string">&#x27;) + &quot;px&quot;&#x27;</span>):t.<span class="title function_">setExpression</span>(<span class="string">&quot;height&quot;</span>,<span class="string">&#x27;this.parentNode.offsetHeight + &quot;px&quot;&#x27;</span>),k?t.<span class="title function_">setExpression</span>(<span class="string">&quot;width&quot;</span>,<span class="string">&#x27;jQuery.support.boxModel &amp;&amp; document.documentElement.clientWidth || document.body.clientWidth + &quot;px&quot;&#x27;</span>):t.<span class="title function_">setExpression</span>(<span class="string">&quot;width&quot;</span>,<span class="string">&#x27;this.parentNode.offsetWidth + &quot;px&quot;&#x27;</span>),B&amp;&amp;t.<span class="title function_">setExpression</span>(<span class="string">&quot;left&quot;</span>,B),M&amp;&amp;t.<span class="title function_">setExpression</span>(<span class="string">&quot;top&quot;</span>,M);<span class="keyword">else</span> <span class="keyword">if</span>(i.<span class="property">centerY</span>)k&amp;&amp;t.<span class="title function_">setExpression</span>(<span class="string">&quot;top&quot;</span>,<span class="string">&#x27;(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + &quot;px&quot;&#x27;</span>),t.<span class="property">marginTop</span>=<span class="number">0</span>;<span class="keyword">else</span> <span class="keyword">if</span>(!i.<span class="property">centerY</span>&amp;&amp;k)&#123;<span class="keyword">var</span> n=i.<span class="property">css</span>&amp;&amp;i.<span class="property">css</span>.<span class="property">top</span>?<span class="built_in">parseInt</span>(i.<span class="property">css</span>.<span class="property">top</span>,<span class="number">10</span>):<span class="number">0</span>,s=<span class="string">&quot;((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + &quot;</span>+n+<span class="string">&#x27;) + &quot;px&quot;&#x27;</span>;t.<span class="title function_">setExpression</span>(<span class="string">&quot;top&quot;</span>,s)&#125;&#125;)&#125;<span class="keyword">if</span>(v&amp;&amp;(i.<span class="property">theme</span>?w.<span class="title function_">find</span>(<span class="string">&quot;.ui-widget-content&quot;</span>).<span class="title function_">append</span>(v):w.<span class="title function_">append</span>(v),(v.<span class="property">jquery</span>||v.<span class="property">nodeType</span>)&amp;&amp;<span class="title function_">e</span>(v).<span class="title function_">show</span>()),(r||i.<span class="property">forceIframe</span>)&amp;&amp;i.<span class="property">showOverlay</span>&amp;&amp;g.<span class="title function_">show</span>(),i.<span class="property">fadeIn</span>)&#123;<span class="keyword">var</span> j=i.<span class="property">onBlock</span>?i.<span class="property">onBlock</span>:c,H=i.<span class="property">showOverlay</span>&amp;&amp;!v?<span class="attr">j</span>:c,z=v?<span class="attr">j</span>:c;i.<span class="property">showOverlay</span>&amp;&amp;I.<span class="title function_">_fadeIn</span>(i.<span class="property">fadeIn</span>,H),v&amp;&amp;w.<span class="title function_">_fadeIn</span>(i.<span class="property">fadeIn</span>,z)&#125;<span class="keyword">else</span> i.<span class="property">showOverlay</span>&amp;&amp;I.<span class="title function_">show</span>(),v&amp;&amp;w.<span class="title function_">show</span>(),i.<span class="property">onBlock</span>&amp;&amp;i.<span class="property">onBlock</span>.<span class="title function_">bind</span>(w)();<span class="keyword">if</span>(<span class="title function_">n</span>(<span class="number">1</span>,o,i),k?(b=w[<span class="number">0</span>],p=<span class="title function_">e</span>(i.<span class="property">focusableElements</span>,b),i.<span class="property">focusInput</span>&amp;&amp;<span class="built_in">setTimeout</span>(l,<span class="number">20</span>)):<span class="title function_">a</span>(w[<span class="number">0</span>],i.<span class="property">centerX</span>,i.<span class="property">centerY</span>),i.<span class="property">timeout</span>)&#123;<span class="keyword">var</span> W=<span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;k?e.<span class="title function_">unblockUI</span>(i):<span class="title function_">e</span>(o).<span class="title function_">unblock</span>(i)&#125;,i.<span class="property">timeout</span>);<span class="title function_">e</span>(o).<span class="title function_">data</span>(<span class="string">&quot;blockUI.timeout&quot;</span>,W)&#125;&#125;&#125;<span class="keyword">function</span> <span class="title function_">t</span>(<span class="params">o,t</span>)&#123;<span class="keyword">var</span> s,l=o==<span class="variable language_">window</span>,a=<span class="title function_">e</span>(o),d=a.<span class="title function_">data</span>(<span class="string">&quot;blockUI.history&quot;</span>),c=a.<span class="title function_">data</span>(<span class="string">&quot;blockUI.timeout&quot;</span>);c&amp;&amp;(<span class="built_in">clearTimeout</span>(c),a.<span class="title function_">removeData</span>(<span class="string">&quot;blockUI.timeout&quot;</span>)),t=e.<span class="title function_">extend</span>(&#123;&#125;,e.<span class="property">blockUI</span>.<span class="property">defaults</span>,t||&#123;&#125;),<span class="title function_">n</span>(<span class="number">0</span>,o,t),<span class="literal">null</span>===t.<span class="property">onUnblock</span>&amp;&amp;(t.<span class="property">onUnblock</span>=a.<span class="title function_">data</span>(<span class="string">&quot;blockUI.onUnblock&quot;</span>),a.<span class="title function_">removeData</span>(<span class="string">&quot;blockUI.onUnblock&quot;</span>));<span class="keyword">var</span> r;r=l?<span class="title function_">e</span>(<span class="string">&quot;body&quot;</span>).<span class="title function_">children</span>().<span class="title function_">filter</span>(<span class="string">&quot;.blockUI&quot;</span>).<span class="title function_">add</span>(<span class="string">&quot;body &gt; .blockUI&quot;</span>):a.<span class="title function_">find</span>(<span class="string">&quot;&gt;.blockUI&quot;</span>),t.<span class="property">cursorReset</span>&amp;&amp;(r.<span class="property">length</span>&gt;<span class="number">1</span>&amp;&amp;(r[<span class="number">1</span>].<span class="property">style</span>.<span class="property">cursor</span>=t.<span class="property">cursorReset</span>),r.<span class="property">length</span>&gt;<span class="number">2</span>&amp;&amp;(r[<span class="number">2</span>].<span class="property">style</span>.<span class="property">cursor</span>=t.<span class="property">cursorReset</span>)),l&amp;&amp;(b=p=<span class="literal">null</span>),t.<span class="property">fadeOut</span>?(s=r.<span class="property">length</span>,r.<span class="title function_">stop</span>().<span class="title function_">fadeOut</span>(t.<span class="property">fadeOut</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="number">0</span>===--s&amp;&amp;<span class="title function_">i</span>(r,d,t,o)&#125;)):<span class="title function_">i</span>(r,d,t,o)&#125;<span class="keyword">function</span> <span class="title function_">i</span>(<span class="params">o,t,i,n</span>)&#123;<span class="keyword">var</span> s=<span class="title function_">e</span>(n);<span class="keyword">if</span>(!s.<span class="title function_">data</span>(<span class="string">&quot;blockUI.isBlocked&quot;</span>))&#123;o.<span class="title function_">each</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="variable language_">this</span>.<span class="property">parentNode</span>&amp;&amp;<span class="variable language_">this</span>.<span class="property">parentNode</span>.<span class="title function_">removeChild</span>(<span class="variable language_">this</span>)&#125;),t&amp;&amp;t.<span class="property">el</span>&amp;&amp;(t.<span class="property">el</span>.<span class="property">style</span>.<span class="property">display</span>=t.<span class="property">display</span>,t.<span class="property">el</span>.<span class="property">style</span>.<span class="property">position</span>=t.<span class="property">position</span>,t.<span class="property">el</span>.<span class="property">style</span>.<span class="property">cursor</span>=<span class="string">&quot;default&quot;</span>,t.<span class="property">parent</span>&amp;&amp;t.<span class="property">parent</span>.<span class="title function_">appendChild</span>(t.<span class="property">el</span>),s.<span class="title function_">removeData</span>(<span class="string">&quot;blockUI.history&quot;</span>)),s.<span class="title function_">data</span>(<span class="string">&quot;blockUI.static&quot;</span>)&amp;&amp;s.<span class="title function_">css</span>(<span class="string">&quot;position&quot;</span>,<span class="string">&quot;static&quot;</span>),<span class="string">&quot;function&quot;</span>==<span class="keyword">typeof</span> i.<span class="property">onUnblock</span>&amp;&amp;i.<span class="title function_">onUnblock</span>(n,i);<span class="keyword">var</span> l=<span class="title function_">e</span>(<span class="variable language_">document</span>.<span class="property">body</span>),a=l.<span class="title function_">width</span>(),d=l[<span class="number">0</span>].<span class="property">style</span>.<span class="property">width</span>;l.<span class="title function_">width</span>(a-<span class="number">1</span>).<span class="title function_">width</span>(a),l[<span class="number">0</span>].<span class="property">style</span>.<span class="property">width</span>=d&#125;&#125;<span class="keyword">function</span> <span class="title function_">n</span>(<span class="params">o,t,i</span>)&#123;<span class="keyword">var</span> n=t==<span class="variable language_">window</span>,l=<span class="title function_">e</span>(t);<span class="keyword">if</span>((o||(!n||b)&amp;&amp;(n||l.<span class="title function_">data</span>(<span class="string">&quot;blockUI.isBlocked&quot;</span>)))&amp;&amp;(l.<span class="title function_">data</span>(<span class="string">&quot;blockUI.isBlocked&quot;</span>,o),n&amp;&amp;i.<span class="property">bindEvents</span>&amp;&amp;(!o||i.<span class="property">showOverlay</span>)))&#123;<span class="keyword">var</span> a=<span class="string">&quot;mousedown mouseup keydown keypress keyup touchstart touchend touchmove&quot;</span>;o?<span class="title function_">e</span>(<span class="variable language_">document</span>).<span class="title function_">bind</span>(a,i,s):<span class="title function_">e</span>(<span class="variable language_">document</span>).<span class="title function_">unbind</span>(a,s)&#125;&#125;<span class="keyword">function</span> <span class="title function_">s</span>(<span class="params">o</span>)&#123;<span class="keyword">if</span>(<span class="string">&quot;keydown&quot;</span>===o.<span class="property">type</span>&amp;&amp;o.<span class="property">keyCode</span>&amp;&amp;<span class="number">9</span>==o.<span class="property">keyCode</span>&amp;&amp;b&amp;&amp;o.<span class="property">data</span>.<span class="property">constrainTabKey</span>)&#123;<span class="keyword">var</span> t=p,i=!o.<span class="property">shiftKey</span>&amp;&amp;o.<span class="property">target</span>===t[t.<span class="property">length</span>-<span class="number">1</span>],n=o.<span class="property">shiftKey</span>&amp;&amp;o.<span class="property">target</span>===t[<span class="number">0</span>];<span class="keyword">if</span>(i||n)<span class="keyword">return</span> <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="title function_">l</span>(n)&#125;,<span class="number">10</span>),!<span class="number">1</span>&#125;<span class="keyword">var</span> s=o.<span class="property">data</span>,a=<span class="title function_">e</span>(o.<span class="property">target</span>);<span class="keyword">return</span> a.<span class="title function_">hasClass</span>(<span class="string">&quot;blockOverlay&quot;</span>)&amp;&amp;s.<span class="property">onOverlayClick</span>&amp;&amp;s.<span class="title function_">onOverlayClick</span>(o),a.<span class="title function_">parents</span>(<span class="string">&quot;div.&quot;</span>+s.<span class="property">blockMsgClass</span>).<span class="property">length</span>&gt;<span class="number">0</span>?!<span class="number">0</span>:<span class="number">0</span>===a.<span class="title function_">parents</span>().<span class="title function_">children</span>().<span class="title function_">filter</span>(<span class="string">&quot;div.blockUI&quot;</span>).<span class="property">length</span>&#125;<span class="keyword">function</span> <span class="title function_">l</span>(<span class="params">e</span>)&#123;<span class="keyword">if</span>(p)&#123;<span class="keyword">var</span> o=p[e===!<span class="number">0</span>?p.<span class="property">length</span>-<span class="number">1</span>:<span class="number">0</span>];o&amp;&amp;o.<span class="title function_">focus</span>()&#125;&#125;<span class="keyword">function</span> <span class="title function_">a</span>(<span class="params">e,o,t</span>)&#123;<span class="keyword">var</span> i=e.<span class="property">parentNode</span>,n=e.<span class="property">style</span>,s=(i.<span class="property">offsetWidth</span>-e.<span class="property">offsetWidth</span>)/<span class="number">2</span>-<span class="title function_">d</span>(i,<span class="string">&quot;borderLeftWidth&quot;</span>),l=(i.<span class="property">offsetHeight</span>-e.<span class="property">offsetHeight</span>)/<span class="number">2</span>-<span class="title function_">d</span>(i,<span class="string">&quot;borderTopWidth&quot;</span>);o&amp;&amp;(n.<span class="property">left</span>=s&gt;<span class="number">0</span>?s+<span class="string">&quot;px&quot;</span>:<span class="string">&quot;0&quot;</span>),t&amp;&amp;(n.<span class="property">top</span>=l&gt;<span class="number">0</span>?l+<span class="string">&quot;px&quot;</span>:<span class="string">&quot;0&quot;</span>)&#125;<span class="keyword">function</span> <span class="title function_">d</span>(<span class="params">o,t</span>)&#123;<span class="keyword">return</span> <span class="built_in">parseInt</span>(e.<span class="title function_">css</span>(o,t),<span class="number">10</span>)||<span class="number">0</span>&#125;e.<span class="property">fn</span>.<span class="property">_fadeIn</span>=e.<span class="property">fn</span>.<span class="property">fadeIn</span>;<span class="keyword">var</span> c=e.<span class="property">noop</span>||<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;,r=<span class="regexp">/MSIE/</span>.<span class="title function_">test</span>(navigator.<span class="property">userAgent</span>),u=<span class="regexp">/MSIE 6.0/</span>.<span class="title function_">test</span>(navigator.<span class="property">userAgent</span>)&amp;&amp;!<span class="regexp">/MSIE 8.0/</span>.<span class="title function_">test</span>(navigator.<span class="property">userAgent</span>);<span class="variable language_">document</span>.<span class="property">documentMode</span>||<span class="number">0</span>;<span class="keyword">var</span> f=e.<span class="title function_">isFunction</span>(<span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>).<span class="property">style</span>.<span class="property">setExpression</span>);e.<span class="property">blockUI</span>=<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="title function_">o</span>(<span class="variable language_">window</span>,e)&#125;,e.<span class="property">unblockUI</span>=<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="title function_">t</span>(<span class="variable language_">window</span>,e)&#125;,e.<span class="property">growlUI</span>=<span class="keyword">function</span>(<span class="params">o,t,i,n</span>)&#123;<span class="keyword">var</span> s=<span class="title function_">e</span>(<span class="string">&#x27;&lt;div class=&quot;growlUI&quot;&gt;&lt;/div&gt;&#x27;</span>);o&amp;&amp;s.<span class="title function_">append</span>(<span class="string">&quot;&lt;h1&gt;&quot;</span>+o+<span class="string">&quot;&lt;/h1&gt;&quot;</span>),t&amp;&amp;s.<span class="title function_">append</span>(<span class="string">&quot;&lt;h2&gt;&quot;</span>+t+<span class="string">&quot;&lt;/h2&gt;&quot;</span>),<span class="keyword">void</span> <span class="number">0</span>===i&amp;&amp;(i=<span class="number">3e3</span>);<span class="keyword">var</span> l=<span class="keyword">function</span>(<span class="params">o</span>)&#123;o=o||&#123;&#125;,e.<span class="title function_">blockUI</span>(&#123;<span class="attr">message</span>:s,<span class="attr">fadeIn</span>:o.<span class="property">fadeIn</span>!==<span class="keyword">void</span> <span class="number">0</span>?o.<span class="property">fadeIn</span>:<span class="number">700</span>,<span class="attr">fadeOut</span>:o.<span class="property">fadeOut</span>!==<span class="keyword">void</span> <span class="number">0</span>?o.<span class="property">fadeOut</span>:<span class="number">1e3</span>,<span class="attr">timeout</span>:o.<span class="property">timeout</span>!==<span class="keyword">void</span> <span class="number">0</span>?o.<span class="property">timeout</span>:i,<span class="attr">centerY</span>:!<span class="number">1</span>,<span class="attr">showOverlay</span>:!<span class="number">1</span>,<span class="attr">onUnblock</span>:n,<span class="attr">css</span>:e.<span class="property">blockUI</span>.<span class="property">defaults</span>.<span class="property">growlCSS</span>&#125;)&#125;;<span class="title function_">l</span>(),s.<span class="title function_">css</span>(<span class="string">&quot;opacity&quot;</span>),s.<span class="title function_">mouseover</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="title function_">l</span>(&#123;<span class="attr">fadeIn</span>:<span class="number">0</span>,<span class="attr">timeout</span>:<span class="number">3e4</span>&#125;);<span class="keyword">var</span> o=<span class="title function_">e</span>(<span class="string">&quot;.blockMsg&quot;</span>);o.<span class="title function_">stop</span>(),o.<span class="title function_">fadeTo</span>(<span class="number">300</span>,<span class="number">1</span>)&#125;).<span class="title function_">mouseout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="title function_">e</span>(<span class="string">&quot;.blockMsg&quot;</span>).<span class="title function_">fadeOut</span>(<span class="number">1e3</span>)&#125;)&#125;,e.<span class="property">fn</span>.<span class="property">block</span>=<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">if</span>(<span class="variable language_">this</span>[<span class="number">0</span>]===<span class="variable language_">window</span>)<span class="keyword">return</span> e.<span class="title function_">blockUI</span>(t),<span class="variable language_">this</span>;<span class="keyword">var</span> i=e.<span class="title function_">extend</span>(&#123;&#125;,e.<span class="property">blockUI</span>.<span class="property">defaults</span>,t||&#123;&#125;);<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">each</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> o=<span class="title function_">e</span>(<span class="variable language_">this</span>);i.<span class="property">ignoreIfBlocked</span>&amp;&amp;o.<span class="title function_">data</span>(<span class="string">&quot;blockUI.isBlocked&quot;</span>)||o.<span class="title function_">unblock</span>(&#123;<span class="attr">fadeOut</span>:<span class="number">0</span>&#125;)&#125;),<span class="variable language_">this</span>.<span class="title function_">each</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="string">&quot;static&quot;</span>==e.<span class="title function_">css</span>(<span class="variable language_">this</span>,<span class="string">&quot;position&quot;</span>)&amp;&amp;(<span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">position</span>=<span class="string">&quot;relative&quot;</span>,<span class="title function_">e</span>(<span class="variable language_">this</span>).<span class="title function_">data</span>(<span class="string">&quot;blockUI.static&quot;</span>,!<span class="number">0</span>)),<span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">zoom</span>=<span class="number">1</span>,<span class="title function_">o</span>(<span class="variable language_">this</span>,t)&#125;)&#125;,e.<span class="property">fn</span>.<span class="property">unblock</span>=<span class="keyword">function</span>(<span class="params">o</span>)&#123;<span class="keyword">return</span> <span class="variable language_">this</span>[<span class="number">0</span>]===<span class="variable language_">window</span>?(e.<span class="title function_">unblockUI</span>(o),<span class="variable language_">this</span>):<span class="variable language_">this</span>.<span class="title function_">each</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="title function_">t</span>(<span class="variable language_">this</span>,o)&#125;)&#125;,e.<span class="property">blockUI</span>.<span class="property">version</span>=<span class="number">2.7</span>,e.<span class="property">blockUI</span>.<span class="property">defaults</span>=&#123;<span class="attr">message</span>:<span class="string">&quot;&lt;h1&gt;Please wait...&lt;/h1&gt;&quot;</span>,<span class="attr">title</span>:<span class="literal">null</span>,<span class="attr">draggable</span>:!<span class="number">0</span>,<span class="attr">theme</span>:!<span class="number">1</span>,<span class="attr">css</span>:&#123;<span class="attr">padding</span>:<span class="number">0</span>,<span class="attr">margin</span>:<span class="number">0</span>,<span class="attr">width</span>:<span class="string">&quot;30%&quot;</span>,<span class="attr">top</span>:<span class="string">&quot;40%&quot;</span>,<span class="attr">left</span>:<span class="string">&quot;35%&quot;</span>,<span class="attr">textAlign</span>:<span class="string">&quot;center&quot;</span>,<span class="attr">color</span>:<span class="string">&quot;#000&quot;</span>,<span class="attr">border</span>:<span class="string">&quot;3px solid #aaa&quot;</span>,<span class="attr">backgroundColor</span>:<span class="string">&quot;#fff&quot;</span>,<span class="attr">cursor</span>:<span class="string">&quot;wait&quot;</span>&#125;,<span class="attr">themedCSS</span>:&#123;<span class="attr">width</span>:<span class="string">&quot;30%&quot;</span>,<span class="attr">top</span>:<span class="string">&quot;40%&quot;</span>,<span class="attr">left</span>:<span class="string">&quot;35%&quot;</span>&#125;,<span class="attr">overlayCSS</span>:&#123;<span class="attr">backgroundColor</span>:<span class="string">&quot;#000&quot;</span>,<span class="attr">opacity</span>:<span class="number">.6</span>,<span class="attr">cursor</span>:<span class="string">&quot;wait&quot;</span>&#125;,<span class="attr">cursorReset</span>:<span class="string">&quot;default&quot;</span>,<span class="attr">growlCSS</span>:&#123;<span class="attr">width</span>:<span class="string">&quot;350px&quot;</span>,<span class="attr">top</span>:<span class="string">&quot;10px&quot;</span>,<span class="attr">left</span>:<span class="string">&quot;&quot;</span>,<span class="attr">right</span>:<span class="string">&quot;10px&quot;</span>,<span class="attr">border</span>:<span class="string">&quot;none&quot;</span>,<span class="attr">padding</span>:<span class="string">&quot;5px&quot;</span>,<span class="attr">opacity</span>:<span class="number">.6</span>,<span class="attr">cursor</span>:<span class="string">&quot;default&quot;</span>,<span class="attr">color</span>:<span class="string">&quot;#fff&quot;</span>,<span class="attr">backgroundColor</span>:<span class="string">&quot;#000&quot;</span>,<span class="string">&quot;-webkit-border-radius&quot;</span>:<span class="string">&quot;10px&quot;</span>,<span class="string">&quot;-moz-border-radius&quot;</span>:<span class="string">&quot;10px&quot;</span>,<span class="string">&quot;border-radius&quot;</span>:<span class="string">&quot;10px&quot;</span>&#125;,<span class="attr">iframeSrc</span>:<span class="regexp">/^https/i</span>.<span class="title function_">test</span>(<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span>||<span class="string">&quot;&quot;</span>)?<span class="string">&quot;javascript:false&quot;</span>:<span class="string">&quot;about:blank&quot;</span>,<span class="attr">forceIframe</span>:!<span class="number">1</span>,<span class="attr">baseZ</span>:<span class="number">1e3</span>,<span class="attr">centerX</span>:!<span class="number">0</span>,<span class="attr">centerY</span>:!<span class="number">0</span>,<span class="attr">allowBodyStretch</span>:!<span class="number">0</span>,<span class="attr">bindEvents</span>:!<span class="number">0</span>,<span class="attr">constrainTabKey</span>:!<span class="number">0</span>,<span class="attr">fadeIn</span>:<span class="number">200</span>,<span class="attr">fadeOut</span>:<span class="number">400</span>,<span class="attr">timeout</span>:<span class="number">0</span>,<span class="attr">showOverlay</span>:!<span class="number">0</span>,<span class="attr">focusInput</span>:!<span class="number">0</span>,<span class="attr">focusableElements</span>:<span class="string">&quot;:input:enabled:visible&quot;</span>,<span class="attr">onBlock</span>:<span class="literal">null</span>,<span class="attr">onUnblock</span>:<span class="literal">null</span>,<span class="attr">onOverlayClick</span>:<span class="literal">null</span>,<span class="attr">quirksmodeOffsetHack</span>:<span class="number">4</span>,<span class="attr">blockMsgClass</span>:<span class="string">&quot;blockMsg&quot;</span>,<span class="attr">ignoreIfBlocked</span>:!<span class="number">1</span>&#125;;<span class="keyword">var</span> b=<span class="literal">null</span>,p=[]&#125;<span class="string">&quot;function&quot;</span>==<span class="keyword">typeof</span> define&amp;&amp;define.<span class="property">amd</span>&amp;&amp;define.<span class="property">amd</span>.<span class="property">jQuery</span>?<span class="title function_">define</span>([<span class="string">&quot;jquery&quot;</span>],e):<span class="title function_">e</span>(jQuery)&#125;)();</span><br></pre></td></tr></table></figure>

<p>通用字段处理：1.生成器开发，通用字段处理，id，createdAt，updateAt，sort</p>
<ul>
<li>对controller.ftl保存校验做修改，并不是所有字段都需要做校验</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//保存校验</span></span><br><span class="line">&lt;#list fieldList as field&gt;</span><br><span class="line">&lt;#<span class="keyword">if</span> field.name!=<span class="string">&quot;id&quot;</span> &amp;&amp; field.nameHump!=<span class="string">&quot;createdAt&quot;</span>&amp;&amp; field.nameHump!=<span class="string">&quot;updatedAt&quot;</span> &amp;&amp; field.nameHump!=<span class="string">&quot;sort&quot;</span>&gt;</span><br><span class="line">&lt;#<span class="keyword">if</span> !field.nullAble&gt;</span><br><span class="line">    ValidatorUtil.require($&#123;domain&#125;Dto.get$&#123;field.nameBigHump&#125;(), <span class="string">&quot;$&#123;field.nameCn&#125;&quot;</span>);</span><br><span class="line">&lt;/#<span class="keyword">if</span>&gt;</span><br><span class="line">&lt;#<span class="keyword">if</span> (field.length &gt; <span class="number">0</span>)&gt;</span><br><span class="line">    ValidatorUtil.length($&#123;domain&#125;Dto.get$&#123;field.nameBigHump&#125;(), <span class="string">&quot;$&#123;field.nameCn&#125;&quot;</span>, <span class="number">1</span>, $&#123;field.length&#125;);</span><br><span class="line">&lt;/#<span class="keyword">if</span>&gt; </span><br><span class="line">&lt;/#<span class="keyword">if</span>&gt;</span><br><span class="line">&lt;/#list&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>对service.ftl进行修改</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">//导入部分</span><br><span class="line">&lt;#list typeSet as type&gt;</span><br><span class="line">    &lt;#if type==&#x27;Date&#x27;&gt;</span><br><span class="line">        import java.util.Date;</span><br><span class="line">    &lt;/#if&gt;</span><br><span class="line">&lt;/#list&gt;</span><br><span class="line">//列表查询</span><br><span class="line">&lt;#list fieldList as field&gt;</span><br><span class="line">    &lt;#if field.nameHump==&#x27;sort&#x27;&gt;</span><br><span class="line">    $&#123;domain&#125;Example.setOrderByClause(&quot;sort asc&quot;);</span><br><span class="line">    &lt;/#if&gt;</span><br><span class="line">&lt;/#list&gt;</span><br><span class="line">//插入</span><br><span class="line"> &lt;#list typeSet as type&gt;</span><br><span class="line">            &lt;#if type==&#x27;Date&#x27;&gt;</span><br><span class="line">        Date now = new Date();</span><br><span class="line">            &lt;/#if&gt;</span><br><span class="line">        &lt;/#list&gt;</span><br><span class="line">&lt;#list fieldList as field&gt;</span><br><span class="line">    &lt;#if field.nameHump==&#x27;createdAt&#x27;&gt;</span><br><span class="line">   		 $&#123;domain&#125;.setCreatedAt(now);</span><br><span class="line">    &lt;/#if&gt;</span><br><span class="line">    &lt;#if field.nameHump==&#x27;updatedAt&#x27;&gt;</span><br><span class="line">   		 $&#123;domain&#125;.setUpdatedAt(now);</span><br><span class="line">    &lt;/#if&gt;</span><br><span class="line">&lt;/#list&gt;</span><br><span class="line">//更新</span><br><span class="line"> &lt;#list fieldList as field&gt;</span><br><span class="line"> 	&lt;#if field.nameHump==&#x27;updatedAt&#x27;&gt;</span><br><span class="line">   		 $&#123;domain&#125;.setUpdatedAt(new Date());</span><br><span class="line">     &lt;/#if&gt;</span><br><span class="line"> &lt;/#list&gt;</span><br><span class="line">        </span><br></pre></td></tr></table></figure>

<ul>
<li>vue.ftl进行修改：去除创建时间和更新时间的显示</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;tr&gt;&lt;#list fieldList as field&gt;</span><br><span class="line">    &lt;#<span class="keyword">if</span> field.nameHump!=<span class="string">&quot;createdAt&quot;</span> &amp;&amp; field.nameHump!=<span class="string">&quot;updatedAt&quot;</span>&gt;<span class="comment">//就增加这一行</span></span><br><span class="line">    &lt;th&gt;$&#123;field.nameCn&#125;&lt;/th&gt;&lt;/#<span class="keyword">if</span>&gt;&lt;/#list&gt;</span><br><span class="line">    &lt;th&gt;操作&lt;/th&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line"><span class="comment">//表单</span></span><br><span class="line"> &lt;#list fieldList as field&gt;</span><br><span class="line">       &lt;#<span class="keyword">if</span> field.name!=<span class="string">&quot;id&quot;</span> &amp;&amp; field.nameHump!=<span class="string">&quot;createdAt&quot;</span> &amp;&amp; field.nameHump!=<span class="string">&quot;updatedAt&quot;</span>&gt;<span class="comment">//就增加这一行</span></span><br><span class="line">                &lt;div class=<span class="string">&quot;form-group&quot;</span>&gt;</span><br><span class="line">                  &lt;label  class=<span class="string">&quot;col-sm-2 control-label&quot;</span>&gt;$&#123;field.nameCn&#125;&lt;/label&gt;</span><br><span class="line">                  &lt;div class=<span class="string">&quot;col-sm-10&quot;</span>&gt;</span><br><span class="line">                    &lt;input v-model=<span class="string">&quot;$&#123;domain&#125;.$&#123;field.nameHump&#125;&quot;</span> class=<span class="string">&quot;form-control&quot;</span>  &gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">       &lt;/#<span class="keyword">if</span>&gt;</span><br><span class="line">   &lt;/#list&gt;</span><br><span class="line"> <span class="comment">// 保存校验跟后端一样</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="number">1</span> != <span class="number">1</span></span><br><span class="line">      &lt;#list fieldList as field&gt;</span><br><span class="line">          &lt;#<span class="keyword">if</span> field.name!=<span class="string">&quot;id&quot;</span> &amp;&amp; field.nameHump!=<span class="string">&quot;createdAt&quot;</span> &amp;&amp; field.nameHump!=<span class="string">&quot;updatedAt&quot;</span> &amp;&amp; field.nameHump!=<span class="string">&quot;sort&quot;</span>&gt;</span><br><span class="line">          &lt;#<span class="keyword">if</span> !field.nullAble&gt;</span><br><span class="line">      || !Validator.require(_this.$&#123;domain&#125;.$&#123;field.nameHump&#125;, <span class="string">&quot;$&#123;field.nameCn&#125;&quot;</span>)</span><br><span class="line">      &lt;/#<span class="keyword">if</span>&gt;</span><br><span class="line">      &lt;#<span class="keyword">if</span> (field.length &gt; <span class="number">0</span>)&gt;</span><br><span class="line">      || !Validator.length(_this.$&#123;domain&#125;.$&#123;field.nameHump&#125;, <span class="string">&quot;$&#123;field.nameCn&#125;&quot;</span>, <span class="number">1</span>, $&#123;field.length&#125;)</span><br><span class="line">      &lt;/#<span class="keyword">if</span>&gt;</span><br><span class="line">      &lt;/#<span class="keyword">if</span>&gt;</span><br><span class="line">      &lt;/#list&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>实际开发中，是先写好SectionService的代码，再根据代码修改模板，测试生成的代码和手写的代码一致。</p>
</li>
<li><p>controller.fi模板改动了，但SectionController之前已经手动把id的校验删除并提交了，所以本次生成的代码没有变动</p>
</li>
</ul>
<h2 id="6-6-前端枚举代码的生成"><a href="#6-6-前端枚举代码的生成" class="headerlink" title="6-6 前端枚举代码的生成"></a>6-6 前端枚举代码的生成</h2><p>前端下拉框和列表枚举的设计：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.枚举字段，表格显示中文，表单显示下拉菜单</span><br><span class="line">2.vue增加过滤器</span><br></pre></td></tr></table></figure>

<ul>
<li>给收费增加一个下拉框，将收费的输入改成这个</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;select v-model=&quot;section.charge&quot; class=&quot;form-control&quot;  &gt;</span><br><span class="line">  &lt;option v-for=&quot;o in CHARGE&quot; v-bind:value=&quot;o.key&quot;&gt;&#123;&#123;o.value&#125;&#125;&lt;/option&gt;</span><br><span class="line">&lt;/select&gt;</span><br><span class="line">CHARGE:[&#123;key:&quot;C&quot;,value:&quot;收费&quot;&#125;,&#123;key:&quot;F&quot;,value:&quot;免费&quot;&#125;],//在data里面写死的</span><br></pre></td></tr></table></figure>

<ul>
<li><p>修改下页面收费显示文字的问题：<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s2.loli.net/2022/03/01/bQPd9aOo3lHzNZu.png"
                      alt="image-20220301100046630"
                ></p>
</li>
<li><p>首先增加一个过滤器，在admin下src创建filter目录创建filter.js</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 数组过滤器 例如：&#123;&#123;SECTION_CHARGE | option..KV(section.charge)&#125;&#125;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> list 例如：&#123;&#123;key:&quot;C&quot;, value:&quot;收费&quot;&#125;,&#123;key:&quot;F&quot;, value:&quot;免费&quot;&#125;&#125;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key 例如：C</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">string</span>&#125; 例如：收费</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> option..<span class="property">KV</span> = <span class="function">(<span class="params">list, key</span>) =&gt;</span>  &#123;</span><br><span class="line">    <span class="keyword">if</span> (!list || !key) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> result = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>;i&lt;list.<span class="property">length</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (key === list[i][<span class="string">&quot;key&quot;</span>]) &#123;</span><br><span class="line">                result = list[i][<span class="string">&quot;value&quot;</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    option..<span class="property">KV</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>然后再main.js增加，这样就把filter变成vue的过滤器了</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> filter <span class="keyword">from</span> <span class="string">&#x27;./filter/filter&#x27;</span></span><br><span class="line"><span class="comment">//全局过滤器</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">keys</span>(filter).<span class="title function_">forEach</span>(<span class="function"><span class="params">key</span> =&gt;</span>&#123;</span><br><span class="line">  <span class="title class_">Vue</span>.<span class="title function_">filter</span>(key,filter[key])</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>过滤器有了，使用再section.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;td&gt;&#123;&#123;section.charge&#125;&#125;&lt;/td&gt;</span><br><span class="line">//将这行改成</span><br><span class="line">&lt;td&gt;这里是两个大括号将他们括起来CHARGE|option..KV(section.charge)&lt;/td&gt;</span><br></pre></td></tr></table></figure>

<p>对于下拉框的列表值，一般会提取成全局的变量，方便多个页面使用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//首先再js创建enums.js</span><br><span class="line">CHARGE = [&#123;key:&quot;C&quot;,value:&quot;收费&quot;&#125;,&#123;key:&quot;F&quot;,value:&quot;免费&quot;&#125;];</span><br><span class="line">//其次再index引用</span><br><span class="line">&lt;!--  枚举类  --&gt;</span><br><span class="line">&lt;script src=&quot;&lt;%= BASE_URL %&gt;static/js/enums.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">//最后再vue使用</span><br><span class="line"> CHARGE: CHARGE,</span><br><span class="line">&lt;td&gt;这是两个大括号包的CHARGE|option..KV(section.charge)&lt;/td&gt;</span><br></pre></td></tr></table></figure>

<p>新增EnumGenerator用于生成前端枚举：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.增加了枚举生成器</span><br><span class="line">2.option..KV过滤器从list改成object</span><br></pre></td></tr></table></figure>

<ul>
<li>问题：前端的枚举缺少枚举类型的信息，后续我们会碰到直接再前端用枚举值，我们的写法是直接SECTION_CHARGE.CHARGE.key，而不是写“C”。我们进行下列修改,注意表单的下拉框也要改成SECTION_CHARGE</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//首先修改enums.js</span></span><br><span class="line"><span class="variable constant_">SECTION_CHARGE</span> = &#123;<span class="attr">CHARGE</span>:&#123;<span class="attr">key</span>:<span class="string">&quot;C&quot;</span>,<span class="attr">value</span>:<span class="string">&quot;收费&quot;</span>&#125;,<span class="attr">FREE</span>:&#123;<span class="attr">key</span>:<span class="string">&quot;F&quot;</span>,<span class="attr">value</span>:<span class="string">&quot;免费&quot;</span>&#125;&#125;;</span><br><span class="line"><span class="comment">//其次对filter.js</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 数组过滤器 例如：两个大括号包住SECTION_CHARGE | option..KV(section.charge)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> object 例如：&#123;CHARGE:&#123;key:&quot;C&quot;, value:&quot;收费&quot;&#125;,FREE:&#123;key:&quot;F&quot;, value:&quot;免费&quot;&#125;&#125;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key 例如：C</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">string</span>&#125; 例如：收费</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> option..<span class="property">KV</span> = <span class="function">(<span class="params">object, key</span>) =&gt;</span>  &#123;</span><br><span class="line">    <span class="keyword">if</span> (!object || !key) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> result = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> enums <span class="keyword">in</span> object)&#123;</span><br><span class="line">            <span class="keyword">if</span> (key === object[enums][<span class="string">&quot;key&quot;</span>]) &#123;</span><br><span class="line">                result = object[enums][<span class="string">&quot;value&quot;</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    option..<span class="property">KV</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//最后再vue使用</span></span><br><span class="line"><span class="attr">SECTION_CHARGE</span>: <span class="variable constant_">SECTION_CHARGE</span>,</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">td</span>&gt;</span>两个大括号包住SECTION_CHARGE|option..KV(section.charge)<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>通过后端的枚举，来生成枚举代码生成器，首先再server下建立软件包enums，然后放入两个文件，分别是SectionChargeEnum和YesNoEnum</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.server.enums;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">SectionChargeEnum</span> &#123;</span><br><span class="line"></span><br><span class="line">    CHARGE(<span class="string">&quot;C&quot;</span>, <span class="string">&quot;收费&quot;</span>),</span><br><span class="line">    FREE(<span class="string">&quot;F&quot;</span>, <span class="string">&quot;免费&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String code;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String desc;</span><br><span class="line"></span><br><span class="line">    SectionChargeEnum(String code, String desc) &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.desc = desc;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCode</span><span class="params">(String code)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDesc</span><span class="params">(String desc)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.desc = desc;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getDesc</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> desc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.server.enums;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">YesNoEnum</span> &#123;</span><br><span class="line"></span><br><span class="line">    YES(<span class="string">&quot;1&quot;</span>, <span class="string">&quot;是&quot;</span>),</span><br><span class="line">    NO(<span class="string">&quot;0&quot;</span>, <span class="string">&quot;否&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String code;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String desc;</span><br><span class="line"></span><br><span class="line">    YesNoEnum(String code, String desc) &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.desc = desc;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCode</span><span class="params">(String code)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDesc</span><span class="params">(String desc)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.desc = desc;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getDesc</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> desc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>记得再sectionservice中增加</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 插入</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(Section section)</span>&#123;</span><br><span class="line">            <span class="type">Date</span> <span class="variable">now</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">            section.setCreatedAt(now);</span><br><span class="line">            section.setUpdatedAt(now);</span><br><span class="line">    section.setId(UuidUtil.getShortUuid());</span><br><span class="line">    section.setCharge(SectionChargeEnum.CHARGE.getCode());<span class="comment">//这一行</span></span><br><span class="line">    sectionMapper.insert(section);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>最后写枚举生成器EnumGenerator</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.generator.enums;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStreamWriter;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.util.regex.Matcher;</span><br><span class="line"><span class="keyword">import</span> java.util.regex.Pattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EnumGenerator</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> <span class="string">&quot;admin\\public\\static\\js\\enums.js&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">StringBuffer</span> <span class="variable">bufferObject</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">        <span class="type">StringBuffer</span> <span class="variable">bufferArray</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">        <span class="type">long</span> <span class="variable">begin</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            toJson(SectionChargeEnum.class, bufferObject, bufferArray);</span><br><span class="line">            toJson(YesNoEnum.class, bufferObject, bufferArray);</span><br><span class="line"></span><br><span class="line">            <span class="type">StringBuffer</span> <span class="variable">buffer</span> <span class="operator">=</span> bufferObject.append(<span class="string">&quot;\r\n&quot;</span>).append(bufferArray);</span><br><span class="line">            writeJs(buffer);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;执行耗时:&quot;</span> + (end - begin) + <span class="string">&quot; 毫秒&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">toJson</span><span class="params">(Class clazz, StringBuffer bufferObject, StringBuffer bufferArray)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> toUnderline(clazz.getSimpleName());</span><br><span class="line">        toJson(clazz, key, bufferObject, bufferArray);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">toJson</span><span class="params">(Class clazz, String key, StringBuffer bufferObject, StringBuffer bufferArray)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        Object[] objects = clazz.getEnumConstants();</span><br><span class="line">        <span class="type">Method</span> <span class="variable">name</span> <span class="operator">=</span> clazz.getMethod(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        <span class="type">Method</span> <span class="variable">getDesc</span> <span class="operator">=</span> clazz.getMethod(<span class="string">&quot;getDesc&quot;</span>);</span><br><span class="line">        <span class="type">Method</span> <span class="variable">getCode</span> <span class="operator">=</span> clazz.getMethod(<span class="string">&quot;getCode&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 生成对象</span></span><br><span class="line">        bufferObject.append(key).append(<span class="string">&quot;=&#123;&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; objects.length; i++) &#123;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> objects[i];</span><br><span class="line">            <span class="keyword">if</span> (getCode == <span class="literal">null</span>) &#123;</span><br><span class="line">                bufferObject.append(name.invoke(obj)).append(<span class="string">&quot;:&#123;key:\&quot;&quot;</span>).append(name.invoke(obj)).append(<span class="string">&quot;\&quot;, value:\&quot;&quot;</span>).append(getDesc.invoke(obj)).append(<span class="string">&quot;\&quot;&#125;&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                bufferObject.append(name.invoke(obj)).append(<span class="string">&quot;:&#123;key:\&quot;&quot;</span>).append(getCode.invoke(obj)).append(<span class="string">&quot;\&quot;, value:\&quot;&quot;</span>).append(getDesc.invoke(obj)).append(<span class="string">&quot;\&quot;&#125;&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; objects.length - <span class="number">1</span>) &#123;</span><br><span class="line">                bufferObject.append(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        bufferObject.append(<span class="string">&quot;&#125;;\r\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 生成数组</span></span><br><span class="line">        bufferArray.append(key).append(<span class="string">&quot;_ARRAY=[&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; objects.length; i++) &#123;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> objects[i];</span><br><span class="line">            <span class="keyword">if</span> (getCode == <span class="literal">null</span>) &#123;</span><br><span class="line">                bufferArray.append(<span class="string">&quot;&#123;key:\&quot;&quot;</span>).append(name.invoke(obj)).append(<span class="string">&quot;\&quot;, value:\&quot;&quot;</span>).append(getDesc.invoke(obj)).append(<span class="string">&quot;\&quot;&#125;&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                bufferArray.append(<span class="string">&quot;&#123;key:\&quot;&quot;</span>).append(getCode.invoke(obj)).append(<span class="string">&quot;\&quot;, value:\&quot;&quot;</span>).append(getDesc.invoke(obj)).append(<span class="string">&quot;\&quot;&#125;&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; objects.length - <span class="number">1</span>) &#123;</span><br><span class="line">                bufferArray.append(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        bufferArray.append(<span class="string">&quot;];\r\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 写文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> stringBuffer</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">writeJs</span><span class="params">(StringBuffer stringBuffer)</span> &#123;</span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            out = <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(path);</span><br><span class="line">            <span class="type">OutputStreamWriter</span> <span class="variable">osw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(out, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">            System.out.println(path);</span><br><span class="line">            osw.write(stringBuffer.toString());</span><br><span class="line">            osw.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                out.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 功能：驼峰转大写下划线，并去掉_ENUM</span></span><br><span class="line"><span class="comment">     * 如：SectionChargeEnum 变成 SECTION_CHARGE</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> str</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">toUnderline</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> underline(str).toString();</span><br><span class="line">        <span class="keyword">return</span> result.substring(<span class="number">1</span>, result.length()).toUpperCase().replace(<span class="string">&quot;_ENUM&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 驼峰转下划线，第一位是下划线</span></span><br><span class="line"><span class="comment">     * 如：SectionChargeEnum 变成 _section_charge_enum</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> str</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> StringBuffer <span class="title function_">underline</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        <span class="type">Pattern</span> <span class="variable">pattern</span> <span class="operator">=</span> Pattern.compile(<span class="string">&quot;[A-Z]&quot;</span>);</span><br><span class="line">        <span class="type">Matcher</span> <span class="variable">matcher</span> <span class="operator">=</span> pattern.matcher(str);</span><br><span class="line">        <span class="type">StringBuffer</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>(str);</span><br><span class="line">        <span class="keyword">if</span>(matcher.find()) &#123;</span><br><span class="line">            sb = <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">            matcher.appendReplacement(sb,<span class="string">&quot;_&quot;</span>+matcher.group(<span class="number">0</span>).toLowerCase());</span><br><span class="line">            matcher.appendTail(sb);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> sb;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> underline(sb.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>原理：通过反射，得到枚举类的枚举类型、code、desc，然后通过字符串拼接的方式，得到最终完整的json字符串，再通过写文件的方式直接写入enums.js。</p>
</li>
<li><p>记得添加依赖，才能引入包</p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.course<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<pre><code>  解决这个问题 [Vue warn]: Do not use built-in or reserved HTML elements as component id: section
  将export default &#123;
  components: &#123;Pagination&#125;,
  name: &#39;business-section&#39;,//将section变成了business-section
</code></pre>
<h2 id="6-7-生成器综合示例"><a href="#6-7-生成器综合示例" class="headerlink" title="6-7 生成器综合示例"></a>6-7 生成器综合示例</h2><p>课程管理功能开发：</p>
<ul>
<li><p>日期字段都是用datetime(3)，精确到毫秒。界面显示可以只到秒，但是落库要精确</p>
</li>
<li><p>首先生成数据库，all.sql</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># 课程</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `course`;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> `course`</span><br><span class="line">(</span><br><span class="line">    `id`         <span class="type">CHAR</span>(<span class="number">8</span>)     <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;ID&#x27;</span>,</span><br><span class="line">    `name`      <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;名称&#x27;</span>,</span><br><span class="line">    `summary`  <span class="type">VARCHAR</span>(<span class="number">2000</span>) COMMENT <span class="string">&#x27;概述&#x27;</span>,</span><br><span class="line">    `<span class="type">time</span>`       <span class="type">INT</span> <span class="keyword">default</span> <span class="number">0</span> COMMENT <span class="string">&#x27;时长|单位秒&#x27;</span>,</span><br><span class="line">    `price`     <span class="type">decimal</span>(<span class="number">8</span>,<span class="number">2</span>)  <span class="keyword">default</span> <span class="number">0.00</span> comment <span class="string">&#x27;价格(元)&#x27;</span>,</span><br><span class="line">    `image`  <span class="type">VARCHAR</span>(<span class="number">100</span>) COMMENT <span class="string">&#x27;封面&#x27;</span>,</span><br><span class="line">    `level`     <span class="type">CHAR</span>(<span class="number">1</span>)  COMMENT <span class="string">&#x27;级别|ONE(&quot;1&quot;,&quot;初级&quot;),ONE(&quot;2&quot;,&quot;中级&quot;),ONE(&quot;3&quot;,&quot;高级&quot;)&#x27;</span>,</span><br><span class="line">    `charge`     <span class="type">CHAR</span>(<span class="number">1</span>) COMMENT <span class="string">&#x27;收费|CHARGE(&quot;C&quot;,&quot;收费&quot;),FREE(&quot;F&quot;,&quot;免费&quot;)&#x27;</span>,</span><br><span class="line">    `status`     <span class="type">CHAR</span>(<span class="number">1</span>) COMMENT <span class="string">&#x27;状态|PUBLISH(&quot;P&quot;,&quot;发布&quot;),DRAFT(&quot;D&quot;,&quot;草稿&quot;)&#x27;</span>,</span><br><span class="line">    `enroll`    <span class="type">integer</span> <span class="keyword">default</span> <span class="number">0</span> comment <span class="string">&#x27;报名数&#x27;</span>,</span><br><span class="line">    `sort`       <span class="type">INT</span> COMMENT <span class="string">&#x27;顺序&#x27;</span>,</span><br><span class="line">    `created_at` DATETIME(<span class="number">3</span>) COMMENT <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line">    `updated_at` DATETIME(<span class="number">3</span>) COMMENT <span class="string">&#x27;修改时间&#x27;</span>,</span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">   )engine <span class="operator">=</span>innodb <span class="keyword">default</span> charset<span class="operator">=</span>utf8mb4 comment<span class="operator">=</span><span class="string">&#x27;课程&#x27;</span>;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `course`(id,name,summary,<span class="type">time</span>,price,image,level,charge,status,enroll,sort,created_at,updated_at)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="string">&#x27;00000001&#x27;</span>,<span class="string">&#x27;测试课程01&#x27;</span>,<span class="string">&#x27;这时一门测试课程&#x27;</span>,<span class="number">7200</span>,<span class="number">19.9</span>,<span class="string">&#x27;&#x27;</span>,<span class="number">0</span>,<span class="string">&#x27;C&#x27;</span>,<span class="string">&#x27;D&#x27;</span>,<span class="number">100</span>,<span class="number">0</span>,now(),now());</span><br></pre></td></tr></table></figure>

<ul>
<li>其次在generatorConfiguration</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;course&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;Course&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>然后mybatis-generator，后端，前端代码生成器</p>
</li>
<li><p>其次在admin增加管理</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;li class=&quot;active&quot; id=&quot;business-course-sidebar&quot;&gt;</span><br><span class="line">  &lt;router-link to=&quot;/business/course&quot;&gt;</span><br><span class="line">    &lt;i class=&quot;menu-icon fa fa-caret-right&quot;&gt;&lt;/i&gt;</span><br><span class="line">    课程管理</span><br><span class="line">  &lt;/router-link&gt;</span><br><span class="line">  &lt;b class=&quot;arrow&quot;&gt;&lt;/b&gt;</span><br><span class="line">&lt;/li&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>在路由router.js</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;business/course&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;business/course&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Course</span>,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<ul>
<li>在vue.ftl和controller。ftl都在长度后加?c这样会将数字2.000变为2000</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">|| !Validator.length(_this.$&#123;domain&#125;.$&#123;field.nameHump&#125;, &quot;$&#123;field.nameCn&#125;&quot;, 1, $&#123;field.length?c&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>为其生成三个枚举分别是CourseChargeEnum，CourseLevelEnum，CourseStatusEnum</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.server.enums;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">CourseChargeEnum</span> &#123;</span><br><span class="line"></span><br><span class="line">    CHARGE(<span class="string">&quot;C&quot;</span>, <span class="string">&quot;收费&quot;</span>),</span><br><span class="line">    FREE(<span class="string">&quot;F&quot;</span>, <span class="string">&quot;免费&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String code;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String desc;</span><br><span class="line"></span><br><span class="line">    CourseChargeEnum(String code, String desc) &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.desc = desc;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCode</span><span class="params">(String code)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDesc</span><span class="params">(String desc)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.desc = desc;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getDesc</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> desc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.server.enums;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">CourseLevelEnum</span> &#123;</span><br><span class="line"></span><br><span class="line">    ONE(<span class="string">&quot;1&quot;</span>, <span class="string">&quot;初级&quot;</span>),</span><br><span class="line">    TWO(<span class="string">&quot;2&quot;</span>, <span class="string">&quot;中级&quot;</span>),</span><br><span class="line">    THREE(<span class="string">&quot;3&quot;</span>, <span class="string">&quot;高级&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String code;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String desc;</span><br><span class="line"></span><br><span class="line">    CourseLevelEnum(String code, String desc) &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.desc = desc;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCode</span><span class="params">(String code)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDesc</span><span class="params">(String desc)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.desc = desc;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getDesc</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> desc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.server.enums;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">CourseStatusEnum</span> &#123;</span><br><span class="line"></span><br><span class="line">    PUBLISH(<span class="string">&quot;P&quot;</span>, <span class="string">&quot;发布&quot;</span>),</span><br><span class="line">    DRAFT(<span class="string">&quot;D&quot;</span>, <span class="string">&quot;草稿&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String code;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String desc;</span><br><span class="line"></span><br><span class="line">    CourseStatusEnum(String code, String desc) &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.desc = desc;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCode</span><span class="params">(String code)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDesc</span><span class="params">(String desc)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.desc = desc;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getDesc</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> desc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>然后再EnumGenerator增加</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">toJson(CourseLevelEnum.class, bufferObject, bufferArray);</span><br><span class="line">toJson(CourseChargeEnum.class, bufferObject, bufferArray);</span><br><span class="line">toJson(CourseStatusEnum.class, bufferObject, bufferArray);</span><br></pre></td></tr></table></figure>

<ul>
<li>然后再course.vue增加</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">data: function () &#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    course: &#123;&#125;,</span><br><span class="line">    courses: [],</span><br><span class="line">    COURSE_LEVEL:COURSE_LEVEL,</span><br><span class="line">    COURSE_CHARGE:COURSE_CHARGE,</span><br><span class="line">    COURSE_STATUS:COURSE_STATUS,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">////////////////////////////////////////////////////////</span><br><span class="line">   &lt;td&gt;&#123;&#123;COURSE_LEVEL|option..KV(course.level)&#125;&#125;&lt;/td&gt;</span><br><span class="line">   &lt;td&gt;&#123;&#123;COURSE_CHARGE|option..KV(course.charge)&#125;&#125;&lt;/td&gt;</span><br><span class="line">   &lt;td&gt;&#123;&#123;COURSE_STATUS|option..KV(course.status)&#125;&#125;&lt;/td&gt;</span><br><span class="line">/////////////////////////////////////////////////////////</span><br><span class="line">&lt;select v-model=&quot;course.level&quot; class=&quot;form-control&quot;  &gt;</span><br><span class="line">    &lt;option v-for=&quot;o in COURSE_LEVEL&quot; v-bind:value=&quot;o.key&quot;&gt;&#123;&#123;o.value&#125;&#125;&lt;/option&gt;</span><br><span class="line">   &lt;/select&gt;</span><br><span class="line">&lt;select v-model=&quot;course.charge&quot; class=&quot;form-control&quot;  &gt;</span><br><span class="line">   &lt;option v-for=&quot;o in COURSE_CHARGE&quot; v-bind:value=&quot;o.key&quot;&gt;&#123;&#123;o.value&#125;&#125;&lt;/option&gt;</span><br><span class="line">   &lt;/select&gt;</span><br><span class="line">&lt;select v-model=&quot;course.status&quot; class=&quot;form-control&quot;  &gt;</span><br><span class="line">   &lt;option v-for=&quot;o in COURSE_STATUS&quot; v-bind:value=&quot;o.key&quot;&gt;&#123;&#123;o.value&#125;&#125;&lt;/option&gt;</span><br><span class="line"> &lt;/select&gt;</span><br></pre></td></tr></table></figure>

<h2 id="6-8-生成器升级作业"><a href="#6-8-生成器升级作业" class="headerlink" title="6-8 生成器升级作业"></a>6-8 生成器升级作业</h2><p>生成器升级作业：将枚举类型的字段加入到代码生成器里面</p>
<ul>
<li>首先再all.sql进行修改，约定：枚举类型字段，增加“枚举”中文，并且将对应的枚举类写在[]中</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">`level`     <span class="type">CHAR</span>(<span class="number">1</span>)  COMMENT <span class="string">&#x27;级别|枚举[CourseLevelEnum]:ONE(&quot;1&quot;,&quot;初级&quot;),ONE(&quot;2&quot;,&quot;中级&quot;),ONE(&quot;3&quot;,&quot;高级&quot;)&#x27;</span>,</span><br><span class="line">`charge`     <span class="type">CHAR</span>(<span class="number">1</span>) COMMENT <span class="string">&#x27;收费|枚举[CourseChargeEnum]:CHARGE(&quot;C&quot;,&quot;收费&quot;),FREE(&quot;F&quot;,&quot;免费&quot;)&#x27;</span>,</span><br><span class="line">`status`     <span class="type">CHAR</span>(<span class="number">1</span>) COMMENT <span class="string">&#x27;状态|枚举[CourseStatusEnum]:PUBLISH(&quot;P&quot;,&quot;发布&quot;),DRAFT(&quot;D&quot;,&quot;草稿&quot;)&#x27;</span>,</span><br></pre></td></tr></table></figure>

<ul>
<li>其次再field.java增加两个字段</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">package com.course.generator.util;</span><br><span class="line"></span><br><span class="line">public class Field &#123;</span><br><span class="line">    private Boolean enums; // 是否是枚举</span><br><span class="line">    private String enumsConst; // 枚举常量 COURSE_LEVEL</span><br><span class="line">    </span><br><span class="line">    public Boolean getEnums() &#123;</span><br><span class="line">        return enums;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setEnums(Boolean enums) &#123;</span><br><span class="line">        this.enums = enums;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getEnumsConst() &#123;</span><br><span class="line">        return enumsConst;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setEnumsConst(String enumsConst) &#123;</span><br><span class="line">        this.enumsConst = enumsConst;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        sb.append(&quot;, enums=&quot;).append(enums);</span><br><span class="line">        sb.append(&quot;, enumsConst=&#x27;&quot;).append(enumsConst).append(&#x27;\&#x27;&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>然后再DbUtil.java增加</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (comment.contains(<span class="string">&quot;枚举&quot;</span>)) &#123;</span><br><span class="line">    field.setEnums(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 以课程等级为例：从注释中的“枚举[CourseLevelEnum]”，得到COURSE_LEVEL</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">start</span> <span class="operator">=</span> comment.indexOf(<span class="string">&quot;[&quot;</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">end</span> <span class="operator">=</span> comment.indexOf(<span class="string">&quot;]&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">enumsName</span> <span class="operator">=</span> comment.substring(start + <span class="number">1</span>, end);</span><br><span class="line">    <span class="type">String</span> <span class="variable">enumsConst</span> <span class="operator">=</span> EnumGenerator.toUnderline(enumsName);</span><br><span class="line">    field.setEnumsConst(enumsConst);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    field.setEnums(<span class="literal">false</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>最后对vue.ftl增加枚举判断</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;#list fieldList as field&gt;</span><br><span class="line">  &lt;#if field.nameHump!=&quot;createdAt&quot;&amp;&amp; field.nameHump!=&quot;updatedAt&quot; &gt;</span><br><span class="line">    &lt;#if field.enums&gt;</span><br><span class="line">    &lt;td&gt;&#123;&#123;$&#123;field.enumsConst&#125;|option..KV($&#123;domain&#125;.$&#123;field.nameHump&#125;)&#125;&#125;&lt;/td&gt;</span><br><span class="line">    &lt;#else&gt;</span><br><span class="line">  &lt;td&gt;&#123;&#123;$&#123;domain&#125;.$&#123;field.nameHump&#125;&#125;&#125;&lt;/td&gt;</span><br><span class="line">  &lt;/#if&gt;</span><br><span class="line">&lt;/#if&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">//表单也得改，进行判断</span><br><span class="line">&lt;#list fieldList as field&gt;</span><br><span class="line">  &lt;#if field.name!=&quot;id&quot; &amp;&amp; field.nameHump!=&quot;createdAt&quot; &amp;&amp; field.nameHump!=&quot;updatedAt&quot;&gt;</span><br><span class="line">    &lt;#if field.enums&gt;</span><br><span class="line">&lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">  &lt;label class=&quot;col-sm-2 control-label&quot;&gt;$&#123;field.nameCn&#125;&lt;/label&gt;</span><br><span class="line">  &lt;div class=&quot;col-sm-10&quot;&gt;</span><br><span class="line">    &lt;select v-model=&quot;$&#123;domain&#125;.$&#123;field.nameHump&#125;&quot; class=&quot;form-control&quot;&gt;</span><br><span class="line">      &lt;option v-for=&quot;o in $&#123;field.enumsConst&#125;&quot; v-bind:value=&quot;o.key&quot;&gt;&#123;&#123;o.value&#125;&#125;&lt;/option&gt;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">    &lt;#else&gt;</span><br><span class="line">&lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">  &lt;label class=&quot;col-sm-2 control-label&quot;&gt;$&#123;field.nameCn&#125;&lt;/label&gt;</span><br><span class="line">  &lt;div class=&quot;col-sm-10&quot;&gt;</span><br><span class="line">    &lt;input v-model=&quot;$&#123;domain&#125;.$&#123;field.nameHump&#125;&quot; class=&quot;form-control&quot;&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">    &lt;/#if&gt;</span><br><span class="line">  &lt;/#if&gt;</span><br><span class="line">&lt;/#list&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//data这也得增加</span></span><br><span class="line">data: function () &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    $&#123;domain&#125;: &#123;&#125;,</span><br><span class="line">    $&#123;domain&#125;s: [],</span><br><span class="line">    &lt;#list fieldList as field&gt;</span><br><span class="line">     &lt;#<span class="keyword">if</span> field.enums&gt;</span><br><span class="line">    $&#123;field.enumsConst&#125;: $&#123;field.enumsConst&#125;,</span><br><span class="line">     &lt;/#<span class="keyword">if</span>&gt;</span><br><span class="line">    &lt;/#list&gt;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>


        </div>

        
            <div class="post-copyright-info">
                <div class="article-copyright-info-container">
    <ul>
        <li>Post title：完整项目之Spring Cloud + Vue 前后端分离2-1</li>
        <li>Post author：Fang</li>
        <li>Create time：2022-02-07 15:20:23</li>
        <li>
            Post link：https://ainianxu.github.io/2022/02/07/完整项目之Spring Cloud + Vue 前后端分离 2-1/
        </li>
        <li>
            Copyright Notice：All articles in this blog are licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> unless stating additionally.
        </li>
    </ul>
</div>

            </div>
        

        
            <ul class="post-tags-box">
                
                    <li class="tag-item">
                        <a href="/tags/%E5%AE%8C%E6%95%B4%E9%A1%B9%E7%9B%AE/">#完整项目</a>&nbsp;
                    </li>
                
            </ul>
        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/2022/02/15/%E5%AE%8C%E6%95%B4%E9%A1%B9%E7%9B%AE%E4%B9%8BSpring%20Cloud%20+%20Vue%20%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%202-2/"
                        >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">完整项目之Spring Cloud + Vue 前后端分离2-2</span>
                                <span class="post-nav-item">Prev posts</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/2022/01/07/%E5%AE%8C%E6%95%B4%E9%A1%B9%E7%9B%AE%E4%B9%8BSpring%20Cloud%20+%20Vue%20%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">完整项目之Spring Cloud + Vue 前后端分离1</span>
                                <span class="post-nav-item">Next posts</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
            <div class="comment-container">
                <div class="comments-container">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
        <i class="fas fa-comments">&nbsp;Comments</i>
    </div>
    

        
            
    <div class="valine-container">
        <script data-pjax
                src="//cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js"></script>
        <div id="vcomments"></div>
        <script data-pjax>
            function loadValine() {
                new Valine({
                    el: '#vcomments',
                    appId: 'loa9BVbgmyFLwBMHhg1Cycx1-gzGzoHsz',
                    appKey: '47pIz6ewIXRi5251WyfUpQOB',
                    meta: ['nick', 'mail', 'link'],
                    avatar: 'wavatar',
                    enableQQ: true,
                    placeholder: '😜 尽情吐槽吧~',
                    lang: 'en'.toLowerCase()
                });

                function getAuthor(language) {
                    switch (language) {
                        case 'en':
                            return 'Author';
                        case 'zh-CN':
                            return '博主';
                        default:
                            return 'Master';
                    }
                }

                // Add "Author" identify
                const getValineDomTimer = setInterval(() => {
                    const vcards = document.querySelectorAll('#vcomments .vcards .vcard');
                    if (vcards.length > 0) {
                        let author = 'Fang';

                        if (author) {
                            for (let vcard of vcards) {
                                const vnick_dom = vcard.querySelector('.vhead .vnick');
                                const vnick = vnick_dom.innerHTML;
                                if (vnick === author) {
                                    vnick_dom.innerHTML = `${vnick} <span class="author">${getAuthor(KEEP.hexo_config.language)}</span>`
                                }
                            }
                        }
                        clearInterval(getValineDomTimer);
                    } else {
                        clearInterval(getValineDomTimer);
                    }
                }, 2000);
            }

            if ('true') {
                const loadValineTimeout = setTimeout(() => {
                    loadValine();
                    clearTimeout(loadValineTimeout);
                }, 1000);
            } else {
                window.addEventListener('DOMContentLoaded', loadValine);
            }
        </script>
    </div>



        
    
</div>

            </div>
        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2021</span>
              -
            
            2022&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">Fang</a>
        </div>
        
            <script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv">
                        Visitor Count&nbsp;<span id="busuanzi_value_site_uv"></span>&ensp;
                    </span>
                
                
                    <span id="busuanzi_container_site_pv">
                        Totalview&nbsp;<span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            Powered by <a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;|&nbsp;Theme&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.4</a>
        </div>
        
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fas fa-comment"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        
            <li class="tools-item rss flex-center">
                <a class="flex-center"
                   href="/atom.xml"
                   target="_blank"
                >
                    <i class="fas fa-rss"></i>
                </a>
            </li>
        

        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
    </ul>
</div>

    </div>

    
        <aside class="page-aside">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC6%E7%AB%A0-%E9%80%9A%E7%94%A8%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8%E5%BC%80%E5%8F%91"><span class="nav-number">1.</span> <span class="nav-text">第6章 通用代码生成器开发</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#6-1-%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8%E5%8E%9F%E7%90%86%E4%BB%8B%E7%BB%8D"><span class="nav-number">1.1.</span> <span class="nav-text">6-1 代码生成器原理介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-2-controller%E5%B1%82%E5%92%8Cservice%E5%B1%82%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90"><span class="nav-number">1.2.</span> <span class="nav-text">6-2 controller层和service层代码生成</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-3-dto%E5%B1%82%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90"><span class="nav-number">1.3.</span> <span class="nav-text">6-3 dto层代码生成</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-4-%E5%89%8D%E7%AB%AFvue%E7%95%8C%E9%9D%A2%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90"><span class="nav-number">1.4.</span> <span class="nav-text">6-4 前端vue界面代码生成</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-5-%E5%AD%97%E6%AE%B5%E6%A0%A1%E9%AA%8C%E5%92%8C%E9%80%9A%E7%94%A8%E5%AD%97%E6%AE%B5%E7%9A%84%E5%A4%84%E7%90%86"><span class="nav-number">1.5.</span> <span class="nav-text">6-5 字段校验和通用字段的处理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-6-%E5%89%8D%E7%AB%AF%E6%9E%9A%E4%B8%BE%E4%BB%A3%E7%A0%81%E7%9A%84%E7%94%9F%E6%88%90"><span class="nav-number">1.6.</span> <span class="nav-text">6-6 前端枚举代码的生成</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-7-%E7%94%9F%E6%88%90%E5%99%A8%E7%BB%BC%E5%90%88%E7%A4%BA%E4%BE%8B"><span class="nav-number">1.7.</span> <span class="nav-text">6-7 生成器综合示例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-8-%E7%94%9F%E6%88%90%E5%99%A8%E5%8D%87%E7%BA%A7%E4%BD%9C%E4%B8%9A"><span class="nav-number">1.8.</span> <span class="nav-text">6-8 生成器升级作业</span></a></li></ol></li></ol>
    </div>
</div>
        </aside>
    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>



<script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/dark-light-toggle.js"></script>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/local-search.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/code-copy.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/lazyload.js"></script>


<div class="post-scripts pjax">
    
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/left-side-toggle.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/libs/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/toc.js"></script>
    
</div>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/libs/pjax.min.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            KEEP.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            KEEP.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            KEEP.refresh();
        });
    });
</script>



</body>
</html>
