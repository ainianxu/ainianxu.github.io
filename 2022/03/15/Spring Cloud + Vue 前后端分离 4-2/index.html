<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="Fang">
    
    <title>
        
            Spring Cloud + Vue 前后端分离4-2 |
        
        念~旭
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/favicon.ico">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/css/font-awesome.min.css">
    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"example.com","root":"/","language":"en","path":"search.json"};
    KEEP.theme_config = {"toc":{"enable":true,"number":true,"expand_all":true,"init_open":false},"style":{"primary_color":"#0066CC","avatar":"/images/favicon.ico","favicon":"/images/favicon.ico","article_img_align":"left","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":true,"scale":false},"first_screen":{"enable":true,"background_img":"/images/bg.svg","description":"你舍得放弃么？你愿意放弃么？你能......放弃么？"},"scroll":{"progress_bar":{"enable":true},"percent":{"enable":true}}},"local_search":{"enable":true,"preload":true},"code_copy":{"enable":true,"style":"default"},"pjax":{"enable":true},"lazyload":{"enable":true},"version":"3.4.4"};
    KEEP.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
  </script>
<meta name="generator" content="Hexo 6.1.0"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
</head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fas fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                念~旭
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                HOME
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                ARCHIVES
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/links"
                            >
                                LINKS
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/about"
                            >
                                ABOUT
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">HOME</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">ARCHIVES</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/links">LINKS</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/about">ABOUT</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">Spring Cloud + Vue 前后端分离4-2</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/favicon.ico">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">Fang</span>
                        
                            <span class="author-label">Lv5</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;
        <span class="pc">2022-03-15 16:43:14</span>
        <span class="mobile">2022-03-15 16:43</span>
    </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/%E5%AE%8C%E6%95%B4%E9%A1%B9%E7%9B%AE/">完整项目</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fas fa-file-word"></i>&nbsp;<span>29.8k Words</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fas fa-clock"></i>&nbsp;<span>164 Mins</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <h1 id="第13章-网站开发"><a href="#第13章-网站开发" class="headerlink" title="第13章 网站开发"></a>第13章 网站开发</h1><p>本章将制作用于学员使用的网站，学习BootStrap的网站模板的使用，可以让程序员即使不会美工也可以写出漂亮的网站。</p>
<hr>
<h2 id="13-1-网站模块的搭建"><a href="#13-1-网站模块的搭建" class="headerlink" title="13-1 网站模块的搭建"></a>13-1 网站模块的搭建</h2><p><strong>新建web模板</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.网站开发，增加web模块使用命令：vue create web</span><br></pre></td></tr></table></figure>

<ul>
<li>大家拿到一个vue项目后，要先执行npm install，才能运行项目，一步会去下载node  module，类似于maven项目要先下载jar包</li>
<li>步骤：vue create web —&gt; cd web —&gt; npm run serve</li>
</ul>
<p><strong>多环境配置</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.网站开发，web模块增加多环境配置启动命令，增加--port8081</span><br></pre></td></tr></table></figure>

<ul>
<li><p>就是将admin里的两个配置文件复制过来，然后改package.json</p>
</li>
<li><p>&#96;&#96;&#96;<br>“serve-dev”: “vue-cli-service serve –mode dev –port 8081”,<br>“serve-prod”: “vue-cli-service serve –mode prod –port 8081”,</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**增加路由配置**</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<p>1.网站开发，web模块增加路由配置<br>使用命令：npm install –Save vue-router</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 这里只是增加了router依赖，后续开发页面时会增加router的配置</span><br><span class="line"></span><br><span class="line">## 13-2 集成bootstrap官方模板</span><br><span class="line"></span><br><span class="line">- 我们的控台admin，用的是免费的ace admin模板，ace也是基于bootstrap做的封装。有很多组织和个人以卖各种前端模板为生</span><br><span class="line">- 本章开发的前端网站，是基于bootstrap官方提供的原生模板</span><br><span class="line"></span><br><span class="line">**bootstrap4.4.1文档介绍**</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>1.网站开发，增加bootstrp-4.4.1的js,css</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- jquery.slim是jquery的简化版也可以引入原版jquery。popper.js是一个js提示插件</span><br><span class="line">- 网站首页选用album模板，相册主题</span><br><span class="line">- 就是下载这个将其放到web的public![image-20220325163100644](https://s2.loli.net/2022/03/25/xTzvVYPaRqLpyjG.png)</span><br><span class="line"></span><br><span class="line">**集成album模板**</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>1.网站开发，集成album模板</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 做前端的同学，会经常看到bundle这个词，就是将几个依赖的js或css，打包成一个bundle.js</span><br><span class="line"></span><br><span class="line">- 首先在index中加css和js</span><br><span class="line"></span><br><span class="line">- ```html</span><br><span class="line">  &lt;link rel=&quot;stylesheet&quot; href=&quot;&lt;%= BASE_URL %&gt;bootstrap-4.4.1/css/bootstrap.min.css&quot;&gt;</span><br><span class="line">  &lt;link rel=&quot;stylesheet&quot; href=&quot;&lt;%= BASE_URL %&gt;static/css/album.css&quot;&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;script src=&quot;https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.slim.min.js&quot; integrity=&quot;sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;script src=&quot;&lt;%= BASE_URL %&gt;bootstrap-4.4.1/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>将album模板中的body标签里的内容，复制到template标签中。修改app.vue</p>
</li>
<li><p>&#96;&#96;&#96;vue</p>
<template>
  <div id="app">
    <header>
      <div class="collapse bg-dark" id="navbarHeader">
        <div class="container">
          <div class="row">
            <div class="col-sm-8 col-md-7 py-4">
              <h4 class="text-white">About</h4>
              <p class="text-muted">Add some information about the album below, the author, or any other background context. Make it a few sentences long so folks can pick up some informative tidbits. Then, link them off to some social networking sites or contact information.</p>
            </div>
            <div class="col-sm-4 offset-md-1 py-4">
              <h4 class="text-white">Contact</h4>
              <ul class="list-unstyled">
                <li><a href="#" class="text-white">Follow on Twitter</a></li>
                <li><a href="#" class="text-white">Like on Facebook</a></li>
                <li><a href="#" class="text-white">Email me</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <div class="navbar navbar-dark bg-dark shadow-sm">
        <div class="container d-flex justify-content-between">
          <a href="#" class="navbar-brand d-flex align-items-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true" class="mr-2" viewBox="0 0 24 24" focusable="false"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/><circle cx="12" cy="13" r="4"/></svg>
            <strong>Album</strong>
          </a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarHeader" aria-controls="navbarHeader" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
        </div>
      </div>
    </header>
    <main role="main">

<pre><code>  &lt;section class=&quot;jumbotron text-center&quot;&gt;
    &lt;div class=&quot;container&quot;&gt;
      &lt;h1&gt;Album example&lt;/h1&gt;
      &lt;p class=&quot;lead text-muted&quot;&gt;Something short and leading about the collection below—its contents, the creator, etc. Make it short and sweet, but not too short so folks don’t simply skip over it entirely.&lt;/p&gt;
      &lt;p&gt;
        &lt;a href=&quot;#&quot; class=&quot;btn btn-primary my-2&quot;&gt;Main call to action&lt;/a&gt;
        &lt;a href=&quot;#&quot; class=&quot;btn btn-secondary my-2&quot;&gt;Secondary action&lt;/a&gt;
      &lt;/p&gt;
    &lt;/div&gt;
  &lt;/section&gt;

  &lt;div class=&quot;album py-5 bg-light&quot;&gt;
    &lt;div class=&quot;container&quot;&gt;

      &lt;div class=&quot;row&quot;&gt;
        &lt;div class=&quot;col-md-4&quot;&gt;
          &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;
            &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;

            &lt;div class=&quot;card-body&quot;&gt;
              &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;
              &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;
                &lt;div class=&quot;btn-group&quot;&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;
                &lt;/div&gt;
                &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;col-md-4&quot;&gt;
          &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;
            &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;

            &lt;div class=&quot;card-body&quot;&gt;
              &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;
              &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;
                &lt;div class=&quot;btn-group&quot;&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;
                &lt;/div&gt;
                &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;col-md-4&quot;&gt;
          &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;
            &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;

            &lt;div class=&quot;card-body&quot;&gt;
              &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;
              &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;
                &lt;div class=&quot;btn-group&quot;&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;
                &lt;/div&gt;
                &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div class=&quot;col-md-4&quot;&gt;
          &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;
            &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;

            &lt;div class=&quot;card-body&quot;&gt;
              &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;
              &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;
                &lt;div class=&quot;btn-group&quot;&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;
                &lt;/div&gt;
                &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;col-md-4&quot;&gt;
          &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;
            &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;

            &lt;div class=&quot;card-body&quot;&gt;
              &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;
              &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;
                &lt;div class=&quot;btn-group&quot;&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;
                &lt;/div&gt;
                &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;col-md-4&quot;&gt;
          &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;
            &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;

            &lt;div class=&quot;card-body&quot;&gt;
              &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;
              &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;
                &lt;div class=&quot;btn-group&quot;&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;
                &lt;/div&gt;
                &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div class=&quot;col-md-4&quot;&gt;
          &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;
            &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;

            &lt;div class=&quot;card-body&quot;&gt;
              &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;
              &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;
                &lt;div class=&quot;btn-group&quot;&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;
                &lt;/div&gt;
                &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;col-md-4&quot;&gt;
          &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;
            &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;

            &lt;div class=&quot;card-body&quot;&gt;
              &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;
              &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;
                &lt;div class=&quot;btn-group&quot;&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;
                &lt;/div&gt;
                &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;col-md-4&quot;&gt;
          &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;
            &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;

            &lt;div class=&quot;card-body&quot;&gt;
              &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;
              &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;
                &lt;div class=&quot;btn-group&quot;&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;
                &lt;/div&gt;
                &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;

&lt;/main&gt;
&lt;footer class=&quot;text-muted&quot;&gt;
  &lt;div class=&quot;container&quot;&gt;
    &lt;p class=&quot;float-right&quot;&gt;
      &lt;a href=&quot;#&quot;&gt;Back to top&lt;/a&gt;
    &lt;/p&gt;
    &lt;p&gt;Album example is &amp;copy; Bootstrap, but please download and customize it for yourself!&lt;/p&gt;
    &lt;p&gt;New to Bootstrap? &lt;a href=&quot;/&quot;&gt;Visit the homepage&lt;/a&gt; or read our &lt;a href=&quot;/docs/getting-started/introduction/&quot;&gt;getting started guide&lt;/a&gt;.&lt;/p&gt;
  &lt;/div&gt;
&lt;/footer&gt;
</code></pre>
  </div>
</template>

<script>


export default {
  name: 'App',

}
</script>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 在增加一个album.css</span><br><span class="line"></span><br><span class="line">- ```css</span><br><span class="line">  .jumbotron &#123;</span><br><span class="line">      padding-top: 3rem;</span><br><span class="line">      padding-bottom: 3rem;</span><br><span class="line">      margin-bottom: 0;</span><br><span class="line">      background-color: #fff;</span><br><span class="line">  &#125;</span><br><span class="line">  @media (min-width: 768px) &#123;</span><br><span class="line">      .jumbotron &#123;</span><br><span class="line">          padding-top: 6rem;</span><br><span class="line">          padding-bottom: 6rem;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  .jumbotron p:last-child &#123;</span><br><span class="line">      margin-bottom: 0;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  .jumbotron h1 &#123;</span><br><span class="line">      font-weight: 300;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  .jumbotron .container &#123;</span><br><span class="line">      max-width: 40rem;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  footer &#123;</span><br><span class="line">      padding-top: 3rem;</span><br><span class="line">      padding-bottom: 3rem;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  footer p &#123;</span><br><span class="line">      margin-bottom: .25rem;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>顶部组件和底部组件提取</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.网站开发，将顶部提取成the-header和the-footer组件</span><br></pre></td></tr></table></figure>

<ul>
<li><p>小提示：在父组件中打入子组件的标签名，会自动引入子组件。</p>
</li>
<li><p>在组件中先增加一个the-header，就是将header复制过来</p>
</li>
<li><pre><code class="vue">&lt;template&gt;
  &lt;header&gt;
    &lt;div class=&quot;collapse bg-dark&quot; id=&quot;navbarHeader&quot;&gt;
      &lt;div class=&quot;container&quot;&gt;
        &lt;div class=&quot;row&quot;&gt;
          &lt;div class=&quot;col-sm-8 col-md-7 py-4&quot;&gt;
            &lt;h4 class=&quot;text-white&quot;&gt;About1&lt;/h4&gt;
            &lt;p class=&quot;text-muted&quot;&gt;Add some information about the album below, the author, or any other background context. Make it a few sentences long so folks can pick up some informative tidbits. Then, link them off to some social networking sites or contact information.&lt;/p&gt;
          &lt;/div&gt;
          &lt;div class=&quot;col-sm-4 offset-md-1 py-4&quot;&gt;
            &lt;h4 class=&quot;text-white&quot;&gt;Contact&lt;/h4&gt;
            &lt;ul class=&quot;list-unstyled&quot;&gt;
              &lt;li&gt;&lt;a href=&quot;#&quot; class=&quot;text-white&quot;&gt;Follow on Twitter&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=&quot;#&quot; class=&quot;text-white&quot;&gt;Like on Facebook&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=&quot;#&quot; class=&quot;text-white&quot;&gt;Email me&lt;/a&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;navbar navbar-dark bg-dark shadow-sm&quot;&gt;
      &lt;div class=&quot;container d-flex justify-content-between&quot;&gt;
        &lt;a href=&quot;#&quot; class=&quot;navbar-brand d-flex align-items-center&quot;&gt;
          &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;20&quot; height=&quot;20&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot; stroke-width=&quot;2&quot; aria-hidden=&quot;true&quot; class=&quot;mr-2&quot; viewBox=&quot;0 0 24 24&quot; focusable=&quot;false&quot;&gt;&lt;path d=&quot;M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z&quot;/&gt;&lt;circle cx=&quot;12&quot; cy=&quot;13&quot; r=&quot;4&quot;/&gt;&lt;/svg&gt;
          &lt;strong&gt;Album&lt;/strong&gt;
        &lt;/a&gt;
        &lt;button class=&quot;navbar-toggler&quot; type=&quot;button&quot; data-toggle=&quot;collapse&quot; data-target=&quot;#navbarHeader&quot; aria-controls=&quot;navbarHeader&quot; aria-expanded=&quot;false&quot; aria-label=&quot;Toggle navigation&quot;&gt;
          &lt;span class=&quot;navbar-toggler-icon&quot;&gt;&lt;/span&gt;
        &lt;/button&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/header&gt;

&lt;/template&gt;
&lt;script&gt;
  export default &#123;
    name:&#39;theHeader&#39;,
  &#125;
&lt;/script&gt;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 在组件中先增加一个the-footer，就是将footer复制过来</span><br><span class="line"></span><br><span class="line">- ```vue</span><br><span class="line">  &lt;template&gt;</span><br><span class="line">    &lt;footer class=&quot;text-muted&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">        &lt;p class=&quot;float-right&quot;&gt;</span><br><span class="line">          &lt;a href=&quot;#&quot;&gt;Back to top&lt;/a&gt;</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">        &lt;p&gt;Album example is &amp;copy; Bootstrap, but please download and customize it for yourself!&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;New to Bootstrap? &lt;a href=&quot;/&quot;&gt;Visit the homepage&lt;/a&gt; or read our &lt;a href=&quot;/docs/getting-started/introduction/&quot;&gt;getting started guide&lt;/a&gt;.&lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/footer&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;theFooter&#x27;,</span><br><span class="line">  &#125;</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>最后在app.vue</p>
</li>
<li><p>&#96;&#96;&#96;vue</p>
<template>
  <div id="app">
    <the-header></the-header>
    <main role="main">

<pre><code>  &lt;section class=&quot;jumbotron text-center&quot;&gt;
    &lt;div class=&quot;container&quot;&gt;
      &lt;h1&gt;Album example&lt;/h1&gt;
      &lt;p class=&quot;lead text-muted&quot;&gt;Something short and leading about the collection below—its contents, the creator, etc. Make it short and sweet, but not too short so folks don’t simply skip over it entirely.&lt;/p&gt;
      &lt;p&gt;
        &lt;a href=&quot;#&quot; class=&quot;btn btn-primary my-2&quot;&gt;Main call to action&lt;/a&gt;
        &lt;a href=&quot;#&quot; class=&quot;btn btn-secondary my-2&quot;&gt;Secondary action&lt;/a&gt;
      &lt;/p&gt;
    &lt;/div&gt;
  &lt;/section&gt;

  &lt;div class=&quot;album py-5 bg-light&quot;&gt;
    &lt;div class=&quot;container&quot;&gt;

      &lt;div class=&quot;row&quot;&gt;
        &lt;div class=&quot;col-md-4&quot;&gt;
          &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;
            &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;

            &lt;div class=&quot;card-body&quot;&gt;
              &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;
              &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;
                &lt;div class=&quot;btn-group&quot;&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;
                &lt;/div&gt;
                &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;col-md-4&quot;&gt;
          &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;
            &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;

            &lt;div class=&quot;card-body&quot;&gt;
              &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;
              &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;
                &lt;div class=&quot;btn-group&quot;&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;
                &lt;/div&gt;
                &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;col-md-4&quot;&gt;
          &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;
            &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;

            &lt;div class=&quot;card-body&quot;&gt;
              &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;
              &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;
                &lt;div class=&quot;btn-group&quot;&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;
                &lt;/div&gt;
                &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div class=&quot;col-md-4&quot;&gt;
          &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;
            &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;

            &lt;div class=&quot;card-body&quot;&gt;
              &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;
              &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;
                &lt;div class=&quot;btn-group&quot;&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;
                &lt;/div&gt;
                &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;col-md-4&quot;&gt;
          &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;
            &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;

            &lt;div class=&quot;card-body&quot;&gt;
              &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;
              &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;
                &lt;div class=&quot;btn-group&quot;&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;
                &lt;/div&gt;
                &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;col-md-4&quot;&gt;
          &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;
            &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;

            &lt;div class=&quot;card-body&quot;&gt;
              &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;
              &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;
                &lt;div class=&quot;btn-group&quot;&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;
                &lt;/div&gt;
                &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div class=&quot;col-md-4&quot;&gt;
          &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;
            &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;

            &lt;div class=&quot;card-body&quot;&gt;
              &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;
              &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;
                &lt;div class=&quot;btn-group&quot;&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;
                &lt;/div&gt;
                &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;col-md-4&quot;&gt;
          &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;
            &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;

            &lt;div class=&quot;card-body&quot;&gt;
              &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;
              &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;
                &lt;div class=&quot;btn-group&quot;&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;
                &lt;/div&gt;
                &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;col-md-4&quot;&gt;
          &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;
            &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;

            &lt;div class=&quot;card-body&quot;&gt;
              &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;
              &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;
                &lt;div class=&quot;btn-group&quot;&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;
                  &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;
                &lt;/div&gt;
                &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;

&lt;/main&gt;
&lt;the-footer&gt;&lt;/the-footer&gt;
</code></pre>
  </div>
</template>

<script>


import TheHeader from "@/components/the-header";
import TheFooter from "@/components/the-footer";
export default {
  name: 'App',
  components: {TheFooter, TheHeader},
}
</script>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 13-3 首页开发-1 </span><br><span class="line"></span><br><span class="line">**路由配置与文案修改**</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<p>1.网站开发，增加路由配置router.js，增加网站首页index.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 首先增加一个router.js</span><br><span class="line"></span><br><span class="line">- ```js</span><br><span class="line">  import Vue from &quot;vue&quot;</span><br><span class="line">  import Router from &quot;vue-router&quot;</span><br><span class="line">  import Index from &quot;./view/index&quot;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  Vue.use(Router);</span><br><span class="line">  </span><br><span class="line">  export default new Router(&#123;</span><br><span class="line">      mode: &quot;history&quot;,</span><br><span class="line">      base: process.env.BASE_URL,</span><br><span class="line">      routes: [&#123;</span><br><span class="line">          path: &quot;*&quot;,</span><br><span class="line">          redirect: &quot;/index&quot;,</span><br><span class="line">      &#125;, &#123;</span><br><span class="line">          path: &quot;/index&quot;,</span><br><span class="line">          component: Index</span><br><span class="line">  </span><br><span class="line">      &#125;]</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>然后再mian.js中使用</p>
</li>
<li><pre><code class="js">import Vue from &#39;vue&#39;
import App from &#39;./app.vue&#39;
import router from &#39;./router&#39;//这个新增

Vue.config.productionTip = false

new Vue(&#123;
  router,//还有这个新增
  render: h =&gt; h(App),
&#125;).$mount(&#39;#app&#39;)
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 然后我们把app.vue的main部分复制到新建再src/view里的index</span><br><span class="line"></span><br><span class="line">- ```vue</span><br><span class="line">  &lt;template&gt;</span><br><span class="line">    &lt;main role=&quot;main&quot;&gt;</span><br><span class="line">  </span><br><span class="line">      &lt;section class=&quot;jumbotron text-center&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">          &lt;h1&gt;Album example&lt;/h1&gt;</span><br><span class="line">          &lt;p class=&quot;lead text-muted&quot;&gt;Something short and leading about the collection below—its contents, the creator, etc. Make it short and sweet, but not too short so folks don’t simply skip over it entirely.&lt;/p&gt;</span><br><span class="line">          &lt;p&gt;</span><br><span class="line">            &lt;a href=&quot;#&quot; class=&quot;btn btn-primary my-2&quot;&gt;Main call to action&lt;/a&gt;</span><br><span class="line">            &lt;a href=&quot;#&quot; class=&quot;btn btn-secondary my-2&quot;&gt;Secondary action&lt;/a&gt;</span><br><span class="line">          &lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/section&gt;</span><br><span class="line">  </span><br><span class="line">      &lt;div class=&quot;album py-5 bg-light&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">  </span><br><span class="line">          &lt;div class=&quot;row&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">                &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line">  </span><br><span class="line">                &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                  &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                  &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">                &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line">  </span><br><span class="line">                &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                  &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                  &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">                &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line">  </span><br><span class="line">                &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                  &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                  &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">  </span><br><span class="line">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">                &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line">  </span><br><span class="line">                &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                  &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                  &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">                &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line">  </span><br><span class="line">                &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                  &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                  &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">                &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line">  </span><br><span class="line">                &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                  &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                  &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">  </span><br><span class="line">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">                &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line">  </span><br><span class="line">                &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                  &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                  &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">                &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line">  </span><br><span class="line">                &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                  &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                  &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">                &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line">  </span><br><span class="line">                &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                  &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                  &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">  </span><br><span class="line">    &lt;/main&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">      name:&#x27;index&#x27;,</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>没有使用route-view的话，就没有路由效果，因此我们再app.vue里进行替换</p>
</li>
<li><p>&#96;&#96;&#96;vue</p>
<template>
  <div id="app">
    <the-header></the-header>
    <router-view></router-view>//替换的
    <the-footer></the-footer>
  </div>
</template>

<script>


import TheHeader from "@/components/the-header";
import TheFooter from "@/components/the-footer";
export default {
  name: 'App',
  components: {TheFooter, TheHeader},
}
</script>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<p>2.网站开发，导航条改为bootstrap导航条组件，文档:<a class="link"   target="_blank" rel="noopener" href="https://v4.bootcss.com/docs/components/navbar/" >https://v4.bootcss.com/docs/components/navbar/<i class="fas fa-external-link-alt"></i></a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 将代码复制到the-header.vue</span><br><span class="line"></span><br><span class="line">- ```vue</span><br><span class="line">  &lt;template&gt;</span><br><span class="line">    &lt;header&gt;</span><br><span class="line">      &lt;nav class=&quot;navbar navbar-expand-lg navbar-light bg-light&quot;&gt;</span><br><span class="line">        &lt;a class=&quot;navbar-brand&quot; href=&quot;#&quot;&gt;Navbar&lt;/a&gt;</span><br><span class="line">        &lt;button class=&quot;navbar-toggler&quot; type=&quot;button&quot; data-toggle=&quot;collapse&quot; data-target=&quot;#navbarSupportedContent&quot; aria-controls=&quot;navbarSupportedContent&quot; aria-expanded=&quot;false&quot; aria-label=&quot;Toggle navigation&quot;&gt;</span><br><span class="line">          &lt;span class=&quot;navbar-toggler-icon&quot;&gt;&lt;/span&gt;</span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">  </span><br><span class="line">        &lt;div class=&quot;collapse navbar-collapse&quot; id=&quot;navbarSupportedContent&quot;&gt;</span><br><span class="line">          &lt;ul class=&quot;navbar-nav mr-auto&quot;&gt;</span><br><span class="line">            &lt;li class=&quot;nav-item active&quot;&gt;</span><br><span class="line">              &lt;a class=&quot;nav-link&quot; href=&quot;#&quot;&gt;Home &lt;span class=&quot;sr-only&quot;&gt;(current)&lt;/span&gt;&lt;/a&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">            &lt;li class=&quot;nav-item&quot;&gt;</span><br><span class="line">              &lt;a class=&quot;nav-link&quot; href=&quot;#&quot;&gt;Link&lt;/a&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">            &lt;li class=&quot;nav-item dropdown&quot;&gt;</span><br><span class="line">              &lt;a class=&quot;nav-link dropdown-toggle&quot; href=&quot;#&quot; id=&quot;navbarDropdown&quot; role=&quot;button&quot; data-toggle=&quot;dropdown&quot; aria-expanded=&quot;false&quot;&gt;</span><br><span class="line">                Dropdown</span><br><span class="line">              &lt;/a&gt;</span><br><span class="line">              &lt;div class=&quot;dropdown-menu&quot; aria-labelledby=&quot;navbarDropdown&quot;&gt;</span><br><span class="line">                &lt;a class=&quot;dropdown-item&quot; href=&quot;#&quot;&gt;Action&lt;/a&gt;</span><br><span class="line">                &lt;a class=&quot;dropdown-item&quot; href=&quot;#&quot;&gt;Another action&lt;/a&gt;</span><br><span class="line">                &lt;div class=&quot;dropdown-divider&quot;&gt;&lt;/div&gt;</span><br><span class="line">                &lt;a class=&quot;dropdown-item&quot; href=&quot;#&quot;&gt;Something else here&lt;/a&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">            &lt;li class=&quot;nav-item&quot;&gt;</span><br><span class="line">              &lt;a class=&quot;nav-link disabled&quot;&gt;Disabled&lt;/a&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">          &lt;/ul&gt;</span><br><span class="line">          &lt;form class=&quot;form-inline my-2 my-lg-0&quot;&gt;</span><br><span class="line">            &lt;input class=&quot;form-control mr-sm-2&quot; type=&quot;search&quot; placeholder=&quot;Search&quot; aria-label=&quot;Search&quot;&gt;</span><br><span class="line">            &lt;button class=&quot;btn btn-outline-success my-2 my-sm-0&quot; type=&quot;submit&quot;&gt;Search&lt;/button&gt;</span><br><span class="line">          &lt;/form&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/nav&gt;</span><br><span class="line">    &lt;/header&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">      name:&#x27;theHeader&#x27;,</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">3.网站开发，导航条美化:菜单名称修改；增加container布局；样式改为dark；</span><br><span class="line">4.集成fontawesome图标</span><br></pre></td></tr></table></figure>

<ul>
<li><p>fontawesome是一个图标库，可以到官网注册后，获取自己的cdn链接</p>
</li>
<li><p>在上面的the-header基础上进行修改</p>
</li>
<li><p>&#96;&#96;&#96;vue</p>
<template>
  <header>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container">
      <a class="navbar-brand" href="#">
        <i class="fa fa-video-camera"></i>&nbsp;小方课程
      </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

<pre><code>  &lt;div class=&quot;collapse navbar-collapse&quot; id=&quot;navbarSupportedContent&quot;&gt;
    &lt;ul class=&quot;navbar-nav mr-auto&quot;&gt;
      &lt;li class=&quot;nav-item active&quot;&gt;
        &lt;a class=&quot;nav-link&quot; href=&quot;#&quot;&gt;主页 &lt;span class=&quot;sr-only&quot;&gt;(current)&lt;/span&gt;&lt;/a&gt;
      &lt;/li&gt;
      &lt;li class=&quot;nav-item active&quot;&gt;
        &lt;a class=&quot;nav-link&quot; href=&quot;#&quot;&gt;全部课程&lt;/a&gt;
      &lt;/li&gt;
      &lt;li class=&quot;nav-item dropdown active&quot;&gt;
        &lt;a class=&quot;nav-link dropdown-toggle&quot; href=&quot;#&quot; id=&quot;navbarDropdown&quot; role=&quot;button&quot; data-toggle=&quot;dropdown&quot; aria-expanded=&quot;false&quot;&gt;
          更多
        &lt;/a&gt;
        &lt;div class=&quot;dropdown-menu&quot; aria-labelledby=&quot;navbarDropdown&quot;&gt;
          &lt;a class=&quot;dropdown-item&quot; href=&quot;#&quot;&gt;关于我们&lt;/a&gt;
          &lt;a class=&quot;dropdown-item&quot; href=&quot;#&quot;&gt;渠道合作&lt;/a&gt;
          &lt;div class=&quot;dropdown-divider&quot;&gt;&lt;/div&gt;
          &lt;a class=&quot;dropdown-item&quot; href=&quot;#&quot;&gt;更多信息&lt;/a&gt;
        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
      &lt;span class=&quot;text-white&quot;&gt;欢迎：&lt;/span&gt;
      &lt;button class=&quot;btn btn-outline-light my-2 my-sm-0&quot; type=&quot;submit&quot;&gt;登录/注册&lt;/button&gt;
  &lt;/div&gt;
  &lt;/div&gt;
&lt;/nav&gt;
</code></pre>
  </header>

</template>
<script>
  export default {
    name:'theHeader',
  }
</script>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<p>5.网站开发，底部文案修改</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 就是修改the-footer</span><br><span class="line"></span><br><span class="line">- ```vue</span><br><span class="line">  &lt;template&gt;</span><br><span class="line">    &lt;footer class=&quot;text-muted&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">        &lt;p class=&quot;float-right&quot;&gt;</span><br><span class="line">          &lt;a href=&quot;#&quot;&gt;回到顶部&lt;/a&gt;</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">        &lt;p&gt;欢迎来到小方视频售卖中心，第一次项目&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;2021&amp;nbsp;leaning.com&lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/footer&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;theFooter&#x27;,</span><br><span class="line">  &#125;</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">6.网站开发，大屏文案修改</span><br></pre></td></tr></table></figure>

<ul>
<li>一样就是修改index.vue</li>
</ul>
<p><strong>最新上线与好课推荐</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.网站开发，增加【新上好课】后端接口测试地址</span><br></pre></td></tr></table></figure>

<ul>
<li><p>以后web模块的请求全会放到web包下，将admin请求和web请求分开，方便做权限控制（business中controller），新建文件CourseController</p>
</li>
<li><p>&#96;&#96;&#96;java<br>package com.course.business.controller.web;</p>
<p>import com.course.server.dto.CourseDto;<br>import com.course.server.dto.PageDto;<br>import com.course.server.dto.ResponseDto;<br>import com.course.server.service.CourseService;<br>import org.slf4j.Logger;<br>import org.slf4j.LoggerFactory;<br>import org.springframework.web.bind.annotation.GetMapping;<br>import org.springframework.web.bind.annotation.RequestMapping;<br>import org.springframework.web.bind.annotation.RestController;</p>
<p>import javax.annotation.Resource;<br>import java.util.List;</p>
<p>@RestController(“webCourseController”)<br>@RequestMapping(“&#x2F;web&#x2F;course”)<br>public class CourseController {</p>
<pre><code>private static final Logger LOG = LoggerFactory.getLogger(CourseController.class);
public static final String BUSINESS_NAME = &quot;课程&quot;;

@Resource
private CourseService courseService;

/**
 * 列表查询，查询最新的3门已发布的课程
 */
@GetMapping(&quot;/list-new&quot;)
public ResponseDto listNew() &#123;
    PageDto pageDto = new PageDto();
    pageDto.setPage(1);
    pageDto.setSize(3);
    ResponseDto responseDto = new ResponseDto();
    List&lt;CourseDto&gt; courseDtoList = courseService.listNew(pageDto);
    responseDto.setContent(courseDtoList);
    return responseDto;
&#125;
</code></pre>
<p>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 最后在CourseService添加方法</span><br><span class="line"></span><br><span class="line">- ```</span><br><span class="line">  /**</span><br><span class="line">   * 新课列表查询，只查询已发布的，按创建日期倒序</span><br><span class="line">   */</span><br><span class="line">  public List&lt;CourseDto&gt; listNew(PageDto pageDto) &#123;</span><br><span class="line">      PageHelper.startPage(pageDto.getPage(), pageDto.getSize());</span><br><span class="line">      CourseExample courseExample = new CourseExample();</span><br><span class="line">      courseExample.createCriteria().andStatusEqualTo(CourseStatusEnum.PUBLISH.getCode());</span><br><span class="line">      courseExample.setOrderByClause(&quot;created_at desc&quot;);</span><br><span class="line">      List&lt;Course&gt; courseList = courseMapper.selectByExample(courseExample);</span><br><span class="line">      return CopyUtil.copyList(courseList, CourseDto.class);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">2.网站首页开发，首页显示新上好课真实数据</span><br><span class="line">bootstrap4图片自适应：使用img-fluid</span><br><span class="line">安装axios：npm install axios --save</span><br><span class="line">3.初始user表，test/test</span><br></pre></td></tr></table></figure>

<ul>
<li><p>前后端交互，使用axios，也可以用jquery</p>
</li>
<li><p>我们首先npm install axios –save，然后修改main.js将axios 加进来</p>
</li>
<li><p>&#96;&#96;&#96;js<br>import axios from “axios”<br>Vue.prototype.$ajax &#x3D; axios;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 然后修改index.vue</span><br><span class="line"></span><br><span class="line">- ```vue</span><br><span class="line">  //新增</span><br><span class="line">  data: function () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      news: [],</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    let _this = this;</span><br><span class="line">    _this.listNew();</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    /**</span><br><span class="line">     * 查询新上好课</span><br><span class="line">     */</span><br><span class="line">    listNew() &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      _this.$ajax.get(process.env.VUE_APP_SERVER + &#x27;/business/web/course/list-new&#x27;).then((response)=&gt;&#123;</span><br><span class="line">        console.log(&quot;查询新上好课结果：&quot;, response);</span><br><span class="line">        let resp = response.data;</span><br><span class="line">        if (resp.success) &#123;</span><br><span class="line">          _this.news = resp.content;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;).catch((response)=&gt;&#123;</span><br><span class="line">        console.log(&quot;error：&quot;, response);</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">  //修改</span><br><span class="line">   &lt;div v-for=&quot;o in news&quot; v-bind:key=&quot;o&quot; class=&quot;col-md-4&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">                &lt;img class=&quot;img-fluid&quot; v-bind:src=&quot;o.image&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                  &lt;h4 class=&quot;&quot;&gt;&#123;&#123;o.name&#125;&#125;&lt;/h4&gt;</span><br><span class="line">                  &lt;p class=&quot;card-text&quot;&gt;&#123;&#123;o.summary&#125;&#125;&lt;/p&gt;</span><br><span class="line">                  &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;text-muted&quot;&gt;</span><br><span class="line">                      &lt;span class=&quot;badge badge-info&quot;&gt;&lt;i class=&quot;fa fa-yen&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&amp;nbsp;&#123;&#123;o.price&#125;&#125;&lt;/span&gt;&amp;nbsp;</span><br><span class="line">                      &lt;span class=&quot;badge badge-info&quot;&gt;&lt;i class=&quot;fa fa-yen&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&amp;nbsp;&#123;&#123;o.enroll&#125;&#125;&lt;/span&gt;&amp;nbsp;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="13-4-首页开发-2"><a href="#13-4-首页开发-2" class="headerlink" title="13-4 首页开发-2"></a>13-4 首页开发-2</h2><p><strong>最新上线与好课推荐</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.网站首页开发</span><br><span class="line">课程card美化</span><br><span class="line">增加【最新上线】和【好课推荐】，【好课推荐】和【最新上线】使用的一样数据</span><br><span class="line">响应式的页面，使用rem代替px</span><br><span class="line">2.增加vue校验配置.eslintrc.js</span><br></pre></td></tr></table></figure>

<ul>
<li><p>如果设置html标签的font-size&#x3D;16px，则1rem&#x3D;16px，0.5rer&#x3D;8px后续所有字体，边距都可以用rem作为单位</p>
</li>
<li><p>首先在public的static中新建style.css，记得在index.html中引用</p>
</li>
<li><pre><code class="css">html&#123;
    font-size: 16px;
&#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 然后把admin的.eslintrc.js复制到web</span><br><span class="line"></span><br><span class="line">- ```js</span><br><span class="line">  module.exports = &#123;</span><br><span class="line">      root: true,</span><br><span class="line">      env: &#123;</span><br><span class="line">          node: true</span><br><span class="line">      &#125;,</span><br><span class="line">      &#x27;extends&#x27;: [</span><br><span class="line">          &#x27;plugin:vue/essential&#x27;,</span><br><span class="line">          &#x27;eslint:recommended&#x27;</span><br><span class="line">      ],</span><br><span class="line">      rules: &#123;</span><br><span class="line">          &#x27;no-console&#x27;: &#x27;off&#x27;,</span><br><span class="line">          &#x27;no-debugger&#x27;: process.env.NODE_ENV === &#x27;production&#x27; ? &#x27;error&#x27; : &#x27;off&#x27;,</span><br><span class="line">          &#x27;no-undef&#x27;: &#x27;off&#x27;,</span><br><span class="line">          &#x27;vue/no-unused-vars&#x27;: &#x27;off&#x27;,</span><br><span class="line">          &#x27;vue/require-v-for-key&#x27;: &#x27;off&#x27;,</span><br><span class="line">          &#x27;no-unused-vars&#x27;: &#x27;off&#x27;,</span><br><span class="line">          &#x27;vue/no-unused-components&#x27;: &#x27;off&#x27;</span><br><span class="line">      &#125;,</span><br><span class="line">      parserOptions: &#123;</span><br><span class="line">          parser: &#x27;babel-eslint&#x27;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>然后我们把index.vue最新上线部分直接复制一下就变成了好课推荐</p>
</li>
<li><p>&#96;&#96;&#96;vue</p>
<div class ="title1">好课推荐</div>
<div class="row">
  <div v-for="o in news"  class="col-md-4">
    <div class="card mb-4 shadow-sm course">
      <img  class="img-fluid" v-bind:
                     lazyload
                     src="/images/loading.svg"
                     data-src="o.image"
                     
                >
      <div class="card-body">
        <h4 class=""></h4>
        <p class="card-text"></p>
        <div class="d-flex justify-content-between align-items-center">
          <div class="btn-group">
            <button type="button" class="btn btn-sm btn-outline-secondary">View</button>
            <button type="button" class="btn btn-sm btn-outline-secondary">Edit</button>
          </div>
          <div class="text-muted">
            <span class="badge badge-info"><i class="fa fa-yen" aria-hidden="true"></i>&nbsp;</span>&nbsp;
            <span class="badge badge-info"><i class="fa fa-yen" aria-hidden="true"></i>&nbsp;</span>&nbsp;
          </div>
        </div>
      </div>
    </div>
  </div>

</div>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 可以百度搜css3标题样式，有很多别人共享的样式，我们在index.vue加上样式</span><br><span class="line"></span><br><span class="line">- ```vue</span><br><span class="line">  &lt;style&gt;</span><br><span class="line">    .title1&#123;</span><br><span class="line">      margin-bottom: 2rem;</span><br><span class="line">      color: #fafafa;</span><br><span class="line">      letter-spacing: 0;</span><br><span class="line">      text-shadow: 0px 1px 0px #999, 0px 2px 0px #888, 0px 3px 0px #777, 0px 4px 0px #666, 0px 5px 0px #555, 0px 6px 0px #444, 0px 7px 0px #333, 0px 8px 7px #001135;</span><br><span class="line">      font-size: 2rem;</span><br><span class="line">    &#125;</span><br><span class="line">    .title2&#123;</span><br><span class="line">      margin-bottom: 2rem;</span><br><span class="line">      color: transparent;</span><br><span class="line">      -webkit-text-stroke: 1px black;</span><br><span class="line">      letter-spacing: 0.04em;</span><br><span class="line">      font-size: 2rem;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/style&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>课程信息组件提取</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.网站首页开发：增加课程card组件the-course</span><br></pre></td></tr></table></figure>

<ul>
<li><p>首先增加组件the-course</p>
</li>
<li><p>&#96;&#96;&#96;vue</p>
<template>
  <div class="card mb-4 shadow-sm course">
    <img  class="img-fluid" v-bind:
                     lazyload
                     src="/images/loading.svg"
                     data-src="course.image"
                     
                >
    <div class="card-body">
      <h4 class=""></h4>
      <p class="card-text"></p>
      <div class="d-flex justify-content-between align-items-center">
        <div class="btn-group">
          <button type="button" class="btn btn-sm btn-outline-secondary">View</button>
          <button type="button" class="btn btn-sm btn-outline-secondary">Edit</button>
        </div>
        <div class="text-muted">
          <span class="badge badge-info"><i class="fa fa-yen" aria-hidden="true"></i>&nbsp;</span>&nbsp;
          <span class="badge badge-info"><i class="fa fa-yen" aria-hidden="true"></i>&nbsp;</span>&nbsp;
        </div>
      </div>
    </div>
  </div>

</template>
<script>
export default {
  name:'the-course',
  props:{
    course:{}
  },
  data:function (){
    return {}
  },
}
</script>

<style>
.course h4 {
  font-size: 1.25rem;
  margin: 15px 0;
}

.course .text-muted .badge {
  font-size: 1rem;
}
</style>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 然后修改index.vue使用</span><br><span class="line"></span><br><span class="line">- ```vue</span><br><span class="line">  &lt;div class=&quot;row&quot;&gt;</span><br><span class="line">    &lt;div v-for=&quot;o in news&quot; class=&quot;col-md-4&quot;&gt;</span><br><span class="line">      &lt;the-course v-bind:course=&quot;o&quot;&gt;&lt;/the-course&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2.网站首页开发：课程card组件增加等级显示</span><br><span class="line">3，增加过滤器Filter.js</span><br></pre></td></tr></table></figure>

<ul>
<li><p>我们首先增加一个枚举，需要在EnumGenerator.java改下路径</p>
</li>
<li><pre><code class="java">static String path = &quot;web\\public\\static\\js\\enums.js&quot;;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 生成完enums.js后需要在index.html引用</span><br><span class="line"></span><br><span class="line">- ```html</span><br><span class="line">  &lt;script src=&quot;&lt;%= BASE_URL %&gt;static/js/enums.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>然后我们在admin中将filter.js拷过来</p>
</li>
<li><pre><code class="js">/**
 * 数组过滤器 例如：这也是两个大括号包住SECTION_CHARGE | option..KV(section.charge)
 * @param object 例如：&#123;CHARGE:&#123;key:&quot;C&quot;, value:&quot;收费&quot;&#125;,FREE:&#123;key:&quot;F&quot;, value:&quot;免费&quot;&#125;&#125;
 * @param key 例如：C
 * @returns &#123;string&#125; 例如：收费
 */
let option..KV = (object, key) =&gt;  &#123;
    if (!object || !key) &#123;
        return &quot;&quot;;
    &#125; else &#123;
        let result = &quot;&quot;;
        for(let enums in object)&#123;
            if (key === object[enums][&quot;key&quot;]) &#123;
                result = object[enums][&quot;value&quot;];
            &#125;
        &#125;
        return result;
    &#125;
&#125;;
/**
 * 时长格式化
 * @param value 例如：36000
 * @returns &#123;string&#125; 例如：10:00:00
 */
let format..Second = (value) =&gt; &#123;
    value = value || 0;
    let second = parseInt(value, 10); // 秒
    let minute = 0; // 分
    let hour = 0; // 小时
    if (second &gt;= 60) &#123;
        // 当大于60秒时，才需要做转换
        minute = Math.floor(second / 60);
        second = Math.floor(second % 60);
        if (minute &gt;= 60) &#123;
            hour = Math.floor(minute / 60);
            minute = Math.floor(minute % 60);
        &#125;
    &#125; else &#123;
        // 小于60秒时，直接显示，不需要处理
    &#125;
    let result = &quot;&quot; + PrefixInteger(second, 2) + &quot;&quot;;
    // 拼上分钟
    result = &quot;&quot; + PrefixInteger(minute, 2) + &quot;:&quot; + result;
    // 拼上小时
    result = &quot;&quot; + PrefixInteger(hour, 2) + &quot;:&quot; + result;
    return result;
&#125;;

/**
 * 格式化指定长度，前面补0
 */
function PrefixInteger(num, length) &#123;
    return (Array(length).join(&#39;0&#39;) + num).slice(-length);
&#125;
/**
 * 格式化文件大小
 * @param value
 * @returns &#123;string&#125;
 */

let formatFileSize = (value) =&gt; &#123;
    value = value || 0;
    let result;
    if (value &gt; 100 * 1024) &#123;
        result = Math.round((value / 1024 / 1024) * 100) / 100 + &quot;MB&quot;;
    &#125; else &#123;
        result = Math.round((value / 1024) * 100) / 100 + &quot;KB&quot;;
    &#125;
    return result;
&#125;;

export default &#123;
    option..KV,
    format..Second,
    formatFileSize
&#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 在main.js中定义</span><br><span class="line"></span><br><span class="line">- ```js</span><br><span class="line">  import filter from &quot;./filter/filter&quot;</span><br><span class="line">  </span><br><span class="line">  //全局过滤器</span><br><span class="line">  Object.keys(filter).forEach(key=&gt;&#123;</span><br><span class="line">    Vue.filter(key,filter[key])</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>最后在the-course</p>
</li>
<li><p>&#96;&#96;&#96;vue<br><span class="badge badge-info"><i class="fa fa-yen" aria-hidden="true"></i>&amp;nbsp;两个大括号包住course.price</span>&amp;nbsp;<br><span class="badge badge-info"><i class="fa fa-yen" aria-hidden="true"></i>&amp;nbsp;两个大括号包住course.enroll</span>&amp;nbsp;<br><span class="badge badge-info">两个大括号包住COURSE_LEVEL|option..KV(course.level)</span>&#x2F;&#x2F;新增的<br>&#x2F;&#x2F;data返回<br> data:function (){<br>return {<br>  COURSE_LEVEL:COURSE_LEVEL<br>}<br>  },</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 13-5 课程列表页面开发 </span><br><span class="line"></span><br><span class="line">**课程列表数据显示**</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<p>1.网站首页开发，增加课程列表页【全部课程】，并增加路由</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 首先在views中新加一个list.vue</span><br><span class="line"></span><br><span class="line">- ```vue</span><br><span class="line">  &lt;template&gt;</span><br><span class="line">    &lt;main role=&quot;main&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;album py-5 bg-light&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;row&quot;&gt;</span><br><span class="line">            &lt;div v-for=&quot;o in courses&quot; class=&quot;col-md-4&quot;&gt;</span><br><span class="line">              &lt;the-course v-bind:course=&quot;o&quot;&gt;&lt;/the-course&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;h3 v-show=&quot;courses.length === 0&quot;&gt;课程还未上架&lt;/h3&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">  </span><br><span class="line">    &lt;/main&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    import TheCourse from &quot;../components/the-course&quot;;</span><br><span class="line">  </span><br><span class="line">    export default &#123;</span><br><span class="line">      components: &#123;TheCourse&#125;,</span><br><span class="line">      name: &#x27;list&#x27;,</span><br><span class="line">      data: function () &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          courses: [],</span><br><span class="line">  </span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      mounted() &#123;</span><br><span class="line">        let _this = this;</span><br><span class="line">        _this.listCourse();</span><br><span class="line">  </span><br><span class="line">      &#125;,</span><br><span class="line">      methods: &#123;</span><br><span class="line">        /**</span><br><span class="line">         * 查询课程列表</span><br><span class="line">         */</span><br><span class="line">        listCourse() &#123;</span><br><span class="line">          let _this = this;</span><br><span class="line">  </span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">  &lt;style&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>然后再router.js中加一个路由</p>
</li>
<li><pre><code class="js">, &#123;
    path: &quot;/list&quot;,
    component: List
&#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 接下来在index.vue中使用</span><br><span class="line"></span><br><span class="line">- ```vue</span><br><span class="line">  &lt;p&gt;</span><br><span class="line">    &lt;router-link to=&quot;/list&quot; class=&quot;btn btn-primary my-2 p-3 font-weight-bold&quot;&gt;点击进入所有课程&lt;/router-link&gt;</span><br><span class="line">  &lt;/p&gt;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>同样在the-header中也使用</p>
</li>
<li><p>&#96;&#96;&#96;vue</p>
<li class="nav-item active">
  <router-link to="/" class="nav-link" href="#">主页 <span class="sr-only">(current)</span></router-link>
</li>
<li class="nav-item active">
  <router-link to="/list" class="nav-link" href="#">全部课程</router-link>
</li>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<p>2.网站首页开发，课程列表页调用后端接口显示真实数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- Ctrl+Alt+L格式化</span><br><span class="line"></span><br><span class="line">- 首先在CourseController中增加方法</span><br><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  /**</span><br><span class="line">   * 列表查询</span><br><span class="line">   */</span><br><span class="line">  @PostMapping(&quot;/list&quot;)</span><br><span class="line">  public ResponseDto list(@RequestBody PageDto pageDto) &#123;</span><br><span class="line">      ResponseDto responseDto = new ResponseDto();</span><br><span class="line">      courseService.list(pageDto);</span><br><span class="line">      responseDto.setContent(pageDto);</span><br><span class="line">      return responseDto;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>然后再list中完善方法</p>
</li>
<li><p>&#96;&#96;&#96;vue<br>&#x2F;**</p>
<ul>
<li>查询课程列表</li>
</ul>
<p> *&#x2F;<br>listCourse(page) {<br>  let _this &#x3D; this;<br>  _this.$ajax.post(process.env.VUE_APP_SERVER+’&#x2F;business&#x2F;web&#x2F;course&#x2F;list’,{<br>    page:page,<br>    size:3,<br>  }).then((response)&#x3D;&gt;{<br>    let resp &#x3D; response.data;<br>    if (resp.sucess){<br>      _this.courses &#x3D; resp.content.list;<br>    }<br>  }).catch((response)&#x3D;&gt;{<br>    console.log(“error”,response);<br>  })</p>
<p>},</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<p>3.课程列表页面开发，后端接口只能查询已发布的课程</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 如果列表查询接口的请求参数，只有分页相关的参数，可以使用PageDto作为传参的类。如果请求参数包含其他参数，则需要建立一个类CoursePageDto，集成PageDto，来传递更多的参数。因从我们加了CoursePageDto</span><br><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  package com.course.server.dto;</span><br><span class="line">  </span><br><span class="line">  public class CoursePageDto extends PageDto &#123;</span><br><span class="line">  </span><br><span class="line">      private String status;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">      public String getStatus() &#123;</span><br><span class="line">          return status;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      public void setStatus(String status) &#123;</span><br><span class="line">          this.status = status;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">      @Override</span><br><span class="line">      public String toString() &#123;</span><br><span class="line">          final StringBuffer sb = new StringBuffer(&quot;CoursePageDto&#123;&quot;);</span><br><span class="line">          sb.append(&quot;status=&#x27;&quot;).append(status).append(&#x27;\&#x27;&#x27;);</span><br><span class="line">          sb.append(&quot;, page=&quot;).append(page);</span><br><span class="line">          sb.append(&quot;, size=&quot;).append(size);</span><br><span class="line">          sb.append(&quot;, total=&quot;).append(total);</span><br><span class="line">          sb.append(&quot;, list=&quot;).append(list);</span><br><span class="line">          sb.append(&#x27;&#125;&#x27;);</span><br><span class="line">          return sb.toString();</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>然后我们再web的CourseController中将参数替换了</p>
</li>
<li><pre><code class="java">public ResponseDto list(@RequestBody CoursePageDto pageDto) &#123;//参数替换
    ResponseDto responseDto = new ResponseDto();
    pageDto.setStatus(CourseStatusEnum.PUBLISH.getCode());//新增
    courseService.list(pageDto);
    responseDto.setContent(pageDto);
    return responseDto;
&#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 这时CourseService中的list参数也得换，由于status查询条件不是必须的，控台接口进来就不需要这个条件，网站接口进来的有这个条件，所以增加一个status条件判断</span><br><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  public void list(CoursePageDto pageDto)&#123;//参数</span><br><span class="line">      CourseExample.Criteria criteria = courseExample.createCriteria();//都是新增</span><br><span class="line">      if(!StringUtils.isEmpty(pageDto.getStatus()))&#123;</span><br><span class="line">          criteria.andStatusEqualTo(pageDto.getStatus());</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>最后admin的coursecontroller也得将list参数进行修改</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">4.课程列表页面开发，前端分页</span><br><span class="line">5.增加分页组件</span><br></pre></td></tr></table></figure>

<ul>
<li><p>直接再admin中复制分页组件进行稍微修改</p>
</li>
<li><p>&#96;&#96;&#96;vue</p>
<template>
  <div class="pagination" role="group" aria-label="分页">
    <button type="button" class="btn btn-outline-dark"
            v-bind:disabled="page === 1"
            v-on:click="selectPage(1)">
      1
    </button>
    <button type="button" class="btn btn-outline-dark"
            v-bind:disabled="page === 1"
            v-on:click="selectPage(page - 1)">
      上一页
    </button>
    <button v-for="p in pages" v-bind:id="'page-' + p"
            type="button" class="btn btn-outline-dark"
            v-bind:class="{'btn-primary active':page == p}"
            v-on:click="selectPage(p)">
      
    </button>
    <button type="button" class="btn btn-outline-dark"
            v-bind:disabled="page === pageTotal"
            v-on:click="selectPage(page + 1)">
      下一页
    </button>
    <button type="button" class="btn btn-outline-dark"
            v-bind:disabled="page === pageTotal"
            v-on:click="selectPage(pageTotal)">
      两个大括号包住pageTotal||1
    </button>
    &nbsp;
  </div>
</template>

<script>
export default {
  name: 'pagination',
  props: {
    list: {
      type: Function,
      default: null
    },
    itemCount: Number // 显示的页码数，比如总共有100页，只显示10页，其它用省略号表示
  },
  data: function () {
    return {
      total: 0, // 总行数
      size: 10, // 每页条数
      page: 0, // 当前页码
      pageTotal: 0, // 总页数
      pages: [], // 显示的页码数组
    }
  },
  methods: {
    /**
     * 渲染分页组件
     * @param page
     * @param total
     */
    render(page, total) {
      let _this = this;
      _this.page = page;
      _this.total = total;
      _this.pageTotal = Math.ceil(total / _this.size);
      _this.pages = _this.getPageItems(_this.pageTotal, page, _this.itemCount || 5);
    },

    /**
     * 查询某一页
     * @param page
     */
    selectPage(page) {
      let _this = this;
      if (page < 1) {
        page = 1;
      }
      if (page > _this.pageTotal) {
        page = _this.pageTotal;
      }
      if (this.page !== page) {
        _this.page = page;
        if (_this.list) {
          _this.list(page);
        }
      }
    },

    /**
     * 当前要显示在页面上的页码
     * @param total
     * @param current
     * @param length
     * @returns {Array}
     */
    getPageItems(total, current, length) {
      let items = [];
      if (length >= total) {
        for (let i = 1; i <= total; i++) {
          items.push(i);
        }
      } else {
        let base = 0;
        // 前移
        if (current - 0 > Math.floor((length - 1) / 2)) {
          // 后移
          base = Math.min(total, current - 0 + Math.ceil((length - 1) / 2)) - length;
        }
        for (let i = 1; i <= length; i++) {
          items.push(base + i);
        }
      }
      return items;
    }
  }
}
</script>

<style scoped>
.pagination {
  vertical-align: middle !important;
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 10px;
}

.pagination button {
  margin-right: 5px;
}

.btn-primary.active {
  background-color: #2f7bba !important;
  border-color: #27689d !important;
  color: white !important;
  font-weight: 600;
}

/*.pagination select {*/
/*vertical-align: middle !important;*/
/*font-size: 16px;*/
/*margin-top: 0;*/
/*}*/
</style>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 然后在list进行修改</span><br><span class="line"></span><br><span class="line">- ```vue</span><br><span class="line">  //分页组件使用</span><br><span class="line">  &lt;div class=&quot;row&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;col-md-12&quot;&gt;</span><br><span class="line">      &lt;pagination ref=&quot;pagination&quot; v-bind:list=&quot;listCourse&quot;&gt;&lt;/pagination&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;br&gt;</span><br><span class="line">  //初始化</span><br><span class="line">  mounted() &#123;</span><br><span class="line">   _this.$refs.pagination.size = 1;</span><br><span class="line">  &#125;</span><br><span class="line">  //在这个方法中进行渲染</span><br><span class="line">  listCourse(page) &#123;</span><br><span class="line">          _this.$ajax.post(process.env.VUE_APP_SERVER+&#x27;/business/web/course/list&#x27;,&#123;</span><br><span class="line">            size:_this.$refs.pagination.size,//新增参数</span><br><span class="line">          &#125;).then((response)=&gt;&#123;</span><br><span class="line">            if (resp.sucess)&#123;</span><br><span class="line">              _this.$refs.pagination.render(page,resp.content.total);//增加得渲染</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="13-6-分类筛选功能开发"><a href="#13-6-分类筛选功能开发" class="headerlink" title="13-6 分类筛选功能开发"></a>13-6 分类筛选功能开发</h2><p><strong>分类筛选功能开发</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.课程列表页面开发，加载所有分类</span><br><span class="line">2.增加axios接口访问日志拦截器</span><br></pre></td></tr></table></figure>

<ul>
<li><p>先增加日志拦截器，修改main.js</p>
</li>
<li><pre><code class="js">// 解决每次ajax请求，对应的sessionId不一致的问题
axios.defaults.withCredentials = true;

/**
 * axias拦截器
 */
axios.interceptors.request.use(function (config)&#123;
  console.log(&quot;请求:&quot;,config);
  return config;
&#125;,error =&gt; &#123;&#125;);
axios.interceptors.request.use(function (response)&#123;
  console.log(&quot;返回结果:&quot;,response);
  return response;
&#125;,error =&gt; &#123;&#125;);
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- tool.js同样也拷过来</span><br><span class="line"></span><br><span class="line">- ```js</span><br><span class="line">  Tool = &#123;</span><br><span class="line">      /**</span><br><span class="line">       * 空校验 null或&quot;&quot;都返回true</span><br><span class="line">       */</span><br><span class="line">      isEmpty: function (obj) &#123;</span><br><span class="line">          if ((typeof obj == &#x27;string&#x27;)) &#123;</span><br><span class="line">              return !obj || obj.replace(/\s+/g, &quot;&quot;) == &quot;&quot;</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">              return (!obj || JSON.stringify(obj) === &quot;&#123;&#125;&quot; || obj.length === 0);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">  </span><br><span class="line">      /**</span><br><span class="line">       * 非空校验</span><br><span class="line">       */</span><br><span class="line">      isNotEmpty: function (obj) &#123;</span><br><span class="line">          return !this.isEmpty(obj);</span><br><span class="line">      &#125;,</span><br><span class="line">  </span><br><span class="line">      /**</span><br><span class="line">       * 长度校验</span><br><span class="line">       */</span><br><span class="line">      isLength: function (str, min, max) &#123;</span><br><span class="line">          return $.trim(str).length &gt;= min &amp;&amp; $.trim(str).length &lt;= max;</span><br><span class="line">      &#125;,</span><br><span class="line">  </span><br><span class="line">      /**</span><br><span class="line">       * 时间格式化，date为空时取当前时间</span><br><span class="line">       */</span><br><span class="line">      dateFormat: function (format, date) &#123;</span><br><span class="line">          let result;</span><br><span class="line">          if (!date) &#123;</span><br><span class="line">              date = new Date();</span><br><span class="line">          &#125;</span><br><span class="line">          const option = &#123;</span><br><span class="line">              &quot;y+&quot;: date.getFullYear().toString(),        // 年</span><br><span class="line">              &quot;M+&quot;: (date.getMonth() + 1).toString(),     // 月</span><br><span class="line">              &quot;d+&quot;: date.getDate().toString(),            // 日</span><br><span class="line">              &quot;h+&quot;: date.getHours().toString(),           // 时</span><br><span class="line">              &quot;m+&quot;: date.getMinutes().toString(),         // 分</span><br><span class="line">              &quot;s+&quot;: date.getSeconds().toString()          // 秒</span><br><span class="line">          &#125;;</span><br><span class="line">          for (let i in option) &#123;</span><br><span class="line">              result = new RegExp(&quot;(&quot; + i + &quot;)&quot;).exec(format);</span><br><span class="line">              if (result) &#123;</span><br><span class="line">                  format = format.replace(result[1], (result[1].length == 1) ? (option[i]) : (option[i].padStart(result[1].length, &quot;0&quot;)))</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          return format;</span><br><span class="line">      &#125;,</span><br><span class="line">  </span><br><span class="line">      /**</span><br><span class="line">       * 移除对象数组中的对象</span><br><span class="line">       * @param array</span><br><span class="line">       * @param obj</span><br><span class="line">       * @returns &#123;number&#125;</span><br><span class="line">       */</span><br><span class="line">      removeObj: function (array, obj) &#123;</span><br><span class="line">          let index = -1;</span><br><span class="line">          for (let i = 0; i &lt; array.length; i++) &#123;</span><br><span class="line">              if (array[i] === obj) &#123;</span><br><span class="line">                  array.splice(i, 1);</span><br><span class="line">                  index = i;</span><br><span class="line">                  break;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          return index;</span><br><span class="line">      &#125;,</span><br><span class="line">      /**</span><br><span class="line">       * 10进制转62进制</span><br><span class="line">       * @param number</span><br><span class="line">       * @returns &#123;string&#125;</span><br><span class="line">       * @private</span><br><span class="line">       */</span><br><span class="line">      _10to62: function (number) &#123;</span><br><span class="line">          let chars = &#x27;0123456789abcdefghigklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ&#x27;;</span><br><span class="line">          let radix = chars.length;</span><br><span class="line">          let arr = [];</span><br><span class="line">          do &#123;</span><br><span class="line">              let mod = number % radix;</span><br><span class="line">              number = (number - mod) / radix;</span><br><span class="line">              arr.unshift(chars[mod]);</span><br><span class="line">          &#125; while (number);</span><br><span class="line">          return arr.join(&#x27;&#x27;);</span><br><span class="line">      &#125;,</span><br><span class="line">      /**</span><br><span class="line">       * 保存登录信息</span><br><span class="line">       * @param loginUser</span><br><span class="line">       */</span><br><span class="line">      setLoginUser:function (loginUser)&#123;</span><br><span class="line">          SessionStorage.set(SESSION_KEY_LOGIN_USER,loginUser);</span><br><span class="line">      &#125;,</span><br><span class="line">      /**</span><br><span class="line">       * 获取登录信息</span><br><span class="line">       * @param loginUser</span><br><span class="line">       * @returns &#123;any|&#123;&#125;&#125;</span><br><span class="line">       */</span><br><span class="line">      getLoginUser:function ()&#123;</span><br><span class="line">          return SessionStorage.get(SESSION_KEY_LOGIN_USER) ||&#123;&#125;;</span><br><span class="line">      &#125;,</span><br><span class="line">      /**</span><br><span class="line">       * 随机生成[len]长度的[radix]进制数</span><br><span class="line">       * @param len</span><br><span class="line">       * @param radix 默认62</span><br><span class="line">       * @returns &#123;string&#125;</span><br><span class="line">       */</span><br><span class="line">      uuid: function (len, radix) &#123;</span><br><span class="line">          let chars = &#x27;0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz&#x27;.split(&#x27;&#x27;);</span><br><span class="line">          let uuid = [];</span><br><span class="line">          radix = radix || chars.length;</span><br><span class="line">  </span><br><span class="line">          for (let i = 0; i &lt; len; i++) &#123;</span><br><span class="line">              uuid[i] = chars[0 | Math.random() * radix];</span><br><span class="line">          &#125;</span><br><span class="line">  </span><br><span class="line">          return uuid.join(&#x27;&#x27;);</span><br><span class="line">      &#125;,</span><br><span class="line">      /**</span><br><span class="line">       * 查找是否有权限</span><br><span class="line">       * @param id 资源id</span><br><span class="line">       */</span><br><span class="line">      hasResource: function (id) &#123;</span><br><span class="line">          let _this = this;</span><br><span class="line">          let resources = _this.getLoginUser().resources;</span><br><span class="line">          if (_this.isEmpty(resources)) &#123;</span><br><span class="line">              return false;</span><br><span class="line">          &#125;</span><br><span class="line">          for (let i = 0; i &lt; resources.length; i++) &#123;</span><br><span class="line">              if (id === resources[i].id) &#123;</span><br><span class="line">                  return true;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          return false;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>修改list.vue</p>
</li>
<li><p>&#96;&#96;&#96;vue<br>&#x2F;&#x2F;data中增加两个层级<br>level1:[],<br>level2:[],<br>&#x2F;&#x2F;mounted初始化<br>  _this.allCategory();<br>&#x2F;&#x2F;增加方法</p>
<pre><code>  /**
   * 所有分类查询
   */
  allCategory() &#123;
    let _this = this;
    _this.$ajax.post(process.env.VUE_APP_SERVER + &#39;/business/web/category/all&#39;).then((response)=&gt;&#123;
      let resp = response.data;
      let categorys = resp.content;

      // 将所有记录格式化成树形结构
      _this.level1 = [];
      for (let i = 0; i &lt; categorys.length; i++) &#123;
        let c = categorys[i];
        if (c.parent === &#39;00000000&#39;) &#123;
          _this.level1.push(c);
          for(let j =0;j&lt;categorys.level;j++)&#123;
            let child = categorys[j];
            if (child.parent ===c.id)&#123;
              if(Tool.isEmpty(c.children))&#123;
                c.children = [];
              &#125;
              c.children.push(child);
            &#125;
          &#125;
        &#125; else &#123;
          _this.level2.push(c);
        &#125;
      &#125;
    &#125;)
  &#125;,
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 当然这时我们要在business/web增加一个CategoryController</span><br><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  package com.course.business.controller.web;</span><br><span class="line">  </span><br><span class="line">  import com.course.server.dto.CategoryDto;</span><br><span class="line">  import com.course.server.dto.ResponseDto;</span><br><span class="line">  import com.course.server.service.CategoryService;</span><br><span class="line">  import org.slf4j.Logger;</span><br><span class="line">  import org.slf4j.LoggerFactory;</span><br><span class="line">  import org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line">  import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">  import org.springframework.web.bind.annotation.RestController;</span><br><span class="line">  </span><br><span class="line">  import javax.annotation.Resource;</span><br><span class="line">  import java.util.List;</span><br><span class="line">  </span><br><span class="line">  @RestController(&quot;webCategoryController&quot;)</span><br><span class="line">  @RequestMapping(&quot;/web/category&quot;)</span><br><span class="line">  public class CategoryController &#123;</span><br><span class="line">  </span><br><span class="line">      private static final Logger LOG = LoggerFactory.getLogger(CategoryController.class);</span><br><span class="line">      public static final String BUSINESS_NAME = &quot;分类&quot;;</span><br><span class="line">  </span><br><span class="line">      @Resource</span><br><span class="line">      private CategoryService categoryService;</span><br><span class="line">  </span><br><span class="line">      /**</span><br><span class="line">       * 列表查询</span><br><span class="line">       */</span><br><span class="line">      @PostMapping(&quot;/all&quot;)</span><br><span class="line">      public ResponseDto all() &#123;</span><br><span class="line">          ResponseDto responseDto = new ResponseDto();</span><br><span class="line">          List&lt;CategoryDto&gt; categoryDtoList = categoryService.all();</span><br><span class="line">          responseDto.setContent(categoryDtoList);</span><br><span class="line">          return responseDto;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2.课程列表页面开发，两级分类访问慕课网显示</span><br></pre></td></tr></table></figure>

<ul>
<li><p>修改list.vue</p>
</li>
<li><p>&#96;&#96;&#96;vue</p>
<div class="header-nav">
  <div class="clearfix">
    <div class="container">
      <div class="row">
        <div class="col-12">
          <a class="link"  v-on:click="onClickLevel1('00000000')" id="category-00000000"  href="javascript:;"  class="cur">全部<i class="fas fa-external-link-alt"></i></a>
          <a class="link"  v-for="o in level1" v-on:click="onClickLevel1(o.id)" v-bind:id="'category-' + o.id"  href="javascript:;" ><i class="fas fa-external-link-alt"></i></a>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="skill clearfix">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <a class="link"  v-on:click="onClickLevel2('11111111')" id="category-11111111"  href="javascript:;"  class="on">不限<i class="fas fa-external-link-alt"></i></a>
        <a class="link"  v-for="o in level2" v-on:click="onClickLevel2(o.id)" v-bind:id="'category-' + o.id"  href="javascript:;" ><i class="fas fa-external-link-alt"></i></a>

<pre><code>    &lt;div style=&quot;clear:both&quot;&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
  </div>
</div>
//增加两个方法
  /**
       * 点击一级分类时
       * @param level1Id
       */
      onClickLevel1(level1Id) {
        let _this = this;
      },
      /**
       * 点击二级分类时
       * @param level1Id
       */
      onClickLevel2(level2Id) {
        let _this = this;
      },
//增加两个样式
<style>
  /* 头部 一级分类 */
.header-nav {
  height: auto;
  background: #fff;
  box-shadow: 0 8px 16px 0 rgba(28,31,33,.1);
  padding: 16px 0;
  box-sizing: border-box;
  position: relative;
  z-index: 1;
  /*background-color: #d6e9c6;*/
}
.header-nav>div {
  width: 100%;
  padding-left: 12px;
  box-sizing: border-box;
  margin-left: auto;
  margin-right: auto;
  /*background-color: #B4D5AC;*/
}
.header-nav a {
  float: left;
  font-size: 16px;
  color: #07111b;
  line-height: 50px;
  height: 45px;
  position: relative;
  margin-right: 46px;
  font-weight: 700;
}
.header-nav a:hover {
  color: #c80;
}
.header-nav a.cur {
  color: #c80;
}
.header-nav a.cur:before {
  display: block;
}
.header-nav a:before {
  display: none;
  content: ' ';
  position: absolute;
  bottom: 0;
  background: #c80;
  width: 16px;
  height: 3px;
  left: 50%;
  margin-left: -8px;
}
/* 二级分类 */
.skill {
  width: 100%;
  padding: 24px 0 0;
  position: relative;
  margin: 0 auto;
}
.skill a.on {
  color: #c80;
  background: rgba(204,136,0,.1);
}
.skill a {
  float: left;
  margin-right: 20px;
  padding: 0 12px;
  font-size: 14px;
  color: #4d555d;
  line-height: 32px;
  border-radius: 6px;
  margin-bottom: 12px;
}
.skill a:hover {
  background: #d9dde1;
}

<p></style></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<p>3.课程列表页面开发，点击一级分类时显示激活状态，并显示对应的二级分类，如果点击的是全部，则显示所有的二级分类</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 只修改list.vue</span><br><span class="line"></span><br><span class="line">- ```vue</span><br><span class="line">  //data中增加总分类</span><br><span class="line">  categorys:[],</span><br><span class="line">  //然后再allCategory中加上</span><br><span class="line">  _this.categorys = categorys;</span><br><span class="line">   /**</span><br><span class="line">         * 点击一级分类时</span><br><span class="line">         * @param level1Id</span><br><span class="line">         */</span><br><span class="line">        onClickLevel1(level1Id) &#123;</span><br><span class="line">          let _this = this;</span><br><span class="line">          // 点击一级分类时，显示激活状态</span><br><span class="line">          $(&quot;#category-&quot; + level1Id).siblings(&quot;a&quot;).removeClass(&quot;cur&quot;);</span><br><span class="line">          $(&quot;#category-&quot; + level1Id).addClass(&quot;cur&quot;);</span><br><span class="line">  </span><br><span class="line">          // 点击一级分类时，二级分类【无限】按钮要设置激活状态</span><br><span class="line">          $(&quot;#category-11111111&quot;).siblings(&quot;a&quot;).removeClass(&quot;on&quot;);</span><br><span class="line">          $(&quot;#category-11111111&quot;).addClass(&quot;on&quot;);</span><br><span class="line">  </span><br><span class="line">          // 注意：要先把level2中所有的值清空，再往里放</span><br><span class="line">          _this.level2 = [];</span><br><span class="line">          let categorys = _this.categorys;</span><br><span class="line">          // 如果点击的是【全部】，则显示所有的二级分类</span><br><span class="line">          if (level1Id === &#x27;00000000&#x27;) &#123;</span><br><span class="line">            for (let i = 0; i &lt; categorys.length; i++) &#123;</span><br><span class="line">              let c = categorys[i];</span><br><span class="line">              if (c.parent !== &quot;00000000&quot;) &#123;</span><br><span class="line">                _this.level2.push(c);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          // 如果点击的是某个一级分类，则显示该一级分类下的二级分类</span><br><span class="line">          if (level1Id !== &#x27;00000000&#x27;) &#123;</span><br><span class="line">            for (let i = 0; i &lt; categorys.length; i++) &#123;</span><br><span class="line">              let c = categorys[i];</span><br><span class="line">              if (c.parent === level1Id) &#123;</span><br><span class="line">                _this.level2.push(c);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4.课程列表页面开发，点击二级分类时显示激活状态</span><br></pre></td></tr></table></figure>

<ul>
<li><p>也是修改list.vue</p>
</li>
<li><p>&#96;&#96;&#96;vue<br>&#x2F;**</p>
<ul>
<li>点击二级分类时</li>
<li>@param level1Id</li>
</ul>
<p> *&#x2F;<br>onClickLevel2(level2Id) {<br>  let _this &#x3D; this;<br>  $(“#category-“ + level2Id).siblings(“a”).removeClass(“on”);<br>  $(“#category-“ + level2Id).addClass(“on”);<br>},</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<p>5.课程列表页面开发，根据点击的分类进行课程筛选，动态sql不仅可以进行动态列查询，也可以进行动态表关联</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 一级分类的全部激活时，level1id清空，二级分类的不限激活时，level2id清空，这样categoryid这个参数就是空的，即查询全部课程</span><br><span class="line"></span><br><span class="line">- 前端我们修改list.vue</span><br><span class="line"></span><br><span class="line">- ```vue</span><br><span class="line">  //data中增加两个要传入后端的参数</span><br><span class="line">  level1Id: &quot;&quot;,</span><br><span class="line">  level2Id: &quot;&quot;,</span><br><span class="line">  //listCourse的传入后端的参数中加入</span><br><span class="line">  categoryId: _this.level2Id || _this.level1Id || &quot;&quot;, // 优先取level2Id</span><br><span class="line">  //再onClickLevel1中添加</span><br><span class="line">  // 点击一级分类时，设置变量，用于课程筛选</span><br><span class="line">  // 二级分类id为空，</span><br><span class="line">  // 如果点击的是【全部】，则一级分类id为空</span><br><span class="line">  _this.level2Id = null;</span><br><span class="line">  _this.level1Id = level1Id;</span><br><span class="line">  if (level1Id === &quot;00000000&quot;) &#123;</span><br><span class="line">  	_this.level1Id = null;</span><br><span class="line">  &#125;</span><br><span class="line">   // 最后重新加载课程列表</span><br><span class="line">  _this.listCourse(1);</span><br><span class="line">  //在onClickLevel2中</span><br><span class="line">  // 点击二级分类时，设置变量，用于课程筛选</span><br><span class="line">  // 如果点击的是【无限】，则二级分类id为空</span><br><span class="line">  if (level2Id === &quot;11111111&quot;) &#123;</span><br><span class="line">  	_this.level2Id = null;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">  	_this.level2Id = level2Id;</span><br><span class="line">  &#125;</span><br><span class="line">  // 重新加载课程列表</span><br><span class="line">  _this.listCourse(1);</span><br></pre></td></tr></table></figure>

<ul>
<li><p>下面开始修改后端首先MyCourseMapper.java</p>
</li>
<li><pre><code class="java">List&lt;CourseDto&gt; list(@Param(&quot;pageDto&quot;) CoursePageDto pageDto);
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 然后再CoursePageDto中新增字段</span><br><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  private String categoryId;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>课程表+课程分类关联表两张表关联。多表关联查询，需要写自定义sql，这时修改MyCourseMapper.xml</p>
</li>
<li><p>&#96;&#96;&#96;xml</p>
<!-- web端【全部课程】页面，查询课程列表 -->
<select id="list" resultType="com.course.server.dto.CourseDto">
    select c.id, c.name, c.summary, time, price, image, level,
    charge, status, enroll, sort, created_at as createdAt,
    updated_at as updatedAt, teacher_id as teacherId
    from `course` c
    <if test="pageDto.categoryId != null and pageDto.categoryId != ''">
        , course_category cc
    </if>
    where 1 = 1
    <if test="pageDto.categoryId != null and pageDto.categoryId != ''">
        and c.id = cc.course_id
        and cc.category_id = #{pageDto.categoryId}
    </if>
    <if test="pageDto.status != null and pageDto.status != ''">
        and c.status = #{pageDto.status}
    </if>
    order by c.sort asc
</select>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 最后我们修改CourseService，将其全部替换</span><br><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  /**</span><br><span class="line">   * 列表查询：关联课程分类表</span><br><span class="line">   * @param pageDto</span><br><span class="line">   */</span><br><span class="line">  public void list(CoursePageDto pageDto) &#123;</span><br><span class="line">      PageHelper.startPage(pageDto.getPage(), pageDto.getSize());</span><br><span class="line">      List&lt;CourseDto&gt; courseDtoList = myCourseMapper.list(pageDto);</span><br><span class="line">      PageInfo&lt;CourseDto&gt; pageInfo = new PageInfo&lt;&gt;(courseDtoList);</span><br><span class="line">      pageDto.setTotal(pageInfo.getTotal());</span><br><span class="line">      pageDto.setList(courseDtoList);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="13-7-课程详情页面开发"><a href="#13-7-课程详情页面开发" class="headerlink" title="13-7 课程详情页面开发"></a>13-7 课程详情页面开发</h2><p><strong>新增详情页面并配置路由</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.课程列表页面开发，新增详情页面并配置路由</span><br><span class="line">2.课程报名数显示真实数据</span><br></pre></td></tr></table></figure>

<ul>
<li><p>首先再views中增加detail.vue</p>
</li>
<li><pre><code class="vue">&lt;template&gt;
  &lt;main role=&quot;main&quot;&gt;
    &lt;div class=&quot;album py-5 bg-light&quot;&gt;
      &lt;div class=&quot;container&quot;&gt;
      &lt;h3&gt;课程详情&lt;/h3&gt;
      &lt;/div&gt;
    &lt;/div&gt;


  &lt;/main&gt;
&lt;/template&gt;

&lt;script&gt;

export default &#123;
  name: &#39;detail&#39;,

  data: function () &#123;
    return &#123;

    &#125;
  &#125;,
  mounted() &#123;

  &#125;,
  methods: &#123;

  &#125;
&#125;
&lt;/script&gt;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 然后增加路由</span><br><span class="line"></span><br><span class="line">- ```js</span><br><span class="line">  , &#123;</span><br><span class="line">      path: &quot;/detail&quot;,</span><br><span class="line">      component: Detail</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>最后在the-course中增加</p>
</li>
<li><p>&#96;&#96;&#96;vue<br><router-link v-bind:to="'/detail?id=' + course.id" class="btn btn-outline-secondary">课程详情</router-link></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 还有那个报名人数之间就加了</span><br><span class="line"></span><br><span class="line">- ```vue</span><br><span class="line">  &lt;span class=&quot;badge badge-info&quot;&gt;&lt;i class=&quot;fa fa-yen&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&amp;nbsp;&#123;&#123;course.enroll&#125;&#125;&lt;/span&gt;&amp;nbsp;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>增加后端课程详情接口</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.课程列表页面开发，增加后端课程详情接口,只能查询已发布的课程，包括内容、讲师、大章、小节信息</span><br></pre></td></tr></table></figure>

<ul>
<li><p>首先修改CourseDto增加字段</p>
</li>
<li><pre><code class="java">private List&lt;ChapterDto&gt; chapters;

private List&lt;SectionDto&gt; sections;

private String content;

private TeacherDto teacher;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 然后增加CourseController</span><br><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  @GetMapping(&quot;/find/&#123;id&#125;&quot;)</span><br><span class="line">  public ResponseDto findCourse(@PathVariable String id) &#123;</span><br><span class="line">      LOG.info(&quot;查找课程开始：&#123;&#125;&quot;, id);</span><br><span class="line">      ResponseDto responseDto = new ResponseDto();</span><br><span class="line">      CourseDto courseDto = courseService.findCourse(id);</span><br><span class="line">      responseDto.setContent(courseDto);</span><br><span class="line">      LOG.info(&quot;查找课程结束：&#123;&#125;&quot;, responseDto);</span><br><span class="line">      return responseDto;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>接下来修改CourseService</p>
</li>
<li><p>&#96;&#96;&#96;java<br>@Resource<br>private TeacherService teacherService;</p>
<p>@Resource<br>private ChapterService chapterService;</p>
<p>@Resource<br>private SectionService sectionService;<br> &#x2F;**<br> * 查找某一课程，供web模块用，只能查已发布的<br> * @param id<br> * @return<br> *&#x2F;<br>public CourseDto findCourse(String id) {<br>    Course course &#x3D; courseMapper.selectByPrimaryKey(id);<br>    if (course &#x3D;&#x3D; null || !CourseStatusEnum.PUBLISH.getCode().equals(course.getStatus())) {<br>        return null;<br>    }<br>    CourseDto courseDto &#x3D; CopyUtil.copy(course, CourseDto.class);<br><br>    &#x2F;&#x2F; 查询内容<br>    CourseContent content &#x3D; courseContentMapper.selectByPrimaryKey(id);<br>    if (content !&#x3D; null) {<br>        courseDto.setContent(content.getContent());<br>    }<br><br>    &#x2F;&#x2F; 查找讲师信息<br>    TeacherDto teacherDto &#x3D; teacherService.findById(courseDto.getTeacherId());<br>    courseDto.setTeacher(teacherDto);<br><br>    &#x2F;&#x2F; 查找章信息<br>    List<ChapterDto> chapterDtoList &#x3D; chapterService.listByCourse(id);<br>    courseDto.setChapters(chapterDtoList);<br><br>    &#x2F;&#x2F; 查找节信息<br>    List<SectionDto> sectionDtoList &#x3D; sectionService.listByCourse(id);<br>    courseDto.setSections(sectionDtoList);<br><br>    return courseDto;<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 接下来针对findCourse中的三个查找信息，修改teacherService，chapterService，sectionService</span><br><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  /**</span><br><span class="line">   * 查找</span><br><span class="line">   * @param id</span><br><span class="line">   */</span><br><span class="line">  public TeacherDto findById(String id) &#123;</span><br><span class="line">      Teacher teacher = teacherMapper.selectByPrimaryKey(id);</span><br><span class="line">      return CopyUtil.copy(teacher, TeacherDto.class);</span><br><span class="line">  &#125;</span><br><span class="line">    /**</span><br><span class="line">       * 查询某一课程下的所有章</span><br><span class="line">       */</span><br><span class="line">      public List&lt;ChapterDto&gt; listByCourse(String courseId) &#123;</span><br><span class="line">          ChapterExample example = new ChapterExample();</span><br><span class="line">          example.createCriteria().andCourseIdEqualTo(courseId);</span><br><span class="line">          List&lt;Chapter&gt; chapterList = chapterMapper.selectByExample(example);</span><br><span class="line">          List&lt;ChapterDto&gt; chapterDtoList = CopyUtil.copyList(chapterList, ChapterDto.class);</span><br><span class="line">          return chapterDtoList;</span><br><span class="line">      &#125;</span><br><span class="line">    /**</span><br><span class="line">       * 查询某一课程下的所有节</span><br><span class="line">       */</span><br><span class="line">      public List&lt;SectionDto&gt; listByCourse(String courseId) &#123;</span><br><span class="line">          SectionExample example = new SectionExample();</span><br><span class="line">          example.createCriteria().andCourseIdEqualTo(courseId);</span><br><span class="line">          List&lt;Section&gt; sectionList = sectionMapper.selectByExample(example);</span><br><span class="line">          List&lt;SectionDto&gt; sectionDtoList = CopyUtil.copyList(sectionList, SectionDto.class);</span><br><span class="line">          return sectionDtoList;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>前端界面显示课程信息</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.课程列表页面开发，增加课程信息显示，可以使用@media(max-width:700px)来精细控制不同分辨率的显示样式</span><br></pre></td></tr></table></figure>

<ul>
<li><p>如果地址是xxx？id&#x3D;a。那在vue代码里要获取id的值的话，可以使用this.$router.query.id</p>
</li>
<li><p>修改detail.vue</p>
</li>
<li><p>&#96;&#96;&#96;vue</p>
<template>
  <main role="main">
    <div class="album py-5 bg-light">
      <div class="container">
        <div class="row course-head">
          <div class="col-sm-6" id="cover-video-div">
            <img  class="img-fluid" v-bind:
                     lazyload
                     src="/images/loading.svg"
                     data-src="course.image"
                     
                >
          </div>
          <div class="col-sm-6">
            <h1></h1>
            <p class="course-head-item">
              <span><i class="fa fa-clock-o"></i> 两个大括号包住(course.time) | format..Second</span>
              <span>format..SecondCOURSE_LEVEL | option..KV(course.level)</span>
              <span><i class="fa fa-user"></i> </span>
            </p>
            <p class="course-head-desc"></p>
            <p class="course-head-price">
              <span class="price-now text-danger"><i class="fa fa-yen"></i>&nbsp;&nbsp;&nbsp;</span>
            </p>
            <p class="course-head-button-links">
              <a class="link"   class="btn btn-lg btn-primary btn-shadow"  href="javascript:;" >立即报名<i class="fas fa-external-link-alt"></i></a>
            </p>
          </div>
        </div>

<pre><code>  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
  </main>
</template>

<script>

export default {
  name: 'detail',

  data: function () {
    return {
      id: "",
      course: {},
      teacher: {},
      chapters: [],
      sections: [],
      COURSE_LEVEL: COURSE_LEVEL,
    }
  },
  mounted() {
    let _this = this;
    _this.id = _this.$route.query.id;
    _this.findCourse();
  },
  methods: {
    findCourse() {
      let _this = this;
      _this.$ajax.get(process.env.VUE_APP_SERVER + '/business/web/course/find/' + _this.id).then((response) => {
        let resp = response.data;
        _this.course = resp.content;
        _this.teacher = _this.course.teacher || {};
        _this.chapters = _this.course.chapters || [];
        _this.sections = _this.course.sections || [];
      })
    },
      }
}
</script>
<style>
/* 课程信息 */
.course-head {
}
.course-head h1 {
  font-size: 2rem;
  margin-bottom: 1.5rem;
}
.course-head-item span {
  margin-right: 1rem;
}
.course-head-desc {
  font-size: 1rem;
  color: #555
}
.course-head a {
}
.course-head-price {
  font-size: 2rem;
}
@media (max-width: 700px) {
  .course-head h1 {
    font-size: 1.5rem;
  }
}
</style>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<p>2.课程列表页面开发，增加课程内容显示</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 在detail.vue中添加</span><br><span class="line"></span><br><span class="line">- ```vue</span><br><span class="line">  &lt;div class=&quot;row&quot;&gt;</span><br><span class="line">  </span><br><span class="line">    &lt;!-- 课程内容 &amp; 大章小节 --&gt;</span><br><span class="line">    &lt;div class=&quot;col-md-9&quot;&gt;</span><br><span class="line">      &lt;!-- Nav tabs --&gt;</span><br><span class="line">      &lt;ul class=&quot;nav nav-tabs&quot;&gt;</span><br><span class="line">        &lt;li class=&quot;nav-item&quot;&gt;</span><br><span class="line">          &lt;a class=&quot;nav-link active&quot; href=&quot;#info&quot; data-toggle=&quot;tab&quot;&gt;课程介绍&lt;/a&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">        &lt;li class=&quot;nav-item&quot;&gt;</span><br><span class="line">          &lt;a class=&quot;nav-link&quot; href=&quot;#chapter&quot; data-toggle=&quot;tab&quot;&gt;章节目录&lt;/a&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line">  </span><br><span class="line">      &lt;br&gt;</span><br><span class="line">      &lt;!-- Tab panes --&gt;</span><br><span class="line">      &lt;div class=&quot;tab-content&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;tab-pane active&quot; id=&quot;info&quot; v-html=&quot;course.content&quot;&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;tab-pane&quot; id=&quot;chapter&quot;&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;!-- 讲师信息 --&gt;</span><br><span class="line">    &lt;div class=&quot;col-md-3&quot;&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;/div&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3.课程列表页面开发，增加讲师信息显示</span><br></pre></td></tr></table></figure>

<ul>
<li><p>同样在detail.vue的讲师部分增加代码</p>
</li>
<li><p>&#96;&#96;&#96;vue</p>
<div class="col-md-3">
  <div class="card" style="width: 18rem;">
    <img  v-bind:
                     lazyload
                     src="/images/loading.svg"
                     data-src="teacher.image"
                      class="card-img-top"
                >
    <div class="card-body">
      <h5 class="card-title"></h5>
      <p class="card-text"></p>
      <p class="card-text"></p>
    </div>
  </div>

</div>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 13-8 章节显示与视频播放</span><br><span class="line"></span><br><span class="line">**大章和小节的分组显示**</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<p>1.课程详情页面开发，增加大章小节显示<br>使用d-none d-sm-inline组合：超小屏时隐藏，其它显示<br>v-for的第二变量是索引号</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 第一个变量是遍历的每一个实体，第二变量是数组索引，从0开始</span><br><span class="line"></span><br><span class="line">- d-none就是display:none，隐藏元素</span><br><span class="line"></span><br><span class="line">- 修改detail.vue</span><br><span class="line"></span><br><span class="line">- ```vue</span><br><span class="line">  //给 &lt;!-- Tab panes --&gt;中增加小节</span><br><span class="line">  &lt;div class=&quot;tab-pane&quot; id=&quot;chapter&quot;&gt;</span><br><span class="line">    &lt;div v-for=&quot;chapter in chapters&quot; class=&quot;chapter&quot;&gt;</span><br><span class="line">      &lt;div  class=&quot;chapter-chapter&quot;&gt;</span><br><span class="line">        &lt;span class=&quot;folded-button&quot;&gt;&#123;&#123;chapter.name&#125;&#125;&lt;/span&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div &gt;</span><br><span class="line">        &lt;table class=&quot;table table-striped&quot;&gt;</span><br><span class="line">          &lt;tr v-for=&quot;(s, j) in chapter.sections&quot; class=&quot;chapter-section-tr&quot;&gt;</span><br><span class="line">            &lt;td class=&quot;col-sm-8 col-xs-12&quot;&gt;</span><br><span class="line">              &lt;div  class=&quot;section-title&quot;&gt;</span><br><span class="line">                &lt;i class=&quot;fa fa-video-camera d-none d-sm-inline&quot;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;</span><br><span class="line">                &lt;span class=&quot;d-none d-sm-inline&quot;&gt;第&#123;&#123;j+1&#125;&#125;节&amp;nbsp;&amp;nbsp;&lt;/span&gt;</span><br><span class="line">                &#123;&#123;s.title&#125;&#125;</span><br><span class="line">                &lt;span v-show=&quot;s.charge !== SECTION_CHARGE.CHARGE.key&quot; class=&quot;badge badge-primary hidden-xs&quot;&gt;免费&lt;/span&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">            &lt;td class=&quot;col-sm-1 text-right&quot;&gt;</span><br><span class="line">              &lt;span class=&quot;badge badge-primary&quot;&gt;两个大括号包住s.time | format..Second&lt;/span&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">          &lt;/tr&gt;</span><br><span class="line">        &lt;/table&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  //在data中增加上面使用的字段</span><br><span class="line">  SECTION_CHARGE: SECTION_CHARGE</span><br><span class="line">  //在findCourse中加循环</span><br><span class="line">  // 将所有的节放入对应的章中</span><br><span class="line">          for (let i = 0; i &lt; _this.chapters.length; i++) &#123;</span><br><span class="line">            let c = _this.chapters[i];</span><br><span class="line">            c.sections = [];</span><br><span class="line">            for (let j = 0; j &lt; _this.sections.length; j++) &#123;</span><br><span class="line">              let s = _this.sections[j];</span><br><span class="line">              if (c.id === s.chapterId) &#123;</span><br><span class="line">                c.sections.push(s);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">  //增加css样式</span><br><span class="line">  /* 章节列表 */</span><br><span class="line">  .chapter &#123;</span><br><span class="line">    padding-bottom: 1.25rem;</span><br><span class="line">  &#125;</span><br><span class="line">  .chapter-chapter &#123;</span><br><span class="line">    font-size: 1.25rem;</span><br><span class="line">    padding: 1.25rem;</span><br><span class="line">    background-color: #23527c;</span><br><span class="line">    color: white;</span><br><span class="line">    cursor: pointer;</span><br><span class="line">  &#125;</span><br><span class="line">  .chapter-section-tr &#123;</span><br><span class="line">    font-size: 1rem;</span><br><span class="line">  &#125;</span><br><span class="line">  .chapter-section-tr td&#123;</span><br><span class="line">    padding: 1rem 1.25rem;</span><br><span class="line">    vertical-align: middle;</span><br><span class="line">  &#125;</span><br><span class="line">  /*鼠标手势*/</span><br><span class="line">  .chapter-section-tr td .section-title&#123;</span><br><span class="line">    color: #555;</span><br><span class="line">  &#125;</span><br><span class="line">  .chapter-section-tr td .section-title:hover&#123;</span><br><span class="line">    color: #23527c;</span><br><span class="line">    font-weight: bolder;</span><br><span class="line">    cursor: pointer;</span><br><span class="line">  &#125;</span><br><span class="line">  /*行头小图标*/</span><br><span class="line">  .chapter-section-tr td .section-title i&#123;</span><br><span class="line">    color: #2a6496;</span><br><span class="line">  &#125;</span><br><span class="line">  @media (max-width: 700px) &#123;</span><br><span class="line">    .chapter-chapter &#123;</span><br><span class="line">      font-size: 1.2rem;</span><br><span class="line">    &#125;</span><br><span class="line">    .chapter-section-tr &#123;</span><br><span class="line">      font-size: 0.9rem;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2.课程详情页面开发，增加大章小节收缩和展开</span><br><span class="line">注意：在v-for里写v-show.只修改属性不起作用，需要$set</span><br></pre></td></tr></table></figure>

<ul>
<li><p>从后端加载出来的大章数据，是没有folded属性的，相当于chapter.folded&#x3D;false</p>
</li>
<li><p>注意：v-for里面，如果用到了v-show，且v-show里面的控制属性值是随着界面操作而变化的，此时只修改属性值是不生效的，vue监听不到数组里的某个元素的值的变化。需要用到$set</p>
</li>
<li><p>修改detail.vue</p>
</li>
<li><p>&#96;&#96;&#96;vue</p>
<div v-for="(chapter, i) in chapters" class="chapter">
  <div  v-on:click="doFolded(chapter, i)" class="chapter-chapter">
    <span ></span>
    <span class="pull-right">
      <i v-show="chapter.folded" class="fa fa-plus-square" aria-hidden="true"></i>
      <i v-show="!chapter.folded" class="fa fa-minus-square" aria-hidden="true"></i>
    </span>
  </div>
  <div v-show="!chapter.folded">
   /**
     * 展开/收缩一个章节
     * @param chapter
     */
    doFolded (chapter, i) {
      let _this = this;
      chapter.folded = !chapter.folded;
      // 在v-for里写v-show，只修改属性不起作用，需要$set
      _this.$set(_this.chapters, i, chapter);
    },
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<p>3.课程详情页面开发，增加视频播放功能</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 首先将admin里面player.vue组件复制过来，修改接口</span><br><span class="line"></span><br><span class="line">- ```vue</span><br><span class="line">  &lt;template&gt;</span><br><span class="line">    &lt;div v-bind:id=&quot;playerId&quot;&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    export  default &#123;</span><br><span class="line">      name:&#x27;player&#x27;,</span><br><span class="line">      props:&#123;</span><br><span class="line">        playerId:&#123;</span><br><span class="line">          default:&quot;player-div&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      data: function ()&#123;</span><br><span class="line">        return&#123;</span><br><span class="line">          aliPlayer:&#123;&#125;,//播放器实例</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      methods:&#123;</span><br><span class="line">        playUrl(url)&#123;</span><br><span class="line">          let _this=this;</span><br><span class="line">          console.log(&quot;开始播放:&quot;,url);</span><br><span class="line">          //如果已经有播放器了，则将播放器的div删除</span><br><span class="line">          if (_this.aliPlayer)&#123;</span><br><span class="line">            _this.aliPlayer=null;</span><br><span class="line">            $(&quot;#&quot;+_this.playerId+&#x27;-player&#x27;).remove();</span><br><span class="line">          &#125;</span><br><span class="line">          //初始播放器</span><br><span class="line">          $(&quot;#&quot;+_this.playerId).append(&quot;&lt;div class=\&quot;prism-player\&quot; id=\&quot;&quot;+_this.playerId+&quot;-player\&quot;&gt;&lt;/div&gt;&quot;);        _this.aliPlayer = new Aliplayer(&#123;</span><br><span class="line">            id: _this.playerId+&#x27;-player&#x27;,</span><br><span class="line">            width: &#x27;100%&#x27;,</span><br><span class="line">            autoplay:false,</span><br><span class="line">            source:url,</span><br><span class="line">            cover:&#x27;https://s2.loli.net/2022/03/01/6wagXDIZQGcebUt.png&#x27;,</span><br><span class="line">          &#125;,function(player)&#123;</span><br><span class="line">            console.log(&#x27;播放器创建好了&#x27;)</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">        playVod (vod) &#123;</span><br><span class="line">          let _this = this;</span><br><span class="line">          Loading.show();</span><br><span class="line">            //下面admin改为了web</span><br><span class="line">          _this.$ajax.get(process.env.VUE_APP_SERVER + &#x27;/file/web/get-auth/&#x27; + vod).then((response)=&gt;&#123;</span><br><span class="line">            Loading.hide();</span><br><span class="line">            let resp = response.data;</span><br><span class="line">            if (resp.success) &#123;</span><br><span class="line">              //如果已经有播放器了，则将播放器div删除</span><br><span class="line">              if (_this.aliPlayer) &#123;</span><br><span class="line">                _this.aliPlayer = null;</span><br><span class="line">                $(&quot;#&quot; + _this.playerId + &#x27;-player&#x27;).remove();</span><br><span class="line">              &#125;</span><br><span class="line">  </span><br><span class="line">              // 初始化播放器</span><br><span class="line">              $(&quot;#&quot; + _this.playerId).append(&quot;&lt;div class=\&quot;prism-player\&quot; id=\&quot;&quot; + _this.playerId + &quot;-player\&quot;&gt;&lt;/div&gt;&quot;);</span><br><span class="line">              _this.aliPlayer = new Aliplayer(&#123;</span><br><span class="line">                id: _this.playerId + &#x27;-player&#x27;,</span><br><span class="line">                width: &#x27;100%&#x27;,</span><br><span class="line">                autoplay: false,</span><br><span class="line">                vid: vod,</span><br><span class="line">                playauth: resp.content,</span><br><span class="line">                cover: &#x27;http://liveroom-img.oss-cn-qingdao.aliyuncs.com/logo.png&#x27;,</span><br><span class="line">                encryptType:1, //当播放私有加密流时需要设置。</span><br><span class="line">              &#125;,function(player)&#123;</span><br><span class="line">                console.log(&#x27;播放器创建好了。&#x27;)</span><br><span class="line">              &#125;);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">              Toast.warning(&#x27;播放错误。&#x27;)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">  </span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>同样modal-play.vue不做任何修改</p>
</li>
<li><pre><code class="vue">&lt;template&gt;
  &lt;div id=&quot;player-modal&quot; class=&quot;modal&quot; tabindex=&quot;-1&quot; role=&quot;dialog&quot;&gt;
    &lt;div class=&quot;modal-dialog&quot; role=&quot;document&quot;&gt;
      &lt;div class=&quot;modal-content&quot;&gt;
        &lt;div class=&quot;modal-body&quot;&gt;
          &lt;player v-bind:player-id=&quot;&#39;modal-player-div&#39;&quot;
                  ref=&quot;player&quot;&gt;&lt;/player&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
  import Player from &quot;./player&quot;;
  export default &#123;
    name: &#39;modal-player&#39;,
    components: &#123;Player&#125;,
    data: function () &#123;
      return &#123;
        aliPlayer: &#123;&#125;, // 播放器实例
      &#125;
    &#125;,
    methods: &#123;
      playUrl(url) &#123;
        let _this = this;
        _this.$refs.player.playUrl(url);
      &#125;,

      playVod(vod) &#123;
        let _this = this;
        _this.$refs.player.playVod(vod);
        $(&quot;#player-modal&quot;).modal(&quot;show&quot;);
      &#125;
    &#125;
  &#125;
&lt;/script&gt;

&lt;style scoped&gt;
  #player-modal .modal-body &#123;
    padding: 0;
  &#125;

&lt;/style&gt;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 然后再index.html中引入css和js</span><br><span class="line"></span><br><span class="line">- ```html</span><br><span class="line">  &lt;!--  阿里云播放器--&gt;</span><br><span class="line">  &lt;link rel=&quot;stylesheet&quot; href=&quot;https://g.alicdn.com/de/prismplayer/2.9.19/skins/default/aliplayer-min.css&quot; /&gt;</span><br><span class="line">  &lt;!--  阿里云播放器--&gt;</span><br><span class="line">  &lt;script charset=&quot;utf-8&quot; type=&quot;text/javascript&quot; src=&quot;https://g.alicdn.com/de/prismplayer/2.9.19/aliplayer-min.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>接下来把file文件包下面的VodController复制一份，保存到同文件包下新建的web文件包</p>
</li>
<li><p>&#96;&#96;&#96;java<br>package com.course.file.controller.web;</p>
<p>import com.alibaba.fastjson.JSON;<br>import com.alibaba.fastjson.JSONObject;<br>import com.aliyun.oss.OSSClient;<br>import com.aliyuncs.DefaultAcsClient;<br>import com.aliyuncs.exceptions.ClientException;<br>import com.aliyuncs.vod.model.v20170321.CreateUploadVideoResponse;<br>import com.aliyuncs.vod.model.v20170321.GetMezzanineInfoResponse;<br>import com.aliyuncs.vod.model.v20170321.GetVideoPlayAuthResponse;<br>import com.course.server.dto.FileDto;<br>import com.course.server.dto.ResponseDto;<br>import com.course.server.enums.FileUseEnum;<br>import com.course.server.service.FileService;<br>import com.course.server.util.Base64ToMultipartFile;<br>import com.course.server.util.VodUtil;<br>import org.apache.commons.codec.binary.Base64;<br>import org.slf4j.Logger;<br>import org.slf4j.LoggerFactory;<br>import org.springframework.beans.factory.annotation.Value;<br>import org.springframework.web.bind.annotation.*;<br>import org.springframework.web.multipart.MultipartFile;</p>
<p>import javax.annotation.Resource;<br>import java.io.File;<br>import java.io.IOException;<br>@RestController(“webVodController”)<br>@RequestMapping(“&#x2F;web”)</p>
<p>public class VodController {</p>
<pre><code>private static final Logger LOG = LoggerFactory.getLogger(VodController.class);

public static final String BUSINESS_NAME = &quot;文件上传&quot;;

@Value(&quot;$&#123;vod.accessKeyId&#125;&quot;)
private String accessKeyId;

@Value(&quot;$&#123;vod.accessKeySecret&#125;&quot;)
private String accessKeySecret;



@Resource
private FileService fileService;
</code></pre>
<p>   @PostMapping(“&#x2F;vod”)<br>public ResponseDto fileUpload(@RequestBody FileDto fileDto) throws IOException {<br>   LOG.info(“上传文件开始”);<br>   String use &#x3D; fileDto.getUse();<br>   String key &#x3D; fileDto.getKey();<br>   String suffix &#x3D; fileDto.getSuffix();<br>   Integer shardIndex &#x3D; fileDto.getShardIndex();<br>   Integer shardSize &#x3D; fileDto.getShardSize();<br>   String shardBase64 &#x3D; fileDto.getShard();<br>   MultipartFile shard &#x3D; Base64ToMultipartFile.base64ToMultipart(shardBase64);<br><br>   &#x2F;&#x2F; 保存文件到本地<br>   FileUseEnum useEnum &#x3D; FileUseEnum.getByCode(use);<br><br>   &#x2F;&#x2F;如果文件夹不存在则创建<br>   String dir &#x3D; useEnum.name().toLowerCase();<br><br>   String path &#x3D; new StringBuffer(dir)<br>           .append(File.separator)<br>           .append(key)<br>           .append(“.”)<br>           .append(suffix)<br>           .toString();<br><br>   String vod &#x3D;””;<br>   String fileUrl &#x3D; “”;<br>   try {<br>       &#x2F;&#x2F; 初始化VOD客户端并获取上传地址和凭证<br>       DefaultAcsClient vodClient &#x3D; VodUtil.initVodClient(accessKeyId, accessKeySecret);<br>       CreateUploadVideoResponse createUploadVideoResponse &#x3D; VodUtil.createUploadVideo(vodClient,path);<br>       &#x2F;&#x2F; 执行成功会返回VideoId、UploadAddress和UploadAuth<br>       vod &#x3D; createUploadVideoResponse.getVideoId();<br><br>       JSONObject uploadAuth &#x3D; JSONObject.parseObject(<br>               Base64.decodeBase64(createUploadVideoResponse.getUploadAuth()),JSONObject.class);<br>       JSONObject uploadAddress &#x3D; JSONObject.parseObject(<br>               Base64.decodeBase64(createUploadVideoResponse.getUploadAddress()),JSONObject.class);<br><br>       &#x2F;&#x2F; 使用UploadAuth和UploadAddress初始化OSS客户端<br>       OSSClient ossClient &#x3D; VodUtil.initOssClient(uploadAuth, uploadAddress);<br>       &#x2F;&#x2F; 上传文件，注意是同步上传会阻塞等待，耗时与文件大小和网络上行带宽有关<br>       VodUtil.uploadLocalFile(ossClient, uploadAddress, shard.getInputStream());<br>       System.out.println(“视频上传成功, VideoId : “ + vod);<br>       GetMezzanineInfoResponse response &#x3D;  VodUtil.getMezzanineInfo(vodClient,vod);<br>       System.out.println(“获取视频信息,response : “+ JSON.toJSONString(response));<br>       fileUrl &#x3D; response.getMezzanine().getFileURL();<br>       ossClient.shutdown();<br>   } catch (Exception e) {<br>       System.out.println(“文件上传失败, ErrorMessage : “ + e.getLocalizedMessage());<br>   }<br><br>   LOG.info(“保存文件记录开始”);<br>   fileDto.setPath(path);<br>   fileDto.setVod(vod);<br>   fileService.save(fileDto);<br><br>   ResponseDto responseDto &#x3D; new ResponseDto();<br>   fileDto.setPath(fileUrl);&#x2F;&#x2F;返回给前端的需要一个可播放的地址，为了自动获取时长<br>   responseDto.setContent(fileDto);<br><br>   return responseDto;<br>   }</p>
<pre><code>@RequestMapping(value = &quot;/get-auth/&#123;vod&#125;&quot;, method = RequestMethod.GET)
public ResponseDto getAuth(@PathVariable String vod) throws ClientException, ClientException, ClientException &#123;
    LOG.info(&quot;获取播放授权开始: &quot;);
    ResponseDto responseDto = new ResponseDto();
    DefaultAcsClient client = VodUtil.initVodClient(accessKeyId, accessKeySecret);
    GetVideoPlayAuthResponse response = new GetVideoPlayAuthResponse();
    try &#123;
        response = VodUtil.getVideoPlayAuth(client, vod);
        LOG.info(&quot;授权码 = &#123;&#125;&quot;, response.getPlayAuth());
        responseDto.setContent(response.getPlayAuth());
        //VideoMeta信息
        LOG.info(&quot;VideoMeta = &#123;&#125;&quot;, JSON.toJSONString(response.getVideoMeta()));
    &#125; catch (Exception e) &#123;
        System.out.print(&quot;ErrorMessage = &quot; + e.getLocalizedMessage());
    &#125;
    LOG.info(&quot;获取播放授权结束&quot;);
    return responseDto;
&#125;
</code></pre>
<p>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 最后修改detail.vue</span><br><span class="line"></span><br><span class="line">- ```vue</span><br><span class="line">  //再这添加on：click事件</span><br><span class="line">    &lt;div v-on:click=&quot;play(s)&quot; class=&quot;section-title&quot;&gt;</span><br><span class="line">  //再html的最后添加</span><br><span class="line">      &lt;modal-player ref=&quot;modalPlayer&quot;&gt;&lt;/modal-player&gt;</span><br><span class="line">      &lt;/main&gt;</span><br><span class="line">  //导入</span><br><span class="line">      import ModalPlayer from &quot;../components/modal-player&quot;;</span><br><span class="line">      components: &#123;ModalPlayer&#125;,</span><br><span class="line">  //写方法</span><br><span class="line">   /**</span><br><span class="line">       * 播放视频</span><br><span class="line">       * @param section</span><br><span class="line">       */</span><br><span class="line">      play(section) &#123;</span><br><span class="line">        let _this = this;</span><br><span class="line">        _this.$refs.modalPlayer.playVod(section.vod);</span><br><span class="line">      &#125;,</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4.课程详情页面开发，对每个大章里面的小节进行排序</span><br></pre></td></tr></table></figure>

<ul>
<li><p>我们现在web的Tool.js添加方法</p>
</li>
<li><p>&#96;&#96;&#96;js<br>&#x2F;**</p>
<ul>
<li>对象数组按key对应的值排序</li>
<li>@param array</li>
<li>@param key</li>
<li>@returns {*}</li>
</ul>
<p> *&#x2F;<br>sortAsc: function (array, key) {<br>    return array.sort(function (obj1, obj2) {<br>        let val1 &#x3D; obj1[key];<br>        let val2 &#x3D; obj2[key];<br>        if (val1 &lt; val2) {<br>            return -1;<br>        } else if (val1 &gt; val2) {<br>            return 1;<br>        } else {<br>            return 0;<br>        }<br>    });<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 然后再detail.vue中使用</span><br><span class="line"></span><br><span class="line">- ```</span><br><span class="line">  在大章循环最后使用</span><br><span class="line">  findCourse() &#123;</span><br><span class="line">      // 将所有的节放入对应的章中</span><br><span class="line">      for (let i = 0; i &lt; _this.chapters.length; i++) &#123;</span><br><span class="line">        Tool.sortAsc(c.sections,&quot;sort&quot;);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5.课程详情页面开发，只有免费的视频才可直接播放，收费视频需要登录后才能播放   </span><br></pre></td></tr></table></figure>

<ul>
<li><p>首先把toast.js复制过来</p>
</li>
<li><pre><code class="js">Toast = &#123;
    success:function (message)&#123;
        Swal.fire(&#123;
            position: &#39;top-end&#39;,
            icon: &#39;success&#39;,
            title:message,
            showConfirmButton: false,
            timer: 3000
        &#125;);
    &#125;,
    error:function (message)&#123;
        Swal.fire(&#123;
            position: &#39;top-end&#39;,
            icon: &#39;error&#39;,
            title: message,
            showConfirmButton: false,
            timer: 3000
        &#125;);
    &#125;,
    warning:function (message)&#123;
        Swal.fire(&#123;
            position: &#39;top-end&#39;,
            icon: &#39;warning&#39;,
            title: message,
            showConfirmButton: false,
            timer: 3000
        &#125;);
    &#125;
&#125;;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 然后index.html引入</span><br><span class="line"></span><br><span class="line">- ```</span><br><span class="line">  &lt;!--确认框和提示框--&gt;</span><br><span class="line">  &lt;script src=&quot;//cdn.jsdelivr.net/npm/sweetalert2@11&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;script src=&quot;&lt;%= BASE_URL %&gt;static/js/toast.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>最后在detail.vue使用</p>
</li>
<li><p>&#96;&#96;&#96;vue<br>&#x2F;**</p>
<ul>
<li>播放视频</li>
<li>@param section</li>
</ul>
<p> *&#x2F;<br>play(section) {<br>  let _this &#x3D; this;<br>  if (section.charge &#x3D;&#x3D;&#x3D; _this.SECTION_CHARGE.CHARGE.key ) {<br>    Toast.warning(“请先登录”);<br>  }else{<br>    _this.$refs.modalPlayer.playVod(section.vod);</p>
<p>  }<br>},</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 13-9 增加会员注册功能</span><br><span class="line"></span><br><span class="line">**控台增加会员管理功能**</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<p>1.增加会员管理页面，新增member表，在之前代码生成器的步骤后面，加上以下步骤：<br>1）在resource.json中增加新资源<br>2）在【资源管理】页面，配置最新的resource.json<br>3）在【角色管理】页面，为相应的角色配置新的资源<br>4）重新登录控台<br>自从控台加入权限管理功能后，新作的页面，需要增加这四部，配置相应的权限，才能使用新表的管理功能</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 首先写sql，然后代码生成器一顿操作，记得后端和前端要改成business</span><br><span class="line"></span><br><span class="line">- ```sql</span><br><span class="line">  # 会员</span><br><span class="line">  drop table if exists `member`;</span><br><span class="line">  create table `member`(</span><br><span class="line">                         `id` char(8) not null default &#x27;&#x27; comment &#x27;id&#x27;,</span><br><span class="line">                         `mobile` varchar(11) not null comment &#x27;手机号&#x27;,</span><br><span class="line">                         `password` char(32) not null comment &#x27;密码&#x27;,</span><br><span class="line">                         `name` varchar(50)  comment &#x27;昵称&#x27;,</span><br><span class="line">                         `photo` varchar(200)  comment &#x27;头像url&#x27;,</span><br><span class="line">                         `register_time` datetime(3)  comment &#x27;注册时间&#x27;,</span><br><span class="line">                         primary key (`id`),</span><br><span class="line">                         unique key `mobile_unique`(`mobile`)</span><br><span class="line">  </span><br><span class="line">  )engine =innodb default charset=utf8mb4 comment=&#x27;会员&#x27;;</span><br><span class="line">  insert into `member` (id,mobile,password,name,photo,register_time) values (&#x27;00000000&#x27;,&#x27;12345678901&#x27;,&#x27;10000000&#x27;,&#x27;测试&#x27;,null,now());</span><br></pre></td></tr></table></figure>

<ul>
<li><p>然后给admin的左侧菜单增加</p>
</li>
<li><pre><code class="vue">&lt;li v-show=&quot;hasResource(&#39;0204&#39;)&quot; class=&quot;&quot; id=&quot;business-member-sidebar&quot;&gt;
  &lt;router-link to=&quot;/business/member&quot;&gt;
    &lt;i class=&quot;menu-icon fa fa-caret-right&quot;&gt;&lt;/i&gt;
    会员管理
  &lt;/router-link&gt;
  &lt;b class=&quot;arrow&quot;&gt;&lt;/b&gt;
&lt;/li&gt;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 接着增加一个路由</span><br><span class="line"></span><br><span class="line">- ```js</span><br><span class="line">  ,&#123;</span><br><span class="line">      path: &quot;business/member&quot;,</span><br><span class="line">      name:&quot;business/member&quot;,</span><br><span class="line">      component: Member,</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>到目前为止，跟我们前面介绍的制作表单功能的流程一样。但是由于加入权限功能，所以需要配置权限后才能看到页面。</p>
</li>
<li><p>这给在resource.json中增加新资源，剩下的得再控台操作</p>
</li>
<li><p>&#96;&#96;&#96;json<br>,{<br>  “id”:”0204”,”name”:”会员管理”,”page”:”business&#x2F;member”,<br>  “children”:[<br>{“id”:”020401”,”name”:”增删改查”,”request”:[“&#x2F;business&#x2F;admin&#x2F;member”]}<br>  ]<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<p>2.增加会员管理页面，控台的会员管理，不能新增，修改·删除·可以查看会员信息·重置密码·报表统计等操作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 将MemberController得save和delete方法删除</span><br><span class="line">- 然后对于member.vue该删删</span><br><span class="line"></span><br><span class="line">**网站增加会员注册功能**</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>1.会员登录注册功能开发，增加登录注册模态框，增加注册功能</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 登录表单、注册表单、忘记密码表单放在同一模态框中</span><br><span class="line"></span><br><span class="line">- 首先我们进行web得MemberController增加，密码两层加密，传输加密+保存加密</span><br><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  package com.course.business.controller.web;</span><br><span class="line">  </span><br><span class="line">  import com.course.server.dto.MemberDto;</span><br><span class="line">  import com.course.server.dto.ResponseDto;</span><br><span class="line">  import com.course.server.service.MemberService;</span><br><span class="line">  import com.course.server.util.ValidatorUtil;</span><br><span class="line">  import org.slf4j.Logger;</span><br><span class="line">  import org.slf4j.LoggerFactory;</span><br><span class="line">  import org.springframework.util.DigestUtils;</span><br><span class="line">  import org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line">  import org.springframework.web.bind.annotation.RequestBody;</span><br><span class="line">  import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">  import org.springframework.web.bind.annotation.RestController;</span><br><span class="line">  </span><br><span class="line">  import javax.annotation.Resource;</span><br><span class="line">  </span><br><span class="line">  @RestController(&quot;webMemberController&quot;)</span><br><span class="line">  @RequestMapping(&quot;/web/member&quot;)</span><br><span class="line">  public class MemberController &#123;</span><br><span class="line">  </span><br><span class="line">      private static final Logger LOG = LoggerFactory.getLogger(MemberController.class);</span><br><span class="line">      public static final String BUSINESS_NAME = &quot;会员&quot;;</span><br><span class="line">  </span><br><span class="line">      @Resource</span><br><span class="line">      private MemberService memberService;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">      /**</span><br><span class="line">       * 保存，id有值时更新，无值时新增</span><br><span class="line">       */</span><br><span class="line">      @PostMapping(&quot;/register&quot;)</span><br><span class="line">      public ResponseDto register(@RequestBody MemberDto memberDto) &#123;</span><br><span class="line">          // 保存校验</span><br><span class="line">          ValidatorUtil.require(memberDto.getMobile(), &quot;手机号&quot;);</span><br><span class="line">          ValidatorUtil.length(memberDto.getMobile(), &quot;手机号&quot;, 11, 11);</span><br><span class="line">          ValidatorUtil.require(memberDto.getPassword(), &quot;密码&quot;);</span><br><span class="line">          ValidatorUtil.length(memberDto.getName(), &quot;昵称&quot;, 1, 50);</span><br><span class="line">          ValidatorUtil.length(memberDto.getPhoto(), &quot;头像url&quot;, 1, 200);</span><br><span class="line">  </span><br><span class="line">          // 密码加密</span><br><span class="line">          memberDto.setPassword(DigestUtils.md5DigestAsHex(memberDto.getPassword().getBytes()));</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">          ResponseDto responseDto = new ResponseDto();</span><br><span class="line">          memberService.save(memberDto);</span><br><span class="line">          responseDto.setContent(memberDto);</span><br><span class="line">          return responseDto;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>然后我们修改MemberService.java里面的insert方法</p>
</li>
<li><pre><code class="java">/**
 * 插入
 */
private void insert(Member member)&#123;
            Date now = new Date();
            member.setId(UuidUtil.getShortUuid());
            //下面这句是新增得
            member.setRegisterTime(now);
            memberMapper.insert(member);
&#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 因为前端用到了加密，所以我们把md5.js拷过来</span><br><span class="line"></span><br><span class="line">- ```js</span><br><span class="line">  var KEY = &quot;!@#QWERT&quot;;</span><br><span class="line">  /*</span><br><span class="line">   * Configurable variables. You may need to tweak these to be compatible with</span><br><span class="line">   * the server-side, but the defaults work in most cases.</span><br><span class="line">   */</span><br><span class="line">  var hexcase = 0;  /* hex output format. 0 - lowercase; 1 - uppercase        */</span><br><span class="line">  var b64pad  = &quot;&quot;; /* base-64 pad character. &quot;=&quot; for strict RFC compliance   */</span><br><span class="line">  var chrsz   = 8;  /* bits per input character. 8 - ASCII; 16 - Unicode      */</span><br><span class="line">  </span><br><span class="line">  /*</span><br><span class="line">   * These are the functions you&#x27;ll usually want to call</span><br><span class="line">   * They take string arguments and return either hex or base-64 encoded strings</span><br><span class="line">   */</span><br><span class="line">  function hex_md5(s)&#123; return binl2hex(core_md5(str2binl(s), s.length * chrsz));&#125;</span><br><span class="line">  function b64_md5(s)&#123; return binl2b64(core_md5(str2binl(s), s.length * chrsz));&#125;</span><br><span class="line">  function str_md5(s)&#123; return binl2str(core_md5(str2binl(s), s.length * chrsz));&#125;</span><br><span class="line">  function hex_hmac_md5(key, data) &#123; return binl2hex(core_hmac_md5(key, data)); &#125;</span><br><span class="line">  function b64_hmac_md5(key, data) &#123; return binl2b64(core_hmac_md5(key, data)); &#125;</span><br><span class="line">  function str_hmac_md5(key, data) &#123; return binl2str(core_hmac_md5(key, data)); &#125;</span><br><span class="line">  </span><br><span class="line">  /*</span><br><span class="line">   * Perform a simple self-test to see if the VM is working</span><br><span class="line">   */</span><br><span class="line">  function md5_vm_test()</span><br><span class="line">  &#123;</span><br><span class="line">    return hex_md5(&quot;abc&quot;) == &quot;900150983cd24fb0d6963f7d28e17f72&quot;;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  /*</span><br><span class="line">   * Calculate the MD5 of an array of little-endian words, and a bit length</span><br><span class="line">   */</span><br><span class="line">  function core_md5(x, len)</span><br><span class="line">  &#123;</span><br><span class="line">    /* append padding */</span><br><span class="line">    x[len &gt;&gt; 5] |= 0x80 &lt;&lt; ((len) % 32);</span><br><span class="line">    x[(((len + 64) &gt;&gt;&gt; 9) &lt;&lt; 4) + 14] = len;</span><br><span class="line">  </span><br><span class="line">    var a =  1732584193;</span><br><span class="line">    var b = -271733879;</span><br><span class="line">    var c = -1732584194;</span><br><span class="line">    var d =  271733878;</span><br><span class="line">  </span><br><span class="line">    for(var i = 0; i &lt; x.length; i += 16)</span><br><span class="line">    &#123;</span><br><span class="line">      var olda = a;</span><br><span class="line">      var oldb = b;</span><br><span class="line">      var oldc = c;</span><br><span class="line">      var oldd = d;</span><br><span class="line">  </span><br><span class="line">      a = md5_ff(a, b, c, d, x[i+ 0], 7 , -680876936);</span><br><span class="line">      d = md5_ff(d, a, b, c, x[i+ 1], 12, -389564586);</span><br><span class="line">      c = md5_ff(c, d, a, b, x[i+ 2], 17,  606105819);</span><br><span class="line">      b = md5_ff(b, c, d, a, x[i+ 3], 22, -1044525330);</span><br><span class="line">      a = md5_ff(a, b, c, d, x[i+ 4], 7 , -176418897);</span><br><span class="line">      d = md5_ff(d, a, b, c, x[i+ 5], 12,  1200080426);</span><br><span class="line">      c = md5_ff(c, d, a, b, x[i+ 6], 17, -1473231341);</span><br><span class="line">      b = md5_ff(b, c, d, a, x[i+ 7], 22, -45705983);</span><br><span class="line">      a = md5_ff(a, b, c, d, x[i+ 8], 7 ,  1770035416);</span><br><span class="line">      d = md5_ff(d, a, b, c, x[i+ 9], 12, -1958414417);</span><br><span class="line">      c = md5_ff(c, d, a, b, x[i+10], 17, -42063);</span><br><span class="line">      b = md5_ff(b, c, d, a, x[i+11], 22, -1990404162);</span><br><span class="line">      a = md5_ff(a, b, c, d, x[i+12], 7 ,  1804603682);</span><br><span class="line">      d = md5_ff(d, a, b, c, x[i+13], 12, -40341101);</span><br><span class="line">      c = md5_ff(c, d, a, b, x[i+14], 17, -1502002290);</span><br><span class="line">      b = md5_ff(b, c, d, a, x[i+15], 22,  1236535329);</span><br><span class="line">  </span><br><span class="line">      a = md5_gg(a, b, c, d, x[i+ 1], 5 , -165796510);</span><br><span class="line">      d = md5_gg(d, a, b, c, x[i+ 6], 9 , -1069501632);</span><br><span class="line">      c = md5_gg(c, d, a, b, x[i+11], 14,  643717713);</span><br><span class="line">      b = md5_gg(b, c, d, a, x[i+ 0], 20, -373897302);</span><br><span class="line">      a = md5_gg(a, b, c, d, x[i+ 5], 5 , -701558691);</span><br><span class="line">      d = md5_gg(d, a, b, c, x[i+10], 9 ,  38016083);</span><br><span class="line">      c = md5_gg(c, d, a, b, x[i+15], 14, -660478335);</span><br><span class="line">      b = md5_gg(b, c, d, a, x[i+ 4], 20, -405537848);</span><br><span class="line">      a = md5_gg(a, b, c, d, x[i+ 9], 5 ,  568446438);</span><br><span class="line">      d = md5_gg(d, a, b, c, x[i+14], 9 , -1019803690);</span><br><span class="line">      c = md5_gg(c, d, a, b, x[i+ 3], 14, -187363961);</span><br><span class="line">      b = md5_gg(b, c, d, a, x[i+ 8], 20,  1163531501);</span><br><span class="line">      a = md5_gg(a, b, c, d, x[i+13], 5 , -1444681467);</span><br><span class="line">      d = md5_gg(d, a, b, c, x[i+ 2], 9 , -51403784);</span><br><span class="line">      c = md5_gg(c, d, a, b, x[i+ 7], 14,  1735328473);</span><br><span class="line">      b = md5_gg(b, c, d, a, x[i+12], 20, -1926607734);</span><br><span class="line">  </span><br><span class="line">      a = md5_hh(a, b, c, d, x[i+ 5], 4 , -378558);</span><br><span class="line">      d = md5_hh(d, a, b, c, x[i+ 8], 11, -2022574463);</span><br><span class="line">      c = md5_hh(c, d, a, b, x[i+11], 16,  1839030562);</span><br><span class="line">      b = md5_hh(b, c, d, a, x[i+14], 23, -35309556);</span><br><span class="line">      a = md5_hh(a, b, c, d, x[i+ 1], 4 , -1530992060);</span><br><span class="line">      d = md5_hh(d, a, b, c, x[i+ 4], 11,  1272893353);</span><br><span class="line">      c = md5_hh(c, d, a, b, x[i+ 7], 16, -155497632);</span><br><span class="line">      b = md5_hh(b, c, d, a, x[i+10], 23, -1094730640);</span><br><span class="line">      a = md5_hh(a, b, c, d, x[i+13], 4 ,  681279174);</span><br><span class="line">      d = md5_hh(d, a, b, c, x[i+ 0], 11, -358537222);</span><br><span class="line">      c = md5_hh(c, d, a, b, x[i+ 3], 16, -722521979);</span><br><span class="line">      b = md5_hh(b, c, d, a, x[i+ 6], 23,  76029189);</span><br><span class="line">      a = md5_hh(a, b, c, d, x[i+ 9], 4 , -640364487);</span><br><span class="line">      d = md5_hh(d, a, b, c, x[i+12], 11, -421815835);</span><br><span class="line">      c = md5_hh(c, d, a, b, x[i+15], 16,  530742520);</span><br><span class="line">      b = md5_hh(b, c, d, a, x[i+ 2], 23, -995338651);</span><br><span class="line">  </span><br><span class="line">      a = md5_ii(a, b, c, d, x[i+ 0], 6 , -198630844);</span><br><span class="line">      d = md5_ii(d, a, b, c, x[i+ 7], 10,  1126891415);</span><br><span class="line">      c = md5_ii(c, d, a, b, x[i+14], 15, -1416354905);</span><br><span class="line">      b = md5_ii(b, c, d, a, x[i+ 5], 21, -57434055);</span><br><span class="line">      a = md5_ii(a, b, c, d, x[i+12], 6 ,  1700485571);</span><br><span class="line">      d = md5_ii(d, a, b, c, x[i+ 3], 10, -1894986606);</span><br><span class="line">      c = md5_ii(c, d, a, b, x[i+10], 15, -1051523);</span><br><span class="line">      b = md5_ii(b, c, d, a, x[i+ 1], 21, -2054922799);</span><br><span class="line">      a = md5_ii(a, b, c, d, x[i+ 8], 6 ,  1873313359);</span><br><span class="line">      d = md5_ii(d, a, b, c, x[i+15], 10, -30611744);</span><br><span class="line">      c = md5_ii(c, d, a, b, x[i+ 6], 15, -1560198380);</span><br><span class="line">      b = md5_ii(b, c, d, a, x[i+13], 21,  1309151649);</span><br><span class="line">      a = md5_ii(a, b, c, d, x[i+ 4], 6 , -145523070);</span><br><span class="line">      d = md5_ii(d, a, b, c, x[i+11], 10, -1120210379);</span><br><span class="line">      c = md5_ii(c, d, a, b, x[i+ 2], 15,  718787259);</span><br><span class="line">      b = md5_ii(b, c, d, a, x[i+ 9], 21, -343485551);</span><br><span class="line">  </span><br><span class="line">      a = safe_add(a, olda);</span><br><span class="line">      b = safe_add(b, oldb);</span><br><span class="line">      c = safe_add(c, oldc);</span><br><span class="line">      d = safe_add(d, oldd);</span><br><span class="line">    &#125;</span><br><span class="line">    return Array(a, b, c, d);</span><br><span class="line">  </span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  /*</span><br><span class="line">   * These functions implement the four basic operations the algorithm uses.</span><br><span class="line">   */</span><br><span class="line">  function md5_cmn(q, a, b, x, s, t)</span><br><span class="line">  &#123;</span><br><span class="line">    return safe_add(bit_rol(safe_add(safe_add(a, q), safe_add(x, t)), s),b);</span><br><span class="line">  &#125;</span><br><span class="line">  function md5_ff(a, b, c, d, x, s, t)</span><br><span class="line">  &#123;</span><br><span class="line">    return md5_cmn((b &amp; c) | ((~b) &amp; d), a, b, x, s, t);</span><br><span class="line">  &#125;</span><br><span class="line">  function md5_gg(a, b, c, d, x, s, t)</span><br><span class="line">  &#123;</span><br><span class="line">    return md5_cmn((b &amp; d) | (c &amp; (~d)), a, b, x, s, t);</span><br><span class="line">  &#125;</span><br><span class="line">  function md5_hh(a, b, c, d, x, s, t)</span><br><span class="line">  &#123;</span><br><span class="line">    return md5_cmn(b ^ c ^ d, a, b, x, s, t);</span><br><span class="line">  &#125;</span><br><span class="line">  function md5_ii(a, b, c, d, x, s, t)</span><br><span class="line">  &#123;</span><br><span class="line">    return md5_cmn(c ^ (b | (~d)), a, b, x, s, t);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  /*</span><br><span class="line">   * Calculate the HMAC-MD5, of a key and some data</span><br><span class="line">   */</span><br><span class="line">  function core_hmac_md5(key, data)</span><br><span class="line">  &#123;</span><br><span class="line">    var bkey = str2binl(key);</span><br><span class="line">    if(bkey.length &gt; 16) bkey = core_md5(bkey, key.length * chrsz);</span><br><span class="line">  </span><br><span class="line">    var ipad = Array(16), opad = Array(16);</span><br><span class="line">    for(var i = 0; i &lt; 16; i++)</span><br><span class="line">    &#123;</span><br><span class="line">      ipad[i] = bkey[i] ^ 0x36363636;</span><br><span class="line">      opad[i] = bkey[i] ^ 0x5C5C5C5C;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    var hash = core_md5(ipad.concat(str2binl(data)), 512 + data.length * chrsz);</span><br><span class="line">    return core_md5(opad.concat(hash), 512 + 128);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  /*</span><br><span class="line">   * Add integers, wrapping at 2^32. This uses 16-bit operations internally</span><br><span class="line">   * to work around bugs in some JS interpreters.</span><br><span class="line">   */</span><br><span class="line">  function safe_add(x, y)</span><br><span class="line">  &#123;</span><br><span class="line">    var lsw = (x &amp; 0xFFFF) + (y &amp; 0xFFFF);</span><br><span class="line">    var msw = (x &gt;&gt; 16) + (y &gt;&gt; 16) + (lsw &gt;&gt; 16);</span><br><span class="line">    return (msw &lt;&lt; 16) | (lsw &amp; 0xFFFF);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  /*</span><br><span class="line">   * Bitwise rotate a 32-bit number to the left.</span><br><span class="line">   */</span><br><span class="line">  function bit_rol(num, cnt)</span><br><span class="line">  &#123;</span><br><span class="line">    return (num &lt;&lt; cnt) | (num &gt;&gt;&gt; (32 - cnt));</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  /*</span><br><span class="line">   * Convert a string to an array of little-endian words</span><br><span class="line">   * If chrsz is ASCII, characters &gt;255 have their hi-byte silently ignored.</span><br><span class="line">   */</span><br><span class="line">  function str2binl(str)</span><br><span class="line">  &#123;</span><br><span class="line">    var bin = Array();</span><br><span class="line">    var mask = (1 &lt;&lt; chrsz) - 1;</span><br><span class="line">    for(var i = 0; i &lt; str.length * chrsz; i += chrsz)</span><br><span class="line">      bin[i&gt;&gt;5] |= (str.charCodeAt(i / chrsz) &amp; mask) &lt;&lt; (i%32);</span><br><span class="line">    return bin;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  /*</span><br><span class="line">   * Convert an array of little-endian words to a string</span><br><span class="line">   */</span><br><span class="line">  function binl2str(bin)</span><br><span class="line">  &#123;</span><br><span class="line">    var str = &quot;&quot;;</span><br><span class="line">    var mask = (1 &lt;&lt; chrsz) - 1;</span><br><span class="line">    for(var i = 0; i &lt; bin.length * 32; i += chrsz)</span><br><span class="line">      str += String.fromCharCode((bin[i&gt;&gt;5] &gt;&gt;&gt; (i % 32)) &amp; mask);</span><br><span class="line">    return str;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  /*</span><br><span class="line">   * Convert an array of little-endian words to a hex string.</span><br><span class="line">   */</span><br><span class="line">  function binl2hex(binarray)</span><br><span class="line">  &#123;</span><br><span class="line">    var hex_tab = hexcase ? &quot;0123456789ABCDEF&quot; : &quot;0123456789abcdef&quot;;</span><br><span class="line">    var str = &quot;&quot;;</span><br><span class="line">    for(var i = 0; i &lt; binarray.length * 4; i++)</span><br><span class="line">    &#123;</span><br><span class="line">      str += hex_tab.charAt((binarray[i&gt;&gt;2] &gt;&gt; ((i%4)*8+4)) &amp; 0xF) +</span><br><span class="line">             hex_tab.charAt((binarray[i&gt;&gt;2] &gt;&gt; ((i%4)*8  )) &amp; 0xF);</span><br><span class="line">    &#125;</span><br><span class="line">    return str;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  /*</span><br><span class="line">   * Convert an array of little-endian words to a base-64 string</span><br><span class="line">   */</span><br><span class="line">  function binl2b64(binarray)</span><br><span class="line">  &#123;</span><br><span class="line">    var tab = &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&quot;;</span><br><span class="line">    var str = &quot;&quot;;</span><br><span class="line">    for(var i = 0; i &lt; binarray.length * 4; i += 3)</span><br><span class="line">    &#123;</span><br><span class="line">      var triplet = (((binarray[i   &gt;&gt; 2] &gt;&gt; 8 * ( i   %4)) &amp; 0xFF) &lt;&lt; 16)</span><br><span class="line">                  | (((binarray[i+1 &gt;&gt; 2] &gt;&gt; 8 * ((i+1)%4)) &amp; 0xFF) &lt;&lt; 8 )</span><br><span class="line">                  |  ((binarray[i+2 &gt;&gt; 2] &gt;&gt; 8 * ((i+2)%4)) &amp; 0xFF);</span><br><span class="line">      for(var j = 0; j &lt; 4; j++)</span><br><span class="line">      &#123;</span><br><span class="line">        if(i * 8 + j * 6 &gt; binarray.length * 32) str += b64pad;</span><br><span class="line">        else str += tab.charAt((triplet &gt;&gt; 6*(3-j)) &amp; 0x3F);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return str;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>在index.html中引入md5</p>
</li>
<li><pre><code class="html">&lt;!--  md5工具类--&gt;
&lt;script src=&quot;&lt;%= BASE_URL %&gt;static/js/md5.js&quot;&gt;&lt;/script&gt;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 我们新建一个组件login.vue，用于注册登录</span><br><span class="line"></span><br><span class="line">- ```vue</span><br><span class="line">  &lt;template&gt;</span><br><span class="line">    &lt;div id=&quot;login-modal&quot; class=&quot;modal fade&quot; tabindex=&quot;-1&quot; role=&quot;dialog&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;modal-dialog modal-login&quot; role=&quot;document&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;modal-content&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;modal-body&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;register-div&quot; &gt;</span><br><span class="line">              &lt;h3&gt;注&amp;nbsp;&amp;nbsp;册&lt;/h3&gt;</span><br><span class="line">              &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">                &lt;input id=&quot;register-mobile&quot; v-model=&quot;memberRegister.mobile&quot;</span><br><span class="line">                       class=&quot;form-control&quot; placeholder=&quot;手机号&quot;&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;input-group&quot;&gt;</span><br><span class="line">                  &lt;input id=&quot;register-mobile-code&quot; class=&quot;form-control&quot;</span><br><span class="line">                         placeholder=&quot;手机验证码&quot; v-model=&quot;memberRegister.code&quot;&gt;</span><br><span class="line">                  &lt;div class=&quot;input-group-append&quot;&gt;</span><br><span class="line">                    &lt;button class=&quot;btn btn-outline-secondary&quot; id=&quot;register-send-code-btn&quot;</span><br><span class="line">                            v-on:click=&quot;sendSmsForRegister()&quot;&gt;发送验证码</span><br><span class="line">                    &lt;/button&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">                &lt;input id=&quot;register-name&quot; v-model=&quot;memberRegister.name&quot;</span><br><span class="line">                       class=&quot;form-control&quot; placeholder=&quot;昵称&quot;&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">                &lt;input id=&quot;register-password&quot; v-model=&quot;memberRegister.passwordOriginal&quot;</span><br><span class="line">                       class=&quot;form-control&quot; placeholder=&quot;密码&quot; type=&quot;password&quot;&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">                &lt;input id=&quot;register-confirm-password&quot; v-model=&quot;memberRegister.confirm&quot;</span><br><span class="line">                       class=&quot;form-control&quot; placeholder=&quot;确认密码&quot;</span><br><span class="line">                       name=&quot;memberRegisterConfirm&quot; type=&quot;password&quot;&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">                &lt;button class=&quot;btn btn-primary btn-block submit-button&quot; v-on:click=&quot;register()&quot;&gt;</span><br><span class="line">                  注&amp;nbsp;&amp;nbsp;册</span><br><span class="line">                &lt;/button&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;form-group to-login-div&quot;&gt;</span><br><span class="line">                &lt;a href=&quot;javascript:;&quot; &gt;我要登录&lt;/a&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;&lt;!-- /.modal-content --&gt;</span><br><span class="line">      &lt;/div&gt;&lt;!-- /.modal-dialog --&gt;</span><br><span class="line">    &lt;/div&gt;&lt;!-- /.modal --&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;script&gt;</span><br><span class="line">  </span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#x27;the-login&#x27;,</span><br><span class="line">    data: function () &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">  </span><br><span class="line">        memberRegister: &#123;&#125;,</span><br><span class="line">  </span><br><span class="line">        remember: true, // 记住密码</span><br><span class="line">        imageCodeToken: &quot;&quot;,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted() &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">  </span><br><span class="line">      /**</span><br><span class="line">       * 打开登录注册窗口</span><br><span class="line">       */</span><br><span class="line">      openLoginModal() &#123;</span><br><span class="line">        let _this = this;</span><br><span class="line">        $(&quot;#login-modal&quot;).modal(&quot;show&quot;);</span><br><span class="line">      &#125;,</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">      register() &#123;</span><br><span class="line">        let _this = this;</span><br><span class="line">  </span><br><span class="line">        _this.memberRegister.password = hex_md5(_this.memberRegister.passwordOriginal + KEY);</span><br><span class="line">  </span><br><span class="line">        // 调服务端注册接口</span><br><span class="line">        _this.$ajax.post(process.env.VUE_APP_SERVER + &#x27;/business/web/member/register&#x27;, _this.memberRegister).then((response) =&gt; &#123;</span><br><span class="line">          let resp = response.data;</span><br><span class="line">          if (resp.success) &#123;</span><br><span class="line">            Toast.success(&quot;注册成功&quot;);</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">            Toast.warning(resp.message);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;,</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;style scoped&gt;</span><br><span class="line">  /* 登录框 */</span><br><span class="line">  .login-div .input-group-addon &#123;</span><br><span class="line">    padding: 0;</span><br><span class="line">    border: 0;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  #login-modal h3 &#123;</span><br><span class="line">    text-align: center;</span><br><span class="line">    margin-bottom: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  #login-modal .modal-login &#123;</span><br><span class="line">    max-width: 400px;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  #login-modal input:not(.remember) &#123;</span><br><span class="line">    height: 45px;</span><br><span class="line">    font-size: 16px;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  #login-modal .submit-button &#123;</span><br><span class="line">    height: 50px;</span><br><span class="line">    font-size: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  #login-modal .to-login-div &#123;</span><br><span class="line">    text-align: center;</span><br><span class="line">  &#125;</span><br><span class="line">  &lt;/style&gt;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>然后我们在the-header中使用</p>
</li>
<li><p>&#96;&#96;&#96;vue<br> <span class="text-white">欢迎：</span><br> &#x2F;&#x2F;新增一个click时间<br>  <button v-on:click="openLoginModal()" class="btn btn-outline-light my-2 my-sm-0" type="submit">登录&#x2F;注册</button><br></div><br></div></p>
  </nav>
  //在这里使用组件
  <the-login ref="loginComponent"></the-login>
</header>
//导入组件
import TheLogin from "./login";
components: {TheLogin},
methods:{
    /**
    * 打开登录注册窗口
    */
    openLoginModal() {
        let _this = this;
        _this.$refs.loginComponent.openLoginModal();
        },
        }
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 13-10 增加登录与退出登录功能</span><br><span class="line"></span><br><span class="line">**登录、注册、忘记密码之间的切换**</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<p>1.会员登录注册功能开发·增加登录框和忘记密码框·并实现登录框、注册框·忘记密码框切换，默认显示登录框</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 我们修改login.vue</span><br><span class="line"></span><br><span class="line">- ```vue</span><br><span class="line">  ////////////////////////////////////////////////////////////////////////////增加登录</span><br><span class="line">  &lt;div class=&quot;login-div&quot; v-show=&quot;MODAL_STATUS === STATUS_LOGIN&quot;&gt;</span><br><span class="line">    &lt;h3&gt;登&amp;nbsp;&amp;nbsp;录&lt;/h3&gt;</span><br><span class="line">    &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">      &lt;input v-model=&quot;member.mobile&quot; class=&quot;form-control&quot; placeholder=&quot;手机号&quot;&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">      &lt;input class=&quot;form-control&quot; type=&quot;password&quot; placeholder=&quot;密码&quot; v-model=&quot;member.password&quot;&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;input-group&quot;&gt;</span><br><span class="line">        &lt;input id=&quot;image-code-input&quot; class=&quot;form-control&quot; type=&quot;text&quot; placeholder=&quot;验证码&quot;</span><br><span class="line">               v-model=&quot;member.imageCode&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;input-group-addon&quot; id=&quot;image-code-addon&quot;&gt;</span><br><span class="line">          &lt;img id=&quot;image-code&quot; alt=&quot;验证码&quot; v-on:click=&quot;loadImageCode()&quot;/&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">      &lt;button  class=&quot;btn btn-primary btn-block submit-button&quot;&gt;</span><br><span class="line">        登&amp;nbsp;&amp;nbsp;录</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;checkbox&quot;&gt;</span><br><span class="line">        &lt;label&gt;</span><br><span class="line">          &lt;input type=&quot;checkbox&quot; class=&quot;remember&quot; v-model=&quot;remember&quot;&gt; 记住密码</span><br><span class="line">        &lt;/label&gt;</span><br><span class="line">        &lt;div class=&quot;pull-right&quot;&gt;</span><br><span class="line">          &lt;a href=&quot;javascript:;&quot; v-on:click=&quot;toForgetDiv()&quot;&gt;忘记密码&lt;/a&gt;&amp;nbsp;</span><br><span class="line">          &lt;a href=&quot;javascript:;&quot; v-on:click=&quot;toRegisterDiv()&quot;&gt;我要注册&lt;/a&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;form-group to-register-div&quot;&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  //////////////////////////////////////////////////修改下注册的div和我要登陆那增加事件</span><br><span class="line">  &lt;div class=&quot;register-div&quot; v-show=&quot;MODAL_STATUS === STATUS_REGISTER&quot; &gt;</span><br><span class="line">  &lt;div class=&quot;form-group to-login-div&quot;&gt;</span><br><span class="line">      &lt;a href=&quot;javascript:;&quot; v-on:click=&quot;toLoginDiv()&quot;&gt;我要登录&lt;/a&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  </span><br><span class="line">  ////////////////////////////////////////////////////////////////增加忘记密码</span><br><span class="line">            &lt;div class=&quot;forget-div&quot; v-show=&quot;MODAL_STATUS === STATUS_FORGET&quot;&gt;</span><br><span class="line">              &lt;h3&gt;忘记密码&lt;/h3&gt;</span><br><span class="line">              &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">                &lt;input id=&quot;forget-mobile&quot; v-model=&quot;memberForget.mobile&quot;</span><br><span class="line">                       class=&quot;form-control&quot; placeholder=&quot;手机号&quot;&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;input-group&quot;&gt;</span><br><span class="line">                  &lt;input id=&quot;forget-mobile-code&quot; class=&quot;form-control&quot;</span><br><span class="line">                         placeholder=&quot;手机验证码&quot; v-model=&quot;memberForget.smsCode&quot;&gt;</span><br><span class="line">                  &lt;div class=&quot;input-group-append&quot;&gt;</span><br><span class="line">                    &lt;button class=&quot;btn btn-outline-secondary&quot; id=&quot;forget-send-code-btn&quot;&gt;</span><br><span class="line">                      发送验证码</span><br><span class="line">                    &lt;/button&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">                &lt;input id=&quot;forget-password&quot; v-model=&quot;memberForget.passwordOriginal&quot;</span><br><span class="line">                       class=&quot;form-control&quot; placeholder=&quot;密码&quot; type=&quot;password&quot;&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">                &lt;input id=&quot;forget-confirm-password&quot; v-model=&quot;memberForget.confirm&quot;</span><br><span class="line">                       class=&quot;form-control&quot; placeholder=&quot;确认密码&quot; type=&quot;password&quot;&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">                &lt;button  class=&quot;btn btn-primary btn-block submit-button&quot;&gt;</span><br><span class="line">                  重&amp;nbsp;&amp;nbsp;置</span><br><span class="line">                &lt;/button&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;form-group to-login-div&quot;&gt;</span><br><span class="line">                &lt;a href=&quot;javascript:;&quot; v-on:click=&quot;toLoginDiv()&quot;&gt;我要登录&lt;/a&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">  ///////////////////////////////////////////////////data中增加</span><br><span class="line">      data: function () &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        // 模态框内容切换：登录、注册、忘记密码</span><br><span class="line">        STATUS_LOGIN: &quot;STATUS_LOGIN&quot;,</span><br><span class="line">        STATUS_REGISTER: &quot;STATUS_REGISTER&quot;,</span><br><span class="line">        STATUS_FORGET: &quot;STATUS_FORGET&quot;,</span><br><span class="line">        MODAL_STATUS: &quot;&quot;,</span><br><span class="line">  </span><br><span class="line">        member: &#123;&#125;,</span><br><span class="line">        memberForget: &#123;&#125;,</span><br><span class="line">      &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  //////////////////////////////////////////////////////////初始化时增加</span><br><span class="line">  mounted() &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      _this.toLoginDiv();</span><br><span class="line">    &#125;,</span><br><span class="line">   //////////////////////////---------------登录框、注册框、忘记密码框切换-----------------</span><br><span class="line">      toLoginDiv() &#123;</span><br><span class="line">        let _this = this;</span><br><span class="line">        _this.MODAL_STATUS = _this.STATUS_LOGIN</span><br><span class="line">      &#125;,</span><br><span class="line">      toRegisterDiv() &#123;</span><br><span class="line">        let _this = this;</span><br><span class="line">        _this.MODAL_STATUS = _this.STATUS_REGISTER</span><br><span class="line">      &#125;,</span><br><span class="line">      toForgetDiv() &#123;</span><br><span class="line">        let _this = this;</span><br><span class="line">        _this.MODAL_STATUS = _this.STATUS_FORGET</span><br><span class="line">      &#125;,</span><br></pre></td></tr></table></figure>

<p><strong>增加登录验证码功能</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.会员登录注册功能开发·登录框显示验证码</span><br></pre></td></tr></table></figure>

<ul>
<li><p>在business&#x2F;web下拷贝复制过来的KaptchaController</p>
</li>
<li><p>&#96;&#96;&#96;java<br>package com.course.business.controller.web;</p>
<p>import com.google.code.kaptcha.impl.DefaultKaptcha;<br>import org.springframework.beans.factory.annotation.Autowired;<br>import org.springframework.beans.factory.annotation.Qualifier;<br>import org.springframework.data.redis.core.RedisTemplate;<br>import org.springframework.web.bind.annotation.GetMapping;<br>import org.springframework.web.bind.annotation.PathVariable;<br>import org.springframework.web.bind.annotation.RequestMapping;<br>import org.springframework.web.bind.annotation.RestController;</p>
<p>import javax.annotation.Resource;<br>import javax.imageio.ImageIO;<br>import javax.servlet.ServletOutputStream;<br>import javax.servlet.http.HttpServletRequest;<br>import javax.servlet.http.HttpServletResponse;<br>import java.awt.image.BufferedImage;<br>import java.io.ByteArrayOutputStream;<br>import java.util.concurrent.TimeUnit;</p>
<p>@RestController<br>@RequestMapping(“&#x2F;web&#x2F;kaptcha”)<br>public class KaptchaController {</p>
<pre><code>@Qualifier(&quot;getDefaultKaptcha&quot;)
@Autowired
DefaultKaptcha defaultKaptcha;

@Resource
public RedisTemplate redisTemplate;

@GetMapping(&quot;/image-code/&#123;imageCodeToken&#125;&quot;)
public void imageCode(@PathVariable(value = &quot;imageCodeToken&quot;) String imageCodeToken, HttpServletRequest request, HttpServletResponse httpServletResponse) throws Exception&#123;
    ByteArrayOutputStream jpegOutputStream = new ByteArrayOutputStream();
    try &#123;
        // 生成验证码字符串
        String createText = defaultKaptcha.createText();

        // 将生成的验证码放入会话缓存中，后续验证的时候用到
</code></pre>
<p>&#x2F;&#x2F;             request.getSession().setAttribute(imageCodeToken, createText);<br>        &#x2F;&#x2F;将生成的验证码放入redis缓存中后续验证的时候用到<br>        redisTemplate.opsForValue().set(imageCodeToken,createText,300, TimeUnit.SECONDS);<br>        &#x2F;&#x2F; 使用验证码字符串生成验证码图片<br>        BufferedImage challenge &#x3D; defaultKaptcha.createImage(createText);<br>        ImageIO.write(challenge, “jpg”, jpegOutputStream);<br>    } catch (IllegalArgumentException e) {<br>        httpServletResponse.sendError(HttpServletResponse.SC_NOT_FOUND);<br>        return;<br>    }<br><br>    &#x2F;&#x2F; 定义response输出类型为image&#x2F;jpeg类型，使用response输出流输出图片的byte数组<br>    byte[] captchaChallengeAsJpeg &#x3D; jpegOutputStream.toByteArray();<br>    httpServletResponse.setHeader(“Cache-Control”, “no-store”);<br>    httpServletResponse.setHeader(“Pragma”, “no-cache”);<br>    httpServletResponse.setDateHeader(“Expires”, 0);<br>    httpServletResponse.setContentType(“image&#x2F;jpeg”);<br>    ServletOutputStream responseOutputStream &#x3D; httpServletResponse.getOutputStream();<br>    responseOutputStream.write(captchaChallengeAsJpeg);<br>    responseOutputStream.flush();<br>    responseOutputStream.close();<br>}<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 接下来修改login.vue</span><br><span class="line"></span><br><span class="line">- ```vue</span><br><span class="line">  //////////////////////////////////////////////////////////////////////////增加刷新验证码功能</span><br><span class="line">  toLoginDiv() &#123;</span><br><span class="line">    //显示登录框时就刷新一次验证码</span><br><span class="line">    _this.loadImageCode();</span><br><span class="line">  &#125;,</span><br><span class="line">  ///////////////////////////////////////////////////////////////////////////</span><br><span class="line">    /**</span><br><span class="line">       * 加载图形验证码</span><br><span class="line">       */</span><br><span class="line">      loadImageCode: function () &#123;</span><br><span class="line">        let _this = this;</span><br><span class="line">        _this.imageCodeToken = Tool.uuid(8);</span><br><span class="line">        $(&#x27;#image-code&#x27;).attr(&#x27;src&#x27;, process.env.VUE_APP_SERVER + &#x27;/business/web/kaptcha/image-code/&#x27; + _this.imageCodeToken);</span><br><span class="line">      &#125;,</span><br><span class="line">  </span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2.会员登录注册功能开发，增加登录功能，包含图片验证码，将控台用户登录功能相关代码拷贝到会员登录，并将user替换成member</span><br></pre></td></tr></table></figure>

<ul>
<li><p>直接将admin的local-storage和session-storage拷贝到web。记得引入</p>
</li>
<li><pre><code class="js">LOCAL_KEY_REMEMBER_MEMBER = &quot;LOCAL_KEY_REMEMBER_MEMBER&quot;; // 记住我
LocalStorage = &#123;
    get: function (key) &#123;
        let v = localStorage.getItem(key);
        if (v &amp;&amp; typeof(v) !== &quot;undefined&quot; &amp;&amp; v !== &quot;undefined&quot;) &#123;
            return JSON.parse(v);
        &#125;
    &#125;,
    set: function (key, data) &#123;
        localStorage.setItem(key, JSON.stringify(data));
    &#125;,
    remove: function (key) &#123;
        localStorage.removeItem(key);
    &#125;,
    clearAll: function () &#123;
        localStorage.clear();
    &#125;
&#125;;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ```js</span><br><span class="line">  SESSION_KEY_LOGIN_MEMBER = &quot;SESSION_KEY_LOGIN_MEMBER&quot;; // 登录信息</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  SessionStorage = &#123;</span><br><span class="line">      get: function (key) &#123;</span><br><span class="line">          let v = sessionStorage.getItem(key);</span><br><span class="line">          if (v &amp;&amp; typeof(v) !== &quot;undefined&quot; &amp;&amp; v !== &quot;undefined&quot;) &#123;</span><br><span class="line">              return JSON.parse(v);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      set: function (key, data) &#123;</span><br><span class="line">          sessionStorage.setItem(key, JSON.stringify(data));</span><br><span class="line">      &#125;,</span><br><span class="line">      remove: function (key) &#123;</span><br><span class="line">          sessionStorage.removeItem(key);</span><br><span class="line">      &#125;,</span><br><span class="line">      clearAll: function () &#123;</span><br><span class="line">          sessionStorage.clear();</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>接下来修改tool.js，将User改为Member</p>
</li>
<li><pre><code class="js">/**
 * 保存登录信息
 * @param loginUser
 */
setLoginMember:function (loginMember)&#123;
    SessionStorage.set(SESSION_KEY_LOGIN_MEMBER,loginMember);
&#125;,
/**
 * 获取登录信息
 * @param loginUser
 * @returns &#123;any|&#123;&#125;&#125;
 */
getLoginMember:function ()&#123;
    return SessionStorage.get(SESSION_KEY_LOGIN_MEMBER) ||&#123;&#125;;
&#125;,
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 然后修改index.vue</span><br><span class="line"></span><br><span class="line">- ```vue</span><br><span class="line">  //增加点击事件</span><br><span class="line">  &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">    &lt;button v-on:click=&quot;login()&quot; class=&quot;btn btn-primary btn-block submit-button&quot;&gt;</span><br><span class="line">      登&amp;nbsp;&amp;nbsp;录</span><br><span class="line">    &lt;/button&gt;</span><br><span class="line">  //增加方法</span><br><span class="line">  //---------------登录框-----------------</span><br><span class="line">      login () &#123;</span><br><span class="line">        let _this = this;</span><br><span class="line">  </span><br><span class="line">        // 如果密码是从缓存带出来的，则不需要重新加密</span><br><span class="line">        let md5 = hex_md5(_this.member.password);</span><br><span class="line">        let rememberMember = LocalStorage.get(LOCAL_KEY_REMEMBER_MEMBER) || &#123;&#125;;</span><br><span class="line">        if (md5 !== rememberMember.md5) &#123;</span><br><span class="line">          _this.member.password = hex_md5(_this.member.password + KEY);</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        _this.member.imageCodeToken = _this.imageCodeToken;</span><br><span class="line">  </span><br><span class="line">        _this.$ajax.post(process.env.VUE_APP_SERVER + &#x27;/business/web/member/login&#x27;, _this.member).then((response)=&gt;&#123;</span><br><span class="line">          let resp = response.data;</span><br><span class="line">          if (resp.success) &#123;</span><br><span class="line">            console.log(&quot;登录成功：&quot;, resp.content);</span><br><span class="line">            let loginMember = resp.content;</span><br><span class="line">            Tool.setLoginMember(resp.content);</span><br><span class="line">  </span><br><span class="line">            // 判断“记住我”</span><br><span class="line">            if (_this.remember) &#123;</span><br><span class="line">              // 如果勾选记住我，则将用户名密码保存到本地缓存</span><br><span class="line">              // 这里保存密码密文，并保存密文md5，用于检测密码是否被重新输入过</span><br><span class="line">              let md5 = hex_md5(_this.member.password);</span><br><span class="line">              LocalStorage.set(LOCAL_KEY_REMEMBER_MEMBER, &#123;</span><br><span class="line">                mobile: loginMember.mobile,</span><br><span class="line">                password: _this.member.password,</span><br><span class="line">                md5: md5</span><br><span class="line">              &#125;);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">              // 没有勾选“记住我”时，要把本地缓存清空，否则下次显示登录框时会自动显示用户名密码</span><br><span class="line">              LocalStorage.set(LOCAL_KEY_REMEMBER_MEMBER, null);</span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">            // 登录成功 TODO</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">          &#125; else &#123;</span><br><span class="line">            Toast.warning(resp.message);</span><br><span class="line">            _this.member.password = &quot;&quot;;</span><br><span class="line">            _this.loadImageCode();</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;,</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>接下来我们看后端，修改business.controller的ControllerExceptionHandler增加统一业务异常处理</p>
</li>
<li><pre><code class="java">@ExceptionHandler(value = BusinessException.class)
@ResponseBody
public ResponseDto businessExceptionHandler(BusinessException e) &#123;
    ResponseDto responseDto = new ResponseDto();
    responseDto.setSuccess(false);
    LOG.error(&quot;业务异常：&#123;&#125;&quot;, e.getCode().getDesc());
    responseDto.setMessage(e.getCode().getDesc());
    return responseDto;
&#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 然后我们修改business.controller.web.MemberController</span><br><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  ////////////////////////////////////////////////////注入</span><br><span class="line">  @Resource(name = &quot;redisTemplate&quot;)</span><br><span class="line">  private RedisTemplate redisTemplate;</span><br><span class="line">  //////////////////////////////////////////////////////</span><br><span class="line">  /**</span><br><span class="line">       * 登录</span><br><span class="line">       */</span><br><span class="line">      @PostMapping(&quot;/login&quot;)</span><br><span class="line">      public ResponseDto login(@RequestBody MemberDto memberDto) &#123;</span><br><span class="line">          LOG.info(&quot;用户登录开始&quot;);</span><br><span class="line">          memberDto.setPassword(DigestUtils.md5DigestAsHex(memberDto.getPassword().getBytes()));</span><br><span class="line">          ResponseDto responseDto = new ResponseDto();</span><br><span class="line">  </span><br><span class="line">          // 根据验证码token去获取缓存中的验证码，和用户输入的验证码是否一致</span><br><span class="line">          String imageCode = (String) redisTemplate.opsForValue().get(memberDto.getImageCodeToken());</span><br><span class="line">          LOG.info(&quot;从redis中获取到的验证码：&#123;&#125;&quot;, imageCode);</span><br><span class="line">          if (StringUtils.isEmpty(imageCode)) &#123;</span><br><span class="line">              responseDto.setSuccess(false);</span><br><span class="line">              responseDto.setMessage(&quot;验证码已过期&quot;);</span><br><span class="line">              LOG.info(&quot;用户登录失败，验证码已过期&quot;);</span><br><span class="line">              return responseDto;</span><br><span class="line">          &#125;</span><br><span class="line">          if (!imageCode.toLowerCase().equals(memberDto.getImageCode().toLowerCase())) &#123;</span><br><span class="line">              responseDto.setSuccess(false);</span><br><span class="line">              responseDto.setMessage(&quot;验证码不对&quot;);</span><br><span class="line">              LOG.info(&quot;用户登录失败，验证码不对&quot;);</span><br><span class="line">              return responseDto;</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">              // 验证通过后，移除验证码</span><br><span class="line">              redisTemplate.delete(memberDto.getImageCodeToken());</span><br><span class="line">          &#125;</span><br><span class="line">  </span><br><span class="line">          LoginMemberDto loginMemberDto = memberService.login(memberDto);</span><br><span class="line">          String token = UuidUtil.getShortUuid();</span><br><span class="line">          loginMemberDto.setToken(token);</span><br><span class="line">          redisTemplate.opsForValue().set(token, JSON.toJSONString(loginMemberDto), 3600, TimeUnit.SECONDS);</span><br><span class="line">          responseDto.setContent(loginMemberDto);</span><br><span class="line">          return responseDto;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>然后我们在server.dto增加LoginMemberDto。控台保存登录用户信息用的是LoginUserDto，网站保存会员信息用的是LoginMemberDto</p>
</li>
<li><pre><code class="java">package com.course.server.dto;

public class LoginMemberDto &#123;

    private String id;

    private String mobile;

    private String name;

    private String token;

    private String photo;

    public String getId() &#123;
        return id;
    &#125;

    public void setId(String id) &#123;
        this.id = id;
    &#125;

    public String getName() &#123;
        return name;
    &#125;

    public void setName(String name) &#123;
        this.name = name;
    &#125;

    public String getMobile() &#123;
        return mobile;
    &#125;

    public void setMobile(String mobile) &#123;
        this.mobile = mobile;
    &#125;

    public String getToken() &#123;
        return token;
    &#125;

    public void setToken(String token) &#123;
        this.token = token;
    &#125;

    public String getPhoto() &#123;
        return photo;
    &#125;

    public void setPhoto(String photo) &#123;
        this.photo = photo;
    &#125;

    @Override
    public String toString() &#123;
        final StringBuffer sb = new StringBuffer(&quot;LoginMemberDto&#123;&quot;);
        sb.append(&quot;id=&#39;&quot;).append(id).append(&#39;\&#39;&#39;);
        sb.append(&quot;, name=&#39;&quot;).append(name).append(&#39;\&#39;&#39;);
        sb.append(&quot;, mobile=&#39;&quot;).append(mobile).append(&#39;\&#39;&#39;);
        sb.append(&quot;, token=&#39;&quot;).append(token).append(&#39;\&#39;&#39;);
        sb.append(&quot;, photo=&#39;&quot;).append(photo).append(&#39;\&#39;&#39;);
        sb.append(&#39;&#125;&#39;);
        return sb.toString();
    &#125;
&#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 接下来给server.dto的MemberDto增加两个字段</span><br><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  /**</span><br><span class="line">   * 图片验证码</span><br><span class="line">   */</span><br><span class="line">  private String imageCode;</span><br><span class="line">  </span><br><span class="line">  /**</span><br><span class="line">   * 图片验证码token</span><br><span class="line">   */</span><br><span class="line">  private String imageCodeToken;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>然后我们修改server.exception中的BusinessExceptionCode</p>
</li>
<li><pre><code class="java">//两个字段
LOGIN_USER_ERROR(&quot;用户名或密码错误&quot;),
LOGIN_MEMBER_ERROR(&quot;手机号不存在或密码错误&quot;),
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 修改MemberService，登录的时候要验证这个手机号是不是存在；控台验证时需要验证登录名是否存在，原理一样</span><br><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  /**</span><br><span class="line">   * 按手机号查找</span><br><span class="line">   * @param mobile</span><br><span class="line">   * @return</span><br><span class="line">   */</span><br><span class="line">  public Member selectByMobile(String mobile) &#123;</span><br><span class="line">      if (StringUtils.isEmpty(mobile)) &#123;</span><br><span class="line">          return null;</span><br><span class="line">      &#125;</span><br><span class="line">      MemberExample example = new MemberExample();</span><br><span class="line">      example.createCriteria().andMobileEqualTo(mobile);</span><br><span class="line">      List&lt;Member&gt; memberList = memberMapper.selectByExample(example);</span><br><span class="line">      if (memberList == null || memberList.size() == 0) &#123;</span><br><span class="line">          return null;</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">          return memberList.get(0);</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">  &#125;</span><br><span class="line">  /**</span><br><span class="line">   * 登录</span><br><span class="line">   * @param memberDto</span><br><span class="line">   */</span><br><span class="line">  public LoginMemberDto login(MemberDto memberDto) &#123;</span><br><span class="line">      Member member = selectByMobile(memberDto.getMobile());</span><br><span class="line">      if (member == null) &#123;</span><br><span class="line">          LOG.info(&quot;手机号不存在, &#123;&#125;&quot;, memberDto.getMobile());</span><br><span class="line">          throw new BusinessException(BusinessExceptionCode.LOGIN_MEMBER_ERROR);</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">          if (member.getPassword().equals(memberDto.getPassword())) &#123;</span><br><span class="line">              // 登录成功</span><br><span class="line">              LoginMemberDto loginMemberDto = CopyUtil.copy(member, LoginMemberDto.class);</span><br><span class="line">              return loginMemberDto;</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">              LOG.info(&quot;密码不对, 输入密码：&#123;&#125;, 数据库密码：&#123;&#125;&quot;, memberDto.getPassword(), member.getPassword());</span><br><span class="line">              throw new BusinessException(BusinessExceptionCode.LOGIN_MEMBER_ERROR);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>修改UserService，因为把之前的BusinessExceptionCode中的字段修改了，所以也要把这里的字段也修改</p>
</li>
<li><p>我们还给system.controller的ControllerExceptionHandler增加校验异常</p>
</li>
<li><p>&#96;&#96;&#96;java<br>@ExceptionHandler(value &#x3D; ValidatorException.class)<br>@ResponseBody<br>public ResponseDto validatorExceptionHandler(ValidatorException e) {<br>ResponseDto responseDto &#x3D; new ResponseDto();<br>responseDto.setSuccess(false);<br>LOG.warn(e.getMessage());<br>responseDto.setMessage(“请求参数异常！”);<br>return responseDto;<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<p>2.会员登录注册功能开发，完善【记住我】功能，会员登录名是mobile，不是loginName</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 修改login.vue</span><br><span class="line"></span><br><span class="line">- ```vue</span><br><span class="line">  //toLoginDiv中增加下面代码</span><br><span class="line">  toLoginDiv() &#123;</span><br><span class="line">    // 从缓存中获取记住的用户名密码，如果获取不到，说明上一次没有勾选“记住我”</span><br><span class="line">    let rememberMember = LocalStorage.get(LOCAL_KEY_REMEMBER_MEMBER);</span><br><span class="line">    if (rememberMember) &#123;</span><br><span class="line">      _this.member = rememberMember;</span><br><span class="line">    &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3.会员登录注册功能开发，登录成功后，头部导航显示会员昵称</span><br></pre></td></tr></table></figure>

<ul>
<li><p>首先修改the-header.vue</p>
</li>
<li><p>&#96;&#96;&#96;vue<br>&#x2F;&#x2F;显示昵称<br><span v-show="loginMember.id" class="text-white pr-3">您好：</span><br>&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;增加<br>data: function () {<br>  return {<br>    loginMember: {}<br>  }<br>},<br>mounted() {<br>  let _this &#x3D; this;<br>  _this.loginMember &#x3D; Tool.getLoginMember();<br>},<br>&#x2F;&#x2F;设置方法<br> setLoginMember(loginMember) {<br>    let _this &#x3D; this;<br>    _this.loginMember &#x3D; loginMember;<br>  },</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 接下来使用setLoginMember方法在login.vue</span><br><span class="line"></span><br><span class="line">- ```</span><br><span class="line">  // 登录成功，在子组件里调用父组件的xxx方法，可以使用this.$parent.xxx</span><br><span class="line">  _this.$parent.setLoginMember(loginMember);</span><br><span class="line">  $(&quot;#login-modal&quot;).modal(&quot;hide&quot;);</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4.会员登录注册功能开发，增加退出登录功能</span><br></pre></td></tr></table></figure>

<ul>
<li><p>我们先给business.controller.web的MemberController增加退出登录方法</p>
</li>
<li><p>&#96;&#96;&#96;java<br>&#x2F;**</p>
<ul>
<li>退出登录</li>
</ul>
<p> *&#x2F;<br>@GetMapping(“&#x2F;logout&#x2F;{token}”)<br>public ResponseDto logout(@PathVariable String token) {<br>    ResponseDto responseDto &#x3D; new ResponseDto();<br>    redisTemplate.delete(token);<br>    LOG.info(“从redis中删除token:{}”, token);<br>    return responseDto;<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 然后我们在修改the-header</span><br><span class="line"></span><br><span class="line">- ```vue</span><br><span class="line">  //退出登录和登录是互斥的</span><br><span class="line">  &lt;span v-show=&quot;loginMember.id&quot; class=&quot;text-white pr-3&quot;&gt;您好：&#123;&#123;loginMember.name&#125;&#125;&lt;/span&gt;</span><br><span class="line">  &lt;button v-show=&quot;loginMember.id&quot; v-on:click=&quot;logout()&quot; class=&quot;btn btn-outline-light my-2 my-sm-0&quot;&gt;退出登录&lt;/button&gt;</span><br><span class="line">  &lt;button v-show=&quot;!loginMember.id&quot; v-on:click=&quot;openLoginModal()&quot; class=&quot;btn btn-outline-light my-2 my-sm-0&quot;&gt;登录/注册&lt;/button&gt;</span><br><span class="line">  //增加退出方法</span><br><span class="line">  logout () &#123;</span><br><span class="line">          let _this = this;</span><br><span class="line">          _this.$ajax.get(process.env.VUE_APP_SERVER + &#x27;/business/web/member/logout/&#x27; + _this.loginMember.token).then((response)=&gt;&#123;</span><br><span class="line">            let resp = response.data;</span><br><span class="line">            if (resp.success) &#123;</span><br><span class="line">              Tool.setLoginMember(null);</span><br><span class="line">              _this.loginMember = &#123;&#125;;</span><br><span class="line">              Toast.success(&quot;退出登录成功&quot;);</span><br><span class="line">              _this.$router.push(&quot;/&quot;);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">              Toast.warning(resp.message);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;,</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="13-11-增加发送短信验证码功能"><a href="#13-11-增加发送短信验证码功能" class="headerlink" title="13-11 增加发送短信验证码功能"></a>13-11 增加发送短信验证码功能</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.会员登录注册功能开发，增加短信管理，生成代码后需要配置资源权限</span><br></pre></td></tr></table></figure>

<ul>
<li><p>首先增加sql</p>
</li>
<li><pre><code class="sql"># 短信验证码
drop table if exists `sms`;
create table `sms`(
                       `id` char(8) not null default &#39;&#39; comment &#39;id&#39;,
                       `mobile` varchar(50) not null comment &#39;手机号&#39;,
                       `code` char(6) not null comment &#39;验证码&#39;,
                       `use` char(1)  not null comment &#39;用途|枚举[SmsUseEnum]:REGISTER(&quot;R&quot;,&quot;注册&quot;),FORGET(&quot;F&quot;,&quot;忘记密码&quot;)&#39;,
                       `at` datetime(3)  comment &#39;生成时间&#39;,
                       `status` char(1)  not null comment &#39;状态|枚举[SmsStatusEnum]:USED(&quot;U&quot;,&quot;已使用&quot;),NOT_USED(&quot;N&quot;,&quot;未使用&quot;)&#39;,
                       primary key (`id`)
)engine =innodb default charset=utf8mb4 comment=&#39;短信验证码&#39;;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 然后我们给server.enums增加两个枚举SmsUseEnum和SmsStatusEnum</span><br><span class="line"></span><br><span class="line">- </span><br><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  package com.course.server.enums;</span><br><span class="line">  </span><br><span class="line">  public enum SmsUseEnum &#123;</span><br><span class="line">  </span><br><span class="line">      REGISTER(&quot;R&quot;, &quot;注册&quot;),</span><br><span class="line">      FORGET(&quot;F&quot;, &quot;忘记密码&quot;);</span><br><span class="line">  </span><br><span class="line">      private String code;</span><br><span class="line">  </span><br><span class="line">      private String desc;</span><br><span class="line">  </span><br><span class="line">      SmsUseEnum(String code, String desc) &#123;</span><br><span class="line">          this.code = code;</span><br><span class="line">          this.desc = desc;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      public String getCode() &#123;</span><br><span class="line">          return code;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      public void setCode(String code) &#123;</span><br><span class="line">          this.code = code;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      public void setDesc(String desc) &#123;</span><br><span class="line">          this.desc = desc;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      public String getDesc() &#123;</span><br><span class="line">          return desc;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><pre><code class="java">package com.course.server.enums;

public enum SmsStatusEnum &#123;

    USED(&quot;U&quot;, &quot;已使用&quot;),
    NOT_USED(&quot;N&quot;, &quot;未使用&quot;);

    private String code;

    private String desc;

    SmsStatusEnum(String code, String desc) &#123;
        this.code = code;
        this.desc = desc;
    &#125;

    public String getCode() &#123;
        return code;
    &#125;

    public void setCode(String code) &#123;
        this.code = code;
    &#125;

    public void setDesc(String desc) &#123;
        this.desc = desc;
    &#125;

    public String getDesc() &#123;
        return desc;
    &#125;
&#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 然后我们经过各种代码生成器，对了还要改下EnumGenerator到admin，在增加以下代码</span><br><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  toJson(SmsUseEnum.class, bufferObject, bufferArray);</span><br><span class="line">  toJson(SmsStatusEnum.class, bufferObject, bufferArray);</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>然后我们在admin.vue增加菜单</p>
</li>
<li><pre><code class="vue">&lt;/li&gt; &lt;li v-show=&quot;hasResource(&#39;0205&#39;)&quot; class=&quot;&quot; id=&quot;business-sms-sidebar&quot;&gt;
  &lt;router-link to=&quot;/business/sms&quot;&gt;
    &lt;i class=&quot;menu-icon fa fa-caret-right&quot;&gt;&lt;/i&gt;
    短信管理
  &lt;/router-link&gt;
  &lt;b class=&quot;arrow&quot;&gt;&lt;/b&gt;
&lt;/li&gt;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 接下来增加路由</span><br><span class="line"></span><br><span class="line">- ```js</span><br><span class="line">  ,&#123;</span><br><span class="line">      path: &quot;business/sms&quot;,</span><br><span class="line">      name:&quot;business/sms&quot;,</span><br><span class="line">      component: Sms,</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>当然resource.json也要加资源</p>
</li>
<li><p>&#96;&#96;&#96;json<br>,{<br>  “id”:”0205”,”name”:”短信管理”,”page”:”business&#x2F;sms”,<br>  “children”:[<br>{“id”:”020501”,”name”:”增删改查”,”request”:[“&#x2F;business&#x2F;admin&#x2F;sms”]}<br>  ]<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<p>2.会员登录注册功能开发，短信管理只能查看</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 就是前端后端删删删</span><br><span class="line"></span><br><span class="line">**增加发送验证码功能**</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>1.会员登录注册功能开发，增加发送短信验证码功能，同手机号同操作1分钟内不能重复发送短信</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 一分钟内发送一次注册验证码和忘记密码验证码，是可以的。但是发两次注册验证码或者忘记密码验证码，是不可以的。</span><br><span class="line"></span><br><span class="line">- 我们首先给business.controller.web新建一个SmsController</span><br><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  package com.course.business.controller.web;</span><br><span class="line">  </span><br><span class="line">  import com.course.server.dto.ResponseDto;</span><br><span class="line">  import com.course.server.dto.SmsDto;</span><br><span class="line">  import com.course.server.service.SmsService;</span><br><span class="line">  import org.slf4j.Logger;</span><br><span class="line">  import org.slf4j.LoggerFactory;</span><br><span class="line">  import org.springframework.web.bind.annotation.RequestBody;</span><br><span class="line">  import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">  import org.springframework.web.bind.annotation.RequestMethod;</span><br><span class="line">  import org.springframework.web.bind.annotation.RestController;</span><br><span class="line">  </span><br><span class="line">  import javax.annotation.Resource;</span><br><span class="line">  </span><br><span class="line">  @RestController(&quot;webSmsController&quot;)</span><br><span class="line">  @RequestMapping(&quot;/web/sms&quot;)</span><br><span class="line">  public class SmsController &#123;</span><br><span class="line">  </span><br><span class="line">      private static final Logger LOG = LoggerFactory.getLogger(SmsController.class);</span><br><span class="line">      public static final String BUSINESS_NAME = &quot;短信验证码&quot;;</span><br><span class="line">  </span><br><span class="line">      @Resource</span><br><span class="line">      private SmsService smsService;</span><br><span class="line">  </span><br><span class="line">      @RequestMapping(value = &quot;/send&quot;, method = RequestMethod.POST)</span><br><span class="line">      public ResponseDto send(@RequestBody SmsDto smsDto) &#123;</span><br><span class="line">          LOG.info(&quot;发送短信请求开始: &#123;&#125;&quot;, smsDto);</span><br><span class="line">          ResponseDto responseDto = new ResponseDto();</span><br><span class="line">          smsService.sendCode(smsDto);</span><br><span class="line">          LOG.info(&quot;发送短信请求结束&quot;);</span><br><span class="line">          return responseDto;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>然后在smsService中增加方法</p>
</li>
<li><pre><code class="java">/**
 * 发送短信验证码
 * 同手机号同操作1分钟内不能重复发送短信
 * @param smsDto
 */
public void sendCode(SmsDto smsDto) &#123;
    SmsExample example = new SmsExample();
    SmsExample.Criteria criteria = example.createCriteria();
    // 查找1分钟内有没有同手机号同操作发送记录且没被用过
    criteria.andMobileEqualTo(smsDto.getMobile())
            .andUseEqualTo(smsDto.getUse())
            .andStatusEqualTo(SmsStatusEnum.NOT_USED.getCode())
            .andAtGreaterThan(new Date(new Date().getTime() - 1 * 60 * 1000));
    List&lt;Sms&gt; smsList = smsMapper.selectByExample(example);

    if (smsList == null || smsList.size() == 0) &#123;
        saveAndSend(smsDto);
    &#125; else &#123;
        LOG.warn(&quot;短信请求过于频繁, &#123;&#125;&quot;, smsDto.getMobile());
        throw new BusinessException(BusinessExceptionCode.MOBILE_CODE_TOO_FREQUENT);
    &#125;
&#125;
/**
 * 保存并发送短信验证码
 * @param smsDto
 */
private void saveAndSend(SmsDto smsDto) &#123;
    // 生成6位数字
    String code = String.valueOf((int)(((Math.random() * 9) + 1) * 100000));
    smsDto.setAt(new Date());
    smsDto.setStatus(SmsStatusEnum.NOT_USED.getCode());
    smsDto.setCode(code);
    this.save(smsDto);

    // TODO 调第三方短信接口发送短信
&#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 短信验证码可以接阿里云短信服务，在阿里云控台配置短信模板，然后再代码里配置模板id，再调用阿里云jar包里的发送短信方法就可以了，收费是0.045元/条。</span><br><span class="line"></span><br><span class="line">- 给BusinessExceptionCode增加一个</span><br><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  MOBILE_CODE_TOO_FREQUENT(&quot;短信请求过于平凡&quot;),</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>最后修改login.vue，增加两个方法</p>
</li>
<li><p>&#96;&#96;&#96;vue<br>&#x2F;**</p>
<ul>
<li>发送注册短信</li>
</ul>
<p> *&#x2F;<br>sendSmsForRegister() {<br>  let _this &#x3D; this;</p>
<p>  let sms &#x3D; {<br>    mobile: _this.memberRegister.mobile,<br>    use: SMS_USE.REGISTER.key<br>  };<br>      &#x2F;&#x2F; 调服务端发送短信接口<br>      _this.sendSmsCode(sms);<br>},<br>&#x2F;**</p>
<ul>
<li>发送短信</li>
</ul>
<p> *&#x2F;<br>sendSmsCode(sms) {<br>  let _this &#x3D; this;</p>
<p>  &#x2F;&#x2F; 调服务端发短信接口<br>  _this.$ajax.post(process.env.VUE_APP_SERVER + ‘&#x2F;business&#x2F;web&#x2F;sms&#x2F;send’, sms).then((res)&#x3D;&gt; {<br>    let response &#x3D; res.data;<br>    if (response.success) {<br>      Toast.success(“短信已发送”);</p>
<pre><code>&#125; else &#123;
  Toast.warning(response.message);
&#125;
</code></pre>
<p>  })<br>},</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<p>2.会员登录注册功能开发，增加发送短信验证码倒计时功能，可修改countdown参数进行调试</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 点击发送按钮后，按钮变成不可点击，且显示倒计时</span><br><span class="line"></span><br><span class="line">- 修改login.vue</span><br><span class="line"></span><br><span class="line">- ```vue</span><br><span class="line">  //修改参数，增加id参数</span><br><span class="line">  sendSmsForRegister() &#123;</span><br><span class="line">        // 调服务端发送短信接口</span><br><span class="line">    _this.sendSmsCode(sms, &quot;register-send-code-btn&quot;);</span><br><span class="line">  &#125;,</span><br><span class="line">  /////////////////////////////////////////////////////////////发送成功时调用倒计时</span><br><span class="line">   /**</span><br><span class="line">       * 发送短信</span><br><span class="line">       */</span><br><span class="line">      sendSmsCode(sms, btnId) &#123;//增加参数</span><br><span class="line">     </span><br><span class="line">          if (response.success) &#123;</span><br><span class="line">            // 开始倒计时</span><br><span class="line">            _this.countdown = 60;</span><br><span class="line">            _this.setTime(btnId);</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">  ////////////////////////////////////////////////////////////////增加倒计时方法</span><br><span class="line">      /**</span><br><span class="line">       * 倒计时</span><br><span class="line">       * @param btnId</span><br><span class="line">       */</span><br><span class="line">      setTime(btnId) &#123;</span><br><span class="line">        let _this = this;</span><br><span class="line">        let btn = $(&quot;#&quot; + btnId);</span><br><span class="line">        if (_this.countdown === 0) &#123;</span><br><span class="line">          btn.removeAttr(&quot;disabled&quot;);</span><br><span class="line">          btn.text(&quot;获取验证码&quot;);</span><br><span class="line">          return;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          btn.attr(&quot;disabled&quot;, true);</span><br><span class="line">          btn.text(&quot;重新发送(&quot; + _this.countdown + &quot;)&quot;);</span><br><span class="line">          _this.countdown--;</span><br><span class="line">        &#125;</span><br><span class="line">        setTimeout(function () &#123;</span><br><span class="line">          _this.setTime(btnId);</span><br><span class="line">        &#125;, 1000);</span><br><span class="line">      &#125;,</span><br></pre></td></tr></table></figure>

<h2 id="13-12-完善登录注册校验功能"><a href="#13-12-完善登录注册校验功能" class="headerlink" title="13-12 完善登录注册校验功能"></a>13-12 完善登录注册校验功能</h2><p><strong>增加手机号后端校验</strong></p>
<ul>
<li><p>前端就修改login的sendSmsForRegister方法，增加如下：</p>
</li>
<li><pre><code>_this.$ajax.get(process.env.VUE_APP_SERVER + &#39;/business/web/member/is-mobile-exist/&#39; + _this.memberRegister.mobile).then((res)=&gt;&#123;
  let response = res.data;
  if (response.success) &#123;
    Toast.warning(&quot;手机号已被注册&quot;);
  &#125; else &#123;
    // 调服务端发送短信接口
    _this.sendSmsCode(sms, &quot;register-send-code-btn&quot;);
  &#125;
&#125;)
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 我们修改business.controller.web的MemberController，增加方法</span><br><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  /**</span><br><span class="line">   * 校验手机号是否存在</span><br><span class="line">   * 存在则success=true，不存在则success=false</span><br><span class="line">   */</span><br><span class="line">  @GetMapping(value = &quot;/is-mobile-exist/&#123;mobile&#125;&quot;)</span><br><span class="line">  public ResponseDto isMobileExist(@PathVariable(value = &quot;mobile&quot;) String mobile) throws BusinessException &#123;</span><br><span class="line">      LOG.info(&quot;查询手机号是否存在开始&quot;);</span><br><span class="line">      ResponseDto responseDto = new ResponseDto();</span><br><span class="line">      MemberDto memberDto = memberService.findByMobile(mobile);</span><br><span class="line">      if (memberDto == null) &#123;</span><br><span class="line">          responseDto.setSuccess(false);</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">          responseDto.setSuccess(true);</span><br><span class="line">      &#125;</span><br><span class="line">      return responseDto;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>对应的MemberService也增加方法</p>
</li>
<li><p>&#96;&#96;&#96;java<br>&#x2F;**</p>
<ul>
<li>按手机号查找</li>
<li>@param mobile</li>
<li>@return</li>
</ul>
<p> *&#x2F;<br>public MemberDto findByMobile(String mobile) {<br>    Member member &#x3D; this.selectByMobile(mobile);<br>    return CopyUtil.copy(member, MemberDto.class);<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**增加前端正则校验**</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<p>1.会员登录注册功能开发，注册时发送验证码前，增加手机号校验，手机号输入框失去焦点时，检验手机号<br>2.增加正则表达式校验工具类</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- Pattern里面都是一些常用的正则表达式校验，再js中加入</span><br><span class="line"></span><br><span class="line">- ```js</span><br><span class="line">  Pattern = &#123;</span><br><span class="line">    // 用户名正则，2到16位（字母，数字，下划线）</span><br><span class="line">    loginNamePattern: /^[a-zA-Z0-9_]&#123;6,16&#125;$/,</span><br><span class="line">  </span><br><span class="line">    // 昵称正则，6到20位中文，字母，数字，下划线</span><br><span class="line">    namePattern: /^[\w\u4e00-\u9fa5]&#123;2,20&#125;$/,</span><br><span class="line">  </span><br><span class="line">    // 强密码强度正则，最少8位，包括至少1个大写字母，1个小写字母，1个数字，1个特殊字符</span><br><span class="line">    passwordStrongPattern: /^.*(?=.&#123;8,&#125;)(?=.*\d)(?=.*[A-Z])(?=.*[a-z])(?=.*[!@#$%^&amp;*? ]).*$/,</span><br><span class="line">  </span><br><span class="line">    // 弱密码强度正则，最少6位，包括至少1字母，1个数字</span><br><span class="line">    passwordWeakPattern: /^.*(?=.&#123;6,&#125;)(?=.*\d)(?=.*[A-Za-z]).*$/,</span><br><span class="line">  </span><br><span class="line">    // 手机号正则，11位数字，1开头</span><br><span class="line">    mobilePattern: /^1\d&#123;10&#125;$/,</span><br><span class="line">  </span><br><span class="line">    // 图片验证码正则，4位字母，数字</span><br><span class="line">    imageCodePattern: /^[a-zA-Z0-9]&#123;4&#125;$/,</span><br><span class="line">  </span><br><span class="line">    // 手机验证码正则，6位数字</span><br><span class="line">    mobileCodePattern: /^[0-9]&#123;6&#125;$/,</span><br><span class="line">  </span><br><span class="line">    validateLoginName: function (str) &#123;</span><br><span class="line">      if (Tool.isEmpty(str)) &#123;</span><br><span class="line">        return false;</span><br><span class="line">      &#125;</span><br><span class="line">      return this.loginNamePattern.test(str);</span><br><span class="line">    &#125;,</span><br><span class="line">  </span><br><span class="line">    validateName: function (str) &#123;</span><br><span class="line">      if (Tool.isEmpty(str)) &#123;</span><br><span class="line">        return false;</span><br><span class="line">      &#125;</span><br><span class="line">      return this.namePattern.test(str);</span><br><span class="line">    &#125;,</span><br><span class="line">  </span><br><span class="line">    validatePasswordStrong: function (str) &#123;</span><br><span class="line">      if (Tool.isEmpty(str)) &#123;</span><br><span class="line">        return false;</span><br><span class="line">      &#125;</span><br><span class="line">      return this.passwordStrongPattern.test(str);</span><br><span class="line">    &#125;,</span><br><span class="line">  </span><br><span class="line">    validatePasswordWeak: function (str) &#123;</span><br><span class="line">      if (Tool.isEmpty(str)) &#123;</span><br><span class="line">        return false;</span><br><span class="line">      &#125;</span><br><span class="line">      return this.passwordWeakPattern.test(str);</span><br><span class="line">    &#125;,</span><br><span class="line">  </span><br><span class="line">    validateMobile: function (str) &#123;</span><br><span class="line">      if (Tool.isEmpty(str)) &#123;</span><br><span class="line">        return false;</span><br><span class="line">      &#125;</span><br><span class="line">      return this.mobilePattern.test(str);</span><br><span class="line">    &#125;,</span><br><span class="line">  </span><br><span class="line">    validateImageCode: function (str) &#123;</span><br><span class="line">      if (Tool.isEmpty(str)) &#123;</span><br><span class="line">        return false;</span><br><span class="line">      &#125;</span><br><span class="line">      return this.imageCodePattern.test(str);</span><br><span class="line">    &#125;,</span><br><span class="line">  </span><br><span class="line">    validateMobileCode: function (str) &#123;</span><br><span class="line">      if (Tool.isEmpty(str)) &#123;</span><br><span class="line">        return false;</span><br><span class="line">      &#125;</span><br><span class="line">      return this.mobileCodePattern.test(str);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>index中引入</p>
</li>
<li><p>&#96;&#96;&#96;html</p>
<!--正则表达式校验-->
<script src="<%= BASE_URL %>static/js/pattern.js"></script>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 最后就是修改login.vue</span><br><span class="line"></span><br><span class="line">- ```vue</span><br><span class="line">  //增加点击事件，再增加一个v-show。blur事件，当文本框失去焦点会触发blur事件</span><br><span class="line">  &lt;h3&gt;注&amp;nbsp;&amp;nbsp;册&lt;/h3&gt;</span><br><span class="line">  &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">    &lt;input  v-on:blur=&quot;onRegisterMobileBlur()&quot;</span><br><span class="line">            v-bind:class=&quot;registerMobileValidateClass&quot;</span><br><span class="line">            id=&quot;register-mobile&quot; v-model=&quot;memberRegister.mobile&quot;</span><br><span class="line">            class=&quot;form-control&quot; placeholder=&quot;手机号&quot;&gt;</span><br><span class="line">    &lt;span v-show=&quot;registerMobileValidate === false&quot; class=&quot;text-danger&quot;&gt;手机号11位数字，且不能重复&lt;/span&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  /////////////////////////////////////////////////////////再data中增加组件变量</span><br><span class="line">  // 注册框显示错误信息</span><br><span class="line">  registerMobileValidate: null,</span><br><span class="line">  ////////////////////////////////////////////computed，可以根据一个或多个组件变量，计算结果</span><br><span class="line">   computed: &#123;</span><br><span class="line">      registerMobileValidateClass: function () &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          &#x27;border-success&#x27;: this.registerMobileValidate === true,</span><br><span class="line">          &#x27;border-danger&#x27;: this.registerMobileValidate === false,</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">  //再sendSmsForRegister方法中也要校验一次</span><br><span class="line">    if (!_this.onRegisterMobileBlur()) &#123;</span><br><span class="line">          return false;</span><br><span class="line">        &#125;</span><br><span class="line">    //-------------------------------- 注册框校验 ----------------------------</span><br><span class="line">  </span><br><span class="line">      onRegisterMobileBlur () &#123;</span><br><span class="line">        let _this = this;</span><br><span class="line">        _this.registerMobileValidate = Pattern.validateMobile(_this.memberRegister.mobile);</span><br><span class="line">        return _this.registerMobileValidate;</span><br><span class="line">      &#125;,</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2.会员登录注册功能开发，完善注册输入框校验</span><br></pre></td></tr></table></figure>

<ul>
<li><p>依旧是修改login.vue</p>
</li>
<li><p>&#96;&#96;&#96;<br>&#x2F;&#x2F;每个部分都加校验<br><input v-on:blur="onRegisterMobileCodeBlur()"
   v-bind:class="registerMobileCodeValidateClass"
   id="register-mobile-code" class="form-control"
   placeholder="手机验证码" v-model="memberRegister.code"><br><span v-show="registerMobileCodeValidate === false" class="text-danger">请输入短信6位验证码</span><br>&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;<br><input  v-on:blur="onRegisterNameBlur()"
    v-bind:class="registerNameValidateClass"
    id="register-name" v-model="memberRegister.name"
    class="form-control" placeholder="昵称"><br><span v-show="registerNameValidate === false" class="text-danger">昵称2到20位中文，字母，数字，下划线组合</span><br>&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;<br><input v-on:blur="onRegisterPasswordBlur()"
    v-bind:class="registerPasswordValidateClass"
    id="register-password" v-model="memberRegister.passwordOriginal"
    class="form-control" placeholder="密码" type="password"><br><span v-show="registerPasswordValidate === false" class="text-danger">密码最少6位，包含至少1字母和1个数字</span><br>&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;<br><input v-on:blur="onRegisterConfirmPasswordBlur()"
    v-bind:class="registerConfirmPasswordValidateClass"
    id="register-confirm-password" v-model="memberRegister.confirm"
    class="form-control" placeholder="确认密码"
    name="memberRegisterConfirm" type="password"><br><span v-show="registerConfirmPasswordValidate === false" class="text-danger">确认密码和密码一致</span><br>&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;data中增加<br>registerMobileCodeValidate: null,<br>registerPasswordValidate: null,<br>registerNameValidate: null,<br>registerConfirmPasswordValidate: null,<br>&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;computed增加<br> registerMobileCodeValidateClass: function () {<br>  return {<br>    ‘border-success’: this.registerMobileCodeValidate &#x3D;&#x3D;&#x3D; true,<br>    ‘border-danger’: this.registerMobileCodeValidate &#x3D;&#x3D;&#x3D; false,<br>  }<br>},<br>registerPasswordValidateClass: function () {<br>  return {<br>    ‘border-success’: this.registerPasswordValidate &#x3D;&#x3D;&#x3D; true,<br>    ‘border-danger’: this.registerPasswordValidate &#x3D;&#x3D;&#x3D; false,<br>  }<br>},<br>registerNameValidateClass: function () {<br>  return {<br>    ‘border-success’: this.registerNameValidate &#x3D;&#x3D;&#x3D; true,<br>    ‘border-danger’: this.registerNameValidate &#x3D;&#x3D;&#x3D; false,<br>  }<br>},<br>registerConfirmPasswordValidateClass: function () {<br>  return {<br>    ‘border-success’: this.registerConfirmPasswordValidate &#x3D;&#x3D;&#x3D; true,<br>    ‘border-danger’: this.registerConfirmPasswordValidate &#x3D;&#x3D;&#x3D; false,<br>  }<br>},<br>&#x2F;&#x2F;——————————– 注册框校验 —————————-<br>onRegisterMobileCodeBlur () {<br>  let _this &#x3D; this;<br>  _this.registerMobileCodeValidate &#x3D; Pattern.validateMobileCode(_this.memberRegister.smsCode);<br>  return _this.registerMobileValidate;<br>},<br><br>onRegisterNameBlur () {<br>  let _this &#x3D; this;<br>  _this.registerNameValidate &#x3D; Pattern.validateName(_this.memberRegister.name);<br>  return _this.registerMobileValidate;<br>},<br><br>onRegisterPasswordBlur () {<br>  let _this &#x3D; this;<br>  _this.registerPasswordValidate &#x3D; Pattern.validatePasswordWeak(_this.memberRegister.passwordOriginal);<br>  return _this.registerMobileValidate;<br>},<br><br>onRegisterConfirmPasswordBlur () {<br>  let _this &#x3D; this;<br>  let confirmPassword &#x3D; $(“#register-confirm-password”).val();<br>  if (Tool.isEmpty(confirmPassword)) {<br>    return _this.registerConfirmPasswordValidate &#x3D; false;<br>  }<br>  return _this.registerConfirmPasswordValidate &#x3D; (confirmPassword &#x3D;&#x3D;&#x3D; _this.memberRegister.passwordOriginal);<br>},    </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<p>3.会员登录注册功能开发，提交注册之前，先校验所有注册输入框，当有一个输入框校验为false时，其他不校验</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 修改login的register方法，增加如下代码</span><br><span class="line"></span><br><span class="line">- ```vue</span><br><span class="line">  // 提交之前，先校验所有输入框</span><br><span class="line">  // 注意：当有一个文本框校验为false时，其它不校验</span><br><span class="line">  let validateResult = _this.onRegisterMobileBlur() &amp;&amp;</span><br><span class="line">      _this.onRegisterMobileCodeBlur() &amp;&amp;</span><br><span class="line">      _this.onRegisterNameBlur() &amp;&amp;</span><br><span class="line">      _this.onRegisterPasswordBlur() &amp;&amp;</span><br><span class="line">      _this.onRegisterConfirmPasswordBlur();</span><br><span class="line">  if (!validateResult) &#123;</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p><strong>增加短信验证码校验</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.会员登录注册功能开发，注册时增加短信验证码校验功能,短信验证码5分钟内有效，只能验证一次</span><br></pre></td></tr></table></figure>

<ul>
<li><p>我们给MemberDto增加字段</p>
</li>
<li><pre><code class="java">/**
 * 短信验证码
 */
private String smsCode;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 接下来我们修改MemberController</span><br><span class="line"></span><br><span class="line">- ```Java</span><br><span class="line">  ///////////////////////////////////////////////////////////注入</span><br><span class="line">  @Resource</span><br><span class="line">  private SmsService smsService;</span><br><span class="line">  ////////////////////////////////////////////////////////在register方法中加入</span><br><span class="line">  // 校验短信验证码</span><br><span class="line">  SmsDto smsDto = new SmsDto();</span><br><span class="line">  smsDto.setMobile(memberDto.getMobile());</span><br><span class="line">  smsDto.setCode(memberDto.getSmsCode());</span><br><span class="line">  smsDto.setUse(SmsUseEnum.REGISTER.getCode());</span><br><span class="line">  smsService.validCode(smsDto);</span><br><span class="line">  LOG.info(&quot;短信验证码校验通过&quot;);</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>然后我们修改SmsService</p>
</li>
<li><p>&#96;&#96;&#96;java<br>&#x2F;**</p>
<ul>
<li>验证码5分钟内有效，且操作类型要一致</li>
<li>@param smsDto</li>
</ul>
<p> *&#x2F;<br>public void validCode(SmsDto smsDto) {<br>    SmsExample example &#x3D; new SmsExample();<br>    SmsExample.Criteria criteria &#x3D; example.createCriteria();<br>    &#x2F;&#x2F; 查找5分钟内同手机号同操作发送记录<br>    criteria.andMobileEqualTo(smsDto.getMobile()).andUseEqualTo(smsDto.getUse()).andAtGreaterThan(new Date(new Date().getTime() - 5 * 60 * 1000));<br>    List<Sms> smsList &#x3D; smsMapper.selectByExample(example);</p>
<pre><code>if (smsList != null &amp;&amp; smsList.size() &gt; 0) &#123;
    Sms smsDb = smsList.get(0);
    if (!smsDb.getCode().equals(smsDto.getCode())) &#123;
        LOG.warn(&quot;短信验证码不正确&quot;);
        throw new BusinessException(BusinessExceptionCode.MOBILE_CODE_ERROR);
    &#125; else &#123;
        smsDb.setStatus(SmsStatusEnum.USED.getCode());
        smsMapper.updateByPrimaryKey(smsDb);
    &#125;
&#125; else &#123;
    LOG.warn(&quot;短信验证码不存在或已过期，请重新发送短信&quot;);
    throw new BusinessException(BusinessExceptionCode.MOBILE_CODE_EXPIRED);
&#125;
</code></pre>
<p>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 最后我们再BusinessExceptionCode增加字段</span><br><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  MOBILE_CODE_ERROR(&quot;短信验证码不正确&quot;),</span><br><span class="line">  MOBILE_CODE_EXPIRED(&quot;短信验证码不存在或已过期，请重新发送短信&quot;),</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>增加忘记密码功能</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.会员登录注册功能开发，增加忘记密码功能，包含短信验证，输入框校验等</span><br></pre></td></tr></table></figure>

<ul>
<li><p>我们先修改login</p>
</li>
<li><pre><code>/////////////////////////////////////////忘记密码部分
&lt;div class=&quot;form-group&quot;&gt;
  &lt;input v-on:blur=&quot;onForgetMobileBlur()&quot;
         v-bind:class=&quot;forgetMobileValidateClass&quot;
         id=&quot;forget-mobile&quot; v-model=&quot;memberForget.mobile&quot;
         class=&quot;form-control&quot; placeholder=&quot;手机号&quot;&gt;
  &lt;span v-show=&quot;forgetMobileValidate === false&quot; class=&quot;text-danger&quot;&gt;手机号11位数字，且必须已注册&lt;/span&gt;
&lt;/div&gt;
////////////////////////////////////////////////
&lt;input v-on:blur=&quot;onForgetMobileCodeBlur()&quot;
        v-bind:class=&quot;forgetMobileCodeValidateClass&quot;
        id=&quot;forget-mobile-code&quot; class=&quot;form-control&quot;
        placeholder=&quot;手机验证码&quot; v-model=&quot;memberForget.smsCode&quot;&gt;
&lt;div class=&quot;input-group-append&quot;&gt;
&lt;button v-on:click=&quot;sendSmsForForget()&quot; class=&quot;btn btn-outline-secondary&quot; id=&quot;forget-send-code-btn&quot;&gt;
发送验证码
&lt;/button&gt;
&lt;span v-show=&quot;forgetMobileCodeValidate === false&quot; class=&quot;text-danger&quot;&gt;请输入短信6位验证码&lt;/span&gt;
 /////////////////////////////////////////////////////
  &lt;input v-on:blur=&quot;onForgetPasswordBlur()&quot;
                     v-bind:class=&quot;forgetPasswordValidateClass&quot;
                     id=&quot;forget-password&quot; v-model=&quot;memberForget.passwordOriginal&quot;
                     class=&quot;form-control&quot; placeholder=&quot;密码&quot; type=&quot;password&quot;&gt;
&lt;span v-show=&quot;forgetPasswordValidate === false&quot; class=&quot;text-danger&quot;&gt;密码最少6位，包含至少1字母和1个数字&lt;/span&gt;
///////////////////////////////////////////////////////////////////
&lt;input v-on:blur=&quot;onForgetConfirmPasswordBlur()&quot;
                     v-bind:class=&quot;forgetConfirmPasswordValidateClass&quot;
                     id=&quot;forget-confirm-password&quot; v-model=&quot;memberForget.confirm&quot;
                     class=&quot;form-control&quot; placeholder=&quot;确认密码&quot; type=&quot;password&quot;&gt;
&lt;span v-show=&quot;forgetConfirmPasswordValidate === false&quot; class=&quot;text-danger&quot;&gt;确认密码和密码一致&lt;/span&gt;
&lt;button  v-on:click=&quot;resetPassword()&quot; class=&quot;btn btn-primary btn-block submit-button&quot;&gt;
                重&amp;nbsp;&amp;nbsp;置
&lt;/button&gt;
/////////////////////////////////////////////////再data增加
 // 忘记密码框显示错误信息
 forgetMobileValidate: null,
 forgetMobileCodeValidate: null,
 forgetPasswordValidate: null,
 forgetConfirmPasswordValidate: null,
////////////////////////////////////////////再computed增加
forgetMobileValidateClass: function () &#123;
      return &#123;
        &#39;border-success&#39;: this.forgetMobileValidate === true,
        &#39;border-danger&#39;: this.forgetMobileValidate === false,
      &#125;
    &#125;,
    forgetMobileCodeValidateClass: function () &#123;
      return &#123;
        &#39;border-success&#39;: this.forgetMobileCodeValidate === true,
        &#39;border-danger&#39;: this.forgetMobileCodeValidate === false,
      &#125;
    &#125;,
    forgetPasswordValidateClass: function () &#123;
      return &#123;
        &#39;border-success&#39;: this.forgetPasswordValidate === true,
        &#39;border-danger&#39;: this.forgetPasswordValidate === false,
      &#125;
    &#125;,
    forgetConfirmPasswordValidateClass: function () &#123;
      return &#123;
        &#39;border-success&#39;: this.forgetConfirmPasswordValidate === true,
        &#39;border-danger&#39;: this.forgetConfirmPasswordValidate === false,
      &#125;
    &#125;,
////////////////////////////////////////////增加方法
 /**
     * 发送忘记密码短信
     */
    sendSmsForForget() &#123;
      let _this = this;
      if (!_this.onForgetMobileBlur()) &#123;
        return false;
      &#125;
      let sms = &#123;
        mobile: _this.memberForget.mobile,
        use: SMS_USE.FORGET.key
      &#125;;

      _this.$ajax.get(process.env.VUE_APP_SERVER + &#39;/business/web/member/is-mobile-exist/&#39; + _this.memberForget.mobile).then((res)=&gt;&#123;
        let response = res.data;
        if (response.success) &#123;
          _this.forgetMobileValidate = true;
          _this.sendSmsCode(sms, &quot;forget-send-code-btn&quot;);
        &#125; else &#123;
          _this.forgetMobileValidate = false;
          Toast.warning(&quot;手机号未注册&quot;);
        &#125;
      &#125;);
    &#125;,

    resetPassword() &#123;
      let _this = this;

      // 提交之前，先校验所有输入框
      // 注意：当有一个文本框校验为false时，其它不校验
      let validateResult = _this.onForgetMobileBlur() &amp;&amp;
          _this.onForgetMobileCodeBlur() &amp;&amp;
          _this.onForgetPasswordBlur() &amp;&amp;
          _this.onForgetConfirmPasswordBlur();
      if (!validateResult) &#123;
        return;
      &#125;

      _this.memberForget.password = hex_md5(_this.memberForget.passwordOriginal + KEY);

      // 调服务端密码重置接口
      _this.$ajax.post(process.env.VUE_APP_SERVER + &#39;/business/web/member/reset-password&#39;, _this.memberForget).then((res)=&gt;&#123;
        let response = res.data;
        if (response.success) &#123;
          Toast.success(&quot;密码重置成功&quot;);
          _this.toLoginDiv();
        &#125; else &#123;
          Toast.warning(response.message);
        &#125;
      &#125;).catch((response)=&gt;&#123;
        console.log(&quot;error：&quot;, response);
      &#125;)
    &#125;,
     //-------------------------------- 忘记密码框校验 ----------------------------

    onForgetMobileBlur () &#123;
      let _this = this;
      return _this.forgetMobileValidate = Pattern.validateMobile(_this.memberForget.mobile);
    &#125;,

    onForgetMobileCodeBlur () &#123;
      let _this = this;
      return _this.forgetMobileCodeValidate = Pattern.validateMobileCode(_this.memberForget.smsCode);
    &#125;,

    onForgetPasswordBlur () &#123;
      let _this = this;
      return _this.forgetPasswordValidate = Pattern.validatePasswordWeak(_this.memberForget.passwordOriginal);
    &#125;,

    onForgetConfirmPasswordBlur () &#123;
      let _this = this;
      let forgetPassword = $(&quot;#forget-confirm-password&quot;).val();
      if (Tool.isEmpty(forgetPassword)) &#123;
        return _this.forgetConfirmPasswordValidate = false;
      &#125;
      return _this.forgetConfirmPasswordValidate = (forgetPassword === _this.memberForget.passwordOriginal);
    &#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 修改MemberController</span><br><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  @PostMapping(&quot;/reset-password&quot;)</span><br><span class="line">  public ResponseDto resetPassword(@RequestBody MemberDto memberDto) throws BusinessException &#123;</span><br><span class="line">      LOG.info(&quot;会员密码重置开始:&quot;);</span><br><span class="line">      memberDto.setPassword(DigestUtils.md5DigestAsHex(memberDto.getPassword().getBytes()));</span><br><span class="line">      ResponseDto&lt;MemberDto&gt; responseDto = new ResponseDto();</span><br><span class="line">  </span><br><span class="line">      // 校验短信验证码</span><br><span class="line">      SmsDto smsDto = new SmsDto();</span><br><span class="line">      smsDto.setMobile(memberDto.getMobile());</span><br><span class="line">      smsDto.setCode(memberDto.getSmsCode());</span><br><span class="line">      smsDto.setUse(SmsUseEnum.FORGET.getCode());</span><br><span class="line">      smsService.validCode(smsDto);</span><br><span class="line">      LOG.info(&quot;短信验证码校验通过&quot;);</span><br><span class="line">  </span><br><span class="line">      // 重置密码</span><br><span class="line">      memberService.resetPassword(memberDto);</span><br><span class="line">  </span><br><span class="line">      return responseDto;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>修改MemberService</p>
</li>
<li><p>&#96;&#96;&#96;java<br>&#x2F;**</p>
<ul>
<li>重置密码</li>
</ul>
<p> *&#x2F;<br>public void resetPassword(MemberDto memberDto) throws BusinessException {<br>    Member memberDb &#x3D; this.selectByMobile(memberDto.getMobile());<br>    if (memberDb &#x3D;&#x3D; null) {<br>        throw new BusinessException(BusinessExceptionCode.MEMBER_NOT_EXIST);<br>    } else {<br>        Member member &#x3D; new Member();<br>        member.setId(memberDb.getId());<br>        member.setPassword(memberDto.getPassword());<br>        memberMapper.updateByPrimaryKeySelective(member);<br>    }<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 最后再BusinessExceptionCode中增加字段</span><br><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  MEMBER_NOT_EXIST(&quot;会员不存在&quot;),</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="13-13-增加立即报名功能"><a href="#13-13-增加立即报名功能" class="headerlink" title="13-13 增加立即报名功能"></a>13-13 增加立即报名功能</h2><p><strong>新增报名表并生成基本代码</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.会员报名课程功能开发，新增报名表，生成服务端和持久层代码</span><br></pre></td></tr></table></figure>

<ul>
<li><p>首先增加sql,然后就可以代码生成器了</p>
</li>
<li><p>&#96;&#96;&#96;sql</p>
<h1 id="会员课程报名"><a href="#会员课程报名" class="headerlink" title="会员课程报名"></a>会员课程报名</h1><p>drop table if exists <code>member_course</code>;<br>create table <code>member_course</code>(<br>                   <code>id</code> char(8) not null default ‘’ comment ‘id’,<br>                   <code>member_id</code> char(8) not null comment ‘会员id’,<br>                   <code>course_id</code> char(8) not null comment ‘课程id’,<br>                   <code>at</code> datetime(3) not null comment ‘报名时间’,<br>                   primary key (<code>id</code>),<br>                   unique key <code>member_course_unique</code>(<code>member_id</code>,<code>course_id</code>)<br>)engine &#x3D;innodb default charset&#x3D;utf8mb4 comment&#x3D;’会员课程报名’;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**登录后可报名课程**</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<p>1.会员报名课程功能开发，登录后可报名课程</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 报名功能就是保存会员课程关联表，相当于生成的save方法</span><br><span class="line"></span><br><span class="line">- 我们再business.controller.web路径下新增一个MemberCourseController</span><br><span class="line"></span><br><span class="line">- ```Java</span><br><span class="line">  package com.course.business.controller.web;</span><br><span class="line">  </span><br><span class="line">  import com.course.server.dto.MemberCourseDto;</span><br><span class="line">  import com.course.server.dto.ResponseDto;</span><br><span class="line">  import com.course.server.service.MemberCourseService;</span><br><span class="line">  import com.course.server.util.ValidatorUtil;</span><br><span class="line">  import org.slf4j.Logger;</span><br><span class="line">  import org.slf4j.LoggerFactory;</span><br><span class="line">  import org.springframework.web.bind.annotation.*;</span><br><span class="line">  </span><br><span class="line">  import javax.annotation.Resource;</span><br><span class="line">  </span><br><span class="line">  @RestController(&quot;webMemberCourseController&quot;)</span><br><span class="line">  @RequestMapping(&quot;/web/member-course&quot;)</span><br><span class="line">  public class MemberCourseController &#123;</span><br><span class="line">  </span><br><span class="line">      private static final Logger LOG = LoggerFactory.getLogger(MemberCourseController.class);</span><br><span class="line">      public static final String BUSINESS_NAME = &quot;会员课程报名&quot;;</span><br><span class="line">  </span><br><span class="line">      @Resource</span><br><span class="line">      private MemberCourseService memberCourseService;</span><br><span class="line">  </span><br><span class="line">      /**</span><br><span class="line">       * 保存，id有值时更新，无值时新增</span><br><span class="line">       */</span><br><span class="line">      @PostMapping(&quot;/enroll&quot;)</span><br><span class="line">      public ResponseDto enroll(@RequestBody MemberCourseDto memberCourseDto) &#123;</span><br><span class="line">          // 保存校验</span><br><span class="line">          ValidatorUtil.require(memberCourseDto.getMemberId(), &quot;会员id&quot;);</span><br><span class="line">          ValidatorUtil.require(memberCourseDto.getCourseId(), &quot;课程id&quot;);</span><br><span class="line">  </span><br><span class="line">          ResponseDto responseDto = new ResponseDto();</span><br><span class="line">          memberCourseDto = memberCourseService.enroll(memberCourseDto);</span><br><span class="line">          responseDto.setContent(memberCourseDto);</span><br><span class="line">          return responseDto;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>然后我们看下MemberCourseService，真实项目中，报名时需要对接第三方支付，比如支付宝，还要另外做一个支付回调接口，让支付宝告诉你会员是否支付成功，如果支付成功，再插入报名表</p>
</li>
<li><p>&#96;&#96;&#96;java<br>private void insert(MemberCourse memberCourse){<br>        Date now &#x3D; new Date();<br>        memberCourse.setId(UuidUtil.getShortUuid());<br>        memberCourse.setAt(now);&#x2F;&#x2F;增加这一行<br>        memberCourseMapper.insert(memberCourse);<br>}<br>&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;<br>  &#x2F;**<br> * 报名，先判断是否已报名<br> * @param memberCourseDto<br> <em>&#x2F;<br>public MemberCourseDto enroll(MemberCourseDto memberCourseDto) {<br>    MemberCourse memberCourseDb &#x3D; this.select(memberCourseDto.getMemberId(), memberCourseDto.getCourseId());<br>    if (memberCourseDb &#x3D;&#x3D; null) {<br>        MemberCourse memberCourse &#x3D; CopyUtil.copy(memberCourseDto, MemberCourse.class);<br>        this.insert(memberCourse);<br>        &#x2F;&#x2F; 将数据库信息全部返回，包括id, at<br>        return CopyUtil.copy(memberCourse, MemberCourseDto.class);<br>    } else {<br>        &#x2F;&#x2F; 如果已经报名，则直接返回已报名的信息<br>        return CopyUtil.copy(memberCourseDb, MemberCourseDto.class);<br>    }<br>}<br>&#x2F;</em>*<br> * 根据memberId和courseId查询记录<br> *&#x2F;<br>public MemberCourse select(String memberId, String courseId) {<br>    MemberCourseExample example &#x3D; new MemberCourseExample();<br>    example.createCriteria()<br>            .andCourseIdEqualTo(courseId)<br>            .andMemberIdEqualTo(memberId);<br>    List<MemberCourse> memberCourseList &#x3D; memberCourseMapper.selectByExample(example);<br>    if (CollectionUtils.isEmpty(memberCourseList)) {<br>        return null;<br>    } else {<br>        return memberCourseList.get(0);<br>    }<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 然后我们看下detail.vue页面</span><br><span class="line"></span><br><span class="line">- ```vue</span><br><span class="line">  ////////////////////////////////////////////////////////再一次增加互斥显示</span><br><span class="line">  &lt;p class=&quot;course-head-button-links&quot;&gt;</span><br><span class="line">    &lt;a v-show=&quot;!memberCourse.id&quot; v-on:click=&quot;enroll()&quot; class=&quot;btn btn-lg btn-primary btn-shadow&quot; href=&quot;javascript:;&quot;&gt;立即报名&lt;/a&gt;</span><br><span class="line">    &lt;a v-show=&quot;memberCourse.id&quot; href=&quot;#&quot; class=&quot;btn btn-lg btn-success btn-shadow disabled&quot;&gt;您已报名&lt;/a&gt;</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line">  ///////////////////////////////////////////////////data中增加</span><br><span class="line">  memberCourse:&#123;&#125;,</span><br><span class="line">  /////////////////////////////////////////////////////////////增加方法</span><br><span class="line">  /**</span><br><span class="line">       * 报名</span><br><span class="line">       */</span><br><span class="line">      enroll() &#123;</span><br><span class="line">        let _this = this;</span><br><span class="line">        let loginMember = Tool.getLoginMember();</span><br><span class="line">        if (Tool.isEmpty(loginMember)) &#123;</span><br><span class="line">          Toast.warning(&quot;请先登录&quot;);</span><br><span class="line">          return;</span><br><span class="line">        &#125;</span><br><span class="line">        _this.$ajax.post(process.env.VUE_APP_SERVER + &#x27;/business/web/member-course/enroll&#x27;, &#123;</span><br><span class="line">          courseId: _this.course.id,</span><br><span class="line">          memberId: loginMember.id</span><br><span class="line">        &#125;).then((response)=&gt;&#123;</span><br><span class="line">          let resp = response.data;</span><br><span class="line">          if (resp.success) &#123;</span><br><span class="line">            _this.memberCourse = resp.content;</span><br><span class="line">            Toast.success(&quot;报名成功！&quot;);</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">            Toast.warning(resp.message);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;,</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>已报名的才可播放收费视频</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.会员报名课程功能开发，已报名的才可播放收费视频</span><br></pre></td></tr></table></figure>

<ul>
<li><p>修改detail.vue</p>
</li>
<li><p>&#96;&#96;&#96;vue<br>&#x2F;**</p>
<ul>
<li>播放视频</li>
<li>@param section</li>
</ul>
<p> *&#x2F;<br>play(section) {<br>  let _this &#x3D; this;<br>  if (section.charge &#x3D;&#x3D;&#x3D; _this.SECTION_CHARGE.CHARGE.key ) {<br>&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;<br>    let loginMember &#x3D; Tool.getLoginMember();<br>    if (Tool.isEmpty(loginMember)) {<br>&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;<br>    Toast.warning(“请先登录”);<br>    return;<br>  }else{<br>&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;<br>      if (Tool.isEmpty(_this.memberCourse)) {<br>        Toast.warning(“请先报名”);<br>        return;<br>      }<br>&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;<br>    }<br>  }<br>  _this.$refs.modalPlayer.playVod(section.vod);<br>},</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**进入课程详情页面时显示加载报名信息**</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<p>1.会员报名课程功能开发，加载完课程信后，如果一登陆，则加载报名信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 现在刷新页面会导致前端报名信息丢失</span><br><span class="line"></span><br><span class="line">- 首先修改detail.vue</span><br><span class="line"></span><br><span class="line">- ```</span><br><span class="line">  //////////////////////////////////////////再findCourse中加入</span><br><span class="line">  //获取报名信息</span><br><span class="line">  _this.getEnroll();</span><br><span class="line">  ///////////////////////////////////////////写方法</span><br><span class="line">    /**</span><br><span class="line">       * 获取报名</span><br><span class="line">       */</span><br><span class="line">      getEnroll() &#123;</span><br><span class="line">        let _this = this;</span><br><span class="line">        let loginMember = Tool.getLoginMember();</span><br><span class="line">        if (Tool.isEmpty(loginMember)) &#123;</span><br><span class="line">          console.log(&quot;未登录&quot;);</span><br><span class="line">          return;</span><br><span class="line">        &#125;</span><br><span class="line">        _this.$ajax.post(process.env.VUE_APP_SERVER + &#x27;/business/web/member-course/get-enroll&#x27;, &#123;</span><br><span class="line">          courseId: _this.course.id,</span><br><span class="line">          memberId: loginMember.id</span><br><span class="line">        &#125;).then((response)=&gt;&#123;</span><br><span class="line">          let resp = response.data;</span><br><span class="line">          if (resp.success) &#123;</span><br><span class="line">            _this.memberCourse = resp.content || &#123;&#125;;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;,</span><br></pre></td></tr></table></figure>

<ul>
<li><p>然后我们修改web的MemberCourseController，增加</p>
</li>
<li><p>&#96;&#96;&#96;java<br>&#x2F;**</p>
<ul>
<li>保存，id有值时更新，无值时新增</li>
</ul>
<p> *&#x2F;<br>@PostMapping(“&#x2F;get-enroll”)<br>public ResponseDto getEnroll(@RequestBody MemberCourseDto memberCourseDto) {<br>    ResponseDto responseDto &#x3D; new ResponseDto();<br>    memberCourseDto &#x3D; memberCourseService.getEnroll(memberCourseDto);<br>    responseDto.setContent(memberCourseDto);<br>    return responseDto;<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 最后修改MemberCourseService</span><br><span class="line"></span><br><span class="line">- ```</span><br><span class="line">  /**</span><br><span class="line">   * 获取报名信息</span><br><span class="line">   */</span><br><span class="line">  public MemberCourseDto getEnroll(MemberCourseDto memberCourseDto) &#123;</span><br><span class="line">      MemberCourse memberCourse = this.select(memberCourseDto.getMemberId(), memberCourseDto.getCourseId());</span><br><span class="line">      return CopyUtil.copy(memberCourse, MemberCourseDto.class);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li>
</ul>

        </div>

        
            <div class="post-copyright-info">
                <div class="article-copyright-info-container">
    <ul>
        <li>Post title：Spring Cloud + Vue 前后端分离4-2</li>
        <li>Post author：Fang</li>
        <li>Create time：2022-03-15 16:43:14</li>
        <li>
            Post link：https://ainianxu.github.io/2022/03/15/Spring Cloud + Vue 前后端分离 4-2/
        </li>
        <li>
            Copyright Notice：All articles in this blog are licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> unless stating additionally.
        </li>
    </ul>
</div>

            </div>
        

        
            <ul class="post-tags-box">
                
                    <li class="tag-item">
                        <a href="/tags/%E5%AE%8C%E6%95%B4%E9%A1%B9%E7%9B%AE/">#完整项目</a>&nbsp;
                    </li>
                
            </ul>
        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/2022/03/20/Spring%20Cloud%20+%20Vue%20%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%205/"
                        >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">Spring Cloud + Vue 前后端分离5</span>
                                <span class="post-nav-item">Prev posts</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/2022/03/07/Spring%20Cloud%20+%20Vue%20%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%204-1/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">Spring Cloud + Vue 前后端分离4-1</span>
                                <span class="post-nav-item">Next posts</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
            <div class="comment-container">
                <div class="comments-container">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
        <i class="fas fa-comments">&nbsp;Comments</i>
    </div>
    

        
            
    <div class="valine-container">
        <script data-pjax
                src="//cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js"></script>
        <div id="vcomments"></div>
        <script data-pjax>
            function loadValine() {
                new Valine({
                    el: '#vcomments',
                    appId: 'loa9BVbgmyFLwBMHhg1Cycx1-gzGzoHsz',
                    appKey: '47pIz6ewIXRi5251WyfUpQOB',
                    meta: ['nick', 'mail', 'link'],
                    avatar: 'wavatar',
                    enableQQ: true,
                    placeholder: '😜 尽情吐槽吧~',
                    lang: 'en'.toLowerCase()
                });

                function getAuthor(language) {
                    switch (language) {
                        case 'en':
                            return 'Author';
                        case 'zh-CN':
                            return '博主';
                        default:
                            return 'Master';
                    }
                }

                // Add "Author" identify
                const getValineDomTimer = setInterval(() => {
                    const vcards = document.querySelectorAll('#vcomments .vcards .vcard');
                    if (vcards.length > 0) {
                        let author = 'Fang';

                        if (author) {
                            for (let vcard of vcards) {
                                const vnick_dom = vcard.querySelector('.vhead .vnick');
                                const vnick = vnick_dom.innerHTML;
                                if (vnick === author) {
                                    vnick_dom.innerHTML = `${vnick} <span class="author">${getAuthor(KEEP.hexo_config.language)}</span>`
                                }
                            }
                        }
                        clearInterval(getValineDomTimer);
                    } else {
                        clearInterval(getValineDomTimer);
                    }
                }, 2000);
            }

            if ('true') {
                const loadValineTimeout = setTimeout(() => {
                    loadValine();
                    clearTimeout(loadValineTimeout);
                }, 1000);
            } else {
                window.addEventListener('DOMContentLoaded', loadValine);
            }
        </script>
    </div>



        
    
</div>

            </div>
        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            .footer {
  font-size: 1rem;
  color: var(--third-text-color);


  a {
    color: var(--third-text-color);


    &:hover {
      color: var(--primary-color);

    }
  }

  .info-container {
    padding-bottom: 10px;
    text-align: center;
  }

  .info-item {
    margin: 5px 0;
  }

  .icon-animate {
    animation: icon-animate 1.2s ease-in-out infinite;
  }

}

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fas fa-comment"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        
            <li class="tools-item rss flex-center">
                <a class="flex-center"
                   href="/atom.xml"
                   target="_blank"
                >
                    <i class="fas fa-rss"></i>
                </a>
            </li>
        

        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
    </ul>
</div>

    </div>

    
        <aside class="page-aside">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC13%E7%AB%A0-%E7%BD%91%E7%AB%99%E5%BC%80%E5%8F%91"><span class="nav-number">1.</span> <span class="nav-text">第13章 网站开发</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#13-1-%E7%BD%91%E7%AB%99%E6%A8%A1%E5%9D%97%E7%9A%84%E6%90%AD%E5%BB%BA"><span class="nav-number">1.1.</span> <span class="nav-text">13-1 网站模块的搭建</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#navbarHeader"><span class="nav-number">1.1.0.1.</span> <span class="nav-text">About</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#navbarHeader"><span class="nav-number">1.1.0.2.</span> <span class="nav-text">Contact</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-4-%E9%A6%96%E9%A1%B5%E5%BC%80%E5%8F%91-2"><span class="nav-number">1.2.</span> <span class="nav-text">13-4 首页开发-2</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-number">1.2.0.1.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-number">1.2.0.2.</span> <span class="nav-text"></span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-6-%E5%88%86%E7%B1%BB%E7%AD%9B%E9%80%89%E5%8A%9F%E8%83%BD%E5%BC%80%E5%8F%91"><span class="nav-number">1.3.</span> <span class="nav-text">13-6 分类筛选功能开发</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-7-%E8%AF%BE%E7%A8%8B%E8%AF%A6%E6%83%85%E9%A1%B5%E9%9D%A2%E5%BC%80%E5%8F%91"><span class="nav-number">1.4.</span> <span class="nav-text">13-7 课程详情页面开发</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number">2.</span> <span class="nav-text"></span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link"><span class="nav-number">2.0.0.0.1.</span> <span class="nav-text"></span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-11-%E5%A2%9E%E5%8A%A0%E5%8F%91%E9%80%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81%E5%8A%9F%E8%83%BD"><span class="nav-number">2.1.</span> <span class="nav-text">13-11 增加发送短信验证码功能</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-12-%E5%AE%8C%E5%96%84%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C%E6%A0%A1%E9%AA%8C%E5%8A%9F%E8%83%BD"><span class="nav-number">2.2.</span> <span class="nav-text">13-12 完善登录注册校验功能</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-13-%E5%A2%9E%E5%8A%A0%E7%AB%8B%E5%8D%B3%E6%8A%A5%E5%90%8D%E5%8A%9F%E8%83%BD"><span class="nav-number">2.3.</span> <span class="nav-text">13-13 增加立即报名功能</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BC%9A%E5%91%98%E8%AF%BE%E7%A8%8B%E6%8A%A5%E5%90%8D"><span class="nav-number">3.</span> <span class="nav-text">会员课程报名</span></a></li></ol>
    </div>
</div>
        </aside>
    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>



<script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/dark-light-toggle.js"></script>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/local-search.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/code-copy.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/lazyload.js"></script>


<div class="post-scripts pjax">
    
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/left-side-toggle.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/libs/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/toc.js"></script>
    
</div>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/libs/pjax.min.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            KEEP.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            KEEP.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            KEEP.refresh();
        });
    });
</script>



</body>
</html>
