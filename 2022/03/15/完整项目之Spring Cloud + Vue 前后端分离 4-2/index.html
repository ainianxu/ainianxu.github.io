<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="Fang">
    
    <title>
        
            完整项目之Spring Cloud + Vue 前后端分离4-2 |
        
        念~旭
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/favicon.ico">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/css/font-awesome.min.css">
    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"example.com","root":"/","language":"en","path":"search.json"};
    KEEP.theme_config = {"toc":{"enable":true,"number":true,"expand_all":true,"init_open":false},"style":{"primary_color":"#0066CC","avatar":"/images/favicon.ico","favicon":"/images/favicon.ico","article_img_align":"left","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":true,"scale":false},"first_screen":{"enable":true,"background_img":"/images/bg.svg","description":"进来就别走了！"},"scroll":{"progress_bar":{"enable":true},"percent":{"enable":true}}},"local_search":{"enable":true,"preload":true},"code_copy":{"enable":true,"style":"default"},"pjax":{"enable":true},"lazyload":{"enable":true},"version":"3.4.4"};
    KEEP.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
  </script>
<meta name="generator" content="Hexo 6.1.0"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
</head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fas fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                念~旭
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                HOME
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                ARCHIVES
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/links"
                            >
                                LINKS
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/about"
                            >
                                ABOUT
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">HOME</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">ARCHIVES</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/links">LINKS</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/about">ABOUT</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">完整项目之Spring Cloud + Vue 前后端分离4-2</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/favicon.ico">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">Fang</span>
                        
                            <span class="author-label">Lv7</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;
        <span class="pc">2022-03-15 16:43:14</span>
        <span class="mobile">2022-03-15 16:43</span>
    </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/%E5%AE%8C%E6%95%B4%E9%A1%B9%E7%9B%AE/">完整项目</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fas fa-file-word"></i>&nbsp;<span>33.1k Words</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fas fa-clock"></i>&nbsp;<span>184 Mins</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <h1 id="第13章-网站开发"><a href="#第13章-网站开发" class="headerlink" title="第13章 网站开发"></a>第13章 网站开发</h1><p>本章将制作用于学员使用的网站，学习BootStrap的网站模板的使用，可以让程序员即使不会美工也可以写出漂亮的网站。</p>
<hr>
<h2 id="13-1-网站模块的搭建"><a href="#13-1-网站模块的搭建" class="headerlink" title="13-1 网站模块的搭建"></a>13-1 网站模块的搭建</h2><p><strong>新建web模板</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.网站开发，增加web模块使用命令：vue create web</span><br></pre></td></tr></table></figure>

<ul>
<li>大家拿到一个vue项目后，要先执行npm install，才能运行项目，一步会去下载node  module，类似于maven项目要先下载jar包</li>
<li>步骤：vue create web —&gt; cd web —&gt; npm run serve</li>
</ul>
<p><strong>多环境配置</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.网站开发，web模块增加多环境配置启动命令，增加--port8081</span><br></pre></td></tr></table></figure>

<ul>
<li>就是将admin里的两个配置文件复制过来，然后改package.json</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;serve-dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vue-cli-service serve --mode dev --port 8081&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;serve-prod&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vue-cli-service serve --mode prod --port 8081&quot;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>

<p><strong>增加路由配置</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.网站开发，web模块增加路由配置</span><br><span class="line">使用命令：npm install --Save vue-router</span><br></pre></td></tr></table></figure>

<ul>
<li>这里只是增加了router依赖，后续开发页面时会增加router的配置</li>
</ul>
<h2 id="13-2-集成bootstrap官方模板"><a href="#13-2-集成bootstrap官方模板" class="headerlink" title="13-2 集成bootstrap官方模板"></a>13-2 集成bootstrap官方模板</h2><ul>
<li>我们的控台admin，用的是免费的ace admin模板，ace也是基于bootstrap做的封装。有很多组织和个人以卖各种前端模板为生</li>
<li>本章开发的前端网站，是基于bootstrap官方提供的原生模板</li>
</ul>
<p><strong>bootstrap4.4.1文档介绍</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.网站开发，增加bootstrp-4.4.1的js,css</span><br></pre></td></tr></table></figure>

<ul>
<li>jquery.slim是jquery的简化版也可以引入原版jquery。popper.js是一个js提示插件</li>
<li>网站首页选用album模板，相册主题</li>
<li>就是下载这个将其放到web的public<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://s2.loli.net/2022/03/25/xTzvVYPaRqLpyjG.png"
                      alt="image-20220325163100644"
                ></li>
</ul>
<p><strong>集成album模板</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.网站开发，集成album模板</span><br></pre></td></tr></table></figure>

<ul>
<li><p>做前端的同学，会经常看到bundle这个词，就是将几个依赖的js或css，打包成一个bundle.js</p>
</li>
<li><p>首先在index中加css和js</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%= BASE_URL %&gt;bootstrap-4.4.1/css/bootstrap.min.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%= BASE_URL %&gt;static/css/album.css&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.slim.min.js&quot;</span> <span class="attr">integrity</span>=<span class="string">&quot;sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n&quot;</span> <span class="attr">crossorigin</span>=<span class="string">&quot;anonymous&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&lt;%= BASE_URL %&gt;bootstrap-4.4.1/js/bootstrap.bundle.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>将album模板中的body标签里的内容，复制到template标签中。修改app.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;header&gt;</span><br><span class="line">      &lt;div class=&quot;collapse bg-dark&quot; id=&quot;navbarHeader&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;row&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;col-sm-8 col-md-7 py-4&quot;&gt;</span><br><span class="line">              &lt;h4 class=&quot;text-white&quot;&gt;About&lt;/h4&gt;</span><br><span class="line">              &lt;p class=&quot;text-muted&quot;&gt;Add some information about the album below, the author, or any other background context. Make it a few sentences long so folks can pick up some informative tidbits. Then, link them off to some social networking sites or contact information.&lt;/p&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;col-sm-4 offset-md-1 py-4&quot;&gt;</span><br><span class="line">              &lt;h4 class=&quot;text-white&quot;&gt;Contact&lt;/h4&gt;</span><br><span class="line">              &lt;ul class=&quot;list-unstyled&quot;&gt;</span><br><span class="line">                &lt;li&gt;&lt;a href=&quot;#&quot; class=&quot;text-white&quot;&gt;Follow on Twitter&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;li&gt;&lt;a href=&quot;#&quot; class=&quot;text-white&quot;&gt;Like on Facebook&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;li&gt;&lt;a href=&quot;#&quot; class=&quot;text-white&quot;&gt;Email me&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">              &lt;/ul&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div class=&quot;navbar navbar-dark bg-dark shadow-sm&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;container d-flex justify-content-between&quot;&gt;</span><br><span class="line">          &lt;a href=&quot;#&quot; class=&quot;navbar-brand d-flex align-items-center&quot;&gt;</span><br><span class="line">            &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;20&quot; height=&quot;20&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot; stroke-width=&quot;2&quot; aria-hidden=&quot;true&quot; class=&quot;mr-2&quot; viewBox=&quot;0 0 24 24&quot; focusable=&quot;false&quot;&gt;&lt;path d=&quot;M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z&quot;/&gt;&lt;circle cx=&quot;12&quot; cy=&quot;13&quot; r=&quot;4&quot;/&gt;&lt;/svg&gt;</span><br><span class="line">            &lt;strong&gt;Album&lt;/strong&gt;</span><br><span class="line">          &lt;/a&gt;</span><br><span class="line">          &lt;button class=&quot;navbar-toggler&quot; type=&quot;button&quot; data-toggle=&quot;collapse&quot; data-target=&quot;#navbarHeader&quot; aria-controls=&quot;navbarHeader&quot; aria-expanded=&quot;false&quot; aria-label=&quot;Toggle navigation&quot;&gt;</span><br><span class="line">            &lt;span class=&quot;navbar-toggler-icon&quot;&gt;&lt;/span&gt;</span><br><span class="line">          &lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/header&gt;</span><br><span class="line">    &lt;main role=&quot;main&quot;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;section class=&quot;jumbotron text-center&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">          &lt;h1&gt;Album example&lt;/h1&gt;</span><br><span class="line">          &lt;p class=&quot;lead text-muted&quot;&gt;Something short and leading about the collection below—its contents, the creator, etc. Make it short and sweet, but not too short so folks don’t simply skip over it entirely.&lt;/p&gt;</span><br><span class="line">          &lt;p&gt;</span><br><span class="line">            &lt;a href=&quot;#&quot; class=&quot;btn btn-primary my-2&quot;&gt;Main call to action&lt;/a&gt;</span><br><span class="line">            &lt;a href=&quot;#&quot; class=&quot;btn btn-secondary my-2&quot;&gt;Secondary action&lt;/a&gt;</span><br><span class="line">          &lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/section&gt;</span><br><span class="line"></span><br><span class="line">      &lt;div class=&quot;album py-5 bg-light&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;container&quot;&gt;</span><br><span class="line"></span><br><span class="line">          &lt;div class=&quot;row&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">                &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                  &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                  &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">                &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                  &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                  &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">                &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                  &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                  &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">                &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                  &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                  &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">                &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                  &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                  &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">                &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                  &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                  &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">                &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                  &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                  &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">                &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                  &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                  &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">                &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                  &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                  &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/main&gt;</span><br><span class="line">    &lt;footer class=&quot;text-muted&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">        &lt;p class=&quot;float-right&quot;&gt;</span><br><span class="line">          &lt;a href=&quot;#&quot;&gt;Back to top&lt;/a&gt;</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">        &lt;p&gt;Album example is &amp;copy; Bootstrap, but please download and customize it for yourself!&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;New to Bootstrap? &lt;a href=&quot;/&quot;&gt;Visit the homepage&lt;/a&gt; or read our &lt;a href=&quot;/docs/getting-started/introduction/&quot;&gt;getting started guide&lt;/a&gt;.&lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/footer&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;App&#x27;,</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>在增加一个album.css</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.jumbotron</span> &#123;</span><br><span class="line">    <span class="attribute">padding-top</span>: <span class="number">3rem</span>;</span><br><span class="line">    <span class="attribute">padding-bottom</span>: <span class="number">3rem</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">min-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.jumbotron</span> &#123;</span><br><span class="line">        <span class="attribute">padding-top</span>: <span class="number">6rem</span>;</span><br><span class="line">        <span class="attribute">padding-bottom</span>: <span class="number">6rem</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.jumbotron</span> <span class="selector-tag">p</span><span class="selector-pseudo">:last-child</span> &#123;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.jumbotron</span> <span class="selector-tag">h1</span> &#123;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">300</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.jumbotron</span> <span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">40rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">footer</span> &#123;</span><br><span class="line">    <span class="attribute">padding-top</span>: <span class="number">3rem</span>;</span><br><span class="line">    <span class="attribute">padding-bottom</span>: <span class="number">3rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">footer</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: .<span class="number">25rem</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>顶部组件和底部组件提取</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.网站开发，将顶部提取成the-header和the-footer组件</span><br></pre></td></tr></table></figure>

<ul>
<li><p>小提示：在父组件中打入子组件的标签名，会自动引入子组件。</p>
</li>
<li><p>在组件中先增加一个the-header，就是将header复制过来</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;header&gt;</span><br><span class="line">    &lt;div class=&quot;collapse bg-dark&quot; id=&quot;navbarHeader&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;row&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;col-sm-8 col-md-7 py-4&quot;&gt;</span><br><span class="line">            &lt;h4 class=&quot;text-white&quot;&gt;About1&lt;/h4&gt;</span><br><span class="line">            &lt;p class=&quot;text-muted&quot;&gt;Add some information about the album below, the author, or any other background context. Make it a few sentences long so folks can pick up some informative tidbits. Then, link them off to some social networking sites or contact information.&lt;/p&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;col-sm-4 offset-md-1 py-4&quot;&gt;</span><br><span class="line">            &lt;h4 class=&quot;text-white&quot;&gt;Contact&lt;/h4&gt;</span><br><span class="line">            &lt;ul class=&quot;list-unstyled&quot;&gt;</span><br><span class="line">              &lt;li&gt;&lt;a href=&quot;#&quot; class=&quot;text-white&quot;&gt;Follow on Twitter&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">              &lt;li&gt;&lt;a href=&quot;#&quot; class=&quot;text-white&quot;&gt;Like on Facebook&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">              &lt;li&gt;&lt;a href=&quot;#&quot; class=&quot;text-white&quot;&gt;Email me&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">            &lt;/ul&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;navbar navbar-dark bg-dark shadow-sm&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;container d-flex justify-content-between&quot;&gt;</span><br><span class="line">        &lt;a href=&quot;#&quot; class=&quot;navbar-brand d-flex align-items-center&quot;&gt;</span><br><span class="line">          &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;20&quot; height=&quot;20&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot; stroke-width=&quot;2&quot; aria-hidden=&quot;true&quot; class=&quot;mr-2&quot; viewBox=&quot;0 0 24 24&quot; focusable=&quot;false&quot;&gt;&lt;path d=&quot;M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z&quot;/&gt;&lt;circle cx=&quot;12&quot; cy=&quot;13&quot; r=&quot;4&quot;/&gt;&lt;/svg&gt;</span><br><span class="line">          &lt;strong&gt;Album&lt;/strong&gt;</span><br><span class="line">        &lt;/a&gt;</span><br><span class="line">        &lt;button class=&quot;navbar-toggler&quot; type=&quot;button&quot; data-toggle=&quot;collapse&quot; data-target=&quot;#navbarHeader&quot; aria-controls=&quot;navbarHeader&quot; aria-expanded=&quot;false&quot; aria-label=&quot;Toggle navigation&quot;&gt;</span><br><span class="line">          &lt;span class=&quot;navbar-toggler-icon&quot;&gt;&lt;/span&gt;</span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/header&gt;</span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;theHeader&#x27;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>在组件中先增加一个the-footer，就是将footer复制过来</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;footer class=&quot;text-muted&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">      &lt;p class=&quot;float-right&quot;&gt;</span><br><span class="line">        &lt;a href=&quot;#&quot;&gt;Back to top&lt;/a&gt;</span><br><span class="line">      &lt;/p&gt;</span><br><span class="line">      &lt;p&gt;Album example is &amp;copy; Bootstrap, but please download and customize it for yourself!&lt;/p&gt;</span><br><span class="line">      &lt;p&gt;New to Bootstrap? &lt;a href=&quot;/&quot;&gt;Visit the homepage&lt;/a&gt; or read our &lt;a href=&quot;/docs/getting-started/introduction/&quot;&gt;getting started guide&lt;/a&gt;.&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/footer&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name:&#x27;theFooter&#x27;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>最后在app.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;the-header&gt;&lt;/the-header&gt;</span><br><span class="line">    &lt;main role=&quot;main&quot;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;section class=&quot;jumbotron text-center&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">          &lt;h1&gt;Album example&lt;/h1&gt;</span><br><span class="line">          &lt;p class=&quot;lead text-muted&quot;&gt;Something short and leading about the collection below—its contents, the creator, etc. Make it short and sweet, but not too short so folks don’t simply skip over it entirely.&lt;/p&gt;</span><br><span class="line">          &lt;p&gt;</span><br><span class="line">            &lt;a href=&quot;#&quot; class=&quot;btn btn-primary my-2&quot;&gt;Main call to action&lt;/a&gt;</span><br><span class="line">            &lt;a href=&quot;#&quot; class=&quot;btn btn-secondary my-2&quot;&gt;Secondary action&lt;/a&gt;</span><br><span class="line">          &lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/section&gt;</span><br><span class="line"></span><br><span class="line">      &lt;div class=&quot;album py-5 bg-light&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;container&quot;&gt;</span><br><span class="line"></span><br><span class="line">          &lt;div class=&quot;row&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">                &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                  &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                  &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">                &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                  &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                  &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">                &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                  &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                  &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">                &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                  &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                  &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">                &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                  &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                  &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">                &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                  &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                  &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">                &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                  &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                  &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">                &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                  &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                  &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">                &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                  &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                  &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/main&gt;</span><br><span class="line">    &lt;the-footer&gt;&lt;/the-footer&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import TheHeader from &quot;@/components/the-header&quot;;</span><br><span class="line">import TheFooter from &quot;@/components/the-footer&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;App&#x27;,</span><br><span class="line">  components: &#123;TheFooter, TheHeader&#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="13-3-首页开发-1"><a href="#13-3-首页开发-1" class="headerlink" title="13-3 首页开发-1"></a>13-3 首页开发-1</h2><p><strong>路由配置与文案修改</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.网站开发，增加路由配置router.js，增加网站首页index.vue</span><br></pre></td></tr></table></figure>

<ul>
<li>首先增加一个router.js</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Router</span> <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Index</span> <span class="keyword">from</span> <span class="string">&quot;./view/index&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Router</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Router</span>(&#123;</span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&quot;history&quot;</span>,</span><br><span class="line">    <span class="attr">base</span>: process.<span class="property">env</span>.<span class="property">BASE_URL</span>,</span><br><span class="line">    <span class="attr">routes</span>: [&#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;*&quot;</span>,</span><br><span class="line">        <span class="attr">redirect</span>: <span class="string">&quot;/index&quot;</span>,</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/index&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">Index</span></span><br><span class="line"></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>然后再mian.js中使用</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./app.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span><span class="comment">//这个新增</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  router,<span class="comment">//还有这个新增</span></span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>然后我们把app.vue的main部分复制到新建再src&#x2F;view里的index</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;main role=&quot;main&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;section class=&quot;jumbotron text-center&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">        &lt;h1&gt;Album example&lt;/h1&gt;</span><br><span class="line">        &lt;p class=&quot;lead text-muted&quot;&gt;Something short and leading about the collection below—its contents, the creator, etc. Make it short and sweet, but not too short so folks don’t simply skip over it entirely.&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;</span><br><span class="line">          &lt;a href=&quot;#&quot; class=&quot;btn btn-primary my-2&quot;&gt;Main call to action&lt;/a&gt;</span><br><span class="line">          &lt;a href=&quot;#&quot; class=&quot;btn btn-secondary my-2&quot;&gt;Secondary action&lt;/a&gt;</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/section&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div class=&quot;album py-5 bg-light&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;container&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div class=&quot;row&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">              &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line"></span><br><span class="line">              &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                  &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                    &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                    &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                  &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">              &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line"></span><br><span class="line">              &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                  &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                    &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                    &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                  &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">              &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line"></span><br><span class="line">              &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                  &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                    &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                    &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                  &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">          &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">              &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line"></span><br><span class="line">              &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                  &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                    &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                    &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                  &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">              &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line"></span><br><span class="line">              &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                  &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                    &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                    &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                  &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">              &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line"></span><br><span class="line">              &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                  &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                    &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                    &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                  &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">          &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">              &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line"></span><br><span class="line">              &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                  &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                    &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                    &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                  &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">              &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line"></span><br><span class="line">              &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                  &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                    &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                    &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                  &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;col-md-4&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">              &lt;svg class=&quot;bd-placeholder-img card-img-top&quot; width=&quot;100%&quot; height=&quot;225&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; aria-label=&quot;Placeholder: Thumbnail&quot; preserveAspectRatio=&quot;xMidYMid slice&quot; focusable=&quot;false&quot;&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#55595c&quot;/&gt;&lt;text x=&quot;50%&quot; y=&quot;50%&quot; fill=&quot;#eceeef&quot; dy=&quot;.3em&quot;&gt;Thumbnail&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line"></span><br><span class="line">              &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                &lt;p class=&quot;card-text&quot;&gt;This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.&lt;/p&gt;</span><br><span class="line">                &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                  &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                    &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                    &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                  &lt;small class=&quot;text-muted&quot;&gt;9 mins&lt;/small&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/main&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;index&#x27;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>没有使用route-view的话，就没有路由效果，因此我们再app.vue里进行替换</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;the-header&gt;&lt;/the-header&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;//替换的</span><br><span class="line">    &lt;the-footer&gt;&lt;/the-footer&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import TheHeader from &quot;@/components/the-header&quot;;</span><br><span class="line">import TheFooter from &quot;@/components/the-footer&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;App&#x27;,</span><br><span class="line">  components: &#123;TheFooter, TheHeader&#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2.网站开发，导航条改为bootstrap导航条组件，文档:https://v4.bootcss.com/docs/components/navbar/</span><br></pre></td></tr></table></figure>

<ul>
<li>将代码复制到the-header.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;header&gt;</span><br><span class="line">    &lt;nav class=&quot;navbar navbar-expand-lg navbar-light bg-light&quot;&gt;</span><br><span class="line">      &lt;a class=&quot;navbar-brand&quot; href=&quot;#&quot;&gt;Navbar&lt;/a&gt;</span><br><span class="line">      &lt;button class=&quot;navbar-toggler&quot; type=&quot;button&quot; data-toggle=&quot;collapse&quot; data-target=&quot;#navbarSupportedContent&quot; aria-controls=&quot;navbarSupportedContent&quot; aria-expanded=&quot;false&quot; aria-label=&quot;Toggle navigation&quot;&gt;</span><br><span class="line">        &lt;span class=&quot;navbar-toggler-icon&quot;&gt;&lt;/span&gt;</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line"></span><br><span class="line">      &lt;div class=&quot;collapse navbar-collapse&quot; id=&quot;navbarSupportedContent&quot;&gt;</span><br><span class="line">        &lt;ul class=&quot;navbar-nav mr-auto&quot;&gt;</span><br><span class="line">          &lt;li class=&quot;nav-item active&quot;&gt;</span><br><span class="line">            &lt;a class=&quot;nav-link&quot; href=&quot;#&quot;&gt;Home &lt;span class=&quot;sr-only&quot;&gt;(current)&lt;/span&gt;&lt;/a&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li class=&quot;nav-item&quot;&gt;</span><br><span class="line">            &lt;a class=&quot;nav-link&quot; href=&quot;#&quot;&gt;Link&lt;/a&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li class=&quot;nav-item dropdown&quot;&gt;</span><br><span class="line">            &lt;a class=&quot;nav-link dropdown-toggle&quot; href=&quot;#&quot; id=&quot;navbarDropdown&quot; role=&quot;button&quot; data-toggle=&quot;dropdown&quot; aria-expanded=&quot;false&quot;&gt;</span><br><span class="line">              Dropdown</span><br><span class="line">            &lt;/a&gt;</span><br><span class="line">            &lt;div class=&quot;dropdown-menu&quot; aria-labelledby=&quot;navbarDropdown&quot;&gt;</span><br><span class="line">              &lt;a class=&quot;dropdown-item&quot; href=&quot;#&quot;&gt;Action&lt;/a&gt;</span><br><span class="line">              &lt;a class=&quot;dropdown-item&quot; href=&quot;#&quot;&gt;Another action&lt;/a&gt;</span><br><span class="line">              &lt;div class=&quot;dropdown-divider&quot;&gt;&lt;/div&gt;</span><br><span class="line">              &lt;a class=&quot;dropdown-item&quot; href=&quot;#&quot;&gt;Something else here&lt;/a&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li class=&quot;nav-item&quot;&gt;</span><br><span class="line">            &lt;a class=&quot;nav-link disabled&quot;&gt;Disabled&lt;/a&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">        &lt;form class=&quot;form-inline my-2 my-lg-0&quot;&gt;</span><br><span class="line">          &lt;input class=&quot;form-control mr-sm-2&quot; type=&quot;search&quot; placeholder=&quot;Search&quot; aria-label=&quot;Search&quot;&gt;</span><br><span class="line">          &lt;button class=&quot;btn btn-outline-success my-2 my-sm-0&quot; type=&quot;submit&quot;&gt;Search&lt;/button&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/nav&gt;</span><br><span class="line">  &lt;/header&gt;</span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;theHeader&#x27;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">3.网站开发，导航条美化:菜单名称修改；增加container布局；样式改为dark；</span><br><span class="line">4.集成fontawesome图标</span><br></pre></td></tr></table></figure>

<ul>
<li><p>fontawesome是一个图标库，可以到官网注册后，获取自己的cdn链接</p>
</li>
<li><p>在上面的the-header基础上进行修改</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;header&gt;</span><br><span class="line">    &lt;nav class=&quot;navbar navbar-expand-lg navbar-dark bg-dark&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">      &lt;a class=&quot;navbar-brand&quot; href=&quot;#&quot;&gt;</span><br><span class="line">        &lt;i class=&quot;fa fa-video-camera&quot;&gt;&lt;/i&gt;&amp;nbsp;小方课程</span><br><span class="line">      &lt;/a&gt;</span><br><span class="line">      &lt;button class=&quot;navbar-toggler&quot; type=&quot;button&quot; data-toggle=&quot;collapse&quot; data-target=&quot;#navbarSupportedContent&quot; aria-controls=&quot;navbarSupportedContent&quot; aria-expanded=&quot;false&quot; aria-label=&quot;Toggle navigation&quot;&gt;</span><br><span class="line">        &lt;span class=&quot;navbar-toggler-icon&quot;&gt;&lt;/span&gt;</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line"></span><br><span class="line">      &lt;div class=&quot;collapse navbar-collapse&quot; id=&quot;navbarSupportedContent&quot;&gt;</span><br><span class="line">        &lt;ul class=&quot;navbar-nav mr-auto&quot;&gt;</span><br><span class="line">          &lt;li class=&quot;nav-item active&quot;&gt;</span><br><span class="line">            &lt;a class=&quot;nav-link&quot; href=&quot;#&quot;&gt;主页 &lt;span class=&quot;sr-only&quot;&gt;(current)&lt;/span&gt;&lt;/a&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li class=&quot;nav-item active&quot;&gt;</span><br><span class="line">            &lt;a class=&quot;nav-link&quot; href=&quot;#&quot;&gt;全部课程&lt;/a&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li class=&quot;nav-item dropdown active&quot;&gt;</span><br><span class="line">            &lt;a class=&quot;nav-link dropdown-toggle&quot; href=&quot;#&quot; id=&quot;navbarDropdown&quot; role=&quot;button&quot; data-toggle=&quot;dropdown&quot; aria-expanded=&quot;false&quot;&gt;</span><br><span class="line">              更多</span><br><span class="line">            &lt;/a&gt;</span><br><span class="line">            &lt;div class=&quot;dropdown-menu&quot; aria-labelledby=&quot;navbarDropdown&quot;&gt;</span><br><span class="line">              &lt;a class=&quot;dropdown-item&quot; href=&quot;#&quot;&gt;关于我们&lt;/a&gt;</span><br><span class="line">              &lt;a class=&quot;dropdown-item&quot; href=&quot;#&quot;&gt;渠道合作&lt;/a&gt;</span><br><span class="line">              &lt;div class=&quot;dropdown-divider&quot;&gt;&lt;/div&gt;</span><br><span class="line">              &lt;a class=&quot;dropdown-item&quot; href=&quot;#&quot;&gt;更多信息&lt;/a&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">          &lt;span class=&quot;text-white&quot;&gt;欢迎：&lt;/span&gt;</span><br><span class="line">          &lt;button class=&quot;btn btn-outline-light my-2 my-sm-0&quot; type=&quot;submit&quot;&gt;登录/注册&lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/nav&gt;</span><br><span class="line">  &lt;/header&gt;</span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;theHeader&#x27;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5.网站开发，底部文案修改</span><br></pre></td></tr></table></figure>

<ul>
<li>就是修改the-footer</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;footer class=&quot;text-muted&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">      &lt;p class=&quot;float-right&quot;&gt;</span><br><span class="line">        &lt;a href=&quot;#&quot;&gt;回到顶部&lt;/a&gt;</span><br><span class="line">      &lt;/p&gt;</span><br><span class="line">      &lt;p&gt;欢迎来到小方视频售卖中心，第一次项目&lt;/p&gt;</span><br><span class="line">      &lt;p&gt;2021&amp;nbsp;leaning.com&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/footer&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name:&#x27;theFooter&#x27;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">6.网站开发，大屏文案修改</span><br></pre></td></tr></table></figure>

<ul>
<li>一样就是修改index.vue</li>
</ul>
<p><strong>最新上线与好课推荐</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.网站开发，增加【新上好课】后端接口测试地址</span><br></pre></td></tr></table></figure>

<ul>
<li>以后web模块的请求全会放到web包下，将admin请求和web请求分开，方便做权限控制（business中controller），新建文件CourseController</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.business.controller.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.course.server.dto.CourseDto;</span><br><span class="line"><span class="keyword">import</span> com.course.server.dto.PageDto;</span><br><span class="line"><span class="keyword">import</span> com.course.server.dto.ResponseDto;</span><br><span class="line"><span class="keyword">import</span> com.course.server.service.CourseService;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController(&quot;webCourseController&quot;)</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/web/course&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CourseController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">LOG</span> <span class="operator">=</span> LoggerFactory.getLogger(CourseController.class);</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">BUSINESS_NAME</span> <span class="operator">=</span> <span class="string">&quot;课程&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> CourseService courseService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 列表查询，查询最新的3门已发布的课程</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/list-new&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseDto <span class="title function_">listNew</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">PageDto</span> <span class="variable">pageDto</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PageDto</span>();</span><br><span class="line">        pageDto.setPage(<span class="number">1</span>);</span><br><span class="line">        pageDto.setSize(<span class="number">3</span>);</span><br><span class="line">        <span class="type">ResponseDto</span> <span class="variable">responseDto</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResponseDto</span>();</span><br><span class="line">        List&lt;CourseDto&gt; courseDtoList = courseService.listNew(pageDto);</span><br><span class="line">        responseDto.setContent(courseDtoList);</span><br><span class="line">        <span class="keyword">return</span> responseDto;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>最后在CourseService添加方法</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 新课列表查询，只查询已发布的，按创建日期倒序</span><br><span class="line"> */</span><br><span class="line">public List&lt;CourseDto&gt; listNew(PageDto pageDto) &#123;</span><br><span class="line">    PageHelper.startPage(pageDto.getPage(), pageDto.getSize());</span><br><span class="line">    CourseExample courseExample = new CourseExample();</span><br><span class="line">    courseExample.createCriteria().andStatusEqualTo(CourseStatusEnum.PUBLISH.getCode());</span><br><span class="line">    courseExample.setOrderByClause(&quot;created_at desc&quot;);</span><br><span class="line">    List&lt;Course&gt; courseList = courseMapper.selectByExample(courseExample);</span><br><span class="line">    return CopyUtil.copyList(courseList, CourseDto.class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">2.网站首页开发，首页显示新上好课真实数据</span><br><span class="line">bootstrap4图片自适应：使用img-fluid</span><br><span class="line">安装axios：npm install axios --save</span><br><span class="line">3.初始user表，test/test</span><br></pre></td></tr></table></figure>

<ul>
<li><p>前后端交互，使用axios，也可以用jquery</p>
</li>
<li><p>我们首先npm install axios –save，然后修改main.js将axios 加进来</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$ajax</span> = axios;</span><br></pre></td></tr></table></figure>

<ul>
<li>然后修改index.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">//新增</span><br><span class="line">data: function () &#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    news: [],</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">mounted() &#123;</span><br><span class="line">  let _this = this;</span><br><span class="line">  _this.listNew();</span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">  /**</span><br><span class="line">   * 查询新上好课</span><br><span class="line">   */</span><br><span class="line">  listNew() &#123;</span><br><span class="line">    let _this = this;</span><br><span class="line">    _this.$ajax.get(process.env.VUE_APP_SERVER + &#x27;/business/web/course/list-new&#x27;).then((response)=&gt;&#123;</span><br><span class="line">      console.log(&quot;查询新上好课结果：&quot;, response);</span><br><span class="line">      let resp = response.data;</span><br><span class="line">      if (resp.success) &#123;</span><br><span class="line">        _this.news = resp.content;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;).catch((response)=&gt;&#123;</span><br><span class="line">      console.log(&quot;error：&quot;, response);</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">//修改</span><br><span class="line"> &lt;div v-for=&quot;o in news&quot; v-bind:key=&quot;o&quot; class=&quot;col-md-4&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;card mb-4 shadow-sm&quot;&gt;</span><br><span class="line">              &lt;img class=&quot;img-fluid&quot; v-bind:src=&quot;o.image&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">                &lt;h4 class=&quot;&quot;&gt;&#123;&#123;o.name&#125;&#125;&lt;/h4&gt;</span><br><span class="line">                &lt;p class=&quot;card-text&quot;&gt;&#123;&#123;o.summary&#125;&#125;&lt;/p&gt;</span><br><span class="line">                &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">                  &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">                    &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">                    &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                  &lt;div class=&quot;text-muted&quot;&gt;</span><br><span class="line">                    &lt;span class=&quot;badge badge-info&quot;&gt;&lt;i class=&quot;fa fa-yen&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&amp;nbsp;&#123;&#123;o.price&#125;&#125;&lt;/span&gt;&amp;nbsp;</span><br><span class="line">                    &lt;span class=&quot;badge badge-info&quot;&gt;&lt;i class=&quot;fa fa-yen&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&amp;nbsp;&#123;&#123;o.enroll&#125;&#125;&lt;/span&gt;&amp;nbsp;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h2 id="13-4-首页开发-2"><a href="#13-4-首页开发-2" class="headerlink" title="13-4 首页开发-2"></a>13-4 首页开发-2</h2><p><strong>最新上线与好课推荐</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.网站首页开发</span><br><span class="line">课程card美化</span><br><span class="line">增加【最新上线】和【好课推荐】，【好课推荐】和【最新上线】使用的一样数据</span><br><span class="line">响应式的页面，使用rem代替px</span><br><span class="line">2.增加vue校验配置.eslintrc.js</span><br></pre></td></tr></table></figure>

<ul>
<li><p>如果设置html标签的font-size&#x3D;16px，则1rem&#x3D;16px，0.5rer&#x3D;8px后续所有字体，边距都可以用rem作为单位</p>
</li>
<li><p>首先在public的static中新建style.css，记得在index.html中引用</p>
</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span>&#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>然后把admin的.eslintrc.js复制到web</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">root</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">env</span>: &#123;</span><br><span class="line">        <span class="attr">node</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;extends&#x27;</span>: [</span><br><span class="line">        <span class="string">&#x27;plugin:vue/essential&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;eslint:recommended&#x27;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">rules</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;no-console&#x27;</span>: <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;no-debugger&#x27;</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;production&#x27;</span> ? <span class="string">&#x27;error&#x27;</span> : <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;no-undef&#x27;</span>: <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;vue/no-unused-vars&#x27;</span>: <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;vue/require-v-for-key&#x27;</span>: <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;no-unused-vars&#x27;</span>: <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;vue/no-unused-components&#x27;</span>: <span class="string">&#x27;off&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">        <span class="attr">parser</span>: <span class="string">&#x27;babel-eslint&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>然后我们把index.vue最新上线部分直接复制一下就变成了好课推荐</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class =&quot;title1&quot;&gt;好课推荐&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;row&quot;&gt;</span><br><span class="line">  &lt;div v-for=&quot;o in news&quot;  class=&quot;col-md-4&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;card mb-4 shadow-sm course&quot;&gt;</span><br><span class="line">      &lt;img class=&quot;img-fluid&quot; v-bind:src=&quot;o.image&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">        &lt;h4 class=&quot;&quot;&gt;&#123;&#123;o.name&#125;&#125;&lt;/h4&gt;</span><br><span class="line">        &lt;p class=&quot;card-text&quot;&gt;&#123;&#123;o.summary&#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">            &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">            &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;text-muted&quot;&gt;</span><br><span class="line">            &lt;span class=&quot;badge badge-info&quot;&gt;&lt;i class=&quot;fa fa-yen&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&amp;nbsp;&#123;&#123;o.price&#125;&#125;&lt;/span&gt;&amp;nbsp;</span><br><span class="line">            &lt;span class=&quot;badge badge-info&quot;&gt;&lt;i class=&quot;fa fa-yen&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&amp;nbsp;&#123;&#123;o.enroll&#125;&#125;&lt;/span&gt;&amp;nbsp;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>可以百度搜css3标题样式，有很多别人共享的样式，我们在index.vue加上样式</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">  .title1&#123;</span><br><span class="line">    margin-bottom: 2rem;</span><br><span class="line">    color: #fafafa;</span><br><span class="line">    letter-spacing: 0;</span><br><span class="line">    text-shadow: 0px 1px 0px #999, 0px 2px 0px #888, 0px 3px 0px #777, 0px 4px 0px #666, 0px 5px 0px #555, 0px 6px 0px #444, 0px 7px 0px #333, 0px 8px 7px #001135;</span><br><span class="line">    font-size: 2rem;</span><br><span class="line">  &#125;</span><br><span class="line">  .title2&#123;</span><br><span class="line">    margin-bottom: 2rem;</span><br><span class="line">    color: transparent;</span><br><span class="line">    -webkit-text-stroke: 1px black;</span><br><span class="line">    letter-spacing: 0.04em;</span><br><span class="line">    font-size: 2rem;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p><strong>课程信息组件提取</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.网站首页开发：增加课程card组件the-course</span><br></pre></td></tr></table></figure>

<ul>
<li>首先增加组件the-course</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;card mb-4 shadow-sm course&quot;&gt;</span><br><span class="line">    &lt;img class=&quot;img-fluid&quot; v-bind:src=&quot;course.image&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">      &lt;h4 class=&quot;&quot;&gt;&#123;&#123;course.name&#125;&#125;&lt;/h4&gt;</span><br><span class="line">      &lt;p class=&quot;card-text&quot;&gt;&#123;&#123;course.summary&#125;&#125;&lt;/p&gt;</span><br><span class="line">      &lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;btn-group&quot;&gt;</span><br><span class="line">          &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;View&lt;/button&gt;</span><br><span class="line">          &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot;&gt;Edit&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;text-muted&quot;&gt;</span><br><span class="line">          &lt;span class=&quot;badge badge-info&quot;&gt;&lt;i class=&quot;fa fa-yen&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&amp;nbsp;&#123;&#123;course.price&#125;&#125;&lt;/span&gt;&amp;nbsp;</span><br><span class="line">          &lt;span class=&quot;badge badge-info&quot;&gt;&lt;i class=&quot;fa fa-yen&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&amp;nbsp;&#123;&#123;course.enroll&#125;&#125;&lt;/span&gt;&amp;nbsp;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name:&#x27;the-course&#x27;,</span><br><span class="line">  props:&#123;</span><br><span class="line">    course:&#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  data:function ()&#123;</span><br><span class="line">    return &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.course h4 &#123;</span><br><span class="line">  font-size: 1.25rem;</span><br><span class="line">  margin: 15px 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.course .text-muted .badge &#123;</span><br><span class="line">  font-size: 1rem;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>然后修改index.vue使用</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;row&quot;&gt;</span><br><span class="line">  &lt;div v-for=&quot;o in news&quot; class=&quot;col-md-4&quot;&gt;</span><br><span class="line">    &lt;the-course v-bind:course=&quot;o&quot;&gt;&lt;/the-course&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2.网站首页开发：课程card组件增加等级显示</span><br><span class="line">3，增加过滤器Filter.js</span><br></pre></td></tr></table></figure>

<ul>
<li>我们首先增加一个枚举，需要在EnumGenerator.java改下路径</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> <span class="string">&quot;web\\public\\static\\js\\enums.js&quot;</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>生成完enums.js后需要在index.html引用</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&lt;%= BASE_URL %&gt;static/js/enums.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>然后我们在admin中将filter.js拷过来</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 数组过滤器 例如：这也是两个大括号包住SECTION_CHARGE | option..KV(section.charge)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> object 例如：&#123;CHARGE:&#123;key:&quot;C&quot;, value:&quot;收费&quot;&#125;,FREE:&#123;key:&quot;F&quot;, value:&quot;免费&quot;&#125;&#125;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key 例如：C</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">string</span>&#125; 例如：收费</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> option..<span class="property">KV</span> = <span class="function">(<span class="params">object, key</span>) =&gt;</span>  &#123;</span><br><span class="line">    <span class="keyword">if</span> (!object || !key) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> result = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> enums <span class="keyword">in</span> object)&#123;</span><br><span class="line">            <span class="keyword">if</span> (key === object[enums][<span class="string">&quot;key&quot;</span>]) &#123;</span><br><span class="line">                result = object[enums][<span class="string">&quot;value&quot;</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 时长格式化</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value 例如：36000</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">string</span>&#125; 例如：10:00:00</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> format..<span class="property">Second</span> = <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    value = value || <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> second = <span class="built_in">parseInt</span>(value, <span class="number">10</span>); <span class="comment">// 秒</span></span><br><span class="line">    <span class="keyword">let</span> minute = <span class="number">0</span>; <span class="comment">// 分</span></span><br><span class="line">    <span class="keyword">let</span> hour = <span class="number">0</span>; <span class="comment">// 小时</span></span><br><span class="line">    <span class="keyword">if</span> (second &gt;= <span class="number">60</span>) &#123;</span><br><span class="line">        <span class="comment">// 当大于60秒时，才需要做转换</span></span><br><span class="line">        minute = <span class="title class_">Math</span>.<span class="title function_">floor</span>(second / <span class="number">60</span>);</span><br><span class="line">        second = <span class="title class_">Math</span>.<span class="title function_">floor</span>(second % <span class="number">60</span>);</span><br><span class="line">        <span class="keyword">if</span> (minute &gt;= <span class="number">60</span>) &#123;</span><br><span class="line">            hour = <span class="title class_">Math</span>.<span class="title function_">floor</span>(minute / <span class="number">60</span>);</span><br><span class="line">            minute = <span class="title class_">Math</span>.<span class="title function_">floor</span>(minute % <span class="number">60</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 小于60秒时，直接显示，不需要处理</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="string">&quot;&quot;</span> + <span class="title class_">PrefixInteger</span>(second, <span class="number">2</span>) + <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="comment">// 拼上分钟</span></span><br><span class="line">    result = <span class="string">&quot;&quot;</span> + <span class="title class_">PrefixInteger</span>(minute, <span class="number">2</span>) + <span class="string">&quot;:&quot;</span> + result;</span><br><span class="line">    <span class="comment">// 拼上小时</span></span><br><span class="line">    result = <span class="string">&quot;&quot;</span> + <span class="title class_">PrefixInteger</span>(hour, <span class="number">2</span>) + <span class="string">&quot;:&quot;</span> + result;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 格式化指定长度，前面补0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">PrefixInteger</span>(<span class="params">num, length</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="title class_">Array</span>(length).<span class="title function_">join</span>(<span class="string">&#x27;0&#x27;</span>) + num).<span class="title function_">slice</span>(-length);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 格式化文件大小</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="variable">value</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">string</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">formatFileSize</span> = (<span class="params">value</span>) =&gt; &#123;</span><br><span class="line">    value = value || <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> result;</span><br><span class="line">    <span class="keyword">if</span> (value &gt; <span class="number">100</span> * <span class="number">1024</span>) &#123;</span><br><span class="line">        result = <span class="title class_">Math</span>.<span class="title function_">round</span>((value / <span class="number">1024</span> / <span class="number">1024</span>) * <span class="number">100</span>) / <span class="number">100</span> + <span class="string">&quot;MB&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        result = <span class="title class_">Math</span>.<span class="title function_">round</span>((value / <span class="number">1024</span>) * <span class="number">100</span>) / <span class="number">100</span> + <span class="string">&quot;KB&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    option..<span class="property">KV</span>,</span><br><span class="line">    format..<span class="property">Second</span>,</span><br><span class="line">    formatFileSize</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>在main.js中定义</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> filter <span class="keyword">from</span> <span class="string">&quot;./filter/filter&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//全局过滤器</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">keys</span>(filter).<span class="title function_">forEach</span>(<span class="function"><span class="params">key</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="title class_">Vue</span>.<span class="title function_">filter</span>(key,filter[key])</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>最后在the-course</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;span class=&quot;badge badge-info&quot;&gt;&lt;i class=&quot;fa fa-yen&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&amp;nbsp;两个大括号包住course.price&lt;/span&gt;&amp;nbsp;</span><br><span class="line">&lt;span class=&quot;badge badge-info&quot;&gt;&lt;i class=&quot;fa fa-yen&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&amp;nbsp;两个大括号包住course.enroll&lt;/span&gt;&amp;nbsp;</span><br><span class="line">&lt;span class=&quot;badge badge-info&quot;&gt;两个大括号包住COURSE_LEVEL|option..KV(course.level)&lt;/span&gt;//新增的</span><br><span class="line">//data返回</span><br><span class="line"> data:function ()&#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      COURSE_LEVEL:COURSE_LEVEL</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<h2 id="13-5-课程列表页面开发"><a href="#13-5-课程列表页面开发" class="headerlink" title="13-5 课程列表页面开发"></a>13-5 课程列表页面开发</h2><p><strong>课程列表数据显示</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.网站首页开发，增加课程列表页【全部课程】，并增加路由</span><br></pre></td></tr></table></figure>

<ul>
<li>首先在views中新加一个list.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;main role=&quot;main&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;album py-5 bg-light&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;row&quot;&gt;</span><br><span class="line">          &lt;div v-for=&quot;o in courses&quot; class=&quot;col-md-4&quot;&gt;</span><br><span class="line">            &lt;the-course v-bind:course=&quot;o&quot;&gt;&lt;/the-course&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;h3 v-show=&quot;courses.length === 0&quot;&gt;课程还未上架&lt;/h3&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/main&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import TheCourse from &quot;../components/the-course&quot;;</span><br><span class="line"></span><br><span class="line">  export default &#123;</span><br><span class="line">    components: &#123;TheCourse&#125;,</span><br><span class="line">    name: &#x27;list&#x27;,</span><br><span class="line">    data: function () &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        courses: [],</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted() &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      _this.listCourse();</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      /**</span><br><span class="line">       * 查询课程列表</span><br><span class="line">       */</span><br><span class="line">      listCourse() &#123;</span><br><span class="line">        let _this = this;</span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>然后再router.js中加一个路由</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">, &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/list&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">List</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>接下来在index.vue中使用</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;</span><br><span class="line">  &lt;router-link to=&quot;/list&quot; class=&quot;btn btn-primary my-2 p-3 font-weight-bold&quot;&gt;点击进入所有课程&lt;/router-link&gt;</span><br><span class="line">&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>同样在the-header中也使用</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;li class=&quot;nav-item active&quot;&gt;</span><br><span class="line">  &lt;router-link to=&quot;/&quot; class=&quot;nav-link&quot; href=&quot;#&quot;&gt;主页 &lt;span class=&quot;sr-only&quot;&gt;(current)&lt;/span&gt;&lt;/router-link&gt;</span><br><span class="line">&lt;/li&gt;</span><br><span class="line">&lt;li class=&quot;nav-item active&quot;&gt;</span><br><span class="line">  &lt;router-link to=&quot;/list&quot; class=&quot;nav-link&quot; href=&quot;#&quot;&gt;全部课程&lt;/router-link&gt;</span><br><span class="line">&lt;/li&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2.网站首页开发，课程列表页调用后端接口显示真实数据</span><br></pre></td></tr></table></figure>

<ul>
<li><p>Ctrl+Alt+L格式化</p>
</li>
<li><p>首先在CourseController中增加方法</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 列表查询</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/list&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseDto <span class="title function_">list</span><span class="params">(<span class="meta">@RequestBody</span> PageDto pageDto)</span> &#123;</span><br><span class="line">    <span class="type">ResponseDto</span> <span class="variable">responseDto</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResponseDto</span>();</span><br><span class="line">    courseService.list(pageDto);</span><br><span class="line">    responseDto.setContent(pageDto);</span><br><span class="line">    <span class="keyword">return</span> responseDto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>然后再list中完善方法</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 查询课程列表</span><br><span class="line"> */</span><br><span class="line">listCourse(page) &#123;</span><br><span class="line">  let _this = this;</span><br><span class="line">  _this.$ajax.post(process.env.VUE_APP_SERVER+&#x27;/business/web/course/list&#x27;,&#123;</span><br><span class="line">    page:page,</span><br><span class="line">    size:3,</span><br><span class="line">  &#125;).then((response)=&gt;&#123;</span><br><span class="line">    let resp = response.data;</span><br><span class="line">    if (resp.sucess)&#123;</span><br><span class="line">      _this.courses = resp.content.list;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;).catch((response)=&gt;&#123;</span><br><span class="line">    console.log(&quot;error&quot;,response);</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3.课程列表页面开发，后端接口只能查询已发布的课程</span><br></pre></td></tr></table></figure>

<ul>
<li>如果列表查询接口的请求参数，只有分页相关的参数，可以使用PageDto作为传参的类。如果请求参数包含其他参数，则需要建立一个类CoursePageDto，集成PageDto，来传递更多的参数。因从我们加了CoursePageDto</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.server.dto;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CoursePageDto</span> <span class="keyword">extends</span> <span class="title class_">PageDto</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String status;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getStatus</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> status;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStatus</span><span class="params">(String status)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.status = status;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">StringBuffer</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>(<span class="string">&quot;CoursePageDto&#123;&quot;</span>);</span><br><span class="line">        sb.append(<span class="string">&quot;status=&#x27;&quot;</span>).append(status).append(<span class="string">&#x27;\&#x27;&#x27;</span>);</span><br><span class="line">        sb.append(<span class="string">&quot;, page=&quot;</span>).append(page);</span><br><span class="line">        sb.append(<span class="string">&quot;, size=&quot;</span>).append(size);</span><br><span class="line">        sb.append(<span class="string">&quot;, total=&quot;</span>).append(total);</span><br><span class="line">        sb.append(<span class="string">&quot;, list=&quot;</span>).append(list);</span><br><span class="line">        sb.append(<span class="string">&#x27;&#125;&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>然后我们再web的CourseController中将参数替换了</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ResponseDto <span class="title function_">list</span><span class="params">(<span class="meta">@RequestBody</span> CoursePageDto pageDto)</span> &#123;<span class="comment">//参数替换</span></span><br><span class="line">    <span class="type">ResponseDto</span> <span class="variable">responseDto</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResponseDto</span>();</span><br><span class="line">    pageDto.setStatus(CourseStatusEnum.PUBLISH.getCode());<span class="comment">//新增</span></span><br><span class="line">    courseService.list(pageDto);</span><br><span class="line">    responseDto.setContent(pageDto);</span><br><span class="line">    <span class="keyword">return</span> responseDto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>这时CourseService中的list参数也得换，由于status查询条件不是必须的，控台接口进来就不需要这个条件，网站接口进来的有这个条件，所以增加一个status条件判断</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">list</span><span class="params">(CoursePageDto pageDto)</span>&#123;<span class="comment">//参数</span></span><br><span class="line">    CourseExample.<span class="type">Criteria</span> <span class="variable">criteria</span> <span class="operator">=</span> courseExample.createCriteria();<span class="comment">//都是新增</span></span><br><span class="line">    <span class="keyword">if</span>(!StringUtils.isEmpty(pageDto.getStatus()))&#123;</span><br><span class="line">        criteria.andStatusEqualTo(pageDto.getStatus());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>最后admin的coursecontroller也得将list参数进行修改</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">4.课程列表页面开发，前端分页</span><br><span class="line">5.增加分页组件</span><br></pre></td></tr></table></figure>

<ul>
<li>直接再admin中复制分页组件进行稍微修改</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;pagination&quot; role=&quot;group&quot; aria-label=&quot;分页&quot;&gt;</span><br><span class="line">    &lt;button type=&quot;button&quot; class=&quot;btn btn-outline-dark&quot;</span><br><span class="line">            v-bind:disabled=&quot;page === 1&quot;</span><br><span class="line">            v-on:click=&quot;selectPage(1)&quot;&gt;</span><br><span class="line">      1</span><br><span class="line">    &lt;/button&gt;</span><br><span class="line">    &lt;button type=&quot;button&quot; class=&quot;btn btn-outline-dark&quot;</span><br><span class="line">            v-bind:disabled=&quot;page === 1&quot;</span><br><span class="line">            v-on:click=&quot;selectPage(page - 1)&quot;&gt;</span><br><span class="line">      上一页</span><br><span class="line">    &lt;/button&gt;</span><br><span class="line">    &lt;button v-for=&quot;p in pages&quot; v-bind:id=&quot;&#x27;page-&#x27; + p&quot;</span><br><span class="line">            type=&quot;button&quot; class=&quot;btn btn-outline-dark&quot;</span><br><span class="line">            v-bind:class=&quot;&#123;&#x27;btn-primary active&#x27;:page == p&#125;&quot;</span><br><span class="line">            v-on:click=&quot;selectPage(p)&quot;&gt;</span><br><span class="line">      &#123;&#123;p&#125;&#125;</span><br><span class="line">    &lt;/button&gt;</span><br><span class="line">    &lt;button type=&quot;button&quot; class=&quot;btn btn-outline-dark&quot;</span><br><span class="line">            v-bind:disabled=&quot;page === pageTotal&quot;</span><br><span class="line">            v-on:click=&quot;selectPage(page + 1)&quot;&gt;</span><br><span class="line">      下一页</span><br><span class="line">    &lt;/button&gt;</span><br><span class="line">    &lt;button type=&quot;button&quot; class=&quot;btn btn-outline-dark&quot;</span><br><span class="line">            v-bind:disabled=&quot;page === pageTotal&quot;</span><br><span class="line">            v-on:click=&quot;selectPage(pageTotal)&quot;&gt;</span><br><span class="line">      两个大括号包住pageTotal||1</span><br><span class="line">    &lt;/button&gt;</span><br><span class="line">    &amp;nbsp;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;pagination&#x27;,</span><br><span class="line">  props: &#123;</span><br><span class="line">    list: &#123;</span><br><span class="line">      type: Function,</span><br><span class="line">      default: null</span><br><span class="line">    &#125;,</span><br><span class="line">    itemCount: Number // 显示的页码数，比如总共有100页，只显示10页，其它用省略号表示</span><br><span class="line">  &#125;,</span><br><span class="line">  data: function () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      total: 0, // 总行数</span><br><span class="line">      size: 10, // 每页条数</span><br><span class="line">      page: 0, // 当前页码</span><br><span class="line">      pageTotal: 0, // 总页数</span><br><span class="line">      pages: [], // 显示的页码数组</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    /**</span><br><span class="line">     * 渲染分页组件</span><br><span class="line">     * @param page</span><br><span class="line">     * @param total</span><br><span class="line">     */</span><br><span class="line">    render(page, total) &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      _this.page = page;</span><br><span class="line">      _this.total = total;</span><br><span class="line">      _this.pageTotal = Math.ceil(total / _this.size);</span><br><span class="line">      _this.pages = _this.getPageItems(_this.pageTotal, page, _this.itemCount || 5);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 查询某一页</span><br><span class="line">     * @param page</span><br><span class="line">     */</span><br><span class="line">    selectPage(page) &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      if (page &lt; 1) &#123;</span><br><span class="line">        page = 1;</span><br><span class="line">      &#125;</span><br><span class="line">      if (page &gt; _this.pageTotal) &#123;</span><br><span class="line">        page = _this.pageTotal;</span><br><span class="line">      &#125;</span><br><span class="line">      if (this.page !== page) &#123;</span><br><span class="line">        _this.page = page;</span><br><span class="line">        if (_this.list) &#123;</span><br><span class="line">          _this.list(page);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 当前要显示在页面上的页码</span><br><span class="line">     * @param total</span><br><span class="line">     * @param current</span><br><span class="line">     * @param length</span><br><span class="line">     * @returns &#123;Array&#125;</span><br><span class="line">     */</span><br><span class="line">    getPageItems(total, current, length) &#123;</span><br><span class="line">      let items = [];</span><br><span class="line">      if (length &gt;= total) &#123;</span><br><span class="line">        for (let i = 1; i &lt;= total; i++) &#123;</span><br><span class="line">          items.push(i);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        let base = 0;</span><br><span class="line">        // 前移</span><br><span class="line">        if (current - 0 &gt; Math.floor((length - 1) / 2)) &#123;</span><br><span class="line">          // 后移</span><br><span class="line">          base = Math.min(total, current - 0 + Math.ceil((length - 1) / 2)) - length;</span><br><span class="line">        &#125;</span><br><span class="line">        for (let i = 1; i &lt;= length; i++) &#123;</span><br><span class="line">          items.push(base + i);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      return items;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.pagination &#123;</span><br><span class="line">  vertical-align: middle !important;</span><br><span class="line">  font-size: 16px;</span><br><span class="line">  margin-top: 0;</span><br><span class="line">  margin-bottom: 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.pagination button &#123;</span><br><span class="line">  margin-right: 5px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.btn-primary.active &#123;</span><br><span class="line">  background-color: #2f7bba !important;</span><br><span class="line">  border-color: #27689d !important;</span><br><span class="line">  color: white !important;</span><br><span class="line">  font-weight: 600;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*.pagination select &#123;*/</span><br><span class="line">/*vertical-align: middle !important;*/</span><br><span class="line">/*font-size: 16px;*/</span><br><span class="line">/*margin-top: 0;*/</span><br><span class="line">/*&#125;*/</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>然后在list进行修改</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">//分页组件使用</span><br><span class="line">&lt;div class=&quot;row&quot;&gt;</span><br><span class="line">  &lt;div class=&quot;col-md-12&quot;&gt;</span><br><span class="line">    &lt;pagination ref=&quot;pagination&quot; v-bind:list=&quot;listCourse&quot;&gt;&lt;/pagination&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">//初始化</span><br><span class="line">mounted() &#123;</span><br><span class="line"> _this.$refs.pagination.size = 1;</span><br><span class="line">&#125;</span><br><span class="line">//在这个方法中进行渲染</span><br><span class="line">listCourse(page) &#123;</span><br><span class="line">        _this.$ajax.post(process.env.VUE_APP_SERVER+&#x27;/business/web/course/list&#x27;,&#123;</span><br><span class="line">          size:_this.$refs.pagination.size,//新增参数</span><br><span class="line">        &#125;).then((response)=&gt;&#123;</span><br><span class="line">          if (resp.sucess)&#123;</span><br><span class="line">            _this.$refs.pagination.render(page,resp.content.total);//增加得渲染</span><br><span class="line">          &#125;</span><br></pre></td></tr></table></figure>

<h2 id="13-6-分类筛选功能开发"><a href="#13-6-分类筛选功能开发" class="headerlink" title="13-6 分类筛选功能开发"></a>13-6 分类筛选功能开发</h2><p><strong>分类筛选功能开发</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.课程列表页面开发，加载所有分类</span><br><span class="line">2.增加axios接口访问日志拦截器</span><br></pre></td></tr></table></figure>

<ul>
<li>先增加日志拦截器，修改main.js</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 解决每次ajax请求，对应的sessionId不一致的问题</span></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">withCredentials</span> = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * axias拦截器</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">config</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;请求:&quot;</span>,config);</span><br><span class="line">  <span class="keyword">return</span> config;</span><br><span class="line">&#125;,<span class="function"><span class="params">error</span> =&gt;</span> &#123;&#125;);</span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">response</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;返回结果:&quot;</span>,response);</span><br><span class="line">  <span class="keyword">return</span> response;</span><br><span class="line">&#125;,<span class="function"><span class="params">error</span> =&gt;</span> &#123;&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>tool.js同样也拷过来</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Tool</span> = &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 空校验 null或&quot;&quot;都返回true</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">isEmpty</span>: <span class="keyword">function</span> (<span class="params">obj</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((<span class="keyword">typeof</span> obj == <span class="string">&#x27;string&#x27;</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> !obj || obj.<span class="title function_">replace</span>(<span class="regexp">/\s+/g</span>, <span class="string">&quot;&quot;</span>) == <span class="string">&quot;&quot;</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> (!obj || <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj) === <span class="string">&quot;&#123;&#125;&quot;</span> || obj.<span class="property">length</span> === <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 非空校验</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">isNotEmpty</span>: <span class="keyword">function</span> (<span class="params">obj</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> !<span class="variable language_">this</span>.<span class="title function_">isEmpty</span>(obj);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 长度校验</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">isLength</span>: <span class="keyword">function</span> (<span class="params">str, min, max</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> $.<span class="title function_">trim</span>(str).<span class="property">length</span> &gt;= min &amp;&amp; $.<span class="title function_">trim</span>(str).<span class="property">length</span> &lt;= max;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 时间格式化，date为空时取当前时间</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">dateFormat</span>: <span class="keyword">function</span> (<span class="params">format, date</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> result;</span><br><span class="line">        <span class="keyword">if</span> (!date) &#123;</span><br><span class="line">            date = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> option = &#123;</span><br><span class="line">            <span class="string">&quot;y+&quot;</span>: date.<span class="title function_">getFullYear</span>().<span class="title function_">toString</span>(),        <span class="comment">// 年</span></span><br><span class="line">            <span class="string">&quot;M+&quot;</span>: (date.<span class="title function_">getMonth</span>() + <span class="number">1</span>).<span class="title function_">toString</span>(),     <span class="comment">// 月</span></span><br><span class="line">            <span class="string">&quot;d+&quot;</span>: date.<span class="title function_">getDate</span>().<span class="title function_">toString</span>(),            <span class="comment">// 日</span></span><br><span class="line">            <span class="string">&quot;h+&quot;</span>: date.<span class="title function_">getHours</span>().<span class="title function_">toString</span>(),           <span class="comment">// 时</span></span><br><span class="line">            <span class="string">&quot;m+&quot;</span>: date.<span class="title function_">getMinutes</span>().<span class="title function_">toString</span>(),         <span class="comment">// 分</span></span><br><span class="line">            <span class="string">&quot;s+&quot;</span>: date.<span class="title function_">getSeconds</span>().<span class="title function_">toString</span>()          <span class="comment">// 秒</span></span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> option) &#123;</span><br><span class="line">            result = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&quot;(&quot;</span> + i + <span class="string">&quot;)&quot;</span>).<span class="title function_">exec</span>(format);</span><br><span class="line">            <span class="keyword">if</span> (result) &#123;</span><br><span class="line">                format = format.<span class="title function_">replace</span>(result[<span class="number">1</span>], (result[<span class="number">1</span>].<span class="property">length</span> == <span class="number">1</span>) ? (option[i]) : (option[i].<span class="title function_">padStart</span>(result[<span class="number">1</span>].<span class="property">length</span>, <span class="string">&quot;0&quot;</span>)))</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> format;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 移除对象数组中的对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> <span class="variable">array</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> <span class="variable">obj</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@returns</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">removeObj</span>: <span class="keyword">function</span> (<span class="params">array, obj</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> index = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; array.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (array[i] === obj) &#123;</span><br><span class="line">                array.<span class="title function_">splice</span>(i, <span class="number">1</span>);</span><br><span class="line">                index = i;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> index;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 10进制转62进制</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> <span class="variable">number</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@returns</span> &#123;<span class="type">string</span>&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@private</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">_10to62</span>: <span class="keyword">function</span> (<span class="params">number</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> chars = <span class="string">&#x27;0123456789abcdefghigklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ&#x27;</span>;</span><br><span class="line">        <span class="keyword">let</span> radix = chars.<span class="property">length</span>;</span><br><span class="line">        <span class="keyword">let</span> arr = [];</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> mod = number % radix;</span><br><span class="line">            number = (number - mod) / radix;</span><br><span class="line">            arr.<span class="title function_">unshift</span>(chars[mod]);</span><br><span class="line">        &#125; <span class="keyword">while</span> (number);</span><br><span class="line">        <span class="keyword">return</span> arr.<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 保存登录信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> <span class="variable">loginUser</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">setLoginUser</span>:<span class="keyword">function</span> (<span class="params">loginUser</span>)&#123;</span><br><span class="line">        <span class="title class_">SessionStorage</span>.<span class="title function_">set</span>(<span class="variable constant_">SESSION_KEY_LOGIN_USER</span>,loginUser);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取登录信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> <span class="variable">loginUser</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@returns</span> &#123;<span class="type">any|&#123;</span>&#125;&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">getLoginUser</span>:<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">SessionStorage</span>.<span class="title function_">get</span>(<span class="variable constant_">SESSION_KEY_LOGIN_USER</span>) ||&#123;&#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 随机生成[len]长度的[radix]进制数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> <span class="variable">len</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> radix 默认62</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@returns</span> &#123;<span class="type">string</span>&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">uuid</span>: <span class="keyword">function</span> (<span class="params">len, radix</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> chars = <span class="string">&#x27;0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz&#x27;</span>.<span class="title function_">split</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">        <span class="keyword">let</span> uuid = [];</span><br><span class="line">        radix = radix || chars.<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            uuid[i] = chars[<span class="number">0</span> | <span class="title class_">Math</span>.<span class="title function_">random</span>() * radix];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> uuid.<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查找是否有权限</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id 资源id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">hasResource</span>: <span class="keyword">function</span> (<span class="params">id</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> _this = <span class="variable language_">this</span>;</span><br><span class="line">        <span class="keyword">let</span> resources = _this.<span class="title function_">getLoginUser</span>().<span class="property">resources</span>;</span><br><span class="line">        <span class="keyword">if</span> (_this.<span class="title function_">isEmpty</span>(resources)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; resources.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (id === resources[i].<span class="property">id</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>修改list.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">//data中增加两个层级</span><br><span class="line">level1:[],</span><br><span class="line">level2:[],</span><br><span class="line">//mounted初始化</span><br><span class="line">  _this.allCategory();</span><br><span class="line">//增加方法</span><br><span class="line"></span><br><span class="line">      /**</span><br><span class="line">       * 所有分类查询</span><br><span class="line">       */</span><br><span class="line">      allCategory() &#123;</span><br><span class="line">        let _this = this;</span><br><span class="line">        _this.$ajax.post(process.env.VUE_APP_SERVER + &#x27;/business/web/category/all&#x27;).then((response)=&gt;&#123;</span><br><span class="line">          let resp = response.data;</span><br><span class="line">          let categorys = resp.content;</span><br><span class="line"></span><br><span class="line">          // 将所有记录格式化成树形结构</span><br><span class="line">          _this.level1 = [];</span><br><span class="line">          for (let i = 0; i &lt; categorys.length; i++) &#123;</span><br><span class="line">            let c = categorys[i];</span><br><span class="line">            if (c.parent === &#x27;00000000&#x27;) &#123;</span><br><span class="line">              _this.level1.push(c);</span><br><span class="line">              for(let j =0;j&lt;categorys.level;j++)&#123;</span><br><span class="line">                let child = categorys[j];</span><br><span class="line">                if (child.parent ===c.id)&#123;</span><br><span class="line">                  if(Tool.isEmpty(c.children))&#123;</span><br><span class="line">                    c.children = [];</span><br><span class="line">                  &#125;</span><br><span class="line">                  c.children.push(child);</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">              _this.level2.push(c);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;,</span><br></pre></td></tr></table></figure>

<ul>
<li>当然这时我们要在business&#x2F;web增加一个CategoryController</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.business.controller.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.course.server.dto.CategoryDto;</span><br><span class="line"><span class="keyword">import</span> com.course.server.dto.ResponseDto;</span><br><span class="line"><span class="keyword">import</span> com.course.server.service.CategoryService;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController(&quot;webCategoryController&quot;)</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/web/category&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CategoryController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">LOG</span> <span class="operator">=</span> LoggerFactory.getLogger(CategoryController.class);</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">BUSINESS_NAME</span> <span class="operator">=</span> <span class="string">&quot;分类&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> CategoryService categoryService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 列表查询</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/all&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseDto <span class="title function_">all</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">ResponseDto</span> <span class="variable">responseDto</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResponseDto</span>();</span><br><span class="line">        List&lt;CategoryDto&gt; categoryDtoList = categoryService.all();</span><br><span class="line">        responseDto.setContent(categoryDtoList);</span><br><span class="line">        <span class="keyword">return</span> responseDto;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2.课程列表页面开发，两级分类访问慕课网显示</span><br></pre></td></tr></table></figure>

<ul>
<li>修改list.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;header-nav&quot;&gt;</span><br><span class="line">  &lt;div class=&quot;clearfix&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;row&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;col-12&quot;&gt;</span><br><span class="line">          &lt;a v-on:click=&quot;onClickLevel1(&#x27;00000000&#x27;)&quot; id=&quot;category-00000000&quot; href=&quot;javascript:;&quot; class=&quot;cur&quot;&gt;全部&lt;/a&gt;</span><br><span class="line">          &lt;a v-for=&quot;o in level1&quot; v-on:click=&quot;onClickLevel1(o.id)&quot; v-bind:id=&quot;&#x27;category-&#x27; + o.id&quot; href=&quot;javascript:;&quot;&gt;&#123;&#123;o.name&#125;&#125;&lt;/a&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;skill clearfix&quot;&gt;</span><br><span class="line">  &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;row&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;col-12&quot;&gt;</span><br><span class="line">        &lt;a v-on:click=&quot;onClickLevel2(&#x27;11111111&#x27;)&quot; id=&quot;category-11111111&quot; href=&quot;javascript:;&quot; class=&quot;on&quot;&gt;不限&lt;/a&gt;</span><br><span class="line">        &lt;a v-for=&quot;o in level2&quot; v-on:click=&quot;onClickLevel2(o.id)&quot; v-bind:id=&quot;&#x27;category-&#x27; + o.id&quot; href=&quot;javascript:;&quot;&gt;&#123;&#123;o.name&#125;&#125;&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div style=&quot;clear:both&quot;&gt;&lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">//增加两个方法</span><br><span class="line">  /**</span><br><span class="line">       * 点击一级分类时</span><br><span class="line">       * @param level1Id</span><br><span class="line">       */</span><br><span class="line">      onClickLevel1(level1Id) &#123;</span><br><span class="line">        let _this = this;</span><br><span class="line">      &#125;,</span><br><span class="line">      /**</span><br><span class="line">       * 点击二级分类时</span><br><span class="line">       * @param level1Id</span><br><span class="line">       */</span><br><span class="line">      onClickLevel2(level2Id) &#123;</span><br><span class="line">        let _this = this;</span><br><span class="line">      &#125;,</span><br><span class="line">//增加两个样式</span><br><span class="line">&lt;style&gt;</span><br><span class="line">  /* 头部 一级分类 */</span><br><span class="line">.header-nav &#123;</span><br><span class="line">  height: auto;</span><br><span class="line">  background: #fff;</span><br><span class="line">  box-shadow: 0 8px 16px 0 rgba(28,31,33,.1);</span><br><span class="line">  padding: 16px 0;</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">  position: relative;</span><br><span class="line">  z-index: 1;</span><br><span class="line">  /*background-color: #d6e9c6;*/</span><br><span class="line">&#125;</span><br><span class="line">.header-nav&gt;div &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  padding-left: 12px;</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">  margin-left: auto;</span><br><span class="line">  margin-right: auto;</span><br><span class="line">  /*background-color: #B4D5AC;*/</span><br><span class="line">&#125;</span><br><span class="line">.header-nav a &#123;</span><br><span class="line">  float: left;</span><br><span class="line">  font-size: 16px;</span><br><span class="line">  color: #07111b;</span><br><span class="line">  line-height: 50px;</span><br><span class="line">  height: 45px;</span><br><span class="line">  position: relative;</span><br><span class="line">  margin-right: 46px;</span><br><span class="line">  font-weight: 700;</span><br><span class="line">&#125;</span><br><span class="line">.header-nav a:hover &#123;</span><br><span class="line">  color: #c80;</span><br><span class="line">&#125;</span><br><span class="line">.header-nav a.cur &#123;</span><br><span class="line">  color: #c80;</span><br><span class="line">&#125;</span><br><span class="line">.header-nav a.cur:before &#123;</span><br><span class="line">  display: block;</span><br><span class="line">&#125;</span><br><span class="line">.header-nav a:before &#123;</span><br><span class="line">  display: none;</span><br><span class="line">  content: &#x27; &#x27;;</span><br><span class="line">  position: absolute;</span><br><span class="line">  bottom: 0;</span><br><span class="line">  background: #c80;</span><br><span class="line">  width: 16px;</span><br><span class="line">  height: 3px;</span><br><span class="line">  left: 50%;</span><br><span class="line">  margin-left: -8px;</span><br><span class="line">&#125;</span><br><span class="line">/* 二级分类 */</span><br><span class="line">.skill &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  padding: 24px 0 0;</span><br><span class="line">  position: relative;</span><br><span class="line">  margin: 0 auto;</span><br><span class="line">&#125;</span><br><span class="line">.skill a.on &#123;</span><br><span class="line">  color: #c80;</span><br><span class="line">  background: rgba(204,136,0,.1);</span><br><span class="line">&#125;</span><br><span class="line">.skill a &#123;</span><br><span class="line">  float: left;</span><br><span class="line">  margin-right: 20px;</span><br><span class="line">  padding: 0 12px;</span><br><span class="line">  font-size: 14px;</span><br><span class="line">  color: #4d555d;</span><br><span class="line">  line-height: 32px;</span><br><span class="line">  border-radius: 6px;</span><br><span class="line">  margin-bottom: 12px;</span><br><span class="line">&#125;</span><br><span class="line">.skill a:hover &#123;</span><br><span class="line">  background: #d9dde1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3.课程列表页面开发，点击一级分类时显示激活状态，并显示对应的二级分类，如果点击的是全部，则显示所有的二级分类</span><br></pre></td></tr></table></figure>

<ul>
<li>只修改list.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">//data中增加总分类</span><br><span class="line">categorys:[],</span><br><span class="line">//然后再allCategory中加上</span><br><span class="line">_this.categorys = categorys;</span><br><span class="line"> /**</span><br><span class="line">       * 点击一级分类时</span><br><span class="line">       * @param level1Id</span><br><span class="line">       */</span><br><span class="line">      onClickLevel1(level1Id) &#123;</span><br><span class="line">        let _this = this;</span><br><span class="line">        // 点击一级分类时，显示激活状态</span><br><span class="line">        $(&quot;#category-&quot; + level1Id).siblings(&quot;a&quot;).removeClass(&quot;cur&quot;);</span><br><span class="line">        $(&quot;#category-&quot; + level1Id).addClass(&quot;cur&quot;);</span><br><span class="line"></span><br><span class="line">        // 点击一级分类时，二级分类【无限】按钮要设置激活状态</span><br><span class="line">        $(&quot;#category-11111111&quot;).siblings(&quot;a&quot;).removeClass(&quot;on&quot;);</span><br><span class="line">        $(&quot;#category-11111111&quot;).addClass(&quot;on&quot;);</span><br><span class="line"></span><br><span class="line">        // 注意：要先把level2中所有的值清空，再往里放</span><br><span class="line">        _this.level2 = [];</span><br><span class="line">        let categorys = _this.categorys;</span><br><span class="line">        // 如果点击的是【全部】，则显示所有的二级分类</span><br><span class="line">        if (level1Id === &#x27;00000000&#x27;) &#123;</span><br><span class="line">          for (let i = 0; i &lt; categorys.length; i++) &#123;</span><br><span class="line">            let c = categorys[i];</span><br><span class="line">            if (c.parent !== &quot;00000000&quot;) &#123;</span><br><span class="line">              _this.level2.push(c);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        // 如果点击的是某个一级分类，则显示该一级分类下的二级分类</span><br><span class="line">        if (level1Id !== &#x27;00000000&#x27;) &#123;</span><br><span class="line">          for (let i = 0; i &lt; categorys.length; i++) &#123;</span><br><span class="line">            let c = categorys[i];</span><br><span class="line">            if (c.parent === level1Id) &#123;</span><br><span class="line">              _this.level2.push(c);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4.课程列表页面开发，点击二级分类时显示激活状态</span><br></pre></td></tr></table></figure>

<ul>
<li>也是修改list.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 点击二级分类时</span><br><span class="line"> * @param level1Id</span><br><span class="line"> */</span><br><span class="line">onClickLevel2(level2Id) &#123;</span><br><span class="line">  let _this = this;</span><br><span class="line">  $(&quot;#category-&quot; + level2Id).siblings(&quot;a&quot;).removeClass(&quot;on&quot;);</span><br><span class="line">  $(&quot;#category-&quot; + level2Id).addClass(&quot;on&quot;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5.课程列表页面开发，根据点击的分类进行课程筛选，动态sql不仅可以进行动态列查询，也可以进行动态表关联</span><br></pre></td></tr></table></figure>

<ul>
<li><p>一级分类的全部激活时，level1id清空，二级分类的不限激活时，level2id清空，这样categoryid这个参数就是空的，即查询全部课程</p>
</li>
<li><p>前端我们修改list.vue</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">//data中增加两个要传入后端的参数</span><br><span class="line">level1Id: &quot;&quot;,</span><br><span class="line">level2Id: &quot;&quot;,</span><br><span class="line">//listCourse的传入后端的参数中加入</span><br><span class="line">categoryId: _this.level2Id || _this.level1Id || &quot;&quot;, // 优先取level2Id</span><br><span class="line">//再onClickLevel1中添加</span><br><span class="line">// 点击一级分类时，设置变量，用于课程筛选</span><br><span class="line">// 二级分类id为空，</span><br><span class="line">// 如果点击的是【全部】，则一级分类id为空</span><br><span class="line">_this.level2Id = null;</span><br><span class="line">_this.level1Id = level1Id;</span><br><span class="line">if (level1Id === &quot;00000000&quot;) &#123;</span><br><span class="line">	_this.level1Id = null;</span><br><span class="line">&#125;</span><br><span class="line"> // 最后重新加载课程列表</span><br><span class="line">_this.listCourse(1);</span><br><span class="line">//在onClickLevel2中</span><br><span class="line">// 点击二级分类时，设置变量，用于课程筛选</span><br><span class="line">// 如果点击的是【无限】，则二级分类id为空</span><br><span class="line">if (level2Id === &quot;11111111&quot;) &#123;</span><br><span class="line">	_this.level2Id = null;</span><br><span class="line">&#125; else &#123;</span><br><span class="line">	_this.level2Id = level2Id;</span><br><span class="line">&#125;</span><br><span class="line">// 重新加载课程列表</span><br><span class="line">_this.listCourse(1);</span><br></pre></td></tr></table></figure>

<ul>
<li>下面开始修改后端首先MyCourseMapper.java</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;CourseDto&gt; <span class="title function_">list</span><span class="params">(<span class="meta">@Param(&quot;pageDto&quot;)</span> CoursePageDto pageDto)</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>然后再CoursePageDto中新增字段</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> String categoryId;</span><br></pre></td></tr></table></figure>

<ul>
<li>课程表+课程分类关联表两张表关联。多表关联查询，需要写自定义sql，这时修改MyCourseMapper.xml</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- web端【全部课程】页面，查询课程列表 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;list&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.course.server.dto.CourseDto&quot;</span>&gt;</span></span><br><span class="line">    select c.id, c.name, c.summary, time, price, image, level,</span><br><span class="line">    charge, status, enroll, sort, created_at as createdAt,</span><br><span class="line">    updated_at as updatedAt, teacher_id as teacherId</span><br><span class="line">    from `course` c</span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;pageDto.categoryId != null and pageDto.categoryId != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">        , course_category cc</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    where 1 = 1</span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;pageDto.categoryId != null and pageDto.categoryId != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">        and c.id = cc.course_id</span><br><span class="line">        and cc.category_id = #&#123;pageDto.categoryId&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;pageDto.status != null and pageDto.status != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">        and c.status = #&#123;pageDto.status&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    order by c.sort asc</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>最后我们修改CourseService，将其全部替换</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 列表查询：关联课程分类表</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> pageDto</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">list</span><span class="params">(CoursePageDto pageDto)</span> &#123;</span><br><span class="line">    PageHelper.startPage(pageDto.getPage(), pageDto.getSize());</span><br><span class="line">    List&lt;CourseDto&gt; courseDtoList = myCourseMapper.list(pageDto);</span><br><span class="line">    PageInfo&lt;CourseDto&gt; pageInfo = <span class="keyword">new</span> <span class="title class_">PageInfo</span>&lt;&gt;(courseDtoList);</span><br><span class="line">    pageDto.setTotal(pageInfo.getTotal());</span><br><span class="line">    pageDto.setList(courseDtoList);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="13-7-课程详情页面开发"><a href="#13-7-课程详情页面开发" class="headerlink" title="13-7 课程详情页面开发"></a>13-7 课程详情页面开发</h2><p><strong>新增详情页面并配置路由</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.课程列表页面开发，新增详情页面并配置路由</span><br><span class="line">2.课程报名数显示真实数据</span><br></pre></td></tr></table></figure>

<ul>
<li>首先再views中增加detail.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;main role=&quot;main&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;album py-5 bg-light&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">      &lt;h3&gt;课程详情&lt;/h3&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &lt;/main&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;detail&#x27;,</span><br><span class="line"></span><br><span class="line">  data: function () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>然后增加路由</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">, &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/detail&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Detail</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>最后在the-course中增加</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link v-bind:to=&quot;&#x27;/detail?id=&#x27; + course.id&quot; class=&quot;btn btn-outline-secondary&quot;&gt;课程详情&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>还有那个报名人数之间就加了</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;span class=&quot;badge badge-info&quot;&gt;&lt;i class=&quot;fa fa-yen&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&amp;nbsp;&#123;&#123;course.enroll&#125;&#125;&lt;/span&gt;&amp;nbsp;</span><br></pre></td></tr></table></figure>

<p><strong>增加后端课程详情接口</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.课程列表页面开发，增加后端课程详情接口,只能查询已发布的课程，包括内容、讲师、大章、小节信息</span><br></pre></td></tr></table></figure>

<ul>
<li>首先修改CourseDto增加字段</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> List&lt;ChapterDto&gt; chapters;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> List&lt;SectionDto&gt; sections;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> String content;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> TeacherDto teacher;</span><br></pre></td></tr></table></figure>

<ul>
<li>然后增加CourseController</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/find/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseDto <span class="title function_">findCourse</span><span class="params">(<span class="meta">@PathVariable</span> String id)</span> &#123;</span><br><span class="line">    LOG.info(<span class="string">&quot;查找课程开始：&#123;&#125;&quot;</span>, id);</span><br><span class="line">    <span class="type">ResponseDto</span> <span class="variable">responseDto</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResponseDto</span>();</span><br><span class="line">    <span class="type">CourseDto</span> <span class="variable">courseDto</span> <span class="operator">=</span> courseService.findCourse(id);</span><br><span class="line">    responseDto.setContent(courseDto);</span><br><span class="line">    LOG.info(<span class="string">&quot;查找课程结束：&#123;&#125;&quot;</span>, responseDto);</span><br><span class="line">    <span class="keyword">return</span> responseDto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>接下来修改CourseService</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Resource</span></span><br><span class="line"><span class="keyword">private</span> TeacherService teacherService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Resource</span></span><br><span class="line"><span class="keyword">private</span> ChapterService chapterService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Resource</span></span><br><span class="line"><span class="keyword">private</span> SectionService sectionService;</span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查找某一课程，供web模块用，只能查已发布的</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> CourseDto <span class="title function_">findCourse</span><span class="params">(String id)</span> &#123;</span><br><span class="line">        <span class="type">Course</span> <span class="variable">course</span> <span class="operator">=</span> courseMapper.selectByPrimaryKey(id);</span><br><span class="line">        <span class="keyword">if</span> (course == <span class="literal">null</span> || !CourseStatusEnum.PUBLISH.getCode().equals(course.getStatus())) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">CourseDto</span> <span class="variable">courseDto</span> <span class="operator">=</span> CopyUtil.copy(course, CourseDto.class);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 查询内容</span></span><br><span class="line">        <span class="type">CourseContent</span> <span class="variable">content</span> <span class="operator">=</span> courseContentMapper.selectByPrimaryKey(id);</span><br><span class="line">        <span class="keyword">if</span> (content != <span class="literal">null</span>) &#123;</span><br><span class="line">            courseDto.setContent(content.getContent());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 查找讲师信息</span></span><br><span class="line">        <span class="type">TeacherDto</span> <span class="variable">teacherDto</span> <span class="operator">=</span> teacherService.findById(courseDto.getTeacherId());</span><br><span class="line">        courseDto.setTeacher(teacherDto);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 查找章信息</span></span><br><span class="line">        List&lt;ChapterDto&gt; chapterDtoList = chapterService.listByCourse(id);</span><br><span class="line">        courseDto.setChapters(chapterDtoList);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 查找节信息</span></span><br><span class="line">        List&lt;SectionDto&gt; sectionDtoList = sectionService.listByCourse(id);</span><br><span class="line">        courseDto.setSections(sectionDtoList);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> courseDto;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>接下来针对findCourse中的三个查找信息，修改teacherService，chapterService，sectionService</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查找</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> TeacherDto <span class="title function_">findById</span><span class="params">(String id)</span> &#123;</span><br><span class="line">    <span class="type">Teacher</span> <span class="variable">teacher</span> <span class="operator">=</span> teacherMapper.selectByPrimaryKey(id);</span><br><span class="line">    <span class="keyword">return</span> CopyUtil.copy(teacher, TeacherDto.class);</span><br><span class="line">&#125;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询某一课程下的所有章</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;ChapterDto&gt; <span class="title function_">listByCourse</span><span class="params">(String courseId)</span> &#123;</span><br><span class="line">        <span class="type">ChapterExample</span> <span class="variable">example</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ChapterExample</span>();</span><br><span class="line">        example.createCriteria().andCourseIdEqualTo(courseId);</span><br><span class="line">        List&lt;Chapter&gt; chapterList = chapterMapper.selectByExample(example);</span><br><span class="line">        List&lt;ChapterDto&gt; chapterDtoList = CopyUtil.copyList(chapterList, ChapterDto.class);</span><br><span class="line">        <span class="keyword">return</span> chapterDtoList;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询某一课程下的所有节</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;SectionDto&gt; <span class="title function_">listByCourse</span><span class="params">(String courseId)</span> &#123;</span><br><span class="line">        <span class="type">SectionExample</span> <span class="variable">example</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SectionExample</span>();</span><br><span class="line">        example.createCriteria().andCourseIdEqualTo(courseId);</span><br><span class="line">        List&lt;Section&gt; sectionList = sectionMapper.selectByExample(example);</span><br><span class="line">        List&lt;SectionDto&gt; sectionDtoList = CopyUtil.copyList(sectionList, SectionDto.class);</span><br><span class="line">        <span class="keyword">return</span> sectionDtoList;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><strong>前端界面显示课程信息</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.课程列表页面开发，增加课程信息显示，可以使用@media(max-width:700px)来精细控制不同分辨率的显示样式</span><br></pre></td></tr></table></figure>

<ul>
<li><p>如果地址是xxx？id&#x3D;a。那在vue代码里要获取id的值的话，可以使用this.$router.query.id</p>
</li>
<li><p>修改detail.vue</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;main role=&quot;main&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;album py-5 bg-light&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;row course-head&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;col-sm-6&quot; id=&quot;cover-video-div&quot;&gt;</span><br><span class="line">            &lt;img class=&quot;img-fluid&quot; v-bind:src=&quot;course.image&quot;&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;col-sm-6&quot;&gt;</span><br><span class="line">            &lt;h1&gt;&#123;&#123;course.name&#125;&#125;&lt;/h1&gt;</span><br><span class="line">            &lt;p class=&quot;course-head-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;&lt;i class=&quot;fa fa-clock-o&quot;&gt;&lt;/i&gt; 两个大括号包住(course.time) | format..Second&lt;/span&gt;</span><br><span class="line">              &lt;span&gt;format..SecondCOURSE_LEVEL | option..KV(course.level)&lt;/span&gt;</span><br><span class="line">              &lt;span&gt;&lt;i class=&quot;fa fa-user&quot;&gt;&lt;/i&gt; &#123;&#123;course.enroll&#125;&#125;&lt;/span&gt;</span><br><span class="line">            &lt;/p&gt;</span><br><span class="line">            &lt;p class=&quot;course-head-desc&quot;&gt;&#123;&#123;course.summary&#125;&#125;&lt;/p&gt;</span><br><span class="line">            &lt;p class=&quot;course-head-price&quot;&gt;</span><br><span class="line">              &lt;span class=&quot;price-now text-danger&quot;&gt;&lt;i class=&quot;fa fa-yen&quot;&gt;&lt;/i&gt;&amp;nbsp;&#123;&#123;course.price&#125;&#125;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</span><br><span class="line">            &lt;/p&gt;</span><br><span class="line">            &lt;p class=&quot;course-head-button-links&quot;&gt;</span><br><span class="line">              &lt;a  class=&quot;btn btn-lg btn-primary btn-shadow&quot; href=&quot;javascript:;&quot;&gt;立即报名&lt;/a&gt;</span><br><span class="line">            &lt;/p&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &lt;/main&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;detail&#x27;,</span><br><span class="line"></span><br><span class="line">  data: function () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      id: &quot;&quot;,</span><br><span class="line">      course: &#123;&#125;,</span><br><span class="line">      teacher: &#123;&#125;,</span><br><span class="line">      chapters: [],</span><br><span class="line">      sections: [],</span><br><span class="line">      COURSE_LEVEL: COURSE_LEVEL,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    let _this = this;</span><br><span class="line">    _this.id = _this.$route.query.id;</span><br><span class="line">    _this.findCourse();</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    findCourse() &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      _this.$ajax.get(process.env.VUE_APP_SERVER + &#x27;/business/web/course/find/&#x27; + _this.id).then((response) =&gt; &#123;</span><br><span class="line">        let resp = response.data;</span><br><span class="line">        _this.course = resp.content;</span><br><span class="line">        _this.teacher = _this.course.teacher || &#123;&#125;;</span><br><span class="line">        _this.chapters = _this.course.chapters || [];</span><br><span class="line">        _this.sections = _this.course.sections || [];</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">/* 课程信息 */</span><br><span class="line">.course-head &#123;</span><br><span class="line">&#125;</span><br><span class="line">.course-head h1 &#123;</span><br><span class="line">  font-size: 2rem;</span><br><span class="line">  margin-bottom: 1.5rem;</span><br><span class="line">&#125;</span><br><span class="line">.course-head-item span &#123;</span><br><span class="line">  margin-right: 1rem;</span><br><span class="line">&#125;</span><br><span class="line">.course-head-desc &#123;</span><br><span class="line">  font-size: 1rem;</span><br><span class="line">  color: #555</span><br><span class="line">&#125;</span><br><span class="line">.course-head a &#123;</span><br><span class="line">&#125;</span><br><span class="line">.course-head-price &#123;</span><br><span class="line">  font-size: 2rem;</span><br><span class="line">&#125;</span><br><span class="line">@media (max-width: 700px) &#123;</span><br><span class="line">  .course-head h1 &#123;</span><br><span class="line">    font-size: 1.5rem;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2.课程列表页面开发，增加课程内容显示</span><br></pre></td></tr></table></figure>

<ul>
<li>在detail.vue中添加</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;row&quot;&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- 课程内容 &amp; 大章小节 --&gt;</span><br><span class="line">  &lt;div class=&quot;col-md-9&quot;&gt;</span><br><span class="line">    &lt;!-- Nav tabs --&gt;</span><br><span class="line">    &lt;ul class=&quot;nav nav-tabs&quot;&gt;</span><br><span class="line">      &lt;li class=&quot;nav-item&quot;&gt;</span><br><span class="line">        &lt;a class=&quot;nav-link active&quot; href=&quot;#info&quot; data-toggle=&quot;tab&quot;&gt;课程介绍&lt;/a&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">      &lt;li class=&quot;nav-item&quot;&gt;</span><br><span class="line">        &lt;a class=&quot;nav-link&quot; href=&quot;#chapter&quot; data-toggle=&quot;tab&quot;&gt;章节目录&lt;/a&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;!-- Tab panes --&gt;</span><br><span class="line">    &lt;div class=&quot;tab-content&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;tab-pane active&quot; id=&quot;info&quot; v-html=&quot;course.content&quot;&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div class=&quot;tab-pane&quot; id=&quot;chapter&quot;&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;!-- 讲师信息 --&gt;</span><br><span class="line">  &lt;div class=&quot;col-md-3&quot;&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3.课程列表页面开发，增加讲师信息显示</span><br></pre></td></tr></table></figure>

<ul>
<li>同样在detail.vue的讲师部分增加代码</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;col-md-3&quot;&gt;</span><br><span class="line">  &lt;div class=&quot;card&quot; style=&quot;width: 18rem;&quot;&gt;</span><br><span class="line">    &lt;img v-bind:src=&quot;teacher.image&quot; class=&quot;card-img-top&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;card-body&quot;&gt;</span><br><span class="line">      &lt;h5 class=&quot;card-title&quot;&gt;&#123;&#123;teacher.name&#125;&#125;&lt;/h5&gt;</span><br><span class="line">      &lt;p class=&quot;card-text&quot;&gt;&#123;&#123;teacher.motto&#125;&#125;&lt;/p&gt;</span><br><span class="line">      &lt;p class=&quot;card-text&quot;&gt;&#123;&#123;teacher.intro&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h2 id="13-8-章节显示与视频播放"><a href="#13-8-章节显示与视频播放" class="headerlink" title="13-8 章节显示与视频播放"></a>13-8 章节显示与视频播放</h2><p><strong>大章和小节的分组显示</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.课程详情页面开发，增加大章小节显示</span><br><span class="line">使用d-none d-sm-inline组合：超小屏时隐藏，其它显示</span><br><span class="line">v-for的第二变量是索引号</span><br></pre></td></tr></table></figure>

<ul>
<li><p>第一个变量是遍历的每一个实体，第二变量是数组索引，从0开始</p>
</li>
<li><p>d-none就是display:none，隐藏元素</p>
</li>
<li><p>修改detail.vue</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">//给 &lt;!-- Tab panes --&gt;中增加小节</span><br><span class="line">&lt;div class=&quot;tab-pane&quot; id=&quot;chapter&quot;&gt;</span><br><span class="line">  &lt;div v-for=&quot;chapter in chapters&quot; class=&quot;chapter&quot;&gt;</span><br><span class="line">    &lt;div  class=&quot;chapter-chapter&quot;&gt;</span><br><span class="line">      &lt;span class=&quot;folded-button&quot;&gt;&#123;&#123;chapter.name&#125;&#125;&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div &gt;</span><br><span class="line">      &lt;table class=&quot;table table-striped&quot;&gt;</span><br><span class="line">        &lt;tr v-for=&quot;(s, j) in chapter.sections&quot; class=&quot;chapter-section-tr&quot;&gt;</span><br><span class="line">          &lt;td class=&quot;col-sm-8 col-xs-12&quot;&gt;</span><br><span class="line">            &lt;div  class=&quot;section-title&quot;&gt;</span><br><span class="line">              &lt;i class=&quot;fa fa-video-camera d-none d-sm-inline&quot;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;</span><br><span class="line">              &lt;span class=&quot;d-none d-sm-inline&quot;&gt;第&#123;&#123;j+1&#125;&#125;节&amp;nbsp;&amp;nbsp;&lt;/span&gt;</span><br><span class="line">              &#123;&#123;s.title&#125;&#125;</span><br><span class="line">              &lt;span v-show=&quot;s.charge !== SECTION_CHARGE.CHARGE.key&quot; class=&quot;badge badge-primary hidden-xs&quot;&gt;免费&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/td&gt;</span><br><span class="line">          &lt;td class=&quot;col-sm-1 text-right&quot;&gt;</span><br><span class="line">            &lt;span class=&quot;badge badge-primary&quot;&gt;两个大括号包住s.time | format..Second&lt;/span&gt;</span><br><span class="line">          &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">      &lt;/table&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">//在data中增加上面使用的字段</span><br><span class="line">SECTION_CHARGE: SECTION_CHARGE</span><br><span class="line">//在findCourse中加循环</span><br><span class="line">// 将所有的节放入对应的章中</span><br><span class="line">        for (let i = 0; i &lt; _this.chapters.length; i++) &#123;</span><br><span class="line">          let c = _this.chapters[i];</span><br><span class="line">          c.sections = [];</span><br><span class="line">          for (let j = 0; j &lt; _this.sections.length; j++) &#123;</span><br><span class="line">            let s = _this.sections[j];</span><br><span class="line">            if (c.id === s.chapterId) &#123;</span><br><span class="line">              c.sections.push(s);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">//增加css样式</span><br><span class="line">/* 章节列表 */</span><br><span class="line">.chapter &#123;</span><br><span class="line">  padding-bottom: 1.25rem;</span><br><span class="line">&#125;</span><br><span class="line">.chapter-chapter &#123;</span><br><span class="line">  font-size: 1.25rem;</span><br><span class="line">  padding: 1.25rem;</span><br><span class="line">  background-color: #23527c;</span><br><span class="line">  color: white;</span><br><span class="line">  cursor: pointer;</span><br><span class="line">&#125;</span><br><span class="line">.chapter-section-tr &#123;</span><br><span class="line">  font-size: 1rem;</span><br><span class="line">&#125;</span><br><span class="line">.chapter-section-tr td&#123;</span><br><span class="line">  padding: 1rem 1.25rem;</span><br><span class="line">  vertical-align: middle;</span><br><span class="line">&#125;</span><br><span class="line">/*鼠标手势*/</span><br><span class="line">.chapter-section-tr td .section-title&#123;</span><br><span class="line">  color: #555;</span><br><span class="line">&#125;</span><br><span class="line">.chapter-section-tr td .section-title:hover&#123;</span><br><span class="line">  color: #23527c;</span><br><span class="line">  font-weight: bolder;</span><br><span class="line">  cursor: pointer;</span><br><span class="line">&#125;</span><br><span class="line">/*行头小图标*/</span><br><span class="line">.chapter-section-tr td .section-title i&#123;</span><br><span class="line">  color: #2a6496;</span><br><span class="line">&#125;</span><br><span class="line">@media (max-width: 700px) &#123;</span><br><span class="line">  .chapter-chapter &#123;</span><br><span class="line">    font-size: 1.2rem;</span><br><span class="line">  &#125;</span><br><span class="line">  .chapter-section-tr &#123;</span><br><span class="line">    font-size: 0.9rem;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2.课程详情页面开发，增加大章小节收缩和展开</span><br><span class="line">注意：在v-for里写v-show.只修改属性不起作用，需要$set</span><br></pre></td></tr></table></figure>

<ul>
<li><p>从后端加载出来的大章数据，是没有folded属性的，相当于chapter.folded&#x3D;false</p>
</li>
<li><p>注意：v-for里面，如果用到了v-show，且v-show里面的控制属性值是随着界面操作而变化的，此时只修改属性值是不生效的，vue监听不到数组里的某个元素的值的变化。需要用到$set</p>
</li>
<li><p>修改detail.vue</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-for=&quot;(chapter, i) in chapters&quot; class=&quot;chapter&quot;&gt;</span><br><span class="line">  &lt;div  v-on:click=&quot;doFolded(chapter, i)&quot; class=&quot;chapter-chapter&quot;&gt;</span><br><span class="line">    &lt;span &gt;&#123;&#123;chapter.name&#125;&#125;&lt;/span&gt;</span><br><span class="line">    &lt;span class=&quot;pull-right&quot;&gt;</span><br><span class="line">      &lt;i v-show=&quot;chapter.folded&quot; class=&quot;fa fa-plus-square&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;</span><br><span class="line">      &lt;i v-show=&quot;!chapter.folded&quot; class=&quot;fa fa-minus-square&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div v-show=&quot;!chapter.folded&quot;&gt;</span><br><span class="line">   /**</span><br><span class="line">     * 展开/收缩一个章节</span><br><span class="line">     * @param chapter</span><br><span class="line">     */</span><br><span class="line">    doFolded (chapter, i) &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      chapter.folded = !chapter.folded;</span><br><span class="line">      // 在v-for里写v-show，只修改属性不起作用，需要$set</span><br><span class="line">      _this.$set(_this.chapters, i, chapter);</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3.课程详情页面开发，增加视频播放功能</span><br></pre></td></tr></table></figure>

<ul>
<li>首先将admin里面player.vue组件复制过来，修改接口</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div v-bind:id=&quot;playerId&quot;&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export  default &#123;</span><br><span class="line">    name:&#x27;player&#x27;,</span><br><span class="line">    props:&#123;</span><br><span class="line">      playerId:&#123;</span><br><span class="line">        default:&quot;player-div&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    data: function ()&#123;</span><br><span class="line">      return&#123;</span><br><span class="line">        aliPlayer:&#123;&#125;,//播放器实例</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">      playUrl(url)&#123;</span><br><span class="line">        let _this=this;</span><br><span class="line">        console.log(&quot;开始播放:&quot;,url);</span><br><span class="line">        //如果已经有播放器了，则将播放器的div删除</span><br><span class="line">        if (_this.aliPlayer)&#123;</span><br><span class="line">          _this.aliPlayer=null;</span><br><span class="line">          $(&quot;#&quot;+_this.playerId+&#x27;-player&#x27;).remove();</span><br><span class="line">        &#125;</span><br><span class="line">        //初始播放器</span><br><span class="line">        $(&quot;#&quot;+_this.playerId).append(&quot;&lt;div class=\&quot;prism-player\&quot; id=\&quot;&quot;+_this.playerId+&quot;-player\&quot;&gt;&lt;/div&gt;&quot;);        _this.aliPlayer = new Aliplayer(&#123;</span><br><span class="line">          id: _this.playerId+&#x27;-player&#x27;,</span><br><span class="line">          width: &#x27;100%&#x27;,</span><br><span class="line">          autoplay:false,</span><br><span class="line">          source:url,</span><br><span class="line">          cover:&#x27;https://s2.loli.net/2022/03/01/6wagXDIZQGcebUt.png&#x27;,</span><br><span class="line">        &#125;,function(player)&#123;</span><br><span class="line">          console.log(&#x27;播放器创建好了&#x27;)</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">      playVod (vod) &#123;</span><br><span class="line">        let _this = this;</span><br><span class="line">        Loading.show();</span><br><span class="line">          //下面admin改为了web</span><br><span class="line">        _this.$ajax.get(process.env.VUE_APP_SERVER + &#x27;/file/web/get-auth/&#x27; + vod).then((response)=&gt;&#123;</span><br><span class="line">          Loading.hide();</span><br><span class="line">          let resp = response.data;</span><br><span class="line">          if (resp.success) &#123;</span><br><span class="line">            //如果已经有播放器了，则将播放器div删除</span><br><span class="line">            if (_this.aliPlayer) &#123;</span><br><span class="line">              _this.aliPlayer = null;</span><br><span class="line">              $(&quot;#&quot; + _this.playerId + &#x27;-player&#x27;).remove();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            // 初始化播放器</span><br><span class="line">            $(&quot;#&quot; + _this.playerId).append(&quot;&lt;div class=\&quot;prism-player\&quot; id=\&quot;&quot; + _this.playerId + &quot;-player\&quot;&gt;&lt;/div&gt;&quot;);</span><br><span class="line">            _this.aliPlayer = new Aliplayer(&#123;</span><br><span class="line">              id: _this.playerId + &#x27;-player&#x27;,</span><br><span class="line">              width: &#x27;100%&#x27;,</span><br><span class="line">              autoplay: false,</span><br><span class="line">              vid: vod,</span><br><span class="line">              playauth: resp.content,</span><br><span class="line">              cover: &#x27;http://liveroom-img.oss-cn-qingdao.aliyuncs.com/logo.png&#x27;,</span><br><span class="line">              encryptType:1, //当播放私有加密流时需要设置。</span><br><span class="line">            &#125;,function(player)&#123;</span><br><span class="line">              console.log(&#x27;播放器创建好了。&#x27;)</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">            Toast.warning(&#x27;播放错误。&#x27;)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>同样modal-play.vue不做任何修改</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;player-modal&quot; class=&quot;modal&quot; tabindex=&quot;-1&quot; role=&quot;dialog&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;modal-dialog&quot; role=&quot;document&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;modal-content&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;modal-body&quot;&gt;</span><br><span class="line">          &lt;player v-bind:player-id=&quot;&#x27;modal-player-div&#x27;&quot;</span><br><span class="line">                  ref=&quot;player&quot;&gt;&lt;/player&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import Player from &quot;./player&quot;;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#x27;modal-player&#x27;,</span><br><span class="line">    components: &#123;Player&#125;,</span><br><span class="line">    data: function () &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        aliPlayer: &#123;&#125;, // 播放器实例</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      playUrl(url) &#123;</span><br><span class="line">        let _this = this;</span><br><span class="line">        _this.$refs.player.playUrl(url);</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      playVod(vod) &#123;</span><br><span class="line">        let _this = this;</span><br><span class="line">        _this.$refs.player.playVod(vod);</span><br><span class="line">        $(&quot;#player-modal&quot;).modal(&quot;show&quot;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  #player-modal .modal-body &#123;</span><br><span class="line">    padding: 0;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>然后再index.html中引入css和js</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--  阿里云播放器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://g.alicdn.com/de/prismplayer/2.9.19/skins/default/aliplayer-min.css&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  阿里云播放器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://g.alicdn.com/de/prismplayer/2.9.19/aliplayer-min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>接下来把file文件包下面的VodController复制一份，保存到同文件包下新建的web文件包</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.file.controller.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONObject;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSSClient;</span><br><span class="line"><span class="keyword">import</span> com.aliyuncs.DefaultAcsClient;</span><br><span class="line"><span class="keyword">import</span> com.aliyuncs.exceptions.ClientException;</span><br><span class="line"><span class="keyword">import</span> com.aliyuncs.vod.model.v20170321.CreateUploadVideoResponse;</span><br><span class="line"><span class="keyword">import</span> com.aliyuncs.vod.model.v20170321.GetMezzanineInfoResponse;</span><br><span class="line"><span class="keyword">import</span> com.aliyuncs.vod.model.v20170321.GetVideoPlayAuthResponse;</span><br><span class="line"><span class="keyword">import</span> com.course.server.dto.FileDto;</span><br><span class="line"><span class="keyword">import</span> com.course.server.dto.ResponseDto;</span><br><span class="line"><span class="keyword">import</span> com.course.server.enums.FileUseEnum;</span><br><span class="line"><span class="keyword">import</span> com.course.server.service.FileService;</span><br><span class="line"><span class="keyword">import</span> com.course.server.util.Base64ToMultipartFile;</span><br><span class="line"><span class="keyword">import</span> com.course.server.util.VodUtil;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.codec.binary.Base64;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="meta">@RestController(&quot;webVodController&quot;)</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/web&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VodController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">LOG</span> <span class="operator">=</span> LoggerFactory.getLogger(VodController.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">BUSINESS_NAME</span> <span class="operator">=</span> <span class="string">&quot;文件上传&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;vod.accessKeyId&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String accessKeyId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;vod.accessKeySecret&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String accessKeySecret;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> FileService fileService;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@PostMapping(&quot;/vod&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseDto <span class="title function_">fileUpload</span><span class="params">(<span class="meta">@RequestBody</span> FileDto fileDto)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">       LOG.info(<span class="string">&quot;上传文件开始&quot;</span>);</span><br><span class="line">       <span class="type">String</span> <span class="variable">use</span> <span class="operator">=</span> fileDto.getUse();</span><br><span class="line">       <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> fileDto.getKey();</span><br><span class="line">       <span class="type">String</span> <span class="variable">suffix</span> <span class="operator">=</span> fileDto.getSuffix();</span><br><span class="line">       <span class="type">Integer</span> <span class="variable">shardIndex</span> <span class="operator">=</span> fileDto.getShardIndex();</span><br><span class="line">       <span class="type">Integer</span> <span class="variable">shardSize</span> <span class="operator">=</span> fileDto.getShardSize();</span><br><span class="line">       <span class="type">String</span> <span class="variable">shardBase64</span> <span class="operator">=</span> fileDto.getShard();</span><br><span class="line">       <span class="type">MultipartFile</span> <span class="variable">shard</span> <span class="operator">=</span> Base64ToMultipartFile.base64ToMultipart(shardBase64);</span><br><span class="line"></span><br><span class="line">       <span class="comment">// 保存文件到本地</span></span><br><span class="line">       <span class="type">FileUseEnum</span> <span class="variable">useEnum</span> <span class="operator">=</span> FileUseEnum.getByCode(use);</span><br><span class="line"></span><br><span class="line">       <span class="comment">//如果文件夹不存在则创建</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">dir</span> <span class="operator">=</span> useEnum.name().toLowerCase();</span><br><span class="line"></span><br><span class="line">       <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>(dir)</span><br><span class="line">               .append(File.separator)</span><br><span class="line">               .append(key)</span><br><span class="line">               .append(<span class="string">&quot;.&quot;</span>)</span><br><span class="line">               .append(suffix)</span><br><span class="line">               .toString();</span><br><span class="line"></span><br><span class="line">       <span class="type">String</span> <span class="variable">vod</span> <span class="operator">=</span><span class="string">&quot;&quot;</span>;</span><br><span class="line">       <span class="type">String</span> <span class="variable">fileUrl</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">           <span class="comment">// 初始化VOD客户端并获取上传地址和凭证</span></span><br><span class="line">           <span class="type">DefaultAcsClient</span> <span class="variable">vodClient</span> <span class="operator">=</span> VodUtil.initVodClient(accessKeyId, accessKeySecret);</span><br><span class="line">           <span class="type">CreateUploadVideoResponse</span> <span class="variable">createUploadVideoResponse</span> <span class="operator">=</span> VodUtil.createUploadVideo(vodClient,path);</span><br><span class="line">           <span class="comment">// 执行成功会返回VideoId、UploadAddress和UploadAuth</span></span><br><span class="line">           vod = createUploadVideoResponse.getVideoId();</span><br><span class="line"></span><br><span class="line">           <span class="type">JSONObject</span> <span class="variable">uploadAuth</span> <span class="operator">=</span> JSONObject.parseObject(</span><br><span class="line">                   Base64.decodeBase64(createUploadVideoResponse.getUploadAuth()),JSONObject.class);</span><br><span class="line">           <span class="type">JSONObject</span> <span class="variable">uploadAddress</span> <span class="operator">=</span> JSONObject.parseObject(</span><br><span class="line">                   Base64.decodeBase64(createUploadVideoResponse.getUploadAddress()),JSONObject.class);</span><br><span class="line"></span><br><span class="line">           <span class="comment">// 使用UploadAuth和UploadAddress初始化OSS客户端</span></span><br><span class="line">           <span class="type">OSSClient</span> <span class="variable">ossClient</span> <span class="operator">=</span> VodUtil.initOssClient(uploadAuth, uploadAddress);</span><br><span class="line">           <span class="comment">// 上传文件，注意是同步上传会阻塞等待，耗时与文件大小和网络上行带宽有关</span></span><br><span class="line">           VodUtil.uploadLocalFile(ossClient, uploadAddress, shard.getInputStream());</span><br><span class="line">           System.out.println(<span class="string">&quot;视频上传成功, VideoId : &quot;</span> + vod);</span><br><span class="line">           <span class="type">GetMezzanineInfoResponse</span> <span class="variable">response</span> <span class="operator">=</span>  VodUtil.getMezzanineInfo(vodClient,vod);</span><br><span class="line">           System.out.println(<span class="string">&quot;获取视频信息,response : &quot;</span>+ JSON.toJSONString(response));</span><br><span class="line">           fileUrl = response.getMezzanine().getFileURL();</span><br><span class="line">           ossClient.shutdown();</span><br><span class="line">       &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">           System.out.println(<span class="string">&quot;文件上传失败, ErrorMessage : &quot;</span> + e.getLocalizedMessage());</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       LOG.info(<span class="string">&quot;保存文件记录开始&quot;</span>);</span><br><span class="line">       fileDto.setPath(path);</span><br><span class="line">       fileDto.setVod(vod);</span><br><span class="line">       fileService.save(fileDto);</span><br><span class="line"></span><br><span class="line">       <span class="type">ResponseDto</span> <span class="variable">responseDto</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResponseDto</span>();</span><br><span class="line">       fileDto.setPath(fileUrl);<span class="comment">//返回给前端的需要一个可播放的地址，为了自动获取时长</span></span><br><span class="line">       responseDto.setContent(fileDto);</span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> responseDto;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/get-auth/&#123;vod&#125;&quot;, method = RequestMethod.GET)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseDto <span class="title function_">getAuth</span><span class="params">(<span class="meta">@PathVariable</span> String vod)</span> <span class="keyword">throws</span> ClientException, ClientException, ClientException &#123;</span><br><span class="line">        LOG.info(<span class="string">&quot;获取播放授权开始: &quot;</span>);</span><br><span class="line">        <span class="type">ResponseDto</span> <span class="variable">responseDto</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResponseDto</span>();</span><br><span class="line">        <span class="type">DefaultAcsClient</span> <span class="variable">client</span> <span class="operator">=</span> VodUtil.initVodClient(accessKeyId, accessKeySecret);</span><br><span class="line">        <span class="type">GetVideoPlayAuthResponse</span> <span class="variable">response</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GetVideoPlayAuthResponse</span>();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            response = VodUtil.getVideoPlayAuth(client, vod);</span><br><span class="line">            LOG.info(<span class="string">&quot;授权码 = &#123;&#125;&quot;</span>, response.getPlayAuth());</span><br><span class="line">            responseDto.setContent(response.getPlayAuth());</span><br><span class="line">            <span class="comment">//VideoMeta信息</span></span><br><span class="line">            LOG.info(<span class="string">&quot;VideoMeta = &#123;&#125;&quot;</span>, JSON.toJSONString(response.getVideoMeta()));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.print(<span class="string">&quot;ErrorMessage = &quot;</span> + e.getLocalizedMessage());</span><br><span class="line">        &#125;</span><br><span class="line">        LOG.info(<span class="string">&quot;获取播放授权结束&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> responseDto;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>最后修改detail.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//再这添加on：click事件</span><br><span class="line">  &lt;div v-on:click=&quot;play(s)&quot; class=&quot;section-title&quot;&gt;</span><br><span class="line">//再html的最后添加</span><br><span class="line">    &lt;modal-player ref=&quot;modalPlayer&quot;&gt;&lt;/modal-player&gt;</span><br><span class="line">    &lt;/main&gt;</span><br><span class="line">//导入</span><br><span class="line">    import ModalPlayer from &quot;../components/modal-player&quot;;</span><br><span class="line">    components: &#123;ModalPlayer&#125;,</span><br><span class="line">//写方法</span><br><span class="line"> /**</span><br><span class="line">     * 播放视频</span><br><span class="line">     * @param section</span><br><span class="line">     */</span><br><span class="line">    play(section) &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      _this.$refs.modalPlayer.playVod(section.vod);</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4.课程详情页面开发，对每个大章里面的小节进行排序</span><br></pre></td></tr></table></figure>

<ul>
<li>我们现在web的Tool.js添加方法</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 对象数组按key对应的值排序</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="variable">array</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="variable">key</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">*</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="attr">sortAsc</span>: <span class="keyword">function</span> (<span class="params">array, key</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> array.<span class="title function_">sort</span>(<span class="keyword">function</span> (<span class="params">obj1, obj2</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> val1 = obj1[key];</span><br><span class="line">        <span class="keyword">let</span> val2 = obj2[key];</span><br><span class="line">        <span class="keyword">if</span> (val1 &lt; val2) &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (val1 &gt; val2) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>然后再detail.vue中使用</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">在大章循环最后使用</span><br><span class="line">findCourse() &#123;</span><br><span class="line">    // 将所有的节放入对应的章中</span><br><span class="line">    for (let i = 0; i &lt; _this.chapters.length; i++) &#123;</span><br><span class="line">      Tool.sortAsc(c.sections,&quot;sort&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5.课程详情页面开发，只有免费的视频才可直接播放，收费视频需要登录后才能播放   </span><br></pre></td></tr></table></figure>

<ul>
<li>首先把toast.js复制过来</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Toast</span> = &#123;</span><br><span class="line">    <span class="attr">success</span>:<span class="keyword">function</span> (<span class="params">message</span>)&#123;</span><br><span class="line">        <span class="title class_">Swal</span>.<span class="title function_">fire</span>(&#123;</span><br><span class="line">            <span class="attr">position</span>: <span class="string">&#x27;top-end&#x27;</span>,</span><br><span class="line">            <span class="attr">icon</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">            <span class="attr">title</span>:message,</span><br><span class="line">            <span class="attr">showConfirmButton</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">timer</span>: <span class="number">3000</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">error</span>:<span class="keyword">function</span> (<span class="params">message</span>)&#123;</span><br><span class="line">        <span class="title class_">Swal</span>.<span class="title function_">fire</span>(&#123;</span><br><span class="line">            <span class="attr">position</span>: <span class="string">&#x27;top-end&#x27;</span>,</span><br><span class="line">            <span class="attr">icon</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">            <span class="attr">title</span>: message,</span><br><span class="line">            <span class="attr">showConfirmButton</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">timer</span>: <span class="number">3000</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">warning</span>:<span class="keyword">function</span> (<span class="params">message</span>)&#123;</span><br><span class="line">        <span class="title class_">Swal</span>.<span class="title function_">fire</span>(&#123;</span><br><span class="line">            <span class="attr">position</span>: <span class="string">&#x27;top-end&#x27;</span>,</span><br><span class="line">            <span class="attr">icon</span>: <span class="string">&#x27;warning&#x27;</span>,</span><br><span class="line">            <span class="attr">title</span>: message,</span><br><span class="line">            <span class="attr">showConfirmButton</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">timer</span>: <span class="number">3000</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>然后index.html引入</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--确认框和提示框--&gt;</span><br><span class="line">&lt;script src=&quot;//cdn.jsdelivr.net/npm/sweetalert2@11&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;&lt;%= BASE_URL %&gt;static/js/toast.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>最后在detail.vue使用</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 播放视频</span><br><span class="line"> * @param section</span><br><span class="line"> */</span><br><span class="line">play(section) &#123;</span><br><span class="line">  let _this = this;</span><br><span class="line">  if (section.charge === _this.SECTION_CHARGE.CHARGE.key ) &#123;</span><br><span class="line">    Toast.warning(&quot;请先登录&quot;);</span><br><span class="line">  &#125;else&#123;</span><br><span class="line">    _this.$refs.modalPlayer.playVod(section.vod);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="13-9-增加会员注册功能"><a href="#13-9-增加会员注册功能" class="headerlink" title="13-9 增加会员注册功能"></a>13-9 增加会员注册功能</h2><p><strong>控台增加会员管理功能</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.增加会员管理页面，新增member表，在之前代码生成器的步骤后面，加上以下步骤：</span><br><span class="line">1）在resource.json中增加新资源</span><br><span class="line">2）在【资源管理】页面，配置最新的resource.json</span><br><span class="line">3）在【角色管理】页面，为相应的角色配置新的资源</span><br><span class="line">4）重新登录控台</span><br><span class="line">自从控台加入权限管理功能后，新作的页面，需要增加这四部，配置相应的权限，才能使用新表的管理功能</span><br></pre></td></tr></table></figure>

<ul>
<li>首先写sql，然后代码生成器一顿操作，记得后端和前端要改成business</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 会员</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> `<span class="keyword">member</span>`;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> `<span class="keyword">member</span>`(</span><br><span class="line">                       `id` <span class="type">char</span>(<span class="number">8</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span> comment <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">                       `mobile` <span class="type">varchar</span>(<span class="number">11</span>) <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;手机号&#x27;</span>,</span><br><span class="line">                       `password` <span class="type">char</span>(<span class="number">32</span>) <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;密码&#x27;</span>,</span><br><span class="line">                       `name` <span class="type">varchar</span>(<span class="number">50</span>)  comment <span class="string">&#x27;昵称&#x27;</span>,</span><br><span class="line">                       `photo` <span class="type">varchar</span>(<span class="number">200</span>)  comment <span class="string">&#x27;头像url&#x27;</span>,</span><br><span class="line">                       `register_time` datetime(<span class="number">3</span>)  comment <span class="string">&#x27;注册时间&#x27;</span>,</span><br><span class="line">                       <span class="keyword">primary</span> key (`id`),</span><br><span class="line">                       <span class="keyword">unique</span> key `mobile_unique`(`mobile`)</span><br><span class="line"></span><br><span class="line">)engine <span class="operator">=</span>innodb <span class="keyword">default</span> charset<span class="operator">=</span>utf8mb4 comment<span class="operator">=</span><span class="string">&#x27;会员&#x27;</span>;</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> `<span class="keyword">member</span>` (id,mobile,password,name,photo,register_time) <span class="keyword">values</span> (<span class="string">&#x27;00000000&#x27;</span>,<span class="string">&#x27;12345678901&#x27;</span>,<span class="string">&#x27;10000000&#x27;</span>,<span class="string">&#x27;测试&#x27;</span>,<span class="keyword">null</span>,now());</span><br></pre></td></tr></table></figure>

<ul>
<li>然后给admin的左侧菜单增加</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;li v-show=&quot;hasResource(&#x27;0204&#x27;)&quot; class=&quot;&quot; id=&quot;business-member-sidebar&quot;&gt;</span><br><span class="line">  &lt;router-link to=&quot;/business/member&quot;&gt;</span><br><span class="line">    &lt;i class=&quot;menu-icon fa fa-caret-right&quot;&gt;&lt;/i&gt;</span><br><span class="line">    会员管理</span><br><span class="line">  &lt;/router-link&gt;</span><br><span class="line">  &lt;b class=&quot;arrow&quot;&gt;&lt;/b&gt;</span><br><span class="line">&lt;/li&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>接着增加一个路由</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">,&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;business/member&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;business/member&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Member</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>到目前为止，跟我们前面介绍的制作表单功能的流程一样。但是由于加入权限功能，所以需要配置权限后才能看到页面。</p>
</li>
<li><p>这给在resource.json中增加新资源，剩下的得再控台操作</p>
</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">,</span><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span><span class="string">&quot;0204&quot;</span><span class="punctuation">,</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;会员管理&quot;</span><span class="punctuation">,</span><span class="attr">&quot;page&quot;</span><span class="punctuation">:</span><span class="string">&quot;business/member&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span><span class="string">&quot;020401&quot;</span><span class="punctuation">,</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;增删改查&quot;</span><span class="punctuation">,</span><span class="attr">&quot;request&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;/business/admin/member&quot;</span><span class="punctuation">]</span><span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2.增加会员管理页面，控台的会员管理，不能新增，修改·删除·可以查看会员信息·重置密码·报表统计等操作</span><br></pre></td></tr></table></figure>

<ul>
<li>将MemberController得save和delete方法删除</li>
<li>然后对于member.vue该删删</li>
</ul>
<p><strong>网站增加会员注册功能</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.会员登录注册功能开发，增加登录注册模态框，增加注册功能</span><br></pre></td></tr></table></figure>

<ul>
<li><p>登录表单、注册表单、忘记密码表单放在同一模态框中</p>
</li>
<li><p>首先我们进行web得MemberController增加，密码两层加密，传输加密+保存加密</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.business.controller.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.course.server.dto.MemberDto;</span><br><span class="line"><span class="keyword">import</span> com.course.server.dto.ResponseDto;</span><br><span class="line"><span class="keyword">import</span> com.course.server.service.MemberService;</span><br><span class="line"><span class="keyword">import</span> com.course.server.util.ValidatorUtil;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.DigestUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestBody;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController(&quot;webMemberController&quot;)</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/web/member&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MemberController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">LOG</span> <span class="operator">=</span> LoggerFactory.getLogger(MemberController.class);</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">BUSINESS_NAME</span> <span class="operator">=</span> <span class="string">&quot;会员&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> MemberService memberService;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 保存，id有值时更新，无值时新增</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/register&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseDto <span class="title function_">register</span><span class="params">(<span class="meta">@RequestBody</span> MemberDto memberDto)</span> &#123;</span><br><span class="line">        <span class="comment">// 保存校验</span></span><br><span class="line">        ValidatorUtil.require(memberDto.getMobile(), <span class="string">&quot;手机号&quot;</span>);</span><br><span class="line">        ValidatorUtil.length(memberDto.getMobile(), <span class="string">&quot;手机号&quot;</span>, <span class="number">11</span>, <span class="number">11</span>);</span><br><span class="line">        ValidatorUtil.require(memberDto.getPassword(), <span class="string">&quot;密码&quot;</span>);</span><br><span class="line">        ValidatorUtil.length(memberDto.getName(), <span class="string">&quot;昵称&quot;</span>, <span class="number">1</span>, <span class="number">50</span>);</span><br><span class="line">        ValidatorUtil.length(memberDto.getPhoto(), <span class="string">&quot;头像url&quot;</span>, <span class="number">1</span>, <span class="number">200</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 密码加密</span></span><br><span class="line">        memberDto.setPassword(DigestUtils.md5DigestAsHex(memberDto.getPassword().getBytes()));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">ResponseDto</span> <span class="variable">responseDto</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResponseDto</span>();</span><br><span class="line">        memberService.save(memberDto);</span><br><span class="line">        responseDto.setContent(memberDto);</span><br><span class="line">        <span class="keyword">return</span> responseDto;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>然后我们修改MemberService.java里面的insert方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 插入</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(Member member)</span>&#123;</span><br><span class="line">            <span class="type">Date</span> <span class="variable">now</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">            member.setId(UuidUtil.getShortUuid());</span><br><span class="line">            <span class="comment">//下面这句是新增得</span></span><br><span class="line">            member.setRegisterTime(now);</span><br><span class="line">            memberMapper.insert(member);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>因为前端用到了加密，所以我们把md5.js拷过来</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="variable constant_">KEY</span> = <span class="string">&quot;!@#QWERT&quot;</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Configurable variables. You may need to tweak these to be compatible with</span></span><br><span class="line"><span class="comment"> * the server-side, but the defaults work in most cases.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> hexcase = <span class="number">0</span>;  <span class="comment">/* hex output format. 0 - lowercase; 1 - uppercase        */</span></span><br><span class="line"><span class="keyword">var</span> b64pad  = <span class="string">&quot;&quot;</span>; <span class="comment">/* base-64 pad character. &quot;=&quot; for strict RFC compliance   */</span></span><br><span class="line"><span class="keyword">var</span> chrsz   = <span class="number">8</span>;  <span class="comment">/* bits per input character. 8 - ASCII; 16 - Unicode      */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * These are the functions you&#x27;ll usually want to call</span></span><br><span class="line"><span class="comment"> * They take string arguments and return either hex or base-64 encoded strings</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">hex_md5</span>(<span class="params">s</span>)&#123; <span class="keyword">return</span> <span class="title function_">binl2hex</span>(<span class="title function_">core_md5</span>(<span class="title function_">str2binl</span>(s), s.<span class="property">length</span> * chrsz));&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">b64_md5</span>(<span class="params">s</span>)&#123; <span class="keyword">return</span> <span class="title function_">binl2b64</span>(<span class="title function_">core_md5</span>(<span class="title function_">str2binl</span>(s), s.<span class="property">length</span> * chrsz));&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">str_md5</span>(<span class="params">s</span>)&#123; <span class="keyword">return</span> <span class="title function_">binl2str</span>(<span class="title function_">core_md5</span>(<span class="title function_">str2binl</span>(s), s.<span class="property">length</span> * chrsz));&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">hex_hmac_md5</span>(<span class="params">key, data</span>) &#123; <span class="keyword">return</span> <span class="title function_">binl2hex</span>(<span class="title function_">core_hmac_md5</span>(key, data)); &#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">b64_hmac_md5</span>(<span class="params">key, data</span>) &#123; <span class="keyword">return</span> <span class="title function_">binl2b64</span>(<span class="title function_">core_hmac_md5</span>(key, data)); &#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">str_hmac_md5</span>(<span class="params">key, data</span>) &#123; <span class="keyword">return</span> <span class="title function_">binl2str</span>(<span class="title function_">core_hmac_md5</span>(key, data)); &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Perform a simple self-test to see if the VM is working</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">md5_vm_test</span>(<span class="params"></span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">hex_md5</span>(<span class="string">&quot;abc&quot;</span>) == <span class="string">&quot;900150983cd24fb0d6963f7d28e17f72&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Calculate the MD5 of an array of little-endian words, and a bit length</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">core_md5</span>(<span class="params">x, len</span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">/* append padding */</span></span><br><span class="line">  x[len &gt;&gt; <span class="number">5</span>] |= <span class="number">0x80</span> &lt;&lt; ((len) % <span class="number">32</span>);</span><br><span class="line">  x[(((len + <span class="number">64</span>) &gt;&gt;&gt; <span class="number">9</span>) &lt;&lt; <span class="number">4</span>) + <span class="number">14</span>] = len;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> a =  <span class="number">1732584193</span>;</span><br><span class="line">  <span class="keyword">var</span> b = -<span class="number">271733879</span>;</span><br><span class="line">  <span class="keyword">var</span> c = -<span class="number">1732584194</span>;</span><br><span class="line">  <span class="keyword">var</span> d =  <span class="number">271733878</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; x.<span class="property">length</span>; i += <span class="number">16</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">var</span> olda = a;</span><br><span class="line">    <span class="keyword">var</span> oldb = b;</span><br><span class="line">    <span class="keyword">var</span> oldc = c;</span><br><span class="line">    <span class="keyword">var</span> oldd = d;</span><br><span class="line"></span><br><span class="line">    a = <span class="title function_">md5_ff</span>(a, b, c, d, x[i+ <span class="number">0</span>], <span class="number">7</span> , -<span class="number">680876936</span>);</span><br><span class="line">    d = <span class="title function_">md5_ff</span>(d, a, b, c, x[i+ <span class="number">1</span>], <span class="number">12</span>, -<span class="number">389564586</span>);</span><br><span class="line">    c = <span class="title function_">md5_ff</span>(c, d, a, b, x[i+ <span class="number">2</span>], <span class="number">17</span>,  <span class="number">606105819</span>);</span><br><span class="line">    b = <span class="title function_">md5_ff</span>(b, c, d, a, x[i+ <span class="number">3</span>], <span class="number">22</span>, -<span class="number">1044525330</span>);</span><br><span class="line">    a = <span class="title function_">md5_ff</span>(a, b, c, d, x[i+ <span class="number">4</span>], <span class="number">7</span> , -<span class="number">176418897</span>);</span><br><span class="line">    d = <span class="title function_">md5_ff</span>(d, a, b, c, x[i+ <span class="number">5</span>], <span class="number">12</span>,  <span class="number">1200080426</span>);</span><br><span class="line">    c = <span class="title function_">md5_ff</span>(c, d, a, b, x[i+ <span class="number">6</span>], <span class="number">17</span>, -<span class="number">1473231341</span>);</span><br><span class="line">    b = <span class="title function_">md5_ff</span>(b, c, d, a, x[i+ <span class="number">7</span>], <span class="number">22</span>, -<span class="number">45705983</span>);</span><br><span class="line">    a = <span class="title function_">md5_ff</span>(a, b, c, d, x[i+ <span class="number">8</span>], <span class="number">7</span> ,  <span class="number">1770035416</span>);</span><br><span class="line">    d = <span class="title function_">md5_ff</span>(d, a, b, c, x[i+ <span class="number">9</span>], <span class="number">12</span>, -<span class="number">1958414417</span>);</span><br><span class="line">    c = <span class="title function_">md5_ff</span>(c, d, a, b, x[i+<span class="number">10</span>], <span class="number">17</span>, -<span class="number">42063</span>);</span><br><span class="line">    b = <span class="title function_">md5_ff</span>(b, c, d, a, x[i+<span class="number">11</span>], <span class="number">22</span>, -<span class="number">1990404162</span>);</span><br><span class="line">    a = <span class="title function_">md5_ff</span>(a, b, c, d, x[i+<span class="number">12</span>], <span class="number">7</span> ,  <span class="number">1804603682</span>);</span><br><span class="line">    d = <span class="title function_">md5_ff</span>(d, a, b, c, x[i+<span class="number">13</span>], <span class="number">12</span>, -<span class="number">40341101</span>);</span><br><span class="line">    c = <span class="title function_">md5_ff</span>(c, d, a, b, x[i+<span class="number">14</span>], <span class="number">17</span>, -<span class="number">1502002290</span>);</span><br><span class="line">    b = <span class="title function_">md5_ff</span>(b, c, d, a, x[i+<span class="number">15</span>], <span class="number">22</span>,  <span class="number">1236535329</span>);</span><br><span class="line"></span><br><span class="line">    a = <span class="title function_">md5_gg</span>(a, b, c, d, x[i+ <span class="number">1</span>], <span class="number">5</span> , -<span class="number">165796510</span>);</span><br><span class="line">    d = <span class="title function_">md5_gg</span>(d, a, b, c, x[i+ <span class="number">6</span>], <span class="number">9</span> , -<span class="number">1069501632</span>);</span><br><span class="line">    c = <span class="title function_">md5_gg</span>(c, d, a, b, x[i+<span class="number">11</span>], <span class="number">14</span>,  <span class="number">643717713</span>);</span><br><span class="line">    b = <span class="title function_">md5_gg</span>(b, c, d, a, x[i+ <span class="number">0</span>], <span class="number">20</span>, -<span class="number">373897302</span>);</span><br><span class="line">    a = <span class="title function_">md5_gg</span>(a, b, c, d, x[i+ <span class="number">5</span>], <span class="number">5</span> , -<span class="number">701558691</span>);</span><br><span class="line">    d = <span class="title function_">md5_gg</span>(d, a, b, c, x[i+<span class="number">10</span>], <span class="number">9</span> ,  <span class="number">38016083</span>);</span><br><span class="line">    c = <span class="title function_">md5_gg</span>(c, d, a, b, x[i+<span class="number">15</span>], <span class="number">14</span>, -<span class="number">660478335</span>);</span><br><span class="line">    b = <span class="title function_">md5_gg</span>(b, c, d, a, x[i+ <span class="number">4</span>], <span class="number">20</span>, -<span class="number">405537848</span>);</span><br><span class="line">    a = <span class="title function_">md5_gg</span>(a, b, c, d, x[i+ <span class="number">9</span>], <span class="number">5</span> ,  <span class="number">568446438</span>);</span><br><span class="line">    d = <span class="title function_">md5_gg</span>(d, a, b, c, x[i+<span class="number">14</span>], <span class="number">9</span> , -<span class="number">1019803690</span>);</span><br><span class="line">    c = <span class="title function_">md5_gg</span>(c, d, a, b, x[i+ <span class="number">3</span>], <span class="number">14</span>, -<span class="number">187363961</span>);</span><br><span class="line">    b = <span class="title function_">md5_gg</span>(b, c, d, a, x[i+ <span class="number">8</span>], <span class="number">20</span>,  <span class="number">1163531501</span>);</span><br><span class="line">    a = <span class="title function_">md5_gg</span>(a, b, c, d, x[i+<span class="number">13</span>], <span class="number">5</span> , -<span class="number">1444681467</span>);</span><br><span class="line">    d = <span class="title function_">md5_gg</span>(d, a, b, c, x[i+ <span class="number">2</span>], <span class="number">9</span> , -<span class="number">51403784</span>);</span><br><span class="line">    c = <span class="title function_">md5_gg</span>(c, d, a, b, x[i+ <span class="number">7</span>], <span class="number">14</span>,  <span class="number">1735328473</span>);</span><br><span class="line">    b = <span class="title function_">md5_gg</span>(b, c, d, a, x[i+<span class="number">12</span>], <span class="number">20</span>, -<span class="number">1926607734</span>);</span><br><span class="line"></span><br><span class="line">    a = <span class="title function_">md5_hh</span>(a, b, c, d, x[i+ <span class="number">5</span>], <span class="number">4</span> , -<span class="number">378558</span>);</span><br><span class="line">    d = <span class="title function_">md5_hh</span>(d, a, b, c, x[i+ <span class="number">8</span>], <span class="number">11</span>, -<span class="number">2022574463</span>);</span><br><span class="line">    c = <span class="title function_">md5_hh</span>(c, d, a, b, x[i+<span class="number">11</span>], <span class="number">16</span>,  <span class="number">1839030562</span>);</span><br><span class="line">    b = <span class="title function_">md5_hh</span>(b, c, d, a, x[i+<span class="number">14</span>], <span class="number">23</span>, -<span class="number">35309556</span>);</span><br><span class="line">    a = <span class="title function_">md5_hh</span>(a, b, c, d, x[i+ <span class="number">1</span>], <span class="number">4</span> , -<span class="number">1530992060</span>);</span><br><span class="line">    d = <span class="title function_">md5_hh</span>(d, a, b, c, x[i+ <span class="number">4</span>], <span class="number">11</span>,  <span class="number">1272893353</span>);</span><br><span class="line">    c = <span class="title function_">md5_hh</span>(c, d, a, b, x[i+ <span class="number">7</span>], <span class="number">16</span>, -<span class="number">155497632</span>);</span><br><span class="line">    b = <span class="title function_">md5_hh</span>(b, c, d, a, x[i+<span class="number">10</span>], <span class="number">23</span>, -<span class="number">1094730640</span>);</span><br><span class="line">    a = <span class="title function_">md5_hh</span>(a, b, c, d, x[i+<span class="number">13</span>], <span class="number">4</span> ,  <span class="number">681279174</span>);</span><br><span class="line">    d = <span class="title function_">md5_hh</span>(d, a, b, c, x[i+ <span class="number">0</span>], <span class="number">11</span>, -<span class="number">358537222</span>);</span><br><span class="line">    c = <span class="title function_">md5_hh</span>(c, d, a, b, x[i+ <span class="number">3</span>], <span class="number">16</span>, -<span class="number">722521979</span>);</span><br><span class="line">    b = <span class="title function_">md5_hh</span>(b, c, d, a, x[i+ <span class="number">6</span>], <span class="number">23</span>,  <span class="number">76029189</span>);</span><br><span class="line">    a = <span class="title function_">md5_hh</span>(a, b, c, d, x[i+ <span class="number">9</span>], <span class="number">4</span> , -<span class="number">640364487</span>);</span><br><span class="line">    d = <span class="title function_">md5_hh</span>(d, a, b, c, x[i+<span class="number">12</span>], <span class="number">11</span>, -<span class="number">421815835</span>);</span><br><span class="line">    c = <span class="title function_">md5_hh</span>(c, d, a, b, x[i+<span class="number">15</span>], <span class="number">16</span>,  <span class="number">530742520</span>);</span><br><span class="line">    b = <span class="title function_">md5_hh</span>(b, c, d, a, x[i+ <span class="number">2</span>], <span class="number">23</span>, -<span class="number">995338651</span>);</span><br><span class="line"></span><br><span class="line">    a = <span class="title function_">md5_ii</span>(a, b, c, d, x[i+ <span class="number">0</span>], <span class="number">6</span> , -<span class="number">198630844</span>);</span><br><span class="line">    d = <span class="title function_">md5_ii</span>(d, a, b, c, x[i+ <span class="number">7</span>], <span class="number">10</span>,  <span class="number">1126891415</span>);</span><br><span class="line">    c = <span class="title function_">md5_ii</span>(c, d, a, b, x[i+<span class="number">14</span>], <span class="number">15</span>, -<span class="number">1416354905</span>);</span><br><span class="line">    b = <span class="title function_">md5_ii</span>(b, c, d, a, x[i+ <span class="number">5</span>], <span class="number">21</span>, -<span class="number">57434055</span>);</span><br><span class="line">    a = <span class="title function_">md5_ii</span>(a, b, c, d, x[i+<span class="number">12</span>], <span class="number">6</span> ,  <span class="number">1700485571</span>);</span><br><span class="line">    d = <span class="title function_">md5_ii</span>(d, a, b, c, x[i+ <span class="number">3</span>], <span class="number">10</span>, -<span class="number">1894986606</span>);</span><br><span class="line">    c = <span class="title function_">md5_ii</span>(c, d, a, b, x[i+<span class="number">10</span>], <span class="number">15</span>, -<span class="number">1051523</span>);</span><br><span class="line">    b = <span class="title function_">md5_ii</span>(b, c, d, a, x[i+ <span class="number">1</span>], <span class="number">21</span>, -<span class="number">2054922799</span>);</span><br><span class="line">    a = <span class="title function_">md5_ii</span>(a, b, c, d, x[i+ <span class="number">8</span>], <span class="number">6</span> ,  <span class="number">1873313359</span>);</span><br><span class="line">    d = <span class="title function_">md5_ii</span>(d, a, b, c, x[i+<span class="number">15</span>], <span class="number">10</span>, -<span class="number">30611744</span>);</span><br><span class="line">    c = <span class="title function_">md5_ii</span>(c, d, a, b, x[i+ <span class="number">6</span>], <span class="number">15</span>, -<span class="number">1560198380</span>);</span><br><span class="line">    b = <span class="title function_">md5_ii</span>(b, c, d, a, x[i+<span class="number">13</span>], <span class="number">21</span>,  <span class="number">1309151649</span>);</span><br><span class="line">    a = <span class="title function_">md5_ii</span>(a, b, c, d, x[i+ <span class="number">4</span>], <span class="number">6</span> , -<span class="number">145523070</span>);</span><br><span class="line">    d = <span class="title function_">md5_ii</span>(d, a, b, c, x[i+<span class="number">11</span>], <span class="number">10</span>, -<span class="number">1120210379</span>);</span><br><span class="line">    c = <span class="title function_">md5_ii</span>(c, d, a, b, x[i+ <span class="number">2</span>], <span class="number">15</span>,  <span class="number">718787259</span>);</span><br><span class="line">    b = <span class="title function_">md5_ii</span>(b, c, d, a, x[i+ <span class="number">9</span>], <span class="number">21</span>, -<span class="number">343485551</span>);</span><br><span class="line"></span><br><span class="line">    a = <span class="title function_">safe_add</span>(a, olda);</span><br><span class="line">    b = <span class="title function_">safe_add</span>(b, oldb);</span><br><span class="line">    c = <span class="title function_">safe_add</span>(c, oldc);</span><br><span class="line">    d = <span class="title function_">safe_add</span>(d, oldd);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Array</span>(a, b, c, d);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * These functions implement the four basic operations the algorithm uses.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">md5_cmn</span>(<span class="params">q, a, b, x, s, t</span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">safe_add</span>(<span class="title function_">bit_rol</span>(<span class="title function_">safe_add</span>(<span class="title function_">safe_add</span>(a, q), <span class="title function_">safe_add</span>(x, t)), s),b);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">md5_ff</span>(<span class="params">a, b, c, d, x, s, t</span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">md5_cmn</span>((b &amp; c) | ((~b) &amp; d), a, b, x, s, t);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">md5_gg</span>(<span class="params">a, b, c, d, x, s, t</span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">md5_cmn</span>((b &amp; d) | (c &amp; (~d)), a, b, x, s, t);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">md5_hh</span>(<span class="params">a, b, c, d, x, s, t</span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">md5_cmn</span>(b ^ c ^ d, a, b, x, s, t);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">md5_ii</span>(<span class="params">a, b, c, d, x, s, t</span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">md5_cmn</span>(c ^ (b | (~d)), a, b, x, s, t);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Calculate the HMAC-MD5, of a key and some data</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">core_hmac_md5</span>(<span class="params">key, data</span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">var</span> bkey = <span class="title function_">str2binl</span>(key);</span><br><span class="line">  <span class="keyword">if</span>(bkey.<span class="property">length</span> &gt; <span class="number">16</span>) bkey = <span class="title function_">core_md5</span>(bkey, key.<span class="property">length</span> * chrsz);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> ipad = <span class="title class_">Array</span>(<span class="number">16</span>), opad = <span class="title class_">Array</span>(<span class="number">16</span>);</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">16</span>; i++)</span><br><span class="line">  &#123;</span><br><span class="line">    ipad[i] = bkey[i] ^ <span class="number">0x36363636</span>;</span><br><span class="line">    opad[i] = bkey[i] ^ <span class="number">0x5C5C5C5C</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> hash = <span class="title function_">core_md5</span>(ipad.<span class="title function_">concat</span>(<span class="title function_">str2binl</span>(data)), <span class="number">512</span> + data.<span class="property">length</span> * chrsz);</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">core_md5</span>(opad.<span class="title function_">concat</span>(hash), <span class="number">512</span> + <span class="number">128</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Add integers, wrapping at 2^32. This uses 16-bit operations internally</span></span><br><span class="line"><span class="comment"> * to work around bugs in some JS interpreters.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">safe_add</span>(<span class="params">x, y</span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">var</span> lsw = (x &amp; <span class="number">0xFFFF</span>) + (y &amp; <span class="number">0xFFFF</span>);</span><br><span class="line">  <span class="keyword">var</span> msw = (x &gt;&gt; <span class="number">16</span>) + (y &gt;&gt; <span class="number">16</span>) + (lsw &gt;&gt; <span class="number">16</span>);</span><br><span class="line">  <span class="keyword">return</span> (msw &lt;&lt; <span class="number">16</span>) | (lsw &amp; <span class="number">0xFFFF</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Bitwise rotate a 32-bit number to the left.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">bit_rol</span>(<span class="params">num, cnt</span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">return</span> (num &lt;&lt; cnt) | (num &gt;&gt;&gt; (<span class="number">32</span> - cnt));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Convert a string to an array of little-endian words</span></span><br><span class="line"><span class="comment"> * If chrsz is ASCII, characters &gt;255 have their hi-byte silently ignored.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">str2binl</span>(<span class="params">str</span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">var</span> bin = <span class="title class_">Array</span>();</span><br><span class="line">  <span class="keyword">var</span> mask = (<span class="number">1</span> &lt;&lt; chrsz) - <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; str.<span class="property">length</span> * chrsz; i += chrsz)</span><br><span class="line">    bin[i&gt;&gt;<span class="number">5</span>] |= (str.<span class="title function_">charCodeAt</span>(i / chrsz) &amp; mask) &lt;&lt; (i%<span class="number">32</span>);</span><br><span class="line">  <span class="keyword">return</span> bin;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Convert an array of little-endian words to a string</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">binl2str</span>(<span class="params">bin</span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">var</span> str = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="keyword">var</span> mask = (<span class="number">1</span> &lt;&lt; chrsz) - <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; bin.<span class="property">length</span> * <span class="number">32</span>; i += chrsz)</span><br><span class="line">    str += <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>((bin[i&gt;&gt;<span class="number">5</span>] &gt;&gt;&gt; (i % <span class="number">32</span>)) &amp; mask);</span><br><span class="line">  <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Convert an array of little-endian words to a hex string.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">binl2hex</span>(<span class="params">binarray</span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">var</span> hex_tab = hexcase ? <span class="string">&quot;0123456789ABCDEF&quot;</span> : <span class="string">&quot;0123456789abcdef&quot;</span>;</span><br><span class="line">  <span class="keyword">var</span> str = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; binarray.<span class="property">length</span> * <span class="number">4</span>; i++)</span><br><span class="line">  &#123;</span><br><span class="line">    str += hex_tab.<span class="title function_">charAt</span>((binarray[i&gt;&gt;<span class="number">2</span>] &gt;&gt; ((i%<span class="number">4</span>)*<span class="number">8</span>+<span class="number">4</span>)) &amp; <span class="number">0xF</span>) +</span><br><span class="line">           hex_tab.<span class="title function_">charAt</span>((binarray[i&gt;&gt;<span class="number">2</span>] &gt;&gt; ((i%<span class="number">4</span>)*<span class="number">8</span>  )) &amp; <span class="number">0xF</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Convert an array of little-endian words to a base-64 string</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">binl2b64</span>(<span class="params">binarray</span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">var</span> tab = <span class="string">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&quot;</span>;</span><br><span class="line">  <span class="keyword">var</span> str = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; binarray.<span class="property">length</span> * <span class="number">4</span>; i += <span class="number">3</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">var</span> triplet = (((binarray[i   &gt;&gt; <span class="number">2</span>] &gt;&gt; <span class="number">8</span> * ( i   %<span class="number">4</span>)) &amp; <span class="number">0xFF</span>) &lt;&lt; <span class="number">16</span>)</span><br><span class="line">                | (((binarray[i+<span class="number">1</span> &gt;&gt; <span class="number">2</span>] &gt;&gt; <span class="number">8</span> * ((i+<span class="number">1</span>)%<span class="number">4</span>)) &amp; <span class="number">0xFF</span>) &lt;&lt; <span class="number">8</span> )</span><br><span class="line">                |  ((binarray[i+<span class="number">2</span> &gt;&gt; <span class="number">2</span>] &gt;&gt; <span class="number">8</span> * ((i+<span class="number">2</span>)%<span class="number">4</span>)) &amp; <span class="number">0xFF</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">if</span>(i * <span class="number">8</span> + j * <span class="number">6</span> &gt; binarray.<span class="property">length</span> * <span class="number">32</span>) str += b64pad;</span><br><span class="line">      <span class="keyword">else</span> str += tab.<span class="title function_">charAt</span>((triplet &gt;&gt; <span class="number">6</span>*(<span class="number">3</span>-j)) &amp; <span class="number">0x3F</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>在index.html中引入md5</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--  md5工具类--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&lt;%= BASE_URL %&gt;static/js/md5.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>我们新建一个组件login.vue，用于注册登录</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;login-modal&quot; class=&quot;modal fade&quot; tabindex=&quot;-1&quot; role=&quot;dialog&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;modal-dialog modal-login&quot; role=&quot;document&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;modal-content&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;modal-body&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;register-div&quot; &gt;</span><br><span class="line">            &lt;h3&gt;注&amp;nbsp;&amp;nbsp;册&lt;/h3&gt;</span><br><span class="line">            &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">              &lt;input id=&quot;register-mobile&quot; v-model=&quot;memberRegister.mobile&quot;</span><br><span class="line">                     class=&quot;form-control&quot; placeholder=&quot;手机号&quot;&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;input-group&quot;&gt;</span><br><span class="line">                &lt;input id=&quot;register-mobile-code&quot; class=&quot;form-control&quot;</span><br><span class="line">                       placeholder=&quot;手机验证码&quot; v-model=&quot;memberRegister.code&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;input-group-append&quot;&gt;</span><br><span class="line">                  &lt;button class=&quot;btn btn-outline-secondary&quot; id=&quot;register-send-code-btn&quot;</span><br><span class="line">                          v-on:click=&quot;sendSmsForRegister()&quot;&gt;发送验证码</span><br><span class="line">                  &lt;/button&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">              &lt;input id=&quot;register-name&quot; v-model=&quot;memberRegister.name&quot;</span><br><span class="line">                     class=&quot;form-control&quot; placeholder=&quot;昵称&quot;&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">              &lt;input id=&quot;register-password&quot; v-model=&quot;memberRegister.passwordOriginal&quot;</span><br><span class="line">                     class=&quot;form-control&quot; placeholder=&quot;密码&quot; type=&quot;password&quot;&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">              &lt;input id=&quot;register-confirm-password&quot; v-model=&quot;memberRegister.confirm&quot;</span><br><span class="line">                     class=&quot;form-control&quot; placeholder=&quot;确认密码&quot;</span><br><span class="line">                     name=&quot;memberRegisterConfirm&quot; type=&quot;password&quot;&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">              &lt;button class=&quot;btn btn-primary btn-block submit-button&quot; v-on:click=&quot;register()&quot;&gt;</span><br><span class="line">                注&amp;nbsp;&amp;nbsp;册</span><br><span class="line">              &lt;/button&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;form-group to-login-div&quot;&gt;</span><br><span class="line">              &lt;a href=&quot;javascript:;&quot; &gt;我要登录&lt;/a&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;&lt;!-- /.modal-content --&gt;</span><br><span class="line">    &lt;/div&gt;&lt;!-- /.modal-dialog --&gt;</span><br><span class="line">  &lt;/div&gt;&lt;!-- /.modal --&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;the-login&#x27;,</span><br><span class="line">  data: function () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line"></span><br><span class="line">      memberRegister: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">      remember: true, // 记住密码</span><br><span class="line">      imageCodeToken: &quot;&quot;,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    let _this = this;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 打开登录注册窗口</span><br><span class="line">     */</span><br><span class="line">    openLoginModal() &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      $(&quot;#login-modal&quot;).modal(&quot;show&quot;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    register() &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line"></span><br><span class="line">      _this.memberRegister.password = hex_md5(_this.memberRegister.passwordOriginal + KEY);</span><br><span class="line"></span><br><span class="line">      // 调服务端注册接口</span><br><span class="line">      _this.$ajax.post(process.env.VUE_APP_SERVER + &#x27;/business/web/member/register&#x27;, _this.memberRegister).then((response) =&gt; &#123;</span><br><span class="line">        let resp = response.data;</span><br><span class="line">        if (resp.success) &#123;</span><br><span class="line">          Toast.success(&quot;注册成功&quot;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          Toast.warning(resp.message);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">/* 登录框 */</span><br><span class="line">.login-div .input-group-addon &#123;</span><br><span class="line">  padding: 0;</span><br><span class="line">  border: 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#login-modal h3 &#123;</span><br><span class="line">  text-align: center;</span><br><span class="line">  margin-bottom: 20px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#login-modal .modal-login &#123;</span><br><span class="line">  max-width: 400px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#login-modal input:not(.remember) &#123;</span><br><span class="line">  height: 45px;</span><br><span class="line">  font-size: 16px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#login-modal .submit-button &#123;</span><br><span class="line">  height: 50px;</span><br><span class="line">  font-size: 20px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#login-modal .to-login-div &#123;</span><br><span class="line">  text-align: center;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>然后我们在the-header中使用</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> &lt;span class=&quot;text-white&quot;&gt;欢迎：&lt;/span&gt;</span><br><span class="line"> //新增一个click时间</span><br><span class="line">  &lt;button v-on:click=&quot;openLoginModal()&quot; class=&quot;btn btn-outline-light my-2 my-sm-0&quot; type=&quot;submit&quot;&gt;登录/注册&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/nav&gt;</span><br><span class="line">  //在这里使用组件</span><br><span class="line">  &lt;the-login ref=&quot;loginComponent&quot;&gt;&lt;/the-login&gt;</span><br><span class="line">&lt;/header&gt;</span><br><span class="line">//导入组件</span><br><span class="line">import TheLogin from &quot;./login&quot;;</span><br><span class="line">components: &#123;TheLogin&#125;,</span><br><span class="line">methods:&#123;</span><br><span class="line">    /**</span><br><span class="line">    * 打开登录注册窗口</span><br><span class="line">    */</span><br><span class="line">	openLoginModal() &#123;</span><br><span class="line">        let _this = this;</span><br><span class="line">        _this.$refs.loginComponent.openLoginModal();</span><br><span class="line">		&#125;,</span><br><span class="line">		&#125;</span><br></pre></td></tr></table></figure>

<h2 id="13-10-增加登录与退出登录功能"><a href="#13-10-增加登录与退出登录功能" class="headerlink" title="13-10 增加登录与退出登录功能"></a>13-10 增加登录与退出登录功能</h2><p><strong>登录、注册、忘记密码之间的切换</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.会员登录注册功能开发·增加登录框和忘记密码框·并实现登录框、注册框·忘记密码框切换，默认显示登录框</span><br></pre></td></tr></table></figure>

<ul>
<li>我们修改login.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line">////////////////////////////////////////////////////////////////////////////增加登录</span><br><span class="line">&lt;div class=&quot;login-div&quot; v-show=&quot;MODAL_STATUS === STATUS_LOGIN&quot;&gt;</span><br><span class="line">  &lt;h3&gt;登&amp;nbsp;&amp;nbsp;录&lt;/h3&gt;</span><br><span class="line">  &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">    &lt;input v-model=&quot;member.mobile&quot; class=&quot;form-control&quot; placeholder=&quot;手机号&quot;&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">    &lt;input class=&quot;form-control&quot; type=&quot;password&quot; placeholder=&quot;密码&quot; v-model=&quot;member.password&quot;&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;input-group&quot;&gt;</span><br><span class="line">      &lt;input id=&quot;image-code-input&quot; class=&quot;form-control&quot; type=&quot;text&quot; placeholder=&quot;验证码&quot;</span><br><span class="line">             v-model=&quot;member.imageCode&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;input-group-addon&quot; id=&quot;image-code-addon&quot;&gt;</span><br><span class="line">        &lt;img id=&quot;image-code&quot; alt=&quot;验证码&quot; v-on:click=&quot;loadImageCode()&quot;/&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">    &lt;button  class=&quot;btn btn-primary btn-block submit-button&quot;&gt;</span><br><span class="line">      登&amp;nbsp;&amp;nbsp;录</span><br><span class="line">    &lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;checkbox&quot;&gt;</span><br><span class="line">      &lt;label&gt;</span><br><span class="line">        &lt;input type=&quot;checkbox&quot; class=&quot;remember&quot; v-model=&quot;remember&quot;&gt; 记住密码</span><br><span class="line">      &lt;/label&gt;</span><br><span class="line">      &lt;div class=&quot;pull-right&quot;&gt;</span><br><span class="line">        &lt;a href=&quot;javascript:;&quot; v-on:click=&quot;toForgetDiv()&quot;&gt;忘记密码&lt;/a&gt;&amp;nbsp;</span><br><span class="line">        &lt;a href=&quot;javascript:;&quot; v-on:click=&quot;toRegisterDiv()&quot;&gt;我要注册&lt;/a&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;form-group to-register-div&quot;&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">//////////////////////////////////////////////////修改下注册的div和我要登陆那增加事件</span><br><span class="line">&lt;div class=&quot;register-div&quot; v-show=&quot;MODAL_STATUS === STATUS_REGISTER&quot; &gt;</span><br><span class="line">&lt;div class=&quot;form-group to-login-div&quot;&gt;</span><br><span class="line">    &lt;a href=&quot;javascript:;&quot; v-on:click=&quot;toLoginDiv()&quot;&gt;我要登录&lt;/a&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">////////////////////////////////////////////////////////////////增加忘记密码</span><br><span class="line">          &lt;div class=&quot;forget-div&quot; v-show=&quot;MODAL_STATUS === STATUS_FORGET&quot;&gt;</span><br><span class="line">            &lt;h3&gt;忘记密码&lt;/h3&gt;</span><br><span class="line">            &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">              &lt;input id=&quot;forget-mobile&quot; v-model=&quot;memberForget.mobile&quot;</span><br><span class="line">                     class=&quot;form-control&quot; placeholder=&quot;手机号&quot;&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;input-group&quot;&gt;</span><br><span class="line">                &lt;input id=&quot;forget-mobile-code&quot; class=&quot;form-control&quot;</span><br><span class="line">                       placeholder=&quot;手机验证码&quot; v-model=&quot;memberForget.smsCode&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;input-group-append&quot;&gt;</span><br><span class="line">                  &lt;button class=&quot;btn btn-outline-secondary&quot; id=&quot;forget-send-code-btn&quot;&gt;</span><br><span class="line">                    发送验证码</span><br><span class="line">                  &lt;/button&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">              &lt;input id=&quot;forget-password&quot; v-model=&quot;memberForget.passwordOriginal&quot;</span><br><span class="line">                     class=&quot;form-control&quot; placeholder=&quot;密码&quot; type=&quot;password&quot;&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">              &lt;input id=&quot;forget-confirm-password&quot; v-model=&quot;memberForget.confirm&quot;</span><br><span class="line">                     class=&quot;form-control&quot; placeholder=&quot;确认密码&quot; type=&quot;password&quot;&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">              &lt;button  class=&quot;btn btn-primary btn-block submit-button&quot;&gt;</span><br><span class="line">                重&amp;nbsp;&amp;nbsp;置</span><br><span class="line">              &lt;/button&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;form-group to-login-div&quot;&gt;</span><br><span class="line">              &lt;a href=&quot;javascript:;&quot; v-on:click=&quot;toLoginDiv()&quot;&gt;我要登录&lt;/a&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">///////////////////////////////////////////////////data中增加</span><br><span class="line">    data: function () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      // 模态框内容切换：登录、注册、忘记密码</span><br><span class="line">      STATUS_LOGIN: &quot;STATUS_LOGIN&quot;,</span><br><span class="line">      STATUS_REGISTER: &quot;STATUS_REGISTER&quot;,</span><br><span class="line">      STATUS_FORGET: &quot;STATUS_FORGET&quot;,</span><br><span class="line">      MODAL_STATUS: &quot;&quot;,</span><br><span class="line"></span><br><span class="line">      member: &#123;&#125;,</span><br><span class="line">      memberForget: &#123;&#125;,</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">//////////////////////////////////////////////////////////初始化时增加</span><br><span class="line">mounted() &#123;</span><br><span class="line">    let _this = this;</span><br><span class="line">    _this.toLoginDiv();</span><br><span class="line">  &#125;,</span><br><span class="line"> //////////////////////////---------------登录框、注册框、忘记密码框切换-----------------</span><br><span class="line">    toLoginDiv() &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      _this.MODAL_STATUS = _this.STATUS_LOGIN</span><br><span class="line">    &#125;,</span><br><span class="line">    toRegisterDiv() &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      _this.MODAL_STATUS = _this.STATUS_REGISTER</span><br><span class="line">    &#125;,</span><br><span class="line">    toForgetDiv() &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      _this.MODAL_STATUS = _this.STATUS_FORGET</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<p><strong>增加登录验证码功能</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.会员登录注册功能开发·登录框显示验证码</span><br></pre></td></tr></table></figure>

<ul>
<li>在business&#x2F;web下拷贝复制过来的KaptchaController</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.business.controller.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.code.kaptcha.impl.DefaultKaptcha;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Qualifier;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> javax.imageio.ImageIO;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletOutputStream;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.awt.image.BufferedImage;</span><br><span class="line"><span class="keyword">import</span> java.io.ByteArrayOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/web/kaptcha&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">KaptchaController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Qualifier(&quot;getDefaultKaptcha&quot;)</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    DefaultKaptcha defaultKaptcha;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">public</span> RedisTemplate redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/image-code/&#123;imageCodeToken&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">imageCode</span><span class="params">(<span class="meta">@PathVariable(value = &quot;imageCodeToken&quot;)</span> String imageCodeToken, HttpServletRequest request, HttpServletResponse httpServletResponse)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        <span class="type">ByteArrayOutputStream</span> <span class="variable">jpegOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ByteArrayOutputStream</span>();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 生成验证码字符串</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">createText</span> <span class="operator">=</span> defaultKaptcha.createText();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 将生成的验证码放入会话缓存中，后续验证的时候用到</span></span><br><span class="line"><span class="comment">//             request.getSession().setAttribute(imageCodeToken, createText);</span></span><br><span class="line">            <span class="comment">//将生成的验证码放入redis缓存中后续验证的时候用到</span></span><br><span class="line">            redisTemplate.opsForValue().set(imageCodeToken,createText,<span class="number">300</span>, TimeUnit.SECONDS);</span><br><span class="line">            <span class="comment">// 使用验证码字符串生成验证码图片</span></span><br><span class="line">            <span class="type">BufferedImage</span> <span class="variable">challenge</span> <span class="operator">=</span> defaultKaptcha.createImage(createText);</span><br><span class="line">            ImageIO.write(challenge, <span class="string">&quot;jpg&quot;</span>, jpegOutputStream);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalArgumentException e) &#123;</span><br><span class="line">            httpServletResponse.sendError(HttpServletResponse.SC_NOT_FOUND);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 定义response输出类型为image/jpeg类型，使用response输出流输出图片的byte数组</span></span><br><span class="line">        <span class="type">byte</span>[] captchaChallengeAsJpeg = jpegOutputStream.toByteArray();</span><br><span class="line">        httpServletResponse.setHeader(<span class="string">&quot;Cache-Control&quot;</span>, <span class="string">&quot;no-store&quot;</span>);</span><br><span class="line">        httpServletResponse.setHeader(<span class="string">&quot;Pragma&quot;</span>, <span class="string">&quot;no-cache&quot;</span>);</span><br><span class="line">        httpServletResponse.setDateHeader(<span class="string">&quot;Expires&quot;</span>, <span class="number">0</span>);</span><br><span class="line">        httpServletResponse.setContentType(<span class="string">&quot;image/jpeg&quot;</span>);</span><br><span class="line">        <span class="type">ServletOutputStream</span> <span class="variable">responseOutputStream</span> <span class="operator">=</span> httpServletResponse.getOutputStream();</span><br><span class="line">        responseOutputStream.write(captchaChallengeAsJpeg);</span><br><span class="line">        responseOutputStream.flush();</span><br><span class="line">        responseOutputStream.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>接下来修改login.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//////////////////////////////////////////////////////////////////////////增加刷新验证码功能</span><br><span class="line">toLoginDiv() &#123;</span><br><span class="line">  //显示登录框时就刷新一次验证码</span><br><span class="line">  _this.loadImageCode();</span><br><span class="line">&#125;,</span><br><span class="line">///////////////////////////////////////////////////////////////////////////</span><br><span class="line">  /**</span><br><span class="line">     * 加载图形验证码</span><br><span class="line">     */</span><br><span class="line">    loadImageCode: function () &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      _this.imageCodeToken = Tool.uuid(8);</span><br><span class="line">      $(&#x27;#image-code&#x27;).attr(&#x27;src&#x27;, process.env.VUE_APP_SERVER + &#x27;/business/web/kaptcha/image-code/&#x27; + _this.imageCodeToken);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2.会员登录注册功能开发，增加登录功能，包含图片验证码，将控台用户登录功能相关代码拷贝到会员登录，并将user替换成member</span><br></pre></td></tr></table></figure>

<ul>
<li>直接将admin的local-storage和session-storage拷贝到web。记得引入</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">LOCAL_KEY_REMEMBER_MEMBER</span> = <span class="string">&quot;LOCAL_KEY_REMEMBER_MEMBER&quot;</span>; <span class="comment">// 记住我</span></span><br><span class="line"><span class="title class_">LocalStorage</span> = &#123;</span><br><span class="line">    <span class="attr">get</span>: <span class="keyword">function</span> (<span class="params">key</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> v = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(key);</span><br><span class="line">        <span class="keyword">if</span> (v &amp;&amp; <span class="title function_">typeof</span>(v) !== <span class="string">&quot;undefined&quot;</span> &amp;&amp; v !== <span class="string">&quot;undefined&quot;</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(v);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">set</span>: <span class="keyword">function</span> (<span class="params">key, data</span>) &#123;</span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(key, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data));</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">remove</span>: <span class="keyword">function</span> (<span class="params">key</span>) &#123;</span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(key);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">clearAll</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">clear</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">SESSION_KEY_LOGIN_MEMBER</span> = <span class="string">&quot;SESSION_KEY_LOGIN_MEMBER&quot;</span>; <span class="comment">// 登录信息</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title class_">SessionStorage</span> = &#123;</span><br><span class="line">    <span class="attr">get</span>: <span class="keyword">function</span> (<span class="params">key</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> v = sessionStorage.<span class="title function_">getItem</span>(key);</span><br><span class="line">        <span class="keyword">if</span> (v &amp;&amp; <span class="title function_">typeof</span>(v) !== <span class="string">&quot;undefined&quot;</span> &amp;&amp; v !== <span class="string">&quot;undefined&quot;</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(v);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">set</span>: <span class="keyword">function</span> (<span class="params">key, data</span>) &#123;</span><br><span class="line">        sessionStorage.<span class="title function_">setItem</span>(key, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data));</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">remove</span>: <span class="keyword">function</span> (<span class="params">key</span>) &#123;</span><br><span class="line">        sessionStorage.<span class="title function_">removeItem</span>(key);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">clearAll</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        sessionStorage.<span class="title function_">clear</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>接下来修改tool.js，将User改为Member</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 保存登录信息</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="variable">loginUser</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="attr">setLoginMember</span>:<span class="keyword">function</span> (<span class="params">loginMember</span>)&#123;</span><br><span class="line">    <span class="title class_">SessionStorage</span>.<span class="title function_">set</span>(<span class="variable constant_">SESSION_KEY_LOGIN_MEMBER</span>,loginMember);</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取登录信息</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="variable">loginUser</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">any|&#123;</span>&#125;&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="attr">getLoginMember</span>:<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">SessionStorage</span>.<span class="title function_">get</span>(<span class="variable constant_">SESSION_KEY_LOGIN_MEMBER</span>) ||&#123;&#125;;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<ul>
<li>然后修改index.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">//增加点击事件</span><br><span class="line">&lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">  &lt;button v-on:click=&quot;login()&quot; class=&quot;btn btn-primary btn-block submit-button&quot;&gt;</span><br><span class="line">    登&amp;nbsp;&amp;nbsp;录</span><br><span class="line">  &lt;/button&gt;</span><br><span class="line">//增加方法</span><br><span class="line">//---------------登录框-----------------</span><br><span class="line">    login () &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line"></span><br><span class="line">      // 如果密码是从缓存带出来的，则不需要重新加密</span><br><span class="line">      let md5 = hex_md5(_this.member.password);</span><br><span class="line">      let rememberMember = LocalStorage.get(LOCAL_KEY_REMEMBER_MEMBER) || &#123;&#125;;</span><br><span class="line">      if (md5 !== rememberMember.md5) &#123;</span><br><span class="line">        _this.member.password = hex_md5(_this.member.password + KEY);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      _this.member.imageCodeToken = _this.imageCodeToken;</span><br><span class="line"></span><br><span class="line">      _this.$ajax.post(process.env.VUE_APP_SERVER + &#x27;/business/web/member/login&#x27;, _this.member).then((response)=&gt;&#123;</span><br><span class="line">        let resp = response.data;</span><br><span class="line">        if (resp.success) &#123;</span><br><span class="line">          console.log(&quot;登录成功：&quot;, resp.content);</span><br><span class="line">          let loginMember = resp.content;</span><br><span class="line">          Tool.setLoginMember(resp.content);</span><br><span class="line"></span><br><span class="line">          // 判断“记住我”</span><br><span class="line">          if (_this.remember) &#123;</span><br><span class="line">            // 如果勾选记住我，则将用户名密码保存到本地缓存</span><br><span class="line">            // 这里保存密码密文，并保存密文md5，用于检测密码是否被重新输入过</span><br><span class="line">            let md5 = hex_md5(_this.member.password);</span><br><span class="line">            LocalStorage.set(LOCAL_KEY_REMEMBER_MEMBER, &#123;</span><br><span class="line">              mobile: loginMember.mobile,</span><br><span class="line">              password: _this.member.password,</span><br><span class="line">              md5: md5</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">            // 没有勾选“记住我”时，要把本地缓存清空，否则下次显示登录框时会自动显示用户名密码</span><br><span class="line">            LocalStorage.set(LOCAL_KEY_REMEMBER_MEMBER, null);</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          // 登录成功 TODO</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          Toast.warning(resp.message);</span><br><span class="line">          _this.member.password = &quot;&quot;;</span><br><span class="line">          _this.loadImageCode();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<ul>
<li>接下来我们看后端，修改business.controller的ControllerExceptionHandler增加统一业务异常处理</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ExceptionHandler(value = BusinessException.class)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> ResponseDto <span class="title function_">businessExceptionHandler</span><span class="params">(BusinessException e)</span> &#123;</span><br><span class="line">    <span class="type">ResponseDto</span> <span class="variable">responseDto</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResponseDto</span>();</span><br><span class="line">    responseDto.setSuccess(<span class="literal">false</span>);</span><br><span class="line">    LOG.error(<span class="string">&quot;业务异常：&#123;&#125;&quot;</span>, e.getCode().getDesc());</span><br><span class="line">    responseDto.setMessage(e.getCode().getDesc());</span><br><span class="line">    <span class="keyword">return</span> responseDto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>然后我们修改business.controller.web.MemberController</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">////////////////////////////////////////////////////注入</span></span><br><span class="line"><span class="meta">@Resource(name = &quot;redisTemplate&quot;)</span></span><br><span class="line"><span class="keyword">private</span> RedisTemplate redisTemplate;</span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 登录</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/login&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseDto <span class="title function_">login</span><span class="params">(<span class="meta">@RequestBody</span> MemberDto memberDto)</span> &#123;</span><br><span class="line">        LOG.info(<span class="string">&quot;用户登录开始&quot;</span>);</span><br><span class="line">        memberDto.setPassword(DigestUtils.md5DigestAsHex(memberDto.getPassword().getBytes()));</span><br><span class="line">        <span class="type">ResponseDto</span> <span class="variable">responseDto</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResponseDto</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 根据验证码token去获取缓存中的验证码，和用户输入的验证码是否一致</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">imageCode</span> <span class="operator">=</span> (String) redisTemplate.opsForValue().get(memberDto.getImageCodeToken());</span><br><span class="line">        LOG.info(<span class="string">&quot;从redis中获取到的验证码：&#123;&#125;&quot;</span>, imageCode);</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(imageCode)) &#123;</span><br><span class="line">            responseDto.setSuccess(<span class="literal">false</span>);</span><br><span class="line">            responseDto.setMessage(<span class="string">&quot;验证码已过期&quot;</span>);</span><br><span class="line">            LOG.info(<span class="string">&quot;用户登录失败，验证码已过期&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> responseDto;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!imageCode.toLowerCase().equals(memberDto.getImageCode().toLowerCase())) &#123;</span><br><span class="line">            responseDto.setSuccess(<span class="literal">false</span>);</span><br><span class="line">            responseDto.setMessage(<span class="string">&quot;验证码不对&quot;</span>);</span><br><span class="line">            LOG.info(<span class="string">&quot;用户登录失败，验证码不对&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> responseDto;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 验证通过后，移除验证码</span></span><br><span class="line">            redisTemplate.delete(memberDto.getImageCodeToken());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">LoginMemberDto</span> <span class="variable">loginMemberDto</span> <span class="operator">=</span> memberService.login(memberDto);</span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> UuidUtil.getShortUuid();</span><br><span class="line">        loginMemberDto.setToken(token);</span><br><span class="line">        redisTemplate.opsForValue().set(token, JSON.toJSONString(loginMemberDto), <span class="number">3600</span>, TimeUnit.SECONDS);</span><br><span class="line">        responseDto.setContent(loginMemberDto);</span><br><span class="line">        <span class="keyword">return</span> responseDto;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>然后我们在server.dto增加LoginMemberDto。控台保存登录用户信息用的是LoginUserDto，网站保存会员信息用的是LoginMemberDto</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.server.dto;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginMemberDto</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String mobile;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String token;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String photo;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(String id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMobile</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> mobile;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMobile</span><span class="params">(String mobile)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.mobile = mobile;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getToken</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> token;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setToken</span><span class="params">(String token)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.token = token;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPhoto</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> photo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPhoto</span><span class="params">(String photo)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.photo = photo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">StringBuffer</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>(<span class="string">&quot;LoginMemberDto&#123;&quot;</span>);</span><br><span class="line">        sb.append(<span class="string">&quot;id=&#x27;&quot;</span>).append(id).append(<span class="string">&#x27;\&#x27;&#x27;</span>);</span><br><span class="line">        sb.append(<span class="string">&quot;, name=&#x27;&quot;</span>).append(name).append(<span class="string">&#x27;\&#x27;&#x27;</span>);</span><br><span class="line">        sb.append(<span class="string">&quot;, mobile=&#x27;&quot;</span>).append(mobile).append(<span class="string">&#x27;\&#x27;&#x27;</span>);</span><br><span class="line">        sb.append(<span class="string">&quot;, token=&#x27;&quot;</span>).append(token).append(<span class="string">&#x27;\&#x27;&#x27;</span>);</span><br><span class="line">        sb.append(<span class="string">&quot;, photo=&#x27;&quot;</span>).append(photo).append(<span class="string">&#x27;\&#x27;&#x27;</span>);</span><br><span class="line">        sb.append(<span class="string">&#x27;&#125;&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>接下来给server.dto的MemberDto增加两个字段</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 图片验证码</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> String imageCode;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 图片验证码token</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> String imageCodeToken;</span><br></pre></td></tr></table></figure>

<ul>
<li>然后我们修改server.exception中的BusinessExceptionCode</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//两个字段</span></span><br><span class="line">LOGIN_USER_ERROR(<span class="string">&quot;用户名或密码错误&quot;</span>),</span><br><span class="line">LOGIN_MEMBER_ERROR(<span class="string">&quot;手机号不存在或密码错误&quot;</span>),</span><br></pre></td></tr></table></figure>

<ul>
<li>修改MemberService，登录的时候要验证这个手机号是不是存在；控台验证时需要验证登录名是否存在，原理一样</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 按手机号查找</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> mobile</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> Member <span class="title function_">selectByMobile</span><span class="params">(String mobile)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (StringUtils.isEmpty(mobile)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">MemberExample</span> <span class="variable">example</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MemberExample</span>();</span><br><span class="line">    example.createCriteria().andMobileEqualTo(mobile);</span><br><span class="line">    List&lt;Member&gt; memberList = memberMapper.selectByExample(example);</span><br><span class="line">    <span class="keyword">if</span> (memberList == <span class="literal">null</span> || memberList.size() == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> memberList.get(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 登录</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> memberDto</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> LoginMemberDto <span class="title function_">login</span><span class="params">(MemberDto memberDto)</span> &#123;</span><br><span class="line">    <span class="type">Member</span> <span class="variable">member</span> <span class="operator">=</span> selectByMobile(memberDto.getMobile());</span><br><span class="line">    <span class="keyword">if</span> (member == <span class="literal">null</span>) &#123;</span><br><span class="line">        LOG.info(<span class="string">&quot;手机号不存在, &#123;&#125;&quot;</span>, memberDto.getMobile());</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusinessException</span>(BusinessExceptionCode.LOGIN_MEMBER_ERROR);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (member.getPassword().equals(memberDto.getPassword())) &#123;</span><br><span class="line">            <span class="comment">// 登录成功</span></span><br><span class="line">            <span class="type">LoginMemberDto</span> <span class="variable">loginMemberDto</span> <span class="operator">=</span> CopyUtil.copy(member, LoginMemberDto.class);</span><br><span class="line">            <span class="keyword">return</span> loginMemberDto;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            LOG.info(<span class="string">&quot;密码不对, 输入密码：&#123;&#125;, 数据库密码：&#123;&#125;&quot;</span>, memberDto.getPassword(), member.getPassword());</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusinessException</span>(BusinessExceptionCode.LOGIN_MEMBER_ERROR);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>修改UserService，因为把之前的BusinessExceptionCode中的字段修改了，所以也要把这里的字段也修改</p>
</li>
<li><p>我们还给system.controller的ControllerExceptionHandler增加校验异常</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ExceptionHandler(value = ValidatorException.class)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> ResponseDto <span class="title function_">validatorExceptionHandler</span><span class="params">(ValidatorException e)</span> &#123;</span><br><span class="line">    <span class="type">ResponseDto</span> <span class="variable">responseDto</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResponseDto</span>();</span><br><span class="line">    responseDto.setSuccess(<span class="literal">false</span>);</span><br><span class="line">    LOG.warn(e.getMessage());</span><br><span class="line">    responseDto.setMessage(<span class="string">&quot;请求参数异常！&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> responseDto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2.会员登录注册功能开发，完善【记住我】功能，会员登录名是mobile，不是loginName</span><br></pre></td></tr></table></figure>

<ul>
<li>修改login.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//toLoginDiv中增加下面代码</span><br><span class="line">toLoginDiv() &#123;</span><br><span class="line">  // 从缓存中获取记住的用户名密码，如果获取不到，说明上一次没有勾选“记住我”</span><br><span class="line">  let rememberMember = LocalStorage.get(LOCAL_KEY_REMEMBER_MEMBER);</span><br><span class="line">  if (rememberMember) &#123;</span><br><span class="line">    _this.member = rememberMember;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3.会员登录注册功能开发，登录成功后，头部导航显示会员昵称</span><br></pre></td></tr></table></figure>

<ul>
<li>首先修改the-header.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//显示昵称</span><br><span class="line">&lt;span v-show=&quot;loginMember.id&quot; class=&quot;text-white pr-3&quot;&gt;您好：&#123;&#123;loginMember.name&#125;&#125;&lt;/span&gt;</span><br><span class="line">///////////////////////////////////////////////////增加 </span><br><span class="line">data: function () &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        loginMember: &#123;&#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted() &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      _this.loginMember = Tool.getLoginMember();</span><br><span class="line">    &#125;,</span><br><span class="line">//设置方法</span><br><span class="line"> setLoginMember(loginMember) &#123;</span><br><span class="line">        let _this = this;</span><br><span class="line">        _this.loginMember = loginMember;</span><br><span class="line">      &#125;,</span><br></pre></td></tr></table></figure>

<ul>
<li>接下来使用setLoginMember方法在login.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 登录成功，在子组件里调用父组件的xxx方法，可以使用this.$parent.xxx</span><br><span class="line">_this.$parent.setLoginMember(loginMember);</span><br><span class="line">$(&quot;#login-modal&quot;).modal(&quot;hide&quot;);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4.会员登录注册功能开发，增加退出登录功能</span><br></pre></td></tr></table></figure>

<ul>
<li>我们先给business.controller.web的MemberController增加退出登录方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 退出登录</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/logout/&#123;token&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseDto <span class="title function_">logout</span><span class="params">(<span class="meta">@PathVariable</span> String token)</span> &#123;</span><br><span class="line">    <span class="type">ResponseDto</span> <span class="variable">responseDto</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResponseDto</span>();</span><br><span class="line">    redisTemplate.delete(token);</span><br><span class="line">    LOG.info(<span class="string">&quot;从redis中删除token:&#123;&#125;&quot;</span>, token);</span><br><span class="line">    <span class="keyword">return</span> responseDto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>然后我们在修改the-header</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">//退出登录和登录是互斥的</span><br><span class="line">&lt;span v-show=&quot;loginMember.id&quot; class=&quot;text-white pr-3&quot;&gt;您好：&#123;&#123;loginMember.name&#125;&#125;&lt;/span&gt;</span><br><span class="line">&lt;button v-show=&quot;loginMember.id&quot; v-on:click=&quot;logout()&quot; class=&quot;btn btn-outline-light my-2 my-sm-0&quot;&gt;退出登录&lt;/button&gt;</span><br><span class="line">&lt;button v-show=&quot;!loginMember.id&quot; v-on:click=&quot;openLoginModal()&quot; class=&quot;btn btn-outline-light my-2 my-sm-0&quot;&gt;登录/注册&lt;/button&gt;</span><br><span class="line">//增加退出方法</span><br><span class="line">logout () &#123;</span><br><span class="line">        let _this = this;</span><br><span class="line">        _this.$ajax.get(process.env.VUE_APP_SERVER + &#x27;/business/web/member/logout/&#x27; + _this.loginMember.token).then((response)=&gt;&#123;</span><br><span class="line">          let resp = response.data;</span><br><span class="line">          if (resp.success) &#123;</span><br><span class="line">            Tool.setLoginMember(null);</span><br><span class="line">            _this.loginMember = &#123;&#125;;</span><br><span class="line">            Toast.success(&quot;退出登录成功&quot;);</span><br><span class="line">            _this.$router.push(&quot;/&quot;);</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">            Toast.warning(resp.message);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;,</span><br></pre></td></tr></table></figure>

<h2 id="13-11-增加发送短信验证码功能"><a href="#13-11-增加发送短信验证码功能" class="headerlink" title="13-11 增加发送短信验证码功能"></a>13-11 增加发送短信验证码功能</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.会员登录注册功能开发，增加短信管理，生成代码后需要配置资源权限</span><br></pre></td></tr></table></figure>

<ul>
<li>首先增加sql</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 短信验证码</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> `sms`;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> `sms`(</span><br><span class="line">                       `id` <span class="type">char</span>(<span class="number">8</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span> comment <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">                       `mobile` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;手机号&#x27;</span>,</span><br><span class="line">                       `code` <span class="type">char</span>(<span class="number">6</span>) <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;验证码&#x27;</span>,</span><br><span class="line">                       `use` <span class="type">char</span>(<span class="number">1</span>)  <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;用途|枚举[SmsUseEnum]:REGISTER(&quot;R&quot;,&quot;注册&quot;),FORGET(&quot;F&quot;,&quot;忘记密码&quot;)&#x27;</span>,</span><br><span class="line">                       `<span class="keyword">at</span>` datetime(<span class="number">3</span>)  comment <span class="string">&#x27;生成时间&#x27;</span>,</span><br><span class="line">                       `status` <span class="type">char</span>(<span class="number">1</span>)  <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;状态|枚举[SmsStatusEnum]:USED(&quot;U&quot;,&quot;已使用&quot;),NOT_USED(&quot;N&quot;,&quot;未使用&quot;)&#x27;</span>,</span><br><span class="line">                       <span class="keyword">primary</span> key (`id`)</span><br><span class="line">)engine <span class="operator">=</span>innodb <span class="keyword">default</span> charset<span class="operator">=</span>utf8mb4 comment<span class="operator">=</span><span class="string">&#x27;短信验证码&#x27;</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>然后我们给server.enums增加两个枚举SmsUseEnum和SmsStatusEnum</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.server.enums;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">SmsUseEnum</span> &#123;</span><br><span class="line"></span><br><span class="line">    REGISTER(<span class="string">&quot;R&quot;</span>, <span class="string">&quot;注册&quot;</span>),</span><br><span class="line">    FORGET(<span class="string">&quot;F&quot;</span>, <span class="string">&quot;忘记密码&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String code;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String desc;</span><br><span class="line"></span><br><span class="line">    SmsUseEnum(String code, String desc) &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.desc = desc;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCode</span><span class="params">(String code)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDesc</span><span class="params">(String desc)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.desc = desc;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getDesc</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> desc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.server.enums;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">SmsStatusEnum</span> &#123;</span><br><span class="line"></span><br><span class="line">    USED(<span class="string">&quot;U&quot;</span>, <span class="string">&quot;已使用&quot;</span>),</span><br><span class="line">    NOT_USED(<span class="string">&quot;N&quot;</span>, <span class="string">&quot;未使用&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String code;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String desc;</span><br><span class="line"></span><br><span class="line">    SmsStatusEnum(String code, String desc) &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.desc = desc;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCode</span><span class="params">(String code)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDesc</span><span class="params">(String desc)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.desc = desc;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getDesc</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> desc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>然后我们经过各种代码生成器，对了还要改下EnumGenerator到admin，在增加以下代码</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">toJson(SmsUseEnum.class, bufferObject, bufferArray);</span><br><span class="line">toJson(SmsStatusEnum.class, bufferObject, bufferArray);</span><br></pre></td></tr></table></figure>

<ul>
<li>然后我们在admin.vue增加菜单</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;/li&gt; &lt;li v-show=&quot;hasResource(&#x27;0205&#x27;)&quot; class=&quot;&quot; id=&quot;business-sms-sidebar&quot;&gt;</span><br><span class="line">  &lt;router-link to=&quot;/business/sms&quot;&gt;</span><br><span class="line">    &lt;i class=&quot;menu-icon fa fa-caret-right&quot;&gt;&lt;/i&gt;</span><br><span class="line">    短信管理</span><br><span class="line">  &lt;/router-link&gt;</span><br><span class="line">  &lt;b class=&quot;arrow&quot;&gt;&lt;/b&gt;</span><br><span class="line">&lt;/li&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>接下来增加路由</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">,&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;business/sms&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;business/sms&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Sms</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>当然resource.json也要加资源</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">,</span><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span><span class="string">&quot;0205&quot;</span><span class="punctuation">,</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;短信管理&quot;</span><span class="punctuation">,</span><span class="attr">&quot;page&quot;</span><span class="punctuation">:</span><span class="string">&quot;business/sms&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span><span class="string">&quot;020501&quot;</span><span class="punctuation">,</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;增删改查&quot;</span><span class="punctuation">,</span><span class="attr">&quot;request&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;/business/admin/sms&quot;</span><span class="punctuation">]</span><span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2.会员登录注册功能开发，短信管理只能查看</span><br></pre></td></tr></table></figure>

<ul>
<li>就是前端后端删删删</li>
</ul>
<p><strong>增加发送验证码功能</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.会员登录注册功能开发，增加发送短信验证码功能，同手机号同操作1分钟内不能重复发送短信</span><br></pre></td></tr></table></figure>

<ul>
<li><p>一分钟内发送一次注册验证码和忘记密码验证码，是可以的。但是发两次注册验证码或者忘记密码验证码，是不可以的。</p>
</li>
<li><p>我们首先给business.controller.web新建一个SmsController</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.business.controller.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.course.server.dto.ResponseDto;</span><br><span class="line"><span class="keyword">import</span> com.course.server.dto.SmsDto;</span><br><span class="line"><span class="keyword">import</span> com.course.server.service.SmsService;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestBody;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController(&quot;webSmsController&quot;)</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/web/sms&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SmsController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">LOG</span> <span class="operator">=</span> LoggerFactory.getLogger(SmsController.class);</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">BUSINESS_NAME</span> <span class="operator">=</span> <span class="string">&quot;短信验证码&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> SmsService smsService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/send&quot;, method = RequestMethod.POST)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseDto <span class="title function_">send</span><span class="params">(<span class="meta">@RequestBody</span> SmsDto smsDto)</span> &#123;</span><br><span class="line">        LOG.info(<span class="string">&quot;发送短信请求开始: &#123;&#125;&quot;</span>, smsDto);</span><br><span class="line">        <span class="type">ResponseDto</span> <span class="variable">responseDto</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResponseDto</span>();</span><br><span class="line">        smsService.sendCode(smsDto);</span><br><span class="line">        LOG.info(<span class="string">&quot;发送短信请求结束&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> responseDto;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>然后在smsService中增加方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 发送短信验证码</span></span><br><span class="line"><span class="comment"> * 同手机号同操作1分钟内不能重复发送短信</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> smsDto</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendCode</span><span class="params">(SmsDto smsDto)</span> &#123;</span><br><span class="line">    <span class="type">SmsExample</span> <span class="variable">example</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SmsExample</span>();</span><br><span class="line">    SmsExample.<span class="type">Criteria</span> <span class="variable">criteria</span> <span class="operator">=</span> example.createCriteria();</span><br><span class="line">    <span class="comment">// 查找1分钟内有没有同手机号同操作发送记录且没被用过</span></span><br><span class="line">    criteria.andMobileEqualTo(smsDto.getMobile())</span><br><span class="line">            .andUseEqualTo(smsDto.getUse())</span><br><span class="line">            .andStatusEqualTo(SmsStatusEnum.NOT_USED.getCode())</span><br><span class="line">            .andAtGreaterThan(<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="keyword">new</span> <span class="title class_">Date</span>().getTime() - <span class="number">1</span> * <span class="number">60</span> * <span class="number">1000</span>));</span><br><span class="line">    List&lt;Sms&gt; smsList = smsMapper.selectByExample(example);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (smsList == <span class="literal">null</span> || smsList.size() == <span class="number">0</span>) &#123;</span><br><span class="line">        saveAndSend(smsDto);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        LOG.warn(<span class="string">&quot;短信请求过于频繁, &#123;&#125;&quot;</span>, smsDto.getMobile());</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusinessException</span>(BusinessExceptionCode.MOBILE_CODE_TOO_FREQUENT);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 保存并发送短信验证码</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> smsDto</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">saveAndSend</span><span class="params">(SmsDto smsDto)</span> &#123;</span><br><span class="line">    <span class="comment">// 生成6位数字</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">code</span> <span class="operator">=</span> String.valueOf((<span class="type">int</span>)(((Math.random() * <span class="number">9</span>) + <span class="number">1</span>) * <span class="number">100000</span>));</span><br><span class="line">    smsDto.setAt(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">    smsDto.setStatus(SmsStatusEnum.NOT_USED.getCode());</span><br><span class="line">    smsDto.setCode(code);</span><br><span class="line">    <span class="built_in">this</span>.save(smsDto);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 调第三方短信接口发送短信</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>短信验证码可以接阿里云短信服务，在阿里云控台配置短信模板，然后再代码里配置模板id，再调用阿里云jar包里的发送短信方法就可以了，收费是0.045元&#x2F;条。</p>
</li>
<li><p>给BusinessExceptionCode增加一个</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MOBILE_CODE_TOO_FREQUENT(<span class="string">&quot;短信请求过于平凡&quot;</span>),</span><br></pre></td></tr></table></figure>

<ul>
<li>最后修改login.vue，增加两个方法</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 发送注册短信</span><br><span class="line"> */</span><br><span class="line">sendSmsForRegister() &#123;</span><br><span class="line">  let _this = this;</span><br><span class="line"></span><br><span class="line">  let sms = &#123;</span><br><span class="line">    mobile: _this.memberRegister.mobile,</span><br><span class="line">    use: SMS_USE.REGISTER.key</span><br><span class="line">  &#125;;</span><br><span class="line">      // 调服务端发送短信接口</span><br><span class="line">      _this.sendSmsCode(sms);</span><br><span class="line">&#125;,</span><br><span class="line">/**</span><br><span class="line"> * 发送短信</span><br><span class="line"> */</span><br><span class="line">sendSmsCode(sms) &#123;</span><br><span class="line">  let _this = this;</span><br><span class="line"></span><br><span class="line">  // 调服务端发短信接口</span><br><span class="line">  _this.$ajax.post(process.env.VUE_APP_SERVER + &#x27;/business/web/sms/send&#x27;, sms).then((res)=&gt; &#123;</span><br><span class="line">    let response = res.data;</span><br><span class="line">    if (response.success) &#123;</span><br><span class="line">      Toast.success(&quot;短信已发送&quot;);</span><br><span class="line"></span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      Toast.warning(response.message);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2.会员登录注册功能开发，增加发送短信验证码倒计时功能，可修改countdown参数进行调试</span><br></pre></td></tr></table></figure>

<ul>
<li><p>点击发送按钮后，按钮变成不可点击，且显示倒计时</p>
</li>
<li><p>修改login.vue</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">//修改参数，增加id参数</span><br><span class="line">sendSmsForRegister() &#123;</span><br><span class="line">      // 调服务端发送短信接口</span><br><span class="line">  _this.sendSmsCode(sms, &quot;register-send-code-btn&quot;);</span><br><span class="line">&#125;,</span><br><span class="line">/////////////////////////////////////////////////////////////发送成功时调用倒计时</span><br><span class="line"> /**</span><br><span class="line">     * 发送短信</span><br><span class="line">     */</span><br><span class="line">    sendSmsCode(sms, btnId) &#123;//增加参数</span><br><span class="line">   </span><br><span class="line">        if (response.success) &#123;</span><br><span class="line">          // 开始倒计时</span><br><span class="line">          _this.countdown = 60;</span><br><span class="line">          _this.setTime(btnId);</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">////////////////////////////////////////////////////////////////增加倒计时方法</span><br><span class="line">    /**</span><br><span class="line">     * 倒计时</span><br><span class="line">     * @param btnId</span><br><span class="line">     */</span><br><span class="line">    setTime(btnId) &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      let btn = $(&quot;#&quot; + btnId);</span><br><span class="line">      if (_this.countdown === 0) &#123;</span><br><span class="line">        btn.removeAttr(&quot;disabled&quot;);</span><br><span class="line">        btn.text(&quot;获取验证码&quot;);</span><br><span class="line">        return;</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        btn.attr(&quot;disabled&quot;, true);</span><br><span class="line">        btn.text(&quot;重新发送(&quot; + _this.countdown + &quot;)&quot;);</span><br><span class="line">        _this.countdown--;</span><br><span class="line">      &#125;</span><br><span class="line">      setTimeout(function () &#123;</span><br><span class="line">        _this.setTime(btnId);</span><br><span class="line">      &#125;, 1000);</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<h2 id="13-12-完善登录注册校验功能"><a href="#13-12-完善登录注册校验功能" class="headerlink" title="13-12 完善登录注册校验功能"></a>13-12 完善登录注册校验功能</h2><p><strong>增加手机号后端校验</strong></p>
<ul>
<li>前端就修改login的sendSmsForRegister方法，增加如下：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">_this.$ajax.get(process.env.VUE_APP_SERVER + &#x27;/business/web/member/is-mobile-exist/&#x27; + _this.memberRegister.mobile).then((res)=&gt;&#123;</span><br><span class="line">  let response = res.data;</span><br><span class="line">  if (response.success) &#123;</span><br><span class="line">    Toast.warning(&quot;手机号已被注册&quot;);</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    // 调服务端发送短信接口</span><br><span class="line">    _this.sendSmsCode(sms, &quot;register-send-code-btn&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>我们修改business.controller.web的MemberController，增加方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 校验手机号是否存在</span></span><br><span class="line"><span class="comment"> * 存在则success=true，不存在则success=false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(value = &quot;/is-mobile-exist/&#123;mobile&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseDto <span class="title function_">isMobileExist</span><span class="params">(<span class="meta">@PathVariable(value = &quot;mobile&quot;)</span> String mobile)</span> <span class="keyword">throws</span> BusinessException &#123;</span><br><span class="line">    LOG.info(<span class="string">&quot;查询手机号是否存在开始&quot;</span>);</span><br><span class="line">    <span class="type">ResponseDto</span> <span class="variable">responseDto</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResponseDto</span>();</span><br><span class="line">    <span class="type">MemberDto</span> <span class="variable">memberDto</span> <span class="operator">=</span> memberService.findByMobile(mobile);</span><br><span class="line">    <span class="keyword">if</span> (memberDto == <span class="literal">null</span>) &#123;</span><br><span class="line">        responseDto.setSuccess(<span class="literal">false</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        responseDto.setSuccess(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> responseDto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>对应的MemberService也增加方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 按手机号查找</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> mobile</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> MemberDto <span class="title function_">findByMobile</span><span class="params">(String mobile)</span> &#123;</span><br><span class="line">    <span class="type">Member</span> <span class="variable">member</span> <span class="operator">=</span> <span class="built_in">this</span>.selectByMobile(mobile);</span><br><span class="line">    <span class="keyword">return</span> CopyUtil.copy(member, MemberDto.class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>增加前端正则校验</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.会员登录注册功能开发，注册时发送验证码前，增加手机号校验，手机号输入框失去焦点时，检验手机号</span><br><span class="line">2.增加正则表达式校验工具类</span><br></pre></td></tr></table></figure>

<ul>
<li>Pattern里面都是一些常用的正则表达式校验，再js中加入</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Pattern</span> = &#123;</span><br><span class="line">  <span class="comment">// 用户名正则，2到16位（字母，数字，下划线）</span></span><br><span class="line">  <span class="attr">loginNamePattern</span>: <span class="regexp">/^[a-zA-Z0-9_]&#123;6,16&#125;$/</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 昵称正则，6到20位中文，字母，数字，下划线</span></span><br><span class="line">  <span class="attr">namePattern</span>: <span class="regexp">/^[\w\u4e00-\u9fa5]&#123;2,20&#125;$/</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 强密码强度正则，最少8位，包括至少1个大写字母，1个小写字母，1个数字，1个特殊字符</span></span><br><span class="line">  <span class="attr">passwordStrongPattern</span>: <span class="regexp">/^.*(?=.&#123;8,&#125;)(?=.*\d)(?=.*[A-Z])(?=.*[a-z])(?=.*[!@#$%^&amp;*? ]).*$/</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 弱密码强度正则，最少6位，包括至少1字母，1个数字</span></span><br><span class="line">  <span class="attr">passwordWeakPattern</span>: <span class="regexp">/^.*(?=.&#123;6,&#125;)(?=.*\d)(?=.*[A-Za-z]).*$/</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 手机号正则，11位数字，1开头</span></span><br><span class="line">  <span class="attr">mobilePattern</span>: <span class="regexp">/^1\d&#123;10&#125;$/</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 图片验证码正则，4位字母，数字</span></span><br><span class="line">  <span class="attr">imageCodePattern</span>: <span class="regexp">/^[a-zA-Z0-9]&#123;4&#125;$/</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 手机验证码正则，6位数字</span></span><br><span class="line">  <span class="attr">mobileCodePattern</span>: <span class="regexp">/^[0-9]&#123;6&#125;$/</span>,</span><br><span class="line"></span><br><span class="line">  <span class="attr">validateLoginName</span>: <span class="keyword">function</span> (<span class="params">str</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">Tool</span>.<span class="title function_">isEmpty</span>(str)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">loginNamePattern</span>.<span class="title function_">test</span>(str);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">validateName</span>: <span class="keyword">function</span> (<span class="params">str</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">Tool</span>.<span class="title function_">isEmpty</span>(str)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">namePattern</span>.<span class="title function_">test</span>(str);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">validatePasswordStrong</span>: <span class="keyword">function</span> (<span class="params">str</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">Tool</span>.<span class="title function_">isEmpty</span>(str)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">passwordStrongPattern</span>.<span class="title function_">test</span>(str);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">validatePasswordWeak</span>: <span class="keyword">function</span> (<span class="params">str</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">Tool</span>.<span class="title function_">isEmpty</span>(str)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">passwordWeakPattern</span>.<span class="title function_">test</span>(str);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">validateMobile</span>: <span class="keyword">function</span> (<span class="params">str</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">Tool</span>.<span class="title function_">isEmpty</span>(str)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">mobilePattern</span>.<span class="title function_">test</span>(str);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">validateImageCode</span>: <span class="keyword">function</span> (<span class="params">str</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">Tool</span>.<span class="title function_">isEmpty</span>(str)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">imageCodePattern</span>.<span class="title function_">test</span>(str);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">validateMobileCode</span>: <span class="keyword">function</span> (<span class="params">str</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">Tool</span>.<span class="title function_">isEmpty</span>(str)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">mobileCodePattern</span>.<span class="title function_">test</span>(str);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>index中引入</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--正则表达式校验--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&lt;%= BASE_URL %&gt;static/js/pattern.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>最后就是修改login.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">//增加点击事件，再增加一个v-show。blur事件，当文本框失去焦点会触发blur事件</span><br><span class="line">&lt;h3&gt;注&amp;nbsp;&amp;nbsp;册&lt;/h3&gt;</span><br><span class="line">&lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">  &lt;input  v-on:blur=&quot;onRegisterMobileBlur()&quot;</span><br><span class="line">          v-bind:class=&quot;registerMobileValidateClass&quot;</span><br><span class="line">          id=&quot;register-mobile&quot; v-model=&quot;memberRegister.mobile&quot;</span><br><span class="line">          class=&quot;form-control&quot; placeholder=&quot;手机号&quot;&gt;</span><br><span class="line">  &lt;span v-show=&quot;registerMobileValidate === false&quot; class=&quot;text-danger&quot;&gt;手机号11位数字，且不能重复&lt;/span&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">/////////////////////////////////////////////////////////再data中增加组件变量</span><br><span class="line">// 注册框显示错误信息</span><br><span class="line">registerMobileValidate: null,</span><br><span class="line">////////////////////////////////////////////computed，可以根据一个或多个组件变量，计算结果</span><br><span class="line"> computed: &#123;</span><br><span class="line">    registerMobileValidateClass: function () &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        &#x27;border-success&#x27;: this.registerMobileValidate === true,</span><br><span class="line">        &#x27;border-danger&#x27;: this.registerMobileValidate === false,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">//再sendSmsForRegister方法中也要校验一次</span><br><span class="line">  if (!_this.onRegisterMobileBlur()) &#123;</span><br><span class="line">        return false;</span><br><span class="line">      &#125;</span><br><span class="line">  //-------------------------------- 注册框校验 ----------------------------</span><br><span class="line"></span><br><span class="line">    onRegisterMobileBlur () &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      _this.registerMobileValidate = Pattern.validateMobile(_this.memberRegister.mobile);</span><br><span class="line">      return _this.registerMobileValidate;</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2.会员登录注册功能开发，完善注册输入框校验</span><br></pre></td></tr></table></figure>

<ul>
<li>依旧是修改login.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">//每个部分都加校验</span><br><span class="line">&lt;input v-on:blur=&quot;onRegisterMobileCodeBlur()&quot;</span><br><span class="line">       v-bind:class=&quot;registerMobileCodeValidateClass&quot;</span><br><span class="line">       id=&quot;register-mobile-code&quot; class=&quot;form-control&quot;</span><br><span class="line">       placeholder=&quot;手机验证码&quot; v-model=&quot;memberRegister.code&quot;&gt;</span><br><span class="line">&lt;span v-show=&quot;registerMobileCodeValidate === false&quot; class=&quot;text-danger&quot;&gt;请输入短信6位验证码&lt;/span&gt;</span><br><span class="line">///////////////////////////////////////////////////////</span><br><span class="line">&lt;input  v-on:blur=&quot;onRegisterNameBlur()&quot;</span><br><span class="line">        v-bind:class=&quot;registerNameValidateClass&quot;</span><br><span class="line">        id=&quot;register-name&quot; v-model=&quot;memberRegister.name&quot;</span><br><span class="line">        class=&quot;form-control&quot; placeholder=&quot;昵称&quot;&gt;</span><br><span class="line">&lt;span v-show=&quot;registerNameValidate === false&quot; class=&quot;text-danger&quot;&gt;昵称2到20位中文，字母，数字，下划线组合&lt;/span&gt;</span><br><span class="line">///////////////////////////////////////////////////////</span><br><span class="line">&lt;input v-on:blur=&quot;onRegisterPasswordBlur()&quot;</span><br><span class="line">        v-bind:class=&quot;registerPasswordValidateClass&quot;</span><br><span class="line">        id=&quot;register-password&quot; v-model=&quot;memberRegister.passwordOriginal&quot;</span><br><span class="line">        class=&quot;form-control&quot; placeholder=&quot;密码&quot; type=&quot;password&quot;&gt;</span><br><span class="line">&lt;span v-show=&quot;registerPasswordValidate === false&quot; class=&quot;text-danger&quot;&gt;密码最少6位，包含至少1字母和1个数字&lt;/span&gt;</span><br><span class="line">///////////////////////////////////////////////////////    </span><br><span class="line">&lt;input v-on:blur=&quot;onRegisterConfirmPasswordBlur()&quot;</span><br><span class="line">        v-bind:class=&quot;registerConfirmPasswordValidateClass&quot;</span><br><span class="line">        id=&quot;register-confirm-password&quot; v-model=&quot;memberRegister.confirm&quot;</span><br><span class="line">        class=&quot;form-control&quot; placeholder=&quot;确认密码&quot;</span><br><span class="line">        name=&quot;memberRegisterConfirm&quot; type=&quot;password&quot;&gt;</span><br><span class="line">&lt;span v-show=&quot;registerConfirmPasswordValidate === false&quot; class=&quot;text-danger&quot;&gt;确认密码和密码一致&lt;/span&gt;</span><br><span class="line">/////////////////////////////////////////////////////////data中增加</span><br><span class="line">registerMobileCodeValidate: null,</span><br><span class="line">registerPasswordValidate: null,</span><br><span class="line">registerNameValidate: null,</span><br><span class="line">registerConfirmPasswordValidate: null,</span><br><span class="line">/////////////////////////////////////////////////////////////////computed增加</span><br><span class="line"> registerMobileCodeValidateClass: function () &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        &#x27;border-success&#x27;: this.registerMobileCodeValidate === true,</span><br><span class="line">        &#x27;border-danger&#x27;: this.registerMobileCodeValidate === false,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    registerPasswordValidateClass: function () &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        &#x27;border-success&#x27;: this.registerPasswordValidate === true,</span><br><span class="line">        &#x27;border-danger&#x27;: this.registerPasswordValidate === false,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    registerNameValidateClass: function () &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        &#x27;border-success&#x27;: this.registerNameValidate === true,</span><br><span class="line">        &#x27;border-danger&#x27;: this.registerNameValidate === false,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    registerConfirmPasswordValidateClass: function () &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        &#x27;border-success&#x27;: this.registerConfirmPasswordValidate === true,</span><br><span class="line">        &#x27;border-danger&#x27;: this.registerConfirmPasswordValidate === false,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    //-------------------------------- 注册框校验 ----------------------------</span><br><span class="line">onRegisterMobileCodeBlur () &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      _this.registerMobileCodeValidate = Pattern.validateMobileCode(_this.memberRegister.smsCode);</span><br><span class="line">      return _this.registerMobileValidate;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    onRegisterNameBlur () &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      _this.registerNameValidate = Pattern.validateName(_this.memberRegister.name);</span><br><span class="line">      return _this.registerMobileValidate;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    onRegisterPasswordBlur () &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      _this.registerPasswordValidate = Pattern.validatePasswordWeak(_this.memberRegister.passwordOriginal);</span><br><span class="line">      return _this.registerMobileValidate;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    onRegisterConfirmPasswordBlur () &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      let confirmPassword = $(&quot;#register-confirm-password&quot;).val();</span><br><span class="line">      if (Tool.isEmpty(confirmPassword)) &#123;</span><br><span class="line">        return _this.registerConfirmPasswordValidate = false;</span><br><span class="line">      &#125;</span><br><span class="line">      return _this.registerConfirmPasswordValidate = (confirmPassword === _this.memberRegister.passwordOriginal);</span><br><span class="line">    &#125;,    </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3.会员登录注册功能开发，提交注册之前，先校验所有注册输入框，当有一个输入框校验为false时，其他不校验</span><br></pre></td></tr></table></figure>

<ul>
<li>修改login的register方法，增加如下代码</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 提交之前，先校验所有输入框</span><br><span class="line">// 注意：当有一个文本框校验为false时，其它不校验</span><br><span class="line">let validateResult = _this.onRegisterMobileBlur() &amp;&amp;</span><br><span class="line">    _this.onRegisterMobileCodeBlur() &amp;&amp;</span><br><span class="line">    _this.onRegisterNameBlur() &amp;&amp;</span><br><span class="line">    _this.onRegisterPasswordBlur() &amp;&amp;</span><br><span class="line">    _this.onRegisterConfirmPasswordBlur();</span><br><span class="line">if (!validateResult) &#123;</span><br><span class="line">  return;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>增加短信验证码校验</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.会员登录注册功能开发，注册时增加短信验证码校验功能,短信验证码5分钟内有效，只能验证一次</span><br></pre></td></tr></table></figure>

<ul>
<li>我们给MemberDto增加字段</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 短信验证码</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> String smsCode;</span><br></pre></td></tr></table></figure>

<ul>
<li>接下来我们修改MemberController</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">///////////////////////////////////////////////////////////注入</span></span><br><span class="line"><span class="meta">@Resource</span></span><br><span class="line"><span class="keyword">private</span> SmsService smsService;</span><br><span class="line"><span class="comment">////////////////////////////////////////////////////////在register方法中加入</span></span><br><span class="line"><span class="comment">// 校验短信验证码</span></span><br><span class="line"><span class="type">SmsDto</span> <span class="variable">smsDto</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SmsDto</span>();</span><br><span class="line">smsDto.setMobile(memberDto.getMobile());</span><br><span class="line">smsDto.setCode(memberDto.getSmsCode());</span><br><span class="line">smsDto.setUse(SmsUseEnum.REGISTER.getCode());</span><br><span class="line">smsService.validCode(smsDto);</span><br><span class="line">LOG.info(<span class="string">&quot;短信验证码校验通过&quot;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>然后我们修改SmsService</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 验证码5分钟内有效，且操作类型要一致</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> smsDto</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">validCode</span><span class="params">(SmsDto smsDto)</span> &#123;</span><br><span class="line">    <span class="type">SmsExample</span> <span class="variable">example</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SmsExample</span>();</span><br><span class="line">    SmsExample.<span class="type">Criteria</span> <span class="variable">criteria</span> <span class="operator">=</span> example.createCriteria();</span><br><span class="line">    <span class="comment">// 查找5分钟内同手机号同操作发送记录</span></span><br><span class="line">    criteria.andMobileEqualTo(smsDto.getMobile()).andUseEqualTo(smsDto.getUse()).andAtGreaterThan(<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="keyword">new</span> <span class="title class_">Date</span>().getTime() - <span class="number">5</span> * <span class="number">60</span> * <span class="number">1000</span>));</span><br><span class="line">    List&lt;Sms&gt; smsList = smsMapper.selectByExample(example);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (smsList != <span class="literal">null</span> &amp;&amp; smsList.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="type">Sms</span> <span class="variable">smsDb</span> <span class="operator">=</span> smsList.get(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">if</span> (!smsDb.getCode().equals(smsDto.getCode())) &#123;</span><br><span class="line">            LOG.warn(<span class="string">&quot;短信验证码不正确&quot;</span>);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusinessException</span>(BusinessExceptionCode.MOBILE_CODE_ERROR);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            smsDb.setStatus(SmsStatusEnum.USED.getCode());</span><br><span class="line">            smsMapper.updateByPrimaryKey(smsDb);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        LOG.warn(<span class="string">&quot;短信验证码不存在或已过期，请重新发送短信&quot;</span>);</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusinessException</span>(BusinessExceptionCode.MOBILE_CODE_EXPIRED);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>最后我们再BusinessExceptionCode增加字段</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MOBILE_CODE_ERROR(<span class="string">&quot;短信验证码不正确&quot;</span>),</span><br><span class="line">MOBILE_CODE_EXPIRED(<span class="string">&quot;短信验证码不存在或已过期，请重新发送短信&quot;</span>),</span><br></pre></td></tr></table></figure>

<p><strong>增加忘记密码功能</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.会员登录注册功能开发，增加忘记密码功能，包含短信验证，输入框校验等</span><br></pre></td></tr></table></figure>

<ul>
<li>我们先修改login</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line">/////////////////////////////////////////忘记密码部分</span><br><span class="line">&lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">  &lt;input v-on:blur=&quot;onForgetMobileBlur()&quot;</span><br><span class="line">         v-bind:class=&quot;forgetMobileValidateClass&quot;</span><br><span class="line">         id=&quot;forget-mobile&quot; v-model=&quot;memberForget.mobile&quot;</span><br><span class="line">         class=&quot;form-control&quot; placeholder=&quot;手机号&quot;&gt;</span><br><span class="line">  &lt;span v-show=&quot;forgetMobileValidate === false&quot; class=&quot;text-danger&quot;&gt;手机号11位数字，且必须已注册&lt;/span&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">////////////////////////////////////////////////</span><br><span class="line">&lt;input v-on:blur=&quot;onForgetMobileCodeBlur()&quot;</span><br><span class="line">        v-bind:class=&quot;forgetMobileCodeValidateClass&quot;</span><br><span class="line">        id=&quot;forget-mobile-code&quot; class=&quot;form-control&quot;</span><br><span class="line">        placeholder=&quot;手机验证码&quot; v-model=&quot;memberForget.smsCode&quot;&gt;</span><br><span class="line">&lt;div class=&quot;input-group-append&quot;&gt;</span><br><span class="line">&lt;button v-on:click=&quot;sendSmsForForget()&quot; class=&quot;btn btn-outline-secondary&quot; id=&quot;forget-send-code-btn&quot;&gt;</span><br><span class="line">发送验证码</span><br><span class="line">&lt;/button&gt;</span><br><span class="line">&lt;span v-show=&quot;forgetMobileCodeValidate === false&quot; class=&quot;text-danger&quot;&gt;请输入短信6位验证码&lt;/span&gt;</span><br><span class="line"> /////////////////////////////////////////////////////</span><br><span class="line">  &lt;input v-on:blur=&quot;onForgetPasswordBlur()&quot;</span><br><span class="line">                     v-bind:class=&quot;forgetPasswordValidateClass&quot;</span><br><span class="line">                     id=&quot;forget-password&quot; v-model=&quot;memberForget.passwordOriginal&quot;</span><br><span class="line">                     class=&quot;form-control&quot; placeholder=&quot;密码&quot; type=&quot;password&quot;&gt;</span><br><span class="line">&lt;span v-show=&quot;forgetPasswordValidate === false&quot; class=&quot;text-danger&quot;&gt;密码最少6位，包含至少1字母和1个数字&lt;/span&gt;</span><br><span class="line">///////////////////////////////////////////////////////////////////</span><br><span class="line">&lt;input v-on:blur=&quot;onForgetConfirmPasswordBlur()&quot;</span><br><span class="line">                     v-bind:class=&quot;forgetConfirmPasswordValidateClass&quot;</span><br><span class="line">                     id=&quot;forget-confirm-password&quot; v-model=&quot;memberForget.confirm&quot;</span><br><span class="line">                     class=&quot;form-control&quot; placeholder=&quot;确认密码&quot; type=&quot;password&quot;&gt;</span><br><span class="line">&lt;span v-show=&quot;forgetConfirmPasswordValidate === false&quot; class=&quot;text-danger&quot;&gt;确认密码和密码一致&lt;/span&gt;</span><br><span class="line">&lt;button  v-on:click=&quot;resetPassword()&quot; class=&quot;btn btn-primary btn-block submit-button&quot;&gt;</span><br><span class="line">                重&amp;nbsp;&amp;nbsp;置</span><br><span class="line">&lt;/button&gt;</span><br><span class="line">/////////////////////////////////////////////////再data增加</span><br><span class="line"> // 忘记密码框显示错误信息</span><br><span class="line"> forgetMobileValidate: null,</span><br><span class="line"> forgetMobileCodeValidate: null,</span><br><span class="line"> forgetPasswordValidate: null,</span><br><span class="line"> forgetConfirmPasswordValidate: null,</span><br><span class="line">////////////////////////////////////////////再computed增加</span><br><span class="line">forgetMobileValidateClass: function () &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        &#x27;border-success&#x27;: this.forgetMobileValidate === true,</span><br><span class="line">        &#x27;border-danger&#x27;: this.forgetMobileValidate === false,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    forgetMobileCodeValidateClass: function () &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        &#x27;border-success&#x27;: this.forgetMobileCodeValidate === true,</span><br><span class="line">        &#x27;border-danger&#x27;: this.forgetMobileCodeValidate === false,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    forgetPasswordValidateClass: function () &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        &#x27;border-success&#x27;: this.forgetPasswordValidate === true,</span><br><span class="line">        &#x27;border-danger&#x27;: this.forgetPasswordValidate === false,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    forgetConfirmPasswordValidateClass: function () &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        &#x27;border-success&#x27;: this.forgetConfirmPasswordValidate === true,</span><br><span class="line">        &#x27;border-danger&#x27;: this.forgetConfirmPasswordValidate === false,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">////////////////////////////////////////////增加方法</span><br><span class="line"> /**</span><br><span class="line">     * 发送忘记密码短信</span><br><span class="line">     */</span><br><span class="line">    sendSmsForForget() &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      if (!_this.onForgetMobileBlur()) &#123;</span><br><span class="line">        return false;</span><br><span class="line">      &#125;</span><br><span class="line">      let sms = &#123;</span><br><span class="line">        mobile: _this.memberForget.mobile,</span><br><span class="line">        use: SMS_USE.FORGET.key</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      _this.$ajax.get(process.env.VUE_APP_SERVER + &#x27;/business/web/member/is-mobile-exist/&#x27; + _this.memberForget.mobile).then((res)=&gt;&#123;</span><br><span class="line">        let response = res.data;</span><br><span class="line">        if (response.success) &#123;</span><br><span class="line">          _this.forgetMobileValidate = true;</span><br><span class="line">          _this.sendSmsCode(sms, &quot;forget-send-code-btn&quot;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          _this.forgetMobileValidate = false;</span><br><span class="line">          Toast.warning(&quot;手机号未注册&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    resetPassword() &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line"></span><br><span class="line">      // 提交之前，先校验所有输入框</span><br><span class="line">      // 注意：当有一个文本框校验为false时，其它不校验</span><br><span class="line">      let validateResult = _this.onForgetMobileBlur() &amp;&amp;</span><br><span class="line">          _this.onForgetMobileCodeBlur() &amp;&amp;</span><br><span class="line">          _this.onForgetPasswordBlur() &amp;&amp;</span><br><span class="line">          _this.onForgetConfirmPasswordBlur();</span><br><span class="line">      if (!validateResult) &#123;</span><br><span class="line">        return;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      _this.memberForget.password = hex_md5(_this.memberForget.passwordOriginal + KEY);</span><br><span class="line"></span><br><span class="line">      // 调服务端密码重置接口</span><br><span class="line">      _this.$ajax.post(process.env.VUE_APP_SERVER + &#x27;/business/web/member/reset-password&#x27;, _this.memberForget).then((res)=&gt;&#123;</span><br><span class="line">        let response = res.data;</span><br><span class="line">        if (response.success) &#123;</span><br><span class="line">          Toast.success(&quot;密码重置成功&quot;);</span><br><span class="line">          _this.toLoginDiv();</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          Toast.warning(response.message);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;).catch((response)=&gt;&#123;</span><br><span class="line">        console.log(&quot;error：&quot;, response);</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">     //-------------------------------- 忘记密码框校验 ----------------------------</span><br><span class="line"></span><br><span class="line">    onForgetMobileBlur () &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      return _this.forgetMobileValidate = Pattern.validateMobile(_this.memberForget.mobile);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    onForgetMobileCodeBlur () &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      return _this.forgetMobileCodeValidate = Pattern.validateMobileCode(_this.memberForget.smsCode);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    onForgetPasswordBlur () &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      return _this.forgetPasswordValidate = Pattern.validatePasswordWeak(_this.memberForget.passwordOriginal);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    onForgetConfirmPasswordBlur () &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      let forgetPassword = $(&quot;#forget-confirm-password&quot;).val();</span><br><span class="line">      if (Tool.isEmpty(forgetPassword)) &#123;</span><br><span class="line">        return _this.forgetConfirmPasswordValidate = false;</span><br><span class="line">      &#125;</span><br><span class="line">      return _this.forgetConfirmPasswordValidate = (forgetPassword === _this.memberForget.passwordOriginal);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>修改MemberController</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@PostMapping(&quot;/reset-password&quot;)</span></span><br><span class="line">  <span class="keyword">public</span> ResponseDto <span class="title function_">resetPassword</span><span class="params">(<span class="meta">@RequestBody</span> MemberDto memberDto)</span> <span class="keyword">throws</span> BusinessException &#123;</span><br><span class="line">      LOG.info(<span class="string">&quot;会员密码重置开始:&quot;</span>);</span><br><span class="line">      memberDto.setPassword(DigestUtils.md5DigestAsHex(memberDto.getPassword().getBytes()));</span><br><span class="line">      ResponseDto&lt;MemberDto&gt; responseDto = <span class="keyword">new</span> <span class="title class_">ResponseDto</span>();</span><br><span class="line">  </span><br><span class="line">      <span class="comment">// 校验短信验证码</span></span><br><span class="line">      <span class="type">SmsDto</span> <span class="variable">smsDto</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SmsDto</span>();</span><br><span class="line">      smsDto.setMobile(memberDto.getMobile());</span><br><span class="line">      smsDto.setCode(memberDto.getSmsCode());</span><br><span class="line">      smsDto.setUse(SmsUseEnum.FORGET.getCode());</span><br><span class="line">      smsService.validCode(smsDto);</span><br><span class="line">      LOG.info(<span class="string">&quot;短信验证码校验通过&quot;</span>);</span><br><span class="line">  </span><br><span class="line">      <span class="comment">// 重置密码</span></span><br><span class="line">      memberService.resetPassword(memberDto);</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">return</span> responseDto;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>修改MemberService</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 重置密码</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">resetPassword</span><span class="params">(MemberDto memberDto)</span> <span class="keyword">throws</span> BusinessException &#123;</span><br><span class="line">    <span class="type">Member</span> <span class="variable">memberDb</span> <span class="operator">=</span> <span class="built_in">this</span>.selectByMobile(memberDto.getMobile());</span><br><span class="line">    <span class="keyword">if</span> (memberDb == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusinessException</span>(BusinessExceptionCode.MEMBER_NOT_EXIST);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="type">Member</span> <span class="variable">member</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Member</span>();</span><br><span class="line">        member.setId(memberDb.getId());</span><br><span class="line">        member.setPassword(memberDto.getPassword());</span><br><span class="line">        memberMapper.updateByPrimaryKeySelective(member);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>最后再BusinessExceptionCode中增加字段</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MEMBER_NOT_EXIST(<span class="string">&quot;会员不存在&quot;</span>),</span><br></pre></td></tr></table></figure>

<h2 id="13-13-增加立即报名功能"><a href="#13-13-增加立即报名功能" class="headerlink" title="13-13 增加立即报名功能"></a>13-13 增加立即报名功能</h2><p><strong>新增报名表并生成基本代码</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.会员报名课程功能开发，新增报名表，生成服务端和持久层代码</span><br></pre></td></tr></table></figure>

<ul>
<li>首先增加sql,然后就可以代码生成器了</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 会员课程报名</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> `member_course`;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> `member_course`(</span><br><span class="line">                       `id` <span class="type">char</span>(<span class="number">8</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span> comment <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">                       `member_id` <span class="type">char</span>(<span class="number">8</span>) <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;会员id&#x27;</span>,</span><br><span class="line">                       `course_id` <span class="type">char</span>(<span class="number">8</span>) <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;课程id&#x27;</span>,</span><br><span class="line">                       `<span class="keyword">at</span>` datetime(<span class="number">3</span>) <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;报名时间&#x27;</span>,</span><br><span class="line">                       <span class="keyword">primary</span> key (`id`),</span><br><span class="line">                       <span class="keyword">unique</span> key `member_course_unique`(`member_id`,`course_id`)</span><br><span class="line"></span><br><span class="line">)engine <span class="operator">=</span>innodb <span class="keyword">default</span> charset<span class="operator">=</span>utf8mb4 comment<span class="operator">=</span><span class="string">&#x27;会员课程报名&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><strong>登录后可报名课程</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.会员报名课程功能开发，登录后可报名课程</span><br></pre></td></tr></table></figure>

<ul>
<li><p>报名功能就是保存会员课程关联表，相当于生成的save方法</p>
</li>
<li><p>我们再business.controller.web路径下新增一个MemberCourseController</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.business.controller.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.course.server.dto.MemberCourseDto;</span><br><span class="line"><span class="keyword">import</span> com.course.server.dto.ResponseDto;</span><br><span class="line"><span class="keyword">import</span> com.course.server.service.MemberCourseService;</span><br><span class="line"><span class="keyword">import</span> com.course.server.util.ValidatorUtil;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController(&quot;webMemberCourseController&quot;)</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/web/member-course&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MemberCourseController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">LOG</span> <span class="operator">=</span> LoggerFactory.getLogger(MemberCourseController.class);</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">BUSINESS_NAME</span> <span class="operator">=</span> <span class="string">&quot;会员课程报名&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> MemberCourseService memberCourseService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 保存，id有值时更新，无值时新增</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/enroll&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseDto <span class="title function_">enroll</span><span class="params">(<span class="meta">@RequestBody</span> MemberCourseDto memberCourseDto)</span> &#123;</span><br><span class="line">        <span class="comment">// 保存校验</span></span><br><span class="line">        ValidatorUtil.require(memberCourseDto.getMemberId(), <span class="string">&quot;会员id&quot;</span>);</span><br><span class="line">        ValidatorUtil.require(memberCourseDto.getCourseId(), <span class="string">&quot;课程id&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">ResponseDto</span> <span class="variable">responseDto</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResponseDto</span>();</span><br><span class="line">        memberCourseDto = memberCourseService.enroll(memberCourseDto);</span><br><span class="line">        responseDto.setContent(memberCourseDto);</span><br><span class="line">        <span class="keyword">return</span> responseDto;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>然后我们看下MemberCourseService，真实项目中，报名时需要对接第三方支付，比如支付宝，还要另外做一个支付回调接口，让支付宝告诉你会员是否支付成功，如果支付成功，再插入报名表</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(MemberCourse memberCourse)</span>&#123;</span><br><span class="line">            <span class="type">Date</span> <span class="variable">now</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">            memberCourse.setId(UuidUtil.getShortUuid());</span><br><span class="line">            memberCourse.setAt(now);<span class="comment">//增加这一行</span></span><br><span class="line">            memberCourseMapper.insert(memberCourse);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 报名，先判断是否已报名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> memberCourseDto</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> MemberCourseDto <span class="title function_">enroll</span><span class="params">(MemberCourseDto memberCourseDto)</span> &#123;</span><br><span class="line">        <span class="type">MemberCourse</span> <span class="variable">memberCourseDb</span> <span class="operator">=</span> <span class="built_in">this</span>.select(memberCourseDto.getMemberId(), memberCourseDto.getCourseId());</span><br><span class="line">        <span class="keyword">if</span> (memberCourseDb == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">MemberCourse</span> <span class="variable">memberCourse</span> <span class="operator">=</span> CopyUtil.copy(memberCourseDto, MemberCourse.class);</span><br><span class="line">            <span class="built_in">this</span>.insert(memberCourse);</span><br><span class="line">            <span class="comment">// 将数据库信息全部返回，包括id, at</span></span><br><span class="line">            <span class="keyword">return</span> CopyUtil.copy(memberCourse, MemberCourseDto.class);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 如果已经报名，则直接返回已报名的信息</span></span><br><span class="line">            <span class="keyword">return</span> CopyUtil.copy(memberCourseDb, MemberCourseDto.class);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据memberId和courseId查询记录</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> MemberCourse <span class="title function_">select</span><span class="params">(String memberId, String courseId)</span> &#123;</span><br><span class="line">        <span class="type">MemberCourseExample</span> <span class="variable">example</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MemberCourseExample</span>();</span><br><span class="line">        example.createCriteria()</span><br><span class="line">                .andCourseIdEqualTo(courseId)</span><br><span class="line">                .andMemberIdEqualTo(memberId);</span><br><span class="line">        List&lt;MemberCourse&gt; memberCourseList = memberCourseMapper.selectByExample(example);</span><br><span class="line">        <span class="keyword">if</span> (CollectionUtils.isEmpty(memberCourseList)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> memberCourseList.get(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>然后我们看下detail.vue页面</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">////////////////////////////////////////////////////////再一次增加互斥显示</span><br><span class="line">&lt;p class=&quot;course-head-button-links&quot;&gt;</span><br><span class="line">  &lt;a v-show=&quot;!memberCourse.id&quot; v-on:click=&quot;enroll()&quot; class=&quot;btn btn-lg btn-primary btn-shadow&quot; href=&quot;javascript:;&quot;&gt;立即报名&lt;/a&gt;</span><br><span class="line">  &lt;a v-show=&quot;memberCourse.id&quot; href=&quot;#&quot; class=&quot;btn btn-lg btn-success btn-shadow disabled&quot;&gt;您已报名&lt;/a&gt;</span><br><span class="line">&lt;/p&gt;</span><br><span class="line">///////////////////////////////////////////////////data中增加</span><br><span class="line">memberCourse:&#123;&#125;,</span><br><span class="line">/////////////////////////////////////////////////////////////增加方法</span><br><span class="line">/**</span><br><span class="line">     * 报名</span><br><span class="line">     */</span><br><span class="line">    enroll() &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      let loginMember = Tool.getLoginMember();</span><br><span class="line">      if (Tool.isEmpty(loginMember)) &#123;</span><br><span class="line">        Toast.warning(&quot;请先登录&quot;);</span><br><span class="line">        return;</span><br><span class="line">      &#125;</span><br><span class="line">      _this.$ajax.post(process.env.VUE_APP_SERVER + &#x27;/business/web/member-course/enroll&#x27;, &#123;</span><br><span class="line">        courseId: _this.course.id,</span><br><span class="line">        memberId: loginMember.id</span><br><span class="line">      &#125;).then((response)=&gt;&#123;</span><br><span class="line">        let resp = response.data;</span><br><span class="line">        if (resp.success) &#123;</span><br><span class="line">          _this.memberCourse = resp.content;</span><br><span class="line">          Toast.success(&quot;报名成功！&quot;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          Toast.warning(resp.message);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<p><strong>已报名的才可播放收费视频</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.会员报名课程功能开发，已报名的才可播放收费视频</span><br></pre></td></tr></table></figure>

<ul>
<li>修改detail.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 播放视频</span><br><span class="line"> * @param section</span><br><span class="line"> */</span><br><span class="line">play(section) &#123;</span><br><span class="line">  let _this = this;</span><br><span class="line">  if (section.charge === _this.SECTION_CHARGE.CHARGE.key ) &#123;</span><br><span class="line">////////////////////////////////////////////////////////////</span><br><span class="line">    let loginMember = Tool.getLoginMember();</span><br><span class="line">    if (Tool.isEmpty(loginMember)) &#123;</span><br><span class="line">///////////////////////////////////////////////////////////</span><br><span class="line">    Toast.warning(&quot;请先登录&quot;);</span><br><span class="line">    return;</span><br><span class="line">  &#125;else&#123;</span><br><span class="line">//////////////////////////////////////////////////////////</span><br><span class="line">      if (Tool.isEmpty(_this.memberCourse)) &#123;</span><br><span class="line">        Toast.warning(&quot;请先报名&quot;);</span><br><span class="line">        return;</span><br><span class="line">      &#125;</span><br><span class="line">//////////////////////////////////////////////////////////</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  _this.$refs.modalPlayer.playVod(section.vod);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><strong>进入课程详情页面时显示加载报名信息</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.会员报名课程功能开发，加载完课程信后，如果一登陆，则加载报名信息</span><br></pre></td></tr></table></figure>

<ul>
<li><p>现在刷新页面会导致前端报名信息丢失</p>
</li>
<li><p>首先修改detail.vue</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">//////////////////////////////////////////再findCourse中加入</span><br><span class="line">//获取报名信息</span><br><span class="line">_this.getEnroll();</span><br><span class="line">///////////////////////////////////////////写方法</span><br><span class="line">  /**</span><br><span class="line">     * 获取报名</span><br><span class="line">     */</span><br><span class="line">    getEnroll() &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      let loginMember = Tool.getLoginMember();</span><br><span class="line">      if (Tool.isEmpty(loginMember)) &#123;</span><br><span class="line">        console.log(&quot;未登录&quot;);</span><br><span class="line">        return;</span><br><span class="line">      &#125;</span><br><span class="line">      _this.$ajax.post(process.env.VUE_APP_SERVER + &#x27;/business/web/member-course/get-enroll&#x27;, &#123;</span><br><span class="line">        courseId: _this.course.id,</span><br><span class="line">        memberId: loginMember.id</span><br><span class="line">      &#125;).then((response)=&gt;&#123;</span><br><span class="line">        let resp = response.data;</span><br><span class="line">        if (resp.success) &#123;</span><br><span class="line">          _this.memberCourse = resp.content || &#123;&#125;;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<ul>
<li>然后我们修改web的MemberCourseController，增加</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 保存，id有值时更新，无值时新增</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/get-enroll&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseDto <span class="title function_">getEnroll</span><span class="params">(<span class="meta">@RequestBody</span> MemberCourseDto memberCourseDto)</span> &#123;</span><br><span class="line">    <span class="type">ResponseDto</span> <span class="variable">responseDto</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResponseDto</span>();</span><br><span class="line">    memberCourseDto = memberCourseService.getEnroll(memberCourseDto);</span><br><span class="line">    responseDto.setContent(memberCourseDto);</span><br><span class="line">    <span class="keyword">return</span> responseDto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>最后修改MemberCourseService</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取报名信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> MemberCourseDto <span class="title function_">getEnroll</span><span class="params">(MemberCourseDto memberCourseDto)</span> &#123;</span><br><span class="line">    <span class="type">MemberCourse</span> <span class="variable">memberCourse</span> <span class="operator">=</span> <span class="built_in">this</span>.select(memberCourseDto.getMemberId(), memberCourseDto.getCourseId());</span><br><span class="line">    <span class="keyword">return</span> CopyUtil.copy(memberCourse, MemberCourseDto.class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


        </div>

        
            <div class="post-copyright-info">
                <div class="article-copyright-info-container">
    <ul>
        <li>Post title：完整项目之Spring Cloud + Vue 前后端分离4-2</li>
        <li>Post author：Fang</li>
        <li>Create time：2022-03-15 16:43:14</li>
        <li>
            Post link：https://ainianxu.github.io/2022/03/15/完整项目之Spring Cloud + Vue 前后端分离 4-2/
        </li>
        <li>
            Copyright Notice：All articles in this blog are licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> unless stating additionally.
        </li>
    </ul>
</div>

            </div>
        

        
            <ul class="post-tags-box">
                
                    <li class="tag-item">
                        <a href="/tags/%E5%AE%8C%E6%95%B4%E9%A1%B9%E7%9B%AE/">#完整项目</a>&nbsp;
                    </li>
                
            </ul>
        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/2022/03/20/%E5%AE%8C%E6%95%B4%E9%A1%B9%E7%9B%AE%E4%B9%8BSpring%20Cloud%20+%20Vue%20%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%205/"
                        >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">完整项目之Spring Cloud + Vue 前后端分离5</span>
                                <span class="post-nav-item">Prev posts</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/2022/03/07/%E5%AE%8C%E6%95%B4%E9%A1%B9%E7%9B%AE%E4%B9%8BSpring%20Cloud%20+%20Vue%20%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%204-1/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">完整项目之Spring Cloud + Vue 前后端分离4-1</span>
                                <span class="post-nav-item">Next posts</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
            <div class="comment-container">
                <div class="comments-container">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
        <i class="fas fa-comments">&nbsp;Comments</i>
    </div>
    

        
            
    <div class="valine-container">
        <script data-pjax
                src="//cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js"></script>
        <div id="vcomments"></div>
        <script data-pjax>
            function loadValine() {
                new Valine({
                    el: '#vcomments',
                    appId: 'loa9BVbgmyFLwBMHhg1Cycx1-gzGzoHsz',
                    appKey: '47pIz6ewIXRi5251WyfUpQOB',
                    meta: ['nick', 'mail', 'link'],
                    avatar: 'wavatar',
                    enableQQ: true,
                    placeholder: '😜 尽情吐槽吧~',
                    lang: 'en'.toLowerCase()
                });

                function getAuthor(language) {
                    switch (language) {
                        case 'en':
                            return 'Author';
                        case 'zh-CN':
                            return '博主';
                        default:
                            return 'Master';
                    }
                }

                // Add "Author" identify
                const getValineDomTimer = setInterval(() => {
                    const vcards = document.querySelectorAll('#vcomments .vcards .vcard');
                    if (vcards.length > 0) {
                        let author = 'Fang';

                        if (author) {
                            for (let vcard of vcards) {
                                const vnick_dom = vcard.querySelector('.vhead .vnick');
                                const vnick = vnick_dom.innerHTML;
                                if (vnick === author) {
                                    vnick_dom.innerHTML = `${vnick} <span class="author">${getAuthor(KEEP.hexo_config.language)}</span>`
                                }
                            }
                        }
                        clearInterval(getValineDomTimer);
                    } else {
                        clearInterval(getValineDomTimer);
                    }
                }, 2000);
            }

            if ('true') {
                const loadValineTimeout = setTimeout(() => {
                    loadValine();
                    clearTimeout(loadValineTimeout);
                }, 1000);
            } else {
                window.addEventListener('DOMContentLoaded', loadValine);
            }
        </script>
    </div>



        
    
</div>

            </div>
        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2021</span>
              -
            
            2022&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">Fang</a>
        </div>
        
            <script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv">
                        Visitor Count&nbsp;<span id="busuanzi_value_site_uv"></span>&ensp;
                    </span>
                
                
                    <span id="busuanzi_container_site_pv">
                        Totalview&nbsp;<span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            Powered by <a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;|&nbsp;Theme&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.4</a>
        </div>
        
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fas fa-comment"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        
            <li class="tools-item rss flex-center">
                <a class="flex-center"
                   href="/atom.xml"
                   target="_blank"
                >
                    <i class="fas fa-rss"></i>
                </a>
            </li>
        

        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
    </ul>
</div>

    </div>

    
        <aside class="page-aside">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC13%E7%AB%A0-%E7%BD%91%E7%AB%99%E5%BC%80%E5%8F%91"><span class="nav-number">1.</span> <span class="nav-text">第13章 网站开发</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#13-1-%E7%BD%91%E7%AB%99%E6%A8%A1%E5%9D%97%E7%9A%84%E6%90%AD%E5%BB%BA"><span class="nav-number">1.1.</span> <span class="nav-text">13-1 网站模块的搭建</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-2-%E9%9B%86%E6%88%90bootstrap%E5%AE%98%E6%96%B9%E6%A8%A1%E6%9D%BF"><span class="nav-number">1.2.</span> <span class="nav-text">13-2 集成bootstrap官方模板</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-3-%E9%A6%96%E9%A1%B5%E5%BC%80%E5%8F%91-1"><span class="nav-number">1.3.</span> <span class="nav-text">13-3 首页开发-1</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-4-%E9%A6%96%E9%A1%B5%E5%BC%80%E5%8F%91-2"><span class="nav-number">1.4.</span> <span class="nav-text">13-4 首页开发-2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-5-%E8%AF%BE%E7%A8%8B%E5%88%97%E8%A1%A8%E9%A1%B5%E9%9D%A2%E5%BC%80%E5%8F%91"><span class="nav-number">1.5.</span> <span class="nav-text">13-5 课程列表页面开发</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-6-%E5%88%86%E7%B1%BB%E7%AD%9B%E9%80%89%E5%8A%9F%E8%83%BD%E5%BC%80%E5%8F%91"><span class="nav-number">1.6.</span> <span class="nav-text">13-6 分类筛选功能开发</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-7-%E8%AF%BE%E7%A8%8B%E8%AF%A6%E6%83%85%E9%A1%B5%E9%9D%A2%E5%BC%80%E5%8F%91"><span class="nav-number">1.7.</span> <span class="nav-text">13-7 课程详情页面开发</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-8-%E7%AB%A0%E8%8A%82%E6%98%BE%E7%A4%BA%E4%B8%8E%E8%A7%86%E9%A2%91%E6%92%AD%E6%94%BE"><span class="nav-number">1.8.</span> <span class="nav-text">13-8 章节显示与视频播放</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-9-%E5%A2%9E%E5%8A%A0%E4%BC%9A%E5%91%98%E6%B3%A8%E5%86%8C%E5%8A%9F%E8%83%BD"><span class="nav-number">1.9.</span> <span class="nav-text">13-9 增加会员注册功能</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-10-%E5%A2%9E%E5%8A%A0%E7%99%BB%E5%BD%95%E4%B8%8E%E9%80%80%E5%87%BA%E7%99%BB%E5%BD%95%E5%8A%9F%E8%83%BD"><span class="nav-number">1.10.</span> <span class="nav-text">13-10 增加登录与退出登录功能</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-11-%E5%A2%9E%E5%8A%A0%E5%8F%91%E9%80%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81%E5%8A%9F%E8%83%BD"><span class="nav-number">1.11.</span> <span class="nav-text">13-11 增加发送短信验证码功能</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-12-%E5%AE%8C%E5%96%84%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C%E6%A0%A1%E9%AA%8C%E5%8A%9F%E8%83%BD"><span class="nav-number">1.12.</span> <span class="nav-text">13-12 完善登录注册校验功能</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-13-%E5%A2%9E%E5%8A%A0%E7%AB%8B%E5%8D%B3%E6%8A%A5%E5%90%8D%E5%8A%9F%E8%83%BD"><span class="nav-number">1.13.</span> <span class="nav-text">13-13 增加立即报名功能</span></a></li></ol></li></ol>
    </div>
</div>
        </aside>
    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>



<script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/dark-light-toggle.js"></script>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/local-search.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/code-copy.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/lazyload.js"></script>


<div class="post-scripts pjax">
    
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/left-side-toggle.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/libs/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/toc.js"></script>
    
</div>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.4/source/js/libs/pjax.min.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            KEEP.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            KEEP.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            KEEP.refresh();
        });
    });
</script>



</body>
</html>
